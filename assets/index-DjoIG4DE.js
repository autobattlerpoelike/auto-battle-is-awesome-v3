(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function Mm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gc={exports:{}},zl={},Vc={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xs=Symbol.for("react.element"),Pm=Symbol.for("react.portal"),Em=Symbol.for("react.fragment"),_m=Symbol.for("react.strict_mode"),Rm=Symbol.for("react.profiler"),Lm=Symbol.for("react.provider"),Tm=Symbol.for("react.context"),Dm=Symbol.for("react.forward_ref"),Am=Symbol.for("react.suspense"),Im=Symbol.for("react.memo"),$m=Symbol.for("react.lazy"),_o=Symbol.iterator;function zm(e){return e===null||typeof e!="object"?null:(e=_o&&e[_o]||e["@@iterator"],typeof e=="function"?e:null)}var Wc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hc=Object.assign,Yc={};function Ca(e,t,n){this.props=e,this.context=t,this.refs=Yc,this.updater=n||Wc}Ca.prototype.isReactComponent={};Ca.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ca.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xc(){}Xc.prototype=Ca.prototype;function Li(e,t,n){this.props=e,this.context=t,this.refs=Yc,this.updater=n||Wc}var Ti=Li.prototype=new Xc;Ti.constructor=Li;Hc(Ti,Ca.prototype);Ti.isPureReactComponent=!0;var Ro=Array.isArray,Kc=Object.prototype.hasOwnProperty,Di={current:null},Qc={key:!0,ref:!0,__self:!0,__source:!0};function Zc(e,t,n){var a,s={},r=null,i=null;if(t!=null)for(a in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(r=""+t.key),t)Kc.call(t,a)&&!Qc.hasOwnProperty(a)&&(s[a]=t[a]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(e&&e.defaultProps)for(a in c=e.defaultProps,c)s[a]===void 0&&(s[a]=c[a]);return{$$typeof:xs,type:e,key:r,ref:i,props:s,_owner:Di.current}}function Fm(e,t){return{$$typeof:xs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ai(e){return typeof e=="object"&&e!==null&&e.$$typeof===xs}function Bm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Lo=/\/+/g;function ir(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bm(""+e.key):t.toString(36)}function Ws(e,t,n,a,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(r){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case xs:case Pm:i=!0}}if(i)return i=e,s=s(i),e=a===""?"."+ir(i,0):a,Ro(s)?(n="",e!=null&&(n=e.replace(Lo,"$&/")+"/"),Ws(s,t,n,"",function(d){return d})):s!=null&&(Ai(s)&&(s=Fm(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Lo,"$&/")+"/")+e)),t.push(s)),1;if(i=0,a=a===""?".":a+":",Ro(e))for(var c=0;c<e.length;c++){r=e[c];var u=a+ir(r,c);i+=Ws(r,t,n,u,s)}else if(u=zm(e),typeof u=="function")for(e=u.call(e),c=0;!(r=e.next()).done;)r=r.value,u=a+ir(r,c++),i+=Ws(r,t,n,u,s);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function js(e,t,n){if(e==null)return e;var a=[],s=0;return Ws(e,a,"","",function(r){return t.call(n,r,s++)}),a}function qm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ht={current:null},Hs={transition:null},Om={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:Hs,ReactCurrentOwner:Di};function Jc(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:js,forEach:function(e,t,n){js(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return js(e,function(){t++}),t},toArray:function(e){return js(e,function(t){return t})||[]},only:function(e){if(!Ai(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=Ca;be.Fragment=Em;be.Profiler=Rm;be.PureComponent=Li;be.StrictMode=_m;be.Suspense=Am;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Om;be.act=Jc;be.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=Hc({},e.props),s=e.key,r=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,i=Di.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)Kc.call(t,u)&&!Qc.hasOwnProperty(u)&&(a[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)a.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];a.children=c}return{$$typeof:xs,type:e.type,key:s,ref:r,props:a,_owner:i}};be.createContext=function(e){return e={$$typeof:Tm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Lm,_context:e},e.Consumer=e};be.createElement=Zc;be.createFactory=function(e){var t=Zc.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:Dm,render:e}};be.isValidElement=Ai;be.lazy=function(e){return{$$typeof:$m,_payload:{_status:-1,_result:e},_init:qm}};be.memo=function(e,t){return{$$typeof:Im,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=Hs.transition;Hs.transition={};try{e()}finally{Hs.transition=t}};be.unstable_act=Jc;be.useCallback=function(e,t){return ht.current.useCallback(e,t)};be.useContext=function(e){return ht.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return ht.current.useDeferredValue(e)};be.useEffect=function(e,t){return ht.current.useEffect(e,t)};be.useId=function(){return ht.current.useId()};be.useImperativeHandle=function(e,t,n){return ht.current.useImperativeHandle(e,t,n)};be.useInsertionEffect=function(e,t){return ht.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return ht.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return ht.current.useMemo(e,t)};be.useReducer=function(e,t,n){return ht.current.useReducer(e,t,n)};be.useRef=function(e){return ht.current.useRef(e)};be.useState=function(e){return ht.current.useState(e)};be.useSyncExternalStore=function(e,t,n){return ht.current.useSyncExternalStore(e,t,n)};be.useTransition=function(){return ht.current.useTransition()};be.version="18.3.1";Vc.exports=be;var C=Vc.exports;const Wn=Mm(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=C,Gm=Symbol.for("react.element"),Vm=Symbol.for("react.fragment"),Wm=Object.prototype.hasOwnProperty,Hm=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ym={key:!0,ref:!0,__self:!0,__source:!0};function eu(e,t,n){var a,s={},r=null,i=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(i=t.ref);for(a in t)Wm.call(t,a)&&!Ym.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:Gm,type:e,key:r,ref:i,props:s,_owner:Hm.current}}zl.Fragment=Vm;zl.jsx=eu;zl.jsxs=eu;Gc.exports=zl;var l=Gc.exports,tu={exports:{}},Pt={},nu={exports:{}},au={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,U){var J=T.length;T.push(U);e:for(;0<J;){var $=J-1>>>1,re=T[$];if(0<s(re,U))T[$]=U,T[J]=re,J=$;else break e}}function n(T){return T.length===0?null:T[0]}function a(T){if(T.length===0)return null;var U=T[0],J=T.pop();if(J!==U){T[0]=J;e:for(var $=0,re=T.length,ie=re>>>1;$<ie;){var k=2*($+1)-1,z=T[k],he=k+1,H=T[he];if(0>s(z,J))he<re&&0>s(H,z)?(T[$]=H,T[he]=J,$=he):(T[$]=z,T[k]=J,$=k);else if(he<re&&0>s(H,J))T[$]=H,T[he]=J,$=he;else break e}}return U}function s(T,U){var J=T.sortIndex-U.sortIndex;return J!==0?J:T.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var u=[],d=[],f=1,v=null,b=3,m=!1,p=!1,S=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var U=n(d);U!==null;){if(U.callback===null)a(d);else if(U.startTime<=T)a(d),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(d)}}function w(T){if(S=!1,y(T),!p)if(n(u)!==null)p=!0,ce(P);else{var U=n(d);U!==null&&ee(w,U.startTime-T)}}function P(T,U){p=!1,S&&(S=!1,x(M),M=-1),m=!0;var J=b;try{for(y(U),v=n(u);v!==null&&(!(v.expirationTime>U)||T&&!Q());){var $=v.callback;if(typeof $=="function"){v.callback=null,b=v.priorityLevel;var re=$(v.expirationTime<=U);U=e.unstable_now(),typeof re=="function"?v.callback=re:v===n(u)&&a(u),y(U)}else a(u);v=n(u)}if(v!==null)var ie=!0;else{var k=n(d);k!==null&&ee(w,k.startTime-U),ie=!1}return ie}finally{v=null,b=J,m=!1}}var D=!1,O=null,M=-1,j=5,I=-1;function Q(){return!(e.unstable_now()-I<j)}function K(){if(O!==null){var T=e.unstable_now();I=T;var U=!0;try{U=O(!0,T)}finally{U?F():(D=!1,O=null)}}else D=!1}var F;if(typeof h=="function")F=function(){h(K)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=K,F=function(){Z.postMessage(null)}}else F=function(){g(K,0)};function ce(T){O=T,D||(D=!0,F())}function ee(T,U){M=g(function(){T(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,ce(P))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(T){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var J=b;b=U;try{return T()}finally{b=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,U){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var J=b;b=T;try{return U()}finally{b=J}},e.unstable_scheduleCallback=function(T,U,J){var $=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?$+J:$):J=$,T){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=J+re,T={id:f++,callback:U,priorityLevel:T,startTime:J,expirationTime:re,sortIndex:-1},J>$?(T.sortIndex=J,t(d,T),n(u)===null&&T===n(d)&&(S?(x(M),M=-1):S=!0,ee(w,J-$))):(T.sortIndex=re,t(u,T),p||m||(p=!0,ce(P))),T},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(T){var U=b;return function(){var J=b;b=U;try{return T.apply(this,arguments)}finally{b=J}}}})(au);nu.exports=au;var Xm=nu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km=C,Mt=Xm;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var su=new Set,Za={};function Hn(e,t){va(e,t),va(e+"Capture",t)}function va(e,t){for(Za[e]=t,e=0;e<t.length;e++)su.add(t[e])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zr=Object.prototype.hasOwnProperty,Qm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,To={},Do={};function Zm(e){return zr.call(Do,e)?!0:zr.call(To,e)?!1:Qm.test(e)?Do[e]=!0:(To[e]=!0,!1)}function Jm(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ef(e,t,n,a){if(t===null||typeof t>"u"||Jm(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,n,a,s,r,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rt[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rt[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rt[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rt[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rt[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rt[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rt[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rt[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rt[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ii=/[\-:]([a-z])/g;function $i(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ii,$i);rt[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ii,$i);rt[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ii,$i);rt[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rt[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});rt.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rt[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function zi(e,t,n,a){var s=rt.hasOwnProperty(t)?rt[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ef(t,n,s,a)&&(n=null),a||s===null?Zm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,a=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var on=Km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ns=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),Fi=Symbol.for("react.strict_mode"),Fr=Symbol.for("react.profiler"),lu=Symbol.for("react.provider"),ru=Symbol.for("react.context"),Bi=Symbol.for("react.forward_ref"),Br=Symbol.for("react.suspense"),qr=Symbol.for("react.suspense_list"),qi=Symbol.for("react.memo"),mn=Symbol.for("react.lazy"),iu=Symbol.for("react.offscreen"),Ao=Symbol.iterator;function Ea(e){return e===null||typeof e!="object"?null:(e=Ao&&e[Ao]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,or;function za(e){if(or===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);or=t&&t[1]||""}return`
`+or+e}var cr=!1;function ur(e,t){if(!e||cr)return"";cr=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),r=a.stack.split(`
`),i=s.length-1,c=r.length-1;1<=i&&0<=c&&s[i]!==r[c];)c--;for(;1<=i&&0<=c;i--,c--)if(s[i]!==r[c]){if(i!==1||c!==1)do if(i--,c--,0>c||s[i]!==r[c]){var u=`
`+s[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=c);break}}}finally{cr=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?za(e):""}function tf(e){switch(e.tag){case 5:return za(e.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return e=ur(e.type,!1),e;case 11:return e=ur(e.type.render,!1),e;case 1:return e=ur(e.type,!0),e;default:return""}}function Or(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ea:return"Fragment";case Jn:return"Portal";case Fr:return"Profiler";case Fi:return"StrictMode";case Br:return"Suspense";case qr:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ru:return(e.displayName||"Context")+".Consumer";case lu:return(e._context.displayName||"Context")+".Provider";case Bi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qi:return t=e.displayName||null,t!==null?t:Or(e.type)||"Memo";case mn:t=e._payload,e=e._init;try{return Or(e(t))}catch{}}return null}function nf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Or(t);case 8:return t===Fi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ou(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function af(e){var t=ou(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){a=""+i,r.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cs(e){e._valueTracker||(e._valueTracker=af(e))}function cu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=ou(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function il(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ur(e,t){var n=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Io(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=Mn(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uu(e,t){t=t.checked,t!=null&&zi(e,"checked",t,!1)}function Gr(e,t){uu(e,t);var n=Mn(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vr(e,t.type,n):t.hasOwnProperty("defaultValue")&&Vr(e,t.type,Mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $o(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Vr(e,t,n){(t!=="number"||il(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fa=Array.isArray;function da(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Mn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Wr(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zo(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Fa(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mn(n)}}function du(e,t){var n=Mn(t.value),a=Mn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function Fo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ms,fu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ms=Ms||document.createElement("div"),Ms.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ms.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ja(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sf=["Webkit","ms","Moz","O"];Object.keys(Ua).forEach(function(e){sf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ua[t]=Ua[e]})});function pu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ua.hasOwnProperty(e)&&Ua[e]?(""+t).trim():t+"px"}function hu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,s=pu(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,s):e[n]=s}}var lf=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yr(e,t){if(t){if(lf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Xr(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kr=null;function Oi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qr=null,ma=null,fa=null;function Bo(e){if(e=bs(e)){if(typeof Qr!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Ul(t),Qr(e.stateNode,e.type,t))}}function gu(e){ma?fa?fa.push(e):fa=[e]:ma=e}function xu(){if(ma){var e=ma,t=fa;if(fa=ma=null,Bo(e),t)for(e=0;e<t.length;e++)Bo(t[e])}}function yu(e,t){return e(t)}function vu(){}var dr=!1;function bu(e,t,n){if(dr)return e(t,n);dr=!0;try{return yu(e,t,n)}finally{dr=!1,(ma!==null||fa!==null)&&(vu(),xu())}}function es(e,t){var n=e.stateNode;if(n===null)return null;var a=Ul(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var Zr=!1;if(an)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{Zr=!1}function rf(e,t,n,a,s,r,i,c,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var Ga=!1,ol=null,cl=!1,Jr=null,of={onError:function(e){Ga=!0,ol=e}};function cf(e,t,n,a,s,r,i,c,u){Ga=!1,ol=null,rf.apply(of,arguments)}function uf(e,t,n,a,s,r,i,c,u){if(cf.apply(this,arguments),Ga){if(Ga){var d=ol;Ga=!1,ol=null}else throw Error(q(198));cl||(cl=!0,Jr=d)}}function Yn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qo(e){if(Yn(e)!==e)throw Error(q(188))}function df(e){var t=e.alternate;if(!t){if(t=Yn(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(a=s.return,a!==null){n=a;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return qo(s),e;if(r===a)return qo(s),t;r=r.sibling}throw Error(q(188))}if(n.return!==a.return)n=s,a=r;else{for(var i=!1,c=s.child;c;){if(c===n){i=!0,n=s,a=r;break}if(c===a){i=!0,a=s,n=r;break}c=c.sibling}if(!i){for(c=r.child;c;){if(c===n){i=!0,n=r,a=s;break}if(c===a){i=!0,a=r,n=s;break}c=c.sibling}if(!i)throw Error(q(189))}}if(n.alternate!==a)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function Su(e){return e=df(e),e!==null?ku(e):null}function ku(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ku(e);if(t!==null)return t;e=e.sibling}return null}var ju=Mt.unstable_scheduleCallback,Oo=Mt.unstable_cancelCallback,mf=Mt.unstable_shouldYield,ff=Mt.unstable_requestPaint,Ke=Mt.unstable_now,pf=Mt.unstable_getCurrentPriorityLevel,Ui=Mt.unstable_ImmediatePriority,Nu=Mt.unstable_UserBlockingPriority,ul=Mt.unstable_NormalPriority,hf=Mt.unstable_LowPriority,Cu=Mt.unstable_IdlePriority,Fl=null,Kt=null;function gf(e){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Fl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:vf,xf=Math.log,yf=Math.LN2;function vf(e){return e>>>=0,e===0?32:31-(xf(e)/yf|0)|0}var Ps=64,Es=4194304;function Ba(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dl(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,s=e.suspendedLanes,r=e.pingedLanes,i=n&268435455;if(i!==0){var c=i&~s;c!==0?a=Ba(c):(r&=i,r!==0&&(a=Ba(r)))}else i=n&~s,i!==0?a=Ba(i):r!==0&&(a=Ba(r));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-Ot(t),s=1<<n,a|=e[n],t&=~s;return a}function bf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wf(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-Ot(r),c=1<<i,u=s[i];u===-1?(!(c&n)||c&a)&&(s[i]=bf(c,t)):u<=t&&(e.expiredLanes|=c),r&=~c}}function ei(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mu(){var e=Ps;return Ps<<=1,!(Ps&4194240)&&(Ps=64),e}function mr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ys(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ot(t),e[t]=n}function Sf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ot(n),r=1<<s;t[s]=0,a[s]=-1,e[s]=-1,n&=~r}}function Gi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Ot(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}var Pe=0;function Pu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Eu,Vi,_u,Ru,Lu,ti=!1,_s=[],vn=null,bn=null,wn=null,ts=new Map,ns=new Map,hn=[],kf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uo(e,t){switch(e){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(t.pointerId)}}function Ra(e,t,n,a,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[s]},t!==null&&(t=bs(t),t!==null&&Vi(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function jf(e,t,n,a,s){switch(t){case"focusin":return vn=Ra(vn,e,t,n,a,s),!0;case"dragenter":return bn=Ra(bn,e,t,n,a,s),!0;case"mouseover":return wn=Ra(wn,e,t,n,a,s),!0;case"pointerover":var r=s.pointerId;return ts.set(r,Ra(ts.get(r)||null,e,t,n,a,s)),!0;case"gotpointercapture":return r=s.pointerId,ns.set(r,Ra(ns.get(r)||null,e,t,n,a,s)),!0}return!1}function Tu(e){var t=Dn(e.target);if(t!==null){var n=Yn(t);if(n!==null){if(t=n.tag,t===13){if(t=wu(n),t!==null){e.blockedOn=t,Lu(e.priority,function(){_u(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ys(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ni(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Kr=a,n.target.dispatchEvent(a),Kr=null}else return t=bs(n),t!==null&&Vi(t),e.blockedOn=n,!1;t.shift()}return!0}function Go(e,t,n){Ys(e)&&n.delete(t)}function Nf(){ti=!1,vn!==null&&Ys(vn)&&(vn=null),bn!==null&&Ys(bn)&&(bn=null),wn!==null&&Ys(wn)&&(wn=null),ts.forEach(Go),ns.forEach(Go)}function La(e,t){e.blockedOn===t&&(e.blockedOn=null,ti||(ti=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,Nf)))}function as(e){function t(s){return La(s,e)}if(0<_s.length){La(_s[0],e);for(var n=1;n<_s.length;n++){var a=_s[n];a.blockedOn===e&&(a.blockedOn=null)}}for(vn!==null&&La(vn,e),bn!==null&&La(bn,e),wn!==null&&La(wn,e),ts.forEach(t),ns.forEach(t),n=0;n<hn.length;n++)a=hn[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<hn.length&&(n=hn[0],n.blockedOn===null);)Tu(n),n.blockedOn===null&&hn.shift()}var pa=on.ReactCurrentBatchConfig,ml=!0;function Cf(e,t,n,a){var s=Pe,r=pa.transition;pa.transition=null;try{Pe=1,Wi(e,t,n,a)}finally{Pe=s,pa.transition=r}}function Mf(e,t,n,a){var s=Pe,r=pa.transition;pa.transition=null;try{Pe=4,Wi(e,t,n,a)}finally{Pe=s,pa.transition=r}}function Wi(e,t,n,a){if(ml){var s=ni(e,t,n,a);if(s===null)Sr(e,t,a,fl,n),Uo(e,a);else if(jf(s,e,t,n,a))a.stopPropagation();else if(Uo(e,a),t&4&&-1<kf.indexOf(e)){for(;s!==null;){var r=bs(s);if(r!==null&&Eu(r),r=ni(e,t,n,a),r===null&&Sr(e,t,a,fl,n),r===s)break;s=r}s!==null&&a.stopPropagation()}else Sr(e,t,a,null,n)}}var fl=null;function ni(e,t,n,a){if(fl=null,e=Oi(a),e=Dn(e),e!==null)if(t=Yn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fl=e,null}function Du(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pf()){case Ui:return 1;case Nu:return 4;case ul:case hf:return 16;case Cu:return 536870912;default:return 16}default:return 16}}var xn=null,Hi=null,Xs=null;function Au(){if(Xs)return Xs;var e,t=Hi,n=t.length,a,s="value"in xn?xn.value:xn.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(a=1;a<=i&&t[n-a]===s[r-a];a++);return Xs=s.slice(e,1<a?1-a:void 0)}function Ks(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rs(){return!0}function Vo(){return!1}function Et(e){function t(n,a,s,r,i){this._reactName=n,this._targetInst=s,this.type=a,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(r):r[c]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Rs:Vo,this.isPropagationStopped=Vo,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),t}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yi=Et(Ma),vs=We({},Ma,{view:0,detail:0}),Pf=Et(vs),fr,pr,Ta,Bl=We({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ta&&(Ta&&e.type==="mousemove"?(fr=e.screenX-Ta.screenX,pr=e.screenY-Ta.screenY):pr=fr=0,Ta=e),fr)},movementY:function(e){return"movementY"in e?e.movementY:pr}}),Wo=Et(Bl),Ef=We({},Bl,{dataTransfer:0}),_f=Et(Ef),Rf=We({},vs,{relatedTarget:0}),hr=Et(Rf),Lf=We({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Tf=Et(Lf),Df=We({},Ma,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Af=Et(Df),If=We({},Ma,{data:0}),Ho=Et(If),$f={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ff={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ff[e])?!!t[e]:!1}function Xi(){return Bf}var qf=We({},vs,{key:function(e){if(e.key){var t=$f[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ks(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(e){return e.type==="keypress"?Ks(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ks(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Of=Et(qf),Uf=We({},Bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yo=Et(Uf),Gf=We({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),Vf=Et(Gf),Wf=We({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hf=Et(Wf),Yf=We({},Bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xf=Et(Yf),Kf=[9,13,27,32],Ki=an&&"CompositionEvent"in window,Va=null;an&&"documentMode"in document&&(Va=document.documentMode);var Qf=an&&"TextEvent"in window&&!Va,Iu=an&&(!Ki||Va&&8<Va&&11>=Va),Xo=" ",Ko=!1;function $u(e,t){switch(e){case"keyup":return Kf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ta=!1;function Zf(e,t){switch(e){case"compositionend":return zu(t);case"keypress":return t.which!==32?null:(Ko=!0,Xo);case"textInput":return e=t.data,e===Xo&&Ko?null:e;default:return null}}function Jf(e,t){if(ta)return e==="compositionend"||!Ki&&$u(e,t)?(e=Au(),Xs=Hi=xn=null,ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Iu&&t.locale!=="ko"?null:t.data;default:return null}}var e0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!e0[e.type]:t==="textarea"}function Fu(e,t,n,a){gu(a),t=pl(t,"onChange"),0<t.length&&(n=new Yi("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Wa=null,ss=null;function t0(e){Ku(e,0)}function ql(e){var t=sa(e);if(cu(t))return e}function n0(e,t){if(e==="change")return t}var Bu=!1;if(an){var gr;if(an){var xr="oninput"in document;if(!xr){var Zo=document.createElement("div");Zo.setAttribute("oninput","return;"),xr=typeof Zo.oninput=="function"}gr=xr}else gr=!1;Bu=gr&&(!document.documentMode||9<document.documentMode)}function Jo(){Wa&&(Wa.detachEvent("onpropertychange",qu),ss=Wa=null)}function qu(e){if(e.propertyName==="value"&&ql(ss)){var t=[];Fu(t,ss,e,Oi(e)),bu(t0,t)}}function a0(e,t,n){e==="focusin"?(Jo(),Wa=t,ss=n,Wa.attachEvent("onpropertychange",qu)):e==="focusout"&&Jo()}function s0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ql(ss)}function l0(e,t){if(e==="click")return ql(t)}function r0(e,t){if(e==="input"||e==="change")return ql(t)}function i0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:i0;function ls(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!zr.call(t,s)||!Gt(e[s],t[s]))return!1}return!0}function ec(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tc(e,t){var n=ec(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ec(n)}}function Ou(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ou(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uu(){for(var e=window,t=il();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=il(e.document)}return t}function Qi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function o0(e){var t=Uu(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ou(n.ownerDocument.documentElement,n)){if(a!==null&&Qi(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(a.start,s);a=a.end===void 0?r:Math.min(a.end,s),!e.extend&&r>a&&(s=a,a=r,r=s),s=tc(n,r);var i=tc(n,a);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var c0=an&&"documentMode"in document&&11>=document.documentMode,na=null,ai=null,Ha=null,si=!1;function nc(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;si||na==null||na!==il(a)||(a=na,"selectionStart"in a&&Qi(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ha&&ls(Ha,a)||(Ha=a,a=pl(ai,"onSelect"),0<a.length&&(t=new Yi("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=na)))}function Ls(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var aa={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionend:Ls("Transition","TransitionEnd")},yr={},Gu={};an&&(Gu=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function Ol(e){if(yr[e])return yr[e];if(!aa[e])return e;var t=aa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gu)return yr[e]=t[n];return e}var Vu=Ol("animationend"),Wu=Ol("animationiteration"),Hu=Ol("animationstart"),Yu=Ol("transitionend"),Xu=new Map,ac="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(e,t){Xu.set(e,t),Hn(t,[e])}for(var vr=0;vr<ac.length;vr++){var br=ac[vr],u0=br.toLowerCase(),d0=br[0].toUpperCase()+br.slice(1);En(u0,"on"+d0)}En(Vu,"onAnimationEnd");En(Wu,"onAnimationIteration");En(Hu,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(Yu,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m0=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function sc(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,uf(a,t,void 0,e),e.currentTarget=null}function Ku(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var i=a.length-1;0<=i;i--){var c=a[i],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==r&&s.isPropagationStopped())break e;sc(s,c,d),r=u}else for(i=0;i<a.length;i++){if(c=a[i],u=c.instance,d=c.currentTarget,c=c.listener,u!==r&&s.isPropagationStopped())break e;sc(s,c,d),r=u}}}if(cl)throw e=Jr,cl=!1,Jr=null,e}function Fe(e,t){var n=t[ci];n===void 0&&(n=t[ci]=new Set);var a=e+"__bubble";n.has(a)||(Qu(t,e,2,!1),n.add(a))}function wr(e,t,n){var a=0;t&&(a|=4),Qu(n,e,a,t)}var Ts="_reactListening"+Math.random().toString(36).slice(2);function rs(e){if(!e[Ts]){e[Ts]=!0,su.forEach(function(n){n!=="selectionchange"&&(m0.has(n)||wr(n,!1,e),wr(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ts]||(t[Ts]=!0,wr("selectionchange",!1,t))}}function Qu(e,t,n,a){switch(Du(t)){case 1:var s=Cf;break;case 4:s=Mf;break;default:s=Wi}n=s.bind(null,t,n,e),s=void 0,!Zr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Sr(e,t,n,a,s){var r=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var c=a.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(i===4)for(i=a.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;c!==null;){if(i=Dn(c),i===null)return;if(u=i.tag,u===5||u===6){a=r=i;continue e}c=c.parentNode}}a=a.return}bu(function(){var d=r,f=Oi(n),v=[];e:{var b=Xu.get(e);if(b!==void 0){var m=Yi,p=e;switch(e){case"keypress":if(Ks(n)===0)break e;case"keydown":case"keyup":m=Of;break;case"focusin":p="focus",m=hr;break;case"focusout":p="blur",m=hr;break;case"beforeblur":case"afterblur":m=hr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=_f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Vf;break;case Vu:case Wu:case Hu:m=Tf;break;case Yu:m=Hf;break;case"scroll":m=Pf;break;case"wheel":m=Xf;break;case"copy":case"cut":case"paste":m=Af;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Yo}var S=(t&4)!==0,g=!S&&e==="scroll",x=S?b!==null?b+"Capture":null:b;S=[];for(var h=d,y;h!==null;){y=h;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,x!==null&&(w=es(h,x),w!=null&&S.push(is(h,w,y)))),g)break;h=h.return}0<S.length&&(b=new m(b,p,null,n,f),v.push({event:b,listeners:S}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",b&&n!==Kr&&(p=n.relatedTarget||n.fromElement)&&(Dn(p)||p[sn]))break e;if((m||b)&&(b=f.window===f?f:(b=f.ownerDocument)?b.defaultView||b.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=d,p=p?Dn(p):null,p!==null&&(g=Yn(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(S=Wo,w="onMouseLeave",x="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(S=Yo,w="onPointerLeave",x="onPointerEnter",h="pointer"),g=m==null?b:sa(m),y=p==null?b:sa(p),b=new S(w,h+"leave",m,n,f),b.target=g,b.relatedTarget=y,w=null,Dn(f)===d&&(S=new S(x,h+"enter",p,n,f),S.target=y,S.relatedTarget=g,w=S),g=w,m&&p)t:{for(S=m,x=p,h=0,y=S;y;y=Xn(y))h++;for(y=0,w=x;w;w=Xn(w))y++;for(;0<h-y;)S=Xn(S),h--;for(;0<y-h;)x=Xn(x),y--;for(;h--;){if(S===x||x!==null&&S===x.alternate)break t;S=Xn(S),x=Xn(x)}S=null}else S=null;m!==null&&lc(v,b,m,S,!1),p!==null&&g!==null&&lc(v,g,p,S,!0)}}e:{if(b=d?sa(d):window,m=b.nodeName&&b.nodeName.toLowerCase(),m==="select"||m==="input"&&b.type==="file")var P=n0;else if(Qo(b))if(Bu)P=r0;else{P=s0;var D=a0}else(m=b.nodeName)&&m.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(P=l0);if(P&&(P=P(e,d))){Fu(v,P,n,f);break e}D&&D(e,b,d),e==="focusout"&&(D=b._wrapperState)&&D.controlled&&b.type==="number"&&Vr(b,"number",b.value)}switch(D=d?sa(d):window,e){case"focusin":(Qo(D)||D.contentEditable==="true")&&(na=D,ai=d,Ha=null);break;case"focusout":Ha=ai=na=null;break;case"mousedown":si=!0;break;case"contextmenu":case"mouseup":case"dragend":si=!1,nc(v,n,f);break;case"selectionchange":if(c0)break;case"keydown":case"keyup":nc(v,n,f)}var O;if(Ki)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ta?$u(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Iu&&n.locale!=="ko"&&(ta||M!=="onCompositionStart"?M==="onCompositionEnd"&&ta&&(O=Au()):(xn=f,Hi="value"in xn?xn.value:xn.textContent,ta=!0)),D=pl(d,M),0<D.length&&(M=new Ho(M,e,null,n,f),v.push({event:M,listeners:D}),O?M.data=O:(O=zu(n),O!==null&&(M.data=O)))),(O=Qf?Zf(e,n):Jf(e,n))&&(d=pl(d,"onBeforeInput"),0<d.length&&(f=new Ho("onBeforeInput","beforeinput",null,n,f),v.push({event:f,listeners:d}),f.data=O))}Ku(v,t)})}function is(e,t,n){return{instance:e,listener:t,currentTarget:n}}function pl(e,t){for(var n=t+"Capture",a=[];e!==null;){var s=e,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=es(e,n),r!=null&&a.unshift(is(e,r,s)),r=es(e,t),r!=null&&a.push(is(e,r,s))),e=e.return}return a}function Xn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lc(e,t,n,a,s){for(var r=t._reactName,i=[];n!==null&&n!==a;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===a)break;c.tag===5&&d!==null&&(c=d,s?(u=es(n,r),u!=null&&i.unshift(is(n,u,c))):s||(u=es(n,r),u!=null&&i.push(is(n,u,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var f0=/\r\n?/g,p0=/\u0000|\uFFFD/g;function rc(e){return(typeof e=="string"?e:""+e).replace(f0,`
`).replace(p0,"")}function Ds(e,t,n){if(t=rc(t),rc(e)!==t&&n)throw Error(q(425))}function hl(){}var li=null,ri=null;function ii(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oi=typeof setTimeout=="function"?setTimeout:void 0,h0=typeof clearTimeout=="function"?clearTimeout:void 0,ic=typeof Promise=="function"?Promise:void 0,g0=typeof queueMicrotask=="function"?queueMicrotask:typeof ic<"u"?function(e){return ic.resolve(null).then(e).catch(x0)}:oi;function x0(e){setTimeout(function(){throw e})}function kr(e,t){var n=t,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(a===0){e.removeChild(s),as(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=s}while(n);as(t)}function Sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function oc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Pa,os="__reactProps$"+Pa,sn="__reactContainer$"+Pa,ci="__reactEvents$"+Pa,y0="__reactListeners$"+Pa,v0="__reactHandles$"+Pa;function Dn(e){var t=e[Ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sn]||n[Ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=oc(e);e!==null;){if(n=e[Ht])return n;e=oc(e)}return t}e=n,n=e.parentNode}return null}function bs(e){return e=e[Ht]||e[sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Ul(e){return e[os]||null}var ui=[],la=-1;function _n(e){return{current:e}}function Be(e){0>la||(e.current=ui[la],ui[la]=null,la--)}function $e(e,t){la++,ui[la]=e.current,e.current=t}var Pn={},mt=_n(Pn),bt=_n(!1),Bn=Pn;function ba(e,t){var n=e.type.contextTypes;if(!n)return Pn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=t[r];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function wt(e){return e=e.childContextTypes,e!=null}function gl(){Be(bt),Be(mt)}function cc(e,t,n){if(mt.current!==Pn)throw Error(q(168));$e(mt,t),$e(bt,n)}function Zu(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(q(108,nf(e)||"Unknown",s));return We({},n,a)}function xl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pn,Bn=mt.current,$e(mt,e),$e(bt,bt.current),!0}function uc(e,t,n){var a=e.stateNode;if(!a)throw Error(q(169));n?(e=Zu(e,t,Bn),a.__reactInternalMemoizedMergedChildContext=e,Be(bt),Be(mt),$e(mt,e)):Be(bt),$e(bt,n)}var Jt=null,Gl=!1,jr=!1;function Ju(e){Jt===null?Jt=[e]:Jt.push(e)}function b0(e){Gl=!0,Ju(e)}function Rn(){if(!jr&&Jt!==null){jr=!0;var e=0,t=Pe;try{var n=Jt;for(Pe=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}Jt=null,Gl=!1}catch(s){throw Jt!==null&&(Jt=Jt.slice(e+1)),ju(Ui,Rn),s}finally{Pe=t,jr=!1}}return null}var ra=[],ia=0,yl=null,vl=0,Lt=[],Tt=0,qn=null,en=1,tn="";function Ln(e,t){ra[ia++]=vl,ra[ia++]=yl,yl=e,vl=t}function ed(e,t,n){Lt[Tt++]=en,Lt[Tt++]=tn,Lt[Tt++]=qn,qn=e;var a=en;e=tn;var s=32-Ot(a)-1;a&=~(1<<s),n+=1;var r=32-Ot(t)+s;if(30<r){var i=s-s%5;r=(a&(1<<i)-1).toString(32),a>>=i,s-=i,en=1<<32-Ot(t)+s|n<<s|a,tn=r+e}else en=1<<r|n<<s|a,tn=e}function Zi(e){e.return!==null&&(Ln(e,1),ed(e,1,0))}function Ji(e){for(;e===yl;)yl=ra[--ia],ra[ia]=null,vl=ra[--ia],ra[ia]=null;for(;e===qn;)qn=Lt[--Tt],Lt[Tt]=null,tn=Lt[--Tt],Lt[Tt]=null,en=Lt[--Tt],Lt[Tt]=null}var Ct=null,Nt=null,Oe=!1,qt=null;function td(e,t){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function dc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ct=e,Nt=Sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ct=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qn!==null?{id:en,overflow:tn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ct=e,Nt=null,!0):!1;default:return!1}}function di(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mi(e){if(Oe){var t=Nt;if(t){var n=t;if(!dc(e,t)){if(di(e))throw Error(q(418));t=Sn(n.nextSibling);var a=Ct;t&&dc(e,t)?td(a,n):(e.flags=e.flags&-4097|2,Oe=!1,Ct=e)}}else{if(di(e))throw Error(q(418));e.flags=e.flags&-4097|2,Oe=!1,Ct=e}}}function mc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function As(e){if(e!==Ct)return!1;if(!Oe)return mc(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ii(e.type,e.memoizedProps)),t&&(t=Nt)){if(di(e))throw nd(),Error(q(418));for(;t;)td(e,t),t=Sn(t.nextSibling)}if(mc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nt=Sn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=Ct?Sn(e.stateNode.nextSibling):null;return!0}function nd(){for(var e=Nt;e;)e=Sn(e.nextSibling)}function wa(){Nt=Ct=null,Oe=!1}function eo(e){qt===null?qt=[e]:qt.push(e)}var w0=on.ReactCurrentBatchConfig;function Da(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var a=n.stateNode}if(!a)throw Error(q(147,e));var s=a,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(i){var c=s.refs;i===null?delete c[r]:c[r]=i},t._stringRef=r,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function Is(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fc(e){var t=e._init;return t(e._payload)}function ad(e){function t(x,h){if(e){var y=x.deletions;y===null?(x.deletions=[h],x.flags|=16):y.push(h)}}function n(x,h){if(!e)return null;for(;h!==null;)t(x,h),h=h.sibling;return null}function a(x,h){for(x=new Map;h!==null;)h.key!==null?x.set(h.key,h):x.set(h.index,h),h=h.sibling;return x}function s(x,h){return x=Cn(x,h),x.index=0,x.sibling=null,x}function r(x,h,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<h?(x.flags|=2,h):y):(x.flags|=2,h)):(x.flags|=1048576,h)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,h,y,w){return h===null||h.tag!==6?(h=Rr(y,x.mode,w),h.return=x,h):(h=s(h,y),h.return=x,h)}function u(x,h,y,w){var P=y.type;return P===ea?f(x,h,y.props.children,w,y.key):h!==null&&(h.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===mn&&fc(P)===h.type)?(w=s(h,y.props),w.ref=Da(x,h,y),w.return=x,w):(w=al(y.type,y.key,y.props,null,x.mode,w),w.ref=Da(x,h,y),w.return=x,w)}function d(x,h,y,w){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=Lr(y,x.mode,w),h.return=x,h):(h=s(h,y.children||[]),h.return=x,h)}function f(x,h,y,w,P){return h===null||h.tag!==7?(h=Fn(y,x.mode,w,P),h.return=x,h):(h=s(h,y),h.return=x,h)}function v(x,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Rr(""+h,x.mode,y),h.return=x,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ns:return y=al(h.type,h.key,h.props,null,x.mode,y),y.ref=Da(x,null,h),y.return=x,y;case Jn:return h=Lr(h,x.mode,y),h.return=x,h;case mn:var w=h._init;return v(x,w(h._payload),y)}if(Fa(h)||Ea(h))return h=Fn(h,x.mode,y,null),h.return=x,h;Is(x,h)}return null}function b(x,h,y,w){var P=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:c(x,h,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ns:return y.key===P?u(x,h,y,w):null;case Jn:return y.key===P?d(x,h,y,w):null;case mn:return P=y._init,b(x,h,P(y._payload),w)}if(Fa(y)||Ea(y))return P!==null?null:f(x,h,y,w,null);Is(x,y)}return null}function m(x,h,y,w,P){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(y)||null,c(h,x,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ns:return x=x.get(w.key===null?y:w.key)||null,u(h,x,w,P);case Jn:return x=x.get(w.key===null?y:w.key)||null,d(h,x,w,P);case mn:var D=w._init;return m(x,h,y,D(w._payload),P)}if(Fa(w)||Ea(w))return x=x.get(y)||null,f(h,x,w,P,null);Is(h,w)}return null}function p(x,h,y,w){for(var P=null,D=null,O=h,M=h=0,j=null;O!==null&&M<y.length;M++){O.index>M?(j=O,O=null):j=O.sibling;var I=b(x,O,y[M],w);if(I===null){O===null&&(O=j);break}e&&O&&I.alternate===null&&t(x,O),h=r(I,h,M),D===null?P=I:D.sibling=I,D=I,O=j}if(M===y.length)return n(x,O),Oe&&Ln(x,M),P;if(O===null){for(;M<y.length;M++)O=v(x,y[M],w),O!==null&&(h=r(O,h,M),D===null?P=O:D.sibling=O,D=O);return Oe&&Ln(x,M),P}for(O=a(x,O);M<y.length;M++)j=m(O,x,M,y[M],w),j!==null&&(e&&j.alternate!==null&&O.delete(j.key===null?M:j.key),h=r(j,h,M),D===null?P=j:D.sibling=j,D=j);return e&&O.forEach(function(Q){return t(x,Q)}),Oe&&Ln(x,M),P}function S(x,h,y,w){var P=Ea(y);if(typeof P!="function")throw Error(q(150));if(y=P.call(y),y==null)throw Error(q(151));for(var D=P=null,O=h,M=h=0,j=null,I=y.next();O!==null&&!I.done;M++,I=y.next()){O.index>M?(j=O,O=null):j=O.sibling;var Q=b(x,O,I.value,w);if(Q===null){O===null&&(O=j);break}e&&O&&Q.alternate===null&&t(x,O),h=r(Q,h,M),D===null?P=Q:D.sibling=Q,D=Q,O=j}if(I.done)return n(x,O),Oe&&Ln(x,M),P;if(O===null){for(;!I.done;M++,I=y.next())I=v(x,I.value,w),I!==null&&(h=r(I,h,M),D===null?P=I:D.sibling=I,D=I);return Oe&&Ln(x,M),P}for(O=a(x,O);!I.done;M++,I=y.next())I=m(O,x,M,I.value,w),I!==null&&(e&&I.alternate!==null&&O.delete(I.key===null?M:I.key),h=r(I,h,M),D===null?P=I:D.sibling=I,D=I);return e&&O.forEach(function(K){return t(x,K)}),Oe&&Ln(x,M),P}function g(x,h,y,w){if(typeof y=="object"&&y!==null&&y.type===ea&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ns:e:{for(var P=y.key,D=h;D!==null;){if(D.key===P){if(P=y.type,P===ea){if(D.tag===7){n(x,D.sibling),h=s(D,y.props.children),h.return=x,x=h;break e}}else if(D.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===mn&&fc(P)===D.type){n(x,D.sibling),h=s(D,y.props),h.ref=Da(x,D,y),h.return=x,x=h;break e}n(x,D);break}else t(x,D);D=D.sibling}y.type===ea?(h=Fn(y.props.children,x.mode,w,y.key),h.return=x,x=h):(w=al(y.type,y.key,y.props,null,x.mode,w),w.ref=Da(x,h,y),w.return=x,x=w)}return i(x);case Jn:e:{for(D=y.key;h!==null;){if(h.key===D)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(x,h.sibling),h=s(h,y.children||[]),h.return=x,x=h;break e}else{n(x,h);break}else t(x,h);h=h.sibling}h=Lr(y,x.mode,w),h.return=x,x=h}return i(x);case mn:return D=y._init,g(x,h,D(y._payload),w)}if(Fa(y))return p(x,h,y,w);if(Ea(y))return S(x,h,y,w);Is(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(x,h.sibling),h=s(h,y),h.return=x,x=h):(n(x,h),h=Rr(y,x.mode,w),h.return=x,x=h),i(x)):n(x,h)}return g}var Sa=ad(!0),sd=ad(!1),bl=_n(null),wl=null,oa=null,to=null;function no(){to=oa=wl=null}function ao(e){var t=bl.current;Be(bl),e._currentValue=t}function fi(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function ha(e,t){wl=e,to=oa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vt=!0),e.firstContext=null)}function It(e){var t=e._currentValue;if(to!==e)if(e={context:e,memoizedValue:t,next:null},oa===null){if(wl===null)throw Error(q(308));oa=e,wl.dependencies={lanes:0,firstContext:e}}else oa=oa.next=e;return t}var An=null;function so(e){An===null?An=[e]:An.push(e)}function ld(e,t,n,a){var s=t.interleaved;return s===null?(n.next=n,so(t)):(n.next=s.next,s.next=n),t.interleaved=n,ln(e,a)}function ln(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fn=!1;function lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kn(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,ke&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,ln(e,n)}return s=a.interleaved,s===null?(t.next=t,so(a)):(t.next=s.next,s.next=t),a.interleaved=t,ln(e,n)}function Qs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Gi(e,n)}}function pc(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=i:r=r.next=i,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sl(e,t,n,a){var s=e.updateQueue;fn=!1;var r=s.firstBaseUpdate,i=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,i===null?r=d:i.next=d,i=u;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==i&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(r!==null){var v=s.baseState;i=0,f=d=u=null,c=r;do{var b=c.lane,m=c.eventTime;if((a&b)===b){f!==null&&(f=f.next={eventTime:m,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var p=e,S=c;switch(b=t,m=n,S.tag){case 1:if(p=S.payload,typeof p=="function"){v=p.call(m,v,b);break e}v=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=S.payload,b=typeof p=="function"?p.call(m,v,b):p,b==null)break e;v=We({},v,b);break e;case 2:fn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,b=s.effects,b===null?s.effects=[c]:b.push(c))}else m={eventTime:m,lane:b,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=m,u=v):f=f.next=m,i|=b;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;b=c,c=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(f===null&&(u=v),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);Un|=i,e.lanes=i,e.memoizedState=v}}function hc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=n,typeof s!="function")throw Error(q(191,s));s.call(a)}}}var ws={},Qt=_n(ws),cs=_n(ws),us=_n(ws);function In(e){if(e===ws)throw Error(q(174));return e}function ro(e,t){switch($e(us,t),$e(cs,e),$e(Qt,ws),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hr(t,e)}Be(Qt),$e(Qt,t)}function ka(){Be(Qt),Be(cs),Be(us)}function id(e){In(us.current);var t=In(Qt.current),n=Hr(t,e.type);t!==n&&($e(cs,e),$e(Qt,n))}function io(e){cs.current===e&&(Be(Qt),Be(cs))}var Ge=_n(0);function kl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nr=[];function oo(){for(var e=0;e<Nr.length;e++)Nr[e]._workInProgressVersionPrimary=null;Nr.length=0}var Zs=on.ReactCurrentDispatcher,Cr=on.ReactCurrentBatchConfig,On=0,Ve=null,et=null,nt=null,jl=!1,Ya=!1,ds=0,S0=0;function ct(){throw Error(q(321))}function co(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function uo(e,t,n,a,s,r){if(On=r,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zs.current=e===null||e.memoizedState===null?C0:M0,e=n(a,s),Ya){r=0;do{if(Ya=!1,ds=0,25<=r)throw Error(q(301));r+=1,nt=et=null,t.updateQueue=null,Zs.current=P0,e=n(a,s)}while(Ya)}if(Zs.current=Nl,t=et!==null&&et.next!==null,On=0,nt=et=Ve=null,jl=!1,t)throw Error(q(300));return e}function mo(){var e=ds!==0;return ds=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Ve.memoizedState=nt=e:nt=nt.next=e,nt}function $t(){if(et===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=nt===null?Ve.memoizedState:nt.next;if(t!==null)nt=t,et=e;else{if(e===null)throw Error(q(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},nt===null?Ve.memoizedState=nt=e:nt=nt.next=e}return nt}function ms(e,t){return typeof t=="function"?t(e):t}function Mr(e){var t=$t(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var a=et,s=a.baseQueue,r=n.pending;if(r!==null){if(s!==null){var i=s.next;s.next=r.next,r.next=i}a.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,a=a.baseState;var c=i=null,u=null,d=r;do{var f=d.lane;if((On&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var v={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=v,i=a):u=u.next=v,Ve.lanes|=f,Un|=f}d=d.next}while(d!==null&&d!==r);u===null?i=a:u.next=c,Gt(a,t.memoizedState)||(vt=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=u,n.lastRenderedState=a}if(e=n.interleaved,e!==null){s=e;do r=s.lane,Ve.lanes|=r,Un|=r,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pr(e){var t=$t(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do r=e(r,i.action),i=i.next;while(i!==s);Gt(r,t.memoizedState)||(vt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function od(){}function cd(e,t){var n=Ve,a=$t(),s=t(),r=!Gt(a.memoizedState,s);if(r&&(a.memoizedState=s,vt=!0),a=a.queue,fo(md.bind(null,n,a,e),[e]),a.getSnapshot!==t||r||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,fs(9,dd.bind(null,n,a,s,t),void 0,null),at===null)throw Error(q(349));On&30||ud(n,t,s)}return s}function ud(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dd(e,t,n,a){t.value=n,t.getSnapshot=a,fd(t)&&pd(e)}function md(e,t,n){return n(function(){fd(t)&&pd(e)})}function fd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch{return!0}}function pd(e){var t=ln(e,1);t!==null&&Ut(t,e,1,-1)}function gc(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},t.queue=e,e=e.dispatch=N0.bind(null,Ve,e),[t.memoizedState,e]}function fs(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function hd(){return $t().memoizedState}function Js(e,t,n,a){var s=Wt();Ve.flags|=e,s.memoizedState=fs(1|t,n,void 0,a===void 0?null:a)}function Vl(e,t,n,a){var s=$t();a=a===void 0?null:a;var r=void 0;if(et!==null){var i=et.memoizedState;if(r=i.destroy,a!==null&&co(a,i.deps)){s.memoizedState=fs(t,n,r,a);return}}Ve.flags|=e,s.memoizedState=fs(1|t,n,r,a)}function xc(e,t){return Js(8390656,8,e,t)}function fo(e,t){return Vl(2048,8,e,t)}function gd(e,t){return Vl(4,2,e,t)}function xd(e,t){return Vl(4,4,e,t)}function yd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vd(e,t,n){return n=n!=null?n.concat([e]):null,Vl(4,4,yd.bind(null,t,e),n)}function po(){}function bd(e,t){var n=$t();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&co(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function wd(e,t){var n=$t();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&co(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Sd(e,t,n){return On&21?(Gt(n,t)||(n=Mu(),Ve.lanes|=n,Un|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vt=!0),e.memoizedState=n)}function k0(e,t){var n=Pe;Pe=n!==0&&4>n?n:4,e(!0);var a=Cr.transition;Cr.transition={};try{e(!1),t()}finally{Pe=n,Cr.transition=a}}function kd(){return $t().memoizedState}function j0(e,t,n){var a=Nn(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},jd(e))Nd(t,n);else if(n=ld(e,t,n,a),n!==null){var s=pt();Ut(n,e,a,s),Cd(n,t,a)}}function N0(e,t,n){var a=Nn(e),s={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(jd(e))Nd(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var i=t.lastRenderedState,c=r(i,n);if(s.hasEagerState=!0,s.eagerState=c,Gt(c,i)){var u=t.interleaved;u===null?(s.next=s,so(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=ld(e,t,s,a),n!==null&&(s=pt(),Ut(n,e,a,s),Cd(n,t,a))}}function jd(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function Nd(e,t){Ya=jl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Cd(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Gi(e,n)}}var Nl={readContext:It,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},C0={readContext:It,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:It,useEffect:xc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Js(4194308,4,yd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){return Js(4,2,e,t)},useMemo:function(e,t){var n=Wt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Wt();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=j0.bind(null,Ve,e),[a.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:gc,useDebugValue:po,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=gc(!1),t=e[0];return e=k0.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=Ve,s=Wt();if(Oe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),at===null)throw Error(q(349));On&30||ud(a,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,xc(md.bind(null,a,r,e),[e]),a.flags|=2048,fs(9,dd.bind(null,a,r,n,t),void 0,null),n},useId:function(){var e=Wt(),t=at.identifierPrefix;if(Oe){var n=tn,a=en;n=(a&~(1<<32-Ot(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=ds++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=S0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},M0={readContext:It,useCallback:bd,useContext:It,useEffect:fo,useImperativeHandle:vd,useInsertionEffect:gd,useLayoutEffect:xd,useMemo:wd,useReducer:Mr,useRef:hd,useState:function(){return Mr(ms)},useDebugValue:po,useDeferredValue:function(e){var t=$t();return Sd(t,et.memoizedState,e)},useTransition:function(){var e=Mr(ms)[0],t=$t().memoizedState;return[e,t]},useMutableSource:od,useSyncExternalStore:cd,useId:kd,unstable_isNewReconciler:!1},P0={readContext:It,useCallback:bd,useContext:It,useEffect:fo,useImperativeHandle:vd,useInsertionEffect:gd,useLayoutEffect:xd,useMemo:wd,useReducer:Pr,useRef:hd,useState:function(){return Pr(ms)},useDebugValue:po,useDeferredValue:function(e){var t=$t();return et===null?t.memoizedState=e:Sd(t,et.memoizedState,e)},useTransition:function(){var e=Pr(ms)[0],t=$t().memoizedState;return[e,t]},useMutableSource:od,useSyncExternalStore:cd,useId:kd,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pi(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wl={isMounted:function(e){return(e=e._reactInternals)?Yn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=pt(),s=Nn(e),r=nn(a,s);r.payload=t,n!=null&&(r.callback=n),t=kn(e,r,s),t!==null&&(Ut(t,e,s,a),Qs(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=pt(),s=Nn(e),r=nn(a,s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=kn(e,r,s),t!==null&&(Ut(t,e,s,a),Qs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pt(),a=Nn(e),s=nn(n,a);s.tag=2,t!=null&&(s.callback=t),t=kn(e,s,a),t!==null&&(Ut(t,e,a,n),Qs(t,e,a))}};function yc(e,t,n,a,s,r,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,r,i):t.prototype&&t.prototype.isPureReactComponent?!ls(n,a)||!ls(s,r):!0}function Md(e,t,n){var a=!1,s=Pn,r=t.contextType;return typeof r=="object"&&r!==null?r=It(r):(s=wt(t)?Bn:mt.current,a=t.contextTypes,r=(a=a!=null)?ba(e,s):Pn),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wl,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function vc(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Wl.enqueueReplaceState(t,t.state,null)}function hi(e,t,n,a){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},lo(e);var r=t.contextType;typeof r=="object"&&r!==null?s.context=It(r):(r=wt(t)?Bn:mt.current,s.context=ba(e,r)),s.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(pi(e,t,r,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Wl.enqueueReplaceState(s,s.state,null),Sl(e,n,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ja(e,t){try{var n="",a=t;do n+=tf(a),a=a.return;while(a);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:s,digest:null}}function Er(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var E0=typeof WeakMap=="function"?WeakMap:Map;function Pd(e,t,n){n=nn(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Ml||(Ml=!0,Ci=a),gi(e,t)},n}function Ed(e,t,n){n=nn(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;n.payload=function(){return a(s)},n.callback=function(){gi(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){gi(e,t),typeof a!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function bc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new E0;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(n)||(s.add(n),e=U0.bind(null,e,t,n),t.then(e,e))}function wc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sc(e,t,n,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=nn(-1,1),t.tag=2,kn(n,t,1))),n.lanes|=1),e)}var _0=on.ReactCurrentOwner,vt=!1;function ft(e,t,n,a){t.child=e===null?sd(t,null,n,a):Sa(t,e.child,n,a)}function kc(e,t,n,a,s){n=n.render;var r=t.ref;return ha(t,s),a=uo(e,t,n,a,r,s),n=mo(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rn(e,t,s)):(Oe&&n&&Zi(t),t.flags|=1,ft(e,t,a,s),t.child)}function jc(e,t,n,a,s){if(e===null){var r=n.type;return typeof r=="function"&&!So(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,_d(e,t,r,a,s)):(e=al(n.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&s)){var i=r.memoizedProps;if(n=n.compare,n=n!==null?n:ls,n(i,a)&&e.ref===t.ref)return rn(e,t,s)}return t.flags|=1,e=Cn(r,a),e.ref=t.ref,e.return=t,t.child=e}function _d(e,t,n,a,s){if(e!==null){var r=e.memoizedProps;if(ls(r,a)&&e.ref===t.ref)if(vt=!1,t.pendingProps=a=r,(e.lanes&s)!==0)e.flags&131072&&(vt=!0);else return t.lanes=e.lanes,rn(e,t,s)}return xi(e,t,n,a,s)}function Rd(e,t,n){var a=t.pendingProps,s=a.children,r=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ua,jt),jt|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(ua,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=r!==null?r.baseLanes:n,$e(ua,jt),jt|=a}else r!==null?(a=r.baseLanes|n,t.memoizedState=null):a=n,$e(ua,jt),jt|=a;return ft(e,t,s,n),t.child}function Ld(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xi(e,t,n,a,s){var r=wt(n)?Bn:mt.current;return r=ba(t,r),ha(t,s),n=uo(e,t,n,a,r,s),a=mo(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rn(e,t,s)):(Oe&&a&&Zi(t),t.flags|=1,ft(e,t,n,s),t.child)}function Nc(e,t,n,a,s){if(wt(n)){var r=!0;xl(t)}else r=!1;if(ha(t,s),t.stateNode===null)el(e,t),Md(t,n,a),hi(t,n,a,s),a=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var u=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=It(d):(d=wt(n)?Bn:mt.current,d=ba(t,d));var f=n.getDerivedStateFromProps,v=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";v||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==a||u!==d)&&vc(t,i,a,d),fn=!1;var b=t.memoizedState;i.state=b,Sl(t,a,i,s),u=t.memoizedState,c!==a||b!==u||bt.current||fn?(typeof f=="function"&&(pi(t,n,f,a),u=t.memoizedState),(c=fn||yc(t,n,c,a,b,u,d))?(v||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=u),i.props=a,i.state=u,i.context=d,a=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,rd(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:Ft(t.type,c),i.props=d,v=t.pendingProps,b=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=It(u):(u=wt(n)?Bn:mt.current,u=ba(t,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==v||b!==u)&&vc(t,i,a,u),fn=!1,b=t.memoizedState,i.state=b,Sl(t,a,i,s);var p=t.memoizedState;c!==v||b!==p||bt.current||fn?(typeof m=="function"&&(pi(t,n,m,a),p=t.memoizedState),(d=fn||yc(t,n,d,a,b,p,u)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,p,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,p,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),i.props=a,i.state=p,i.context=u,a=d):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),a=!1)}return yi(e,t,n,a,r,s)}function yi(e,t,n,a,s,r){Ld(e,t);var i=(t.flags&128)!==0;if(!a&&!i)return s&&uc(t,n,!1),rn(e,t,r);a=t.stateNode,_0.current=t;var c=i&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&i?(t.child=Sa(t,e.child,null,r),t.child=Sa(t,null,c,r)):ft(e,t,c,r),t.memoizedState=a.state,s&&uc(t,n,!0),t.child}function Td(e){var t=e.stateNode;t.pendingContext?cc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cc(e,t.context,!1),ro(e,t.containerInfo)}function Cc(e,t,n,a,s){return wa(),eo(s),t.flags|=256,ft(e,t,n,a),t.child}var vi={dehydrated:null,treeContext:null,retryLane:0};function bi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dd(e,t,n){var a=t.pendingProps,s=Ge.current,r=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$e(Ge,s&1),e===null)return mi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=a.children,e=a.fallback,r?(a=t.mode,r=t.child,i={mode:"hidden",children:i},!(a&1)&&r!==null?(r.childLanes=0,r.pendingProps=i):r=Xl(i,a,0,null),e=Fn(e,a,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=bi(n),t.memoizedState=vi,e):ho(t,i));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return R0(e,t,i,a,c,s,n);if(r){r=a.fallback,i=t.mode,s=e.child,c=s.sibling;var u={mode:"hidden",children:a.children};return!(i&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=u,t.deletions=null):(a=Cn(s,u),a.subtreeFlags=s.subtreeFlags&14680064),c!==null?r=Cn(c,r):(r=Fn(r,i,n,null),r.flags|=2),r.return=t,a.return=t,a.sibling=r,t.child=a,a=r,r=t.child,i=e.child.memoizedState,i=i===null?bi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},r.memoizedState=i,r.childLanes=e.childLanes&~n,t.memoizedState=vi,a}return r=e.child,e=r.sibling,a=Cn(r,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function ho(e,t){return t=Xl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $s(e,t,n,a){return a!==null&&eo(a),Sa(t,e.child,null,n),e=ho(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function R0(e,t,n,a,s,r,i){if(n)return t.flags&256?(t.flags&=-257,a=Er(Error(q(422))),$s(e,t,i,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=a.fallback,s=t.mode,a=Xl({mode:"visible",children:a.children},s,0,null),r=Fn(r,s,i,null),r.flags|=2,a.return=t,r.return=t,a.sibling=r,t.child=a,t.mode&1&&Sa(t,e.child,null,i),t.child.memoizedState=bi(i),t.memoizedState=vi,r);if(!(t.mode&1))return $s(e,t,i,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var c=a.dgst;return a=c,r=Error(q(419)),a=Er(r,a,void 0),$s(e,t,i,a)}if(c=(i&e.childLanes)!==0,vt||c){if(a=at,a!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|i)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,ln(e,s),Ut(a,e,s,-1))}return wo(),a=Er(Error(q(421))),$s(e,t,i,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=G0.bind(null,e),s._reactRetry=t,null):(e=r.treeContext,Nt=Sn(s.nextSibling),Ct=t,Oe=!0,qt=null,e!==null&&(Lt[Tt++]=en,Lt[Tt++]=tn,Lt[Tt++]=qn,en=e.id,tn=e.overflow,qn=t),t=ho(t,a.children),t.flags|=4096,t)}function Mc(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),fi(e.return,t,n)}function _r(e,t,n,a,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=s)}function Ad(e,t,n){var a=t.pendingProps,s=a.revealOrder,r=a.tail;if(ft(e,t,a.children,n),a=Ge.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mc(e,n,t);else if(e.tag===19)Mc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if($e(Ge,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&kl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),_r(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&kl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}_r(t,!0,n,null,r);break;case"together":_r(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function el(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=Cn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Cn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function L0(e,t,n){switch(t.tag){case 3:Td(t),wa();break;case 5:id(t);break;case 1:wt(t.type)&&xl(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;$e(bl,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?($e(Ge,Ge.current&1),t.flags|=128,null):n&t.child.childLanes?Dd(e,t,n):($e(Ge,Ge.current&1),e=rn(e,t,n),e!==null?e.sibling:null);$e(Ge,Ge.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return Ad(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ge,Ge.current),a)break;return null;case 22:case 23:return t.lanes=0,Rd(e,t,n)}return rn(e,t,n)}var Id,wi,$d,zd;Id=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wi=function(){};$d=function(e,t,n,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,In(Qt.current);var r=null;switch(n){case"input":s=Ur(e,s),a=Ur(e,a),r=[];break;case"select":s=We({},s,{value:void 0}),a=We({},a,{value:void 0}),r=[];break;case"textarea":s=Wr(e,s),a=Wr(e,a),r=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=hl)}Yr(n,a);var i;n=null;for(d in s)if(!a.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Za.hasOwnProperty(d)?r||(r=[]):(r=r||[]).push(d,null));for(d in a){var u=a[d];if(c=s!=null?s[d]:void 0,a.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(r||(r=[]),r.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(r=r||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(r=r||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Za.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Fe("scroll",e),r||c===u||(r=[])):(r=r||[]).push(d,u))}n&&(r=r||[]).push("style",n);var d=r;(t.updateQueue=d)&&(t.flags|=4)}};zd=function(e,t,n,a){n!==a&&(t.flags|=4)};function Aa(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function T0(e,t,n){var a=t.pendingProps;switch(Ji(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return wt(t.type)&&gl(),ut(t),null;case 3:return a=t.stateNode,ka(),Be(bt),Be(mt),oo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(As(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Ei(qt),qt=null))),wi(e,t),ut(t),null;case 5:io(t);var s=In(us.current);if(n=t.type,e!==null&&t.stateNode!=null)$d(e,t,n,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(q(166));return ut(t),null}if(e=In(Qt.current),As(t)){a=t.stateNode,n=t.type;var r=t.memoizedProps;switch(a[Ht]=t,a[os]=r,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":case"embed":Fe("load",a);break;case"video":case"audio":for(s=0;s<qa.length;s++)Fe(qa[s],a);break;case"source":Fe("error",a);break;case"img":case"image":case"link":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"input":Io(a,r),Fe("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!r.multiple},Fe("invalid",a);break;case"textarea":zo(a,r),Fe("invalid",a)}Yr(n,r),s=null;for(var i in r)if(r.hasOwnProperty(i)){var c=r[i];i==="children"?typeof c=="string"?a.textContent!==c&&(r.suppressHydrationWarning!==!0&&Ds(a.textContent,c,e),s=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(r.suppressHydrationWarning!==!0&&Ds(a.textContent,c,e),s=["children",""+c]):Za.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Fe("scroll",a)}switch(n){case"input":Cs(a),$o(a,r,!0);break;case"textarea":Cs(a),Fo(a);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(a.onclick=hl)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=i.createElement(n,{is:a.is}):(e=i.createElement(n),n==="select"&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,n),e[Ht]=t,e[os]=a,Id(e,t,!1,!1),t.stateNode=e;e:{switch(i=Xr(n,a),n){case"dialog":Fe("cancel",e),Fe("close",e),s=a;break;case"iframe":case"object":case"embed":Fe("load",e),s=a;break;case"video":case"audio":for(s=0;s<qa.length;s++)Fe(qa[s],e);s=a;break;case"source":Fe("error",e),s=a;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),s=a;break;case"details":Fe("toggle",e),s=a;break;case"input":Io(e,a),s=Ur(e,a),Fe("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=We({},a,{value:void 0}),Fe("invalid",e);break;case"textarea":zo(e,a),s=Wr(e,a),Fe("invalid",e);break;default:s=a}Yr(n,s),c=s;for(r in c)if(c.hasOwnProperty(r)){var u=c[r];r==="style"?hu(e,u):r==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fu(e,u)):r==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ja(e,u):typeof u=="number"&&Ja(e,""+u):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Za.hasOwnProperty(r)?u!=null&&r==="onScroll"&&Fe("scroll",e):u!=null&&zi(e,r,u,i))}switch(n){case"input":Cs(e),$o(e,a,!1);break;case"textarea":Cs(e),Fo(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Mn(a.value));break;case"select":e.multiple=!!a.multiple,r=a.value,r!=null?da(e,!!a.multiple,r,!1):a.defaultValue!=null&&da(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=hl)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)zd(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(q(166));if(n=In(us.current),In(Qt.current),As(t)){if(a=t.stateNode,n=t.memoizedProps,a[Ht]=t,(r=a.nodeValue!==n)&&(e=Ct,e!==null))switch(e.tag){case 3:Ds(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ds(a.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[Ht]=t,t.stateNode=a}return ut(t),null;case 13:if(Be(Ge),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&Nt!==null&&t.mode&1&&!(t.flags&128))nd(),wa(),t.flags|=98560,r=!1;else if(r=As(t),a!==null&&a.dehydrated!==null){if(e===null){if(!r)throw Error(q(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(q(317));r[Ht]=t}else wa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),r=!1}else qt!==null&&(Ei(qt),qt=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?tt===0&&(tt=3):wo())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return ka(),wi(e,t),e===null&&rs(t.stateNode.containerInfo),ut(t),null;case 10:return ao(t.type._context),ut(t),null;case 17:return wt(t.type)&&gl(),ut(t),null;case 19:if(Be(Ge),r=t.memoizedState,r===null)return ut(t),null;if(a=(t.flags&128)!==0,i=r.rendering,i===null)if(a)Aa(r,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=kl(e),i!==null){for(t.flags|=128,Aa(r,!1),a=i.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)r=n,e=a,r.flags&=14680066,i=r.alternate,i===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,r.type=i.type,e=i.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $e(Ge,Ge.current&1|2),t.child}e=e.sibling}r.tail!==null&&Ke()>Na&&(t.flags|=128,a=!0,Aa(r,!1),t.lanes=4194304)}else{if(!a)if(e=kl(i),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Aa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!Oe)return ut(t),null}else 2*Ke()-r.renderingStartTime>Na&&n!==1073741824&&(t.flags|=128,a=!0,Aa(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(n=r.last,n!==null?n.sibling=i:t.child=i,r.last=i)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ke(),t.sibling=null,n=Ge.current,$e(Ge,a?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return bo(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?jt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function D0(e,t){switch(Ji(t),t.tag){case 1:return wt(t.type)&&gl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ka(),Be(bt),Be(mt),oo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return io(t),null;case 13:if(Be(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ge),null;case 4:return ka(),null;case 10:return ao(t.type._context),null;case 22:case 23:return bo(),null;case 24:return null;default:return null}}var zs=!1,dt=!1,A0=typeof WeakSet=="function"?WeakSet:Set,le=null;function ca(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){Ye(e,t,a)}else n.current=null}function Si(e,t,n){try{n()}catch(a){Ye(e,t,a)}}var Pc=!1;function I0(e,t){if(li=ml,e=Uu(),Qi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var s=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var i=0,c=-1,u=-1,d=0,f=0,v=e,b=null;t:for(;;){for(var m;v!==n||s!==0&&v.nodeType!==3||(c=i+s),v!==r||a!==0&&v.nodeType!==3||(u=i+a),v.nodeType===3&&(i+=v.nodeValue.length),(m=v.firstChild)!==null;)b=v,v=m;for(;;){if(v===e)break t;if(b===n&&++d===s&&(c=i),b===r&&++f===a&&(u=i),(m=v.nextSibling)!==null)break;v=b,b=v.parentNode}v=m}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ri={focusedElem:e,selectionRange:n},ml=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var S=p.memoizedProps,g=p.memoizedState,x=t.stateNode,h=x.getSnapshotBeforeUpdate(t.elementType===t.type?S:Ft(t.type,S),g);x.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(w){Ye(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return p=Pc,Pc=!1,p}function Xa(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,r!==void 0&&Si(t,n,r)}s=s.next}while(s!==a)}}function Hl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function ki(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fd(e){var t=e.alternate;t!==null&&(e.alternate=null,Fd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[os],delete t[ci],delete t[y0],delete t[v0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bd(e){return e.tag===5||e.tag===3||e.tag===4}function Ec(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ji(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hl));else if(a!==4&&(e=e.child,e!==null))for(ji(e,t,n),e=e.sibling;e!==null;)ji(e,t,n),e=e.sibling}function Ni(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Ni(e,t,n),e=e.sibling;e!==null;)Ni(e,t,n),e=e.sibling}var st=null,Bt=!1;function dn(e,t,n){for(n=n.child;n!==null;)qd(e,t,n),n=n.sibling}function qd(e,t,n){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Fl,n)}catch{}switch(n.tag){case 5:dt||ca(n,t);case 6:var a=st,s=Bt;st=null,dn(e,t,n),st=a,Bt=s,st!==null&&(Bt?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(Bt?(e=st,n=n.stateNode,e.nodeType===8?kr(e.parentNode,n):e.nodeType===1&&kr(e,n),as(e)):kr(st,n.stateNode));break;case 4:a=st,s=Bt,st=n.stateNode.containerInfo,Bt=!0,dn(e,t,n),st=a,Bt=s;break;case 0:case 11:case 14:case 15:if(!dt&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var r=s,i=r.destroy;r=r.tag,i!==void 0&&(r&2||r&4)&&Si(n,t,i),s=s.next}while(s!==a)}dn(e,t,n);break;case 1:if(!dt&&(ca(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(c){Ye(n,t,c)}dn(e,t,n);break;case 21:dn(e,t,n);break;case 22:n.mode&1?(dt=(a=dt)||n.memoizedState!==null,dn(e,t,n),dt=a):dn(e,t,n);break;default:dn(e,t,n)}}function _c(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new A0),t.forEach(function(a){var s=V0.bind(null,e,a);n.has(a)||(n.add(a),a.then(s,s))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a];try{var r=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:st=c.stateNode,Bt=!1;break e;case 3:st=c.stateNode.containerInfo,Bt=!0;break e;case 4:st=c.stateNode.containerInfo,Bt=!0;break e}c=c.return}if(st===null)throw Error(q(160));qd(r,i,s),st=null,Bt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ye(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Od(t,e),t=t.sibling}function Od(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),Vt(e),a&4){try{Xa(3,e,e.return),Hl(3,e)}catch(S){Ye(e,e.return,S)}try{Xa(5,e,e.return)}catch(S){Ye(e,e.return,S)}}break;case 1:zt(t,e),Vt(e),a&512&&n!==null&&ca(n,n.return);break;case 5:if(zt(t,e),Vt(e),a&512&&n!==null&&ca(n,n.return),e.flags&32){var s=e.stateNode;try{Ja(s,"")}catch(S){Ye(e,e.return,S)}}if(a&4&&(s=e.stateNode,s!=null)){var r=e.memoizedProps,i=n!==null?n.memoizedProps:r,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&r.type==="radio"&&r.name!=null&&uu(s,r),Xr(c,i);var d=Xr(c,r);for(i=0;i<u.length;i+=2){var f=u[i],v=u[i+1];f==="style"?hu(s,v):f==="dangerouslySetInnerHTML"?fu(s,v):f==="children"?Ja(s,v):zi(s,f,v,d)}switch(c){case"input":Gr(s,r);break;case"textarea":du(s,r);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?da(s,!!r.multiple,m,!1):b!==!!r.multiple&&(r.defaultValue!=null?da(s,!!r.multiple,r.defaultValue,!0):da(s,!!r.multiple,r.multiple?[]:"",!1))}s[os]=r}catch(S){Ye(e,e.return,S)}}break;case 6:if(zt(t,e),Vt(e),a&4){if(e.stateNode===null)throw Error(q(162));s=e.stateNode,r=e.memoizedProps;try{s.nodeValue=r}catch(S){Ye(e,e.return,S)}}break;case 3:if(zt(t,e),Vt(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{as(t.containerInfo)}catch(S){Ye(e,e.return,S)}break;case 4:zt(t,e),Vt(e);break;case 13:zt(t,e),Vt(e),s=e.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(yo=Ke())),a&4&&_c(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(dt=(d=dt)||f,zt(t,e),dt=d):zt(t,e),Vt(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(le=e,f=e.child;f!==null;){for(v=le=f;le!==null;){switch(b=le,m=b.child,b.tag){case 0:case 11:case 14:case 15:Xa(4,b,b.return);break;case 1:ca(b,b.return);var p=b.stateNode;if(typeof p.componentWillUnmount=="function"){a=b,n=b.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(S){Ye(a,n,S)}}break;case 5:ca(b,b.return);break;case 22:if(b.memoizedState!==null){Lc(v);continue}}m!==null?(m.return=b,le=m):Lc(v)}f=f.sibling}e:for(f=null,v=e;;){if(v.tag===5){if(f===null){f=v;try{s=v.stateNode,d?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(c=v.stateNode,u=v.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=pu("display",i))}catch(S){Ye(e,e.return,S)}}}else if(v.tag===6){if(f===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(S){Ye(e,e.return,S)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;f===v&&(f=null),v=v.return}f===v&&(f=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:zt(t,e),Vt(e),a&4&&_c(e);break;case 21:break;default:zt(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Bd(n)){var a=n;break e}n=n.return}throw Error(q(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(Ja(s,""),a.flags&=-33);var r=Ec(e);Ni(e,r,s);break;case 3:case 4:var i=a.stateNode.containerInfo,c=Ec(e);ji(e,c,i);break;default:throw Error(q(161))}}catch(u){Ye(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $0(e,t,n){le=e,Ud(e)}function Ud(e,t,n){for(var a=(e.mode&1)!==0;le!==null;){var s=le,r=s.child;if(s.tag===22&&a){var i=s.memoizedState!==null||zs;if(!i){var c=s.alternate,u=c!==null&&c.memoizedState!==null||dt;c=zs;var d=dt;if(zs=i,(dt=u)&&!d)for(le=s;le!==null;)i=le,u=i.child,i.tag===22&&i.memoizedState!==null?Tc(s):u!==null?(u.return=i,le=u):Tc(s);for(;r!==null;)le=r,Ud(r),r=r.sibling;le=s,zs=c,dt=d}Rc(e)}else s.subtreeFlags&8772&&r!==null?(r.return=s,le=r):Rc(e)}}function Rc(e){for(;le!==null;){var t=le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||Hl(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!dt)if(n===null)a.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ft(t.type,n.memoizedProps);a.componentDidUpdate(s,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&hc(t,r,a);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}hc(t,i,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var v=f.dehydrated;v!==null&&as(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}dt||t.flags&512&&ki(t)}catch(b){Ye(t,t.return,b)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function Lc(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function Tc(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hl(4,t)}catch(u){Ye(t,n,u)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(u){Ye(t,s,u)}}var r=t.return;try{ki(t)}catch(u){Ye(t,r,u)}break;case 5:var i=t.return;try{ki(t)}catch(u){Ye(t,i,u)}}}catch(u){Ye(t,t.return,u)}if(t===e){le=null;break}var c=t.sibling;if(c!==null){c.return=t.return,le=c;break}le=t.return}}var z0=Math.ceil,Cl=on.ReactCurrentDispatcher,go=on.ReactCurrentOwner,At=on.ReactCurrentBatchConfig,ke=0,at=null,Ze=null,lt=0,jt=0,ua=_n(0),tt=0,ps=null,Un=0,Yl=0,xo=0,Ka=null,yt=null,yo=0,Na=1/0,Zt=null,Ml=!1,Ci=null,jn=null,Fs=!1,yn=null,Pl=0,Qa=0,Mi=null,tl=-1,nl=0;function pt(){return ke&6?Ke():tl!==-1?tl:tl=Ke()}function Nn(e){return e.mode&1?ke&2&&lt!==0?lt&-lt:w0.transition!==null?(nl===0&&(nl=Mu()),nl):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:Du(e.type)),e):1}function Ut(e,t,n,a){if(50<Qa)throw Qa=0,Mi=null,Error(q(185));ys(e,n,a),(!(ke&2)||e!==at)&&(e===at&&(!(ke&2)&&(Yl|=n),tt===4&&gn(e,lt)),St(e,a),n===1&&ke===0&&!(t.mode&1)&&(Na=Ke()+500,Gl&&Rn()))}function St(e,t){var n=e.callbackNode;wf(e,t);var a=dl(e,e===at?lt:0);if(a===0)n!==null&&Oo(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&Oo(n),t===1)e.tag===0?b0(Dc.bind(null,e)):Ju(Dc.bind(null,e)),g0(function(){!(ke&6)&&Rn()}),n=null;else{switch(Pu(a)){case 1:n=Ui;break;case 4:n=Nu;break;case 16:n=ul;break;case 536870912:n=Cu;break;default:n=ul}n=Qd(n,Gd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gd(e,t){if(tl=-1,nl=0,ke&6)throw Error(q(327));var n=e.callbackNode;if(ga()&&e.callbackNode!==n)return null;var a=dl(e,e===at?lt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=El(e,a);else{t=a;var s=ke;ke|=2;var r=Wd();(at!==e||lt!==t)&&(Zt=null,Na=Ke()+500,zn(e,t));do try{q0();break}catch(c){Vd(e,c)}while(!0);no(),Cl.current=r,ke=s,Ze!==null?t=0:(at=null,lt=0,t=tt)}if(t!==0){if(t===2&&(s=ei(e),s!==0&&(a=s,t=Pi(e,s))),t===1)throw n=ps,zn(e,0),gn(e,a),St(e,Ke()),n;if(t===6)gn(e,a);else{if(s=e.current.alternate,!(a&30)&&!F0(s)&&(t=El(e,a),t===2&&(r=ei(e),r!==0&&(a=r,t=Pi(e,r))),t===1))throw n=ps,zn(e,0),gn(e,a),St(e,Ke()),n;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(q(345));case 2:Tn(e,yt,Zt);break;case 3:if(gn(e,a),(a&130023424)===a&&(t=yo+500-Ke(),10<t)){if(dl(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=oi(Tn.bind(null,e,yt,Zt),t);break}Tn(e,yt,Zt);break;case 4:if(gn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var i=31-Ot(a);r=1<<i,i=t[i],i>s&&(s=i),a&=~r}if(a=s,a=Ke()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*z0(a/1960))-a,10<a){e.timeoutHandle=oi(Tn.bind(null,e,yt,Zt),a);break}Tn(e,yt,Zt);break;case 5:Tn(e,yt,Zt);break;default:throw Error(q(329))}}}return St(e,Ke()),e.callbackNode===n?Gd.bind(null,e):null}function Pi(e,t){var n=Ka;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=El(e,t),e!==2&&(t=yt,yt=n,t!==null&&Ei(t)),e}function Ei(e){yt===null?yt=e:yt.push.apply(yt,e)}function F0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!Gt(r(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gn(e,t){for(t&=~xo,t&=~Yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ot(t),a=1<<n;e[n]=-1,t&=~a}}function Dc(e){if(ke&6)throw Error(q(327));ga();var t=dl(e,0);if(!(t&1))return St(e,Ke()),null;var n=El(e,t);if(e.tag!==0&&n===2){var a=ei(e);a!==0&&(t=a,n=Pi(e,a))}if(n===1)throw n=ps,zn(e,0),gn(e,t),St(e,Ke()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,yt,Zt),St(e,Ke()),null}function vo(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(Na=Ke()+500,Gl&&Rn())}}function Gn(e){yn!==null&&yn.tag===0&&!(ke&6)&&ga();var t=ke;ke|=1;var n=At.transition,a=Pe;try{if(At.transition=null,Pe=1,e)return e()}finally{Pe=a,At.transition=n,ke=t,!(ke&6)&&Rn()}}function bo(){jt=ua.current,Be(ua)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,h0(n)),Ze!==null)for(n=Ze.return;n!==null;){var a=n;switch(Ji(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&gl();break;case 3:ka(),Be(bt),Be(mt),oo();break;case 5:io(a);break;case 4:ka();break;case 13:Be(Ge);break;case 19:Be(Ge);break;case 10:ao(a.type._context);break;case 22:case 23:bo()}n=n.return}if(at=e,Ze=e=Cn(e.current,null),lt=jt=t,tt=0,ps=null,xo=Yl=Un=0,yt=Ka=null,An!==null){for(t=0;t<An.length;t++)if(n=An[t],a=n.interleaved,a!==null){n.interleaved=null;var s=a.next,r=n.pending;if(r!==null){var i=r.next;r.next=s,a.next=i}n.pending=a}An=null}return e}function Vd(e,t){do{var n=Ze;try{if(no(),Zs.current=Nl,jl){for(var a=Ve.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}jl=!1}if(On=0,nt=et=Ve=null,Ya=!1,ds=0,go.current=null,n===null||n.return===null){tt=1,ps=t,Ze=null;break}e:{var r=e,i=n.return,c=n,u=t;if(t=lt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,v=f.tag;if(!(f.mode&1)&&(v===0||v===11||v===15)){var b=f.alternate;b?(f.updateQueue=b.updateQueue,f.memoizedState=b.memoizedState,f.lanes=b.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=wc(i);if(m!==null){m.flags&=-257,Sc(m,i,c,r,t),m.mode&1&&bc(r,d,t),t=m,u=d;var p=t.updateQueue;if(p===null){var S=new Set;S.add(u),t.updateQueue=S}else p.add(u);break e}else{if(!(t&1)){bc(r,d,t),wo();break e}u=Error(q(426))}}else if(Oe&&c.mode&1){var g=wc(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Sc(g,i,c,r,t),eo(ja(u,c));break e}}r=u=ja(u,c),tt!==4&&(tt=2),Ka===null?Ka=[r]:Ka.push(r),r=i;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var x=Pd(r,u,t);pc(r,x);break e;case 1:c=u;var h=r.type,y=r.stateNode;if(!(r.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(jn===null||!jn.has(y)))){r.flags|=65536,t&=-t,r.lanes|=t;var w=Ed(r,c,t);pc(r,w);break e}}r=r.return}while(r!==null)}Yd(n)}catch(P){t=P,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function Wd(){var e=Cl.current;return Cl.current=Nl,e===null?Nl:e}function wo(){(tt===0||tt===3||tt===2)&&(tt=4),at===null||!(Un&268435455)&&!(Yl&268435455)||gn(at,lt)}function El(e,t){var n=ke;ke|=2;var a=Wd();(at!==e||lt!==t)&&(Zt=null,zn(e,t));do try{B0();break}catch(s){Vd(e,s)}while(!0);if(no(),ke=n,Cl.current=a,Ze!==null)throw Error(q(261));return at=null,lt=0,tt}function B0(){for(;Ze!==null;)Hd(Ze)}function q0(){for(;Ze!==null&&!mf();)Hd(Ze)}function Hd(e){var t=Kd(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?Yd(e):Ze=t,go.current=null}function Yd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=D0(n,t),n!==null){n.flags&=32767,Ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Ze=null;return}}else if(n=T0(n,t,jt),n!==null){Ze=n;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);tt===0&&(tt=5)}function Tn(e,t,n){var a=Pe,s=At.transition;try{At.transition=null,Pe=1,O0(e,t,n,a)}finally{At.transition=s,Pe=a}return null}function O0(e,t,n,a){do ga();while(yn!==null);if(ke&6)throw Error(q(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(Sf(e,r),e===at&&(Ze=at=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fs||(Fs=!0,Qd(ul,function(){return ga(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=At.transition,At.transition=null;var i=Pe;Pe=1;var c=ke;ke|=4,go.current=null,I0(e,n),Od(n,e),o0(ri),ml=!!li,ri=li=null,e.current=n,$0(n),ff(),ke=c,Pe=i,At.transition=r}else e.current=n;if(Fs&&(Fs=!1,yn=e,Pl=s),r=e.pendingLanes,r===0&&(jn=null),gf(n.stateNode),St(e,Ke()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],a(s.value,{componentStack:s.stack,digest:s.digest});if(Ml)throw Ml=!1,e=Ci,Ci=null,e;return Pl&1&&e.tag!==0&&ga(),r=e.pendingLanes,r&1?e===Mi?Qa++:(Qa=0,Mi=e):Qa=0,Rn(),null}function ga(){if(yn!==null){var e=Pu(Pl),t=At.transition,n=Pe;try{if(At.transition=null,Pe=16>e?16:e,yn===null)var a=!1;else{if(e=yn,yn=null,Pl=0,ke&6)throw Error(q(331));var s=ke;for(ke|=4,le=e.current;le!==null;){var r=le,i=r.child;if(le.flags&16){var c=r.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(le=d;le!==null;){var f=le;switch(f.tag){case 0:case 11:case 15:Xa(8,f,r)}var v=f.child;if(v!==null)v.return=f,le=v;else for(;le!==null;){f=le;var b=f.sibling,m=f.return;if(Fd(f),f===d){le=null;break}if(b!==null){b.return=m,le=b;break}le=m}}}var p=r.alternate;if(p!==null){var S=p.child;if(S!==null){p.child=null;do{var g=S.sibling;S.sibling=null,S=g}while(S!==null)}}le=r}}if(r.subtreeFlags&2064&&i!==null)i.return=r,le=i;else e:for(;le!==null;){if(r=le,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Xa(9,r,r.return)}var x=r.sibling;if(x!==null){x.return=r.return,le=x;break e}le=r.return}}var h=e.current;for(le=h;le!==null;){i=le;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,le=y;else e:for(i=h;le!==null;){if(c=le,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Hl(9,c)}}catch(P){Ye(c,c.return,P)}if(c===i){le=null;break e}var w=c.sibling;if(w!==null){w.return=c.return,le=w;break e}le=c.return}}if(ke=s,Rn(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Fl,e)}catch{}a=!0}return a}finally{Pe=n,At.transition=t}}return!1}function Ac(e,t,n){t=ja(n,t),t=Pd(e,t,1),e=kn(e,t,1),t=pt(),e!==null&&(ys(e,1,t),St(e,t))}function Ye(e,t,n){if(e.tag===3)Ac(e,e,n);else for(;t!==null;){if(t.tag===3){Ac(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(jn===null||!jn.has(a))){e=ja(n,e),e=Ed(t,e,1),t=kn(t,e,1),e=pt(),t!==null&&(ys(t,1,e),St(t,e));break}}t=t.return}}function U0(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=pt(),e.pingedLanes|=e.suspendedLanes&n,at===e&&(lt&n)===n&&(tt===4||tt===3&&(lt&130023424)===lt&&500>Ke()-yo?zn(e,0):xo|=n),St(e,t)}function Xd(e,t){t===0&&(e.mode&1?(t=Es,Es<<=1,!(Es&130023424)&&(Es=4194304)):t=1);var n=pt();e=ln(e,t),e!==null&&(ys(e,t,n),St(e,n))}function G0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xd(e,n)}function V0(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(q(314))}a!==null&&a.delete(t),Xd(e,n)}var Kd;Kd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||bt.current)vt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return vt=!1,L0(e,t,n);vt=!!(e.flags&131072)}else vt=!1,Oe&&t.flags&1048576&&ed(t,vl,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;el(e,t),e=t.pendingProps;var s=ba(t,mt.current);ha(t,n),s=uo(null,t,a,e,s,n);var r=mo();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wt(a)?(r=!0,xl(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lo(t),s.updater=Wl,t.stateNode=s,s._reactInternals=t,hi(t,a,e,n),t=yi(null,t,a,!0,r,n)):(t.tag=0,Oe&&r&&Zi(t),ft(null,t,s,n),t=t.child),t;case 16:a=t.elementType;e:{switch(el(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=H0(a),e=Ft(a,e),s){case 0:t=xi(null,t,a,e,n);break e;case 1:t=Nc(null,t,a,e,n);break e;case 11:t=kc(null,t,a,e,n);break e;case 14:t=jc(null,t,a,Ft(a.type,e),n);break e}throw Error(q(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ft(a,s),xi(e,t,a,s,n);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ft(a,s),Nc(e,t,a,s,n);case 3:e:{if(Td(t),e===null)throw Error(q(387));a=t.pendingProps,r=t.memoizedState,s=r.element,rd(e,t),Sl(t,a,null,n);var i=t.memoizedState;if(a=i.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=ja(Error(q(423)),t),t=Cc(e,t,a,n,s);break e}else if(a!==s){s=ja(Error(q(424)),t),t=Cc(e,t,a,n,s);break e}else for(Nt=Sn(t.stateNode.containerInfo.firstChild),Ct=t,Oe=!0,qt=null,n=sd(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wa(),a===s){t=rn(e,t,n);break e}ft(e,t,a,n)}t=t.child}return t;case 5:return id(t),e===null&&mi(t),a=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,i=s.children,ii(a,s)?i=null:r!==null&&ii(a,r)&&(t.flags|=32),Ld(e,t),ft(e,t,i,n),t.child;case 6:return e===null&&mi(t),null;case 13:return Dd(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Sa(t,null,a,n):ft(e,t,a,n),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ft(a,s),kc(e,t,a,s,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,r=t.memoizedProps,i=s.value,$e(bl,a._currentValue),a._currentValue=i,r!==null)if(Gt(r.value,i)){if(r.children===s.children&&!bt.current){t=rn(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var c=r.dependencies;if(c!==null){i=r.child;for(var u=c.firstContext;u!==null;){if(u.context===a){if(r.tag===1){u=nn(-1,n&-n),u.tag=2;var d=r.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}r.lanes|=n,u=r.alternate,u!==null&&(u.lanes|=n),fi(r.return,n,t),c.lanes|=n;break}u=u.next}}else if(r.tag===10)i=r.type===t.type?null:r.child;else if(r.tag===18){if(i=r.return,i===null)throw Error(q(341));i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fi(i,n,t),i=r.sibling}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===t){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}ft(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,ha(t,n),s=It(s),a=a(s),t.flags|=1,ft(e,t,a,n),t.child;case 14:return a=t.type,s=Ft(a,t.pendingProps),s=Ft(a.type,s),jc(e,t,a,s,n);case 15:return _d(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Ft(a,s),el(e,t),t.tag=1,wt(a)?(e=!0,xl(t)):e=!1,ha(t,n),Md(t,a,s),hi(t,a,s,n),yi(null,t,a,!0,e,n);case 19:return Ad(e,t,n);case 22:return Rd(e,t,n)}throw Error(q(156,t.tag))};function Qd(e,t){return ju(e,t)}function W0(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,n,a){return new W0(e,t,n,a)}function So(e){return e=e.prototype,!(!e||!e.isReactComponent)}function H0(e){if(typeof e=="function")return So(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bi)return 11;if(e===qi)return 14}return 2}function Cn(e,t){var n=e.alternate;return n===null?(n=Dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function al(e,t,n,a,s,r){var i=2;if(a=e,typeof e=="function")So(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ea:return Fn(n.children,s,r,t);case Fi:i=8,s|=8;break;case Fr:return e=Dt(12,n,t,s|2),e.elementType=Fr,e.lanes=r,e;case Br:return e=Dt(13,n,t,s),e.elementType=Br,e.lanes=r,e;case qr:return e=Dt(19,n,t,s),e.elementType=qr,e.lanes=r,e;case iu:return Xl(n,s,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lu:i=10;break e;case ru:i=9;break e;case Bi:i=11;break e;case qi:i=14;break e;case mn:i=16,a=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=Dt(i,n,t,s),t.elementType=e,t.type=a,t.lanes=r,t}function Fn(e,t,n,a){return e=Dt(7,e,a,t),e.lanes=n,e}function Xl(e,t,n,a){return e=Dt(22,e,a,t),e.elementType=iu,e.lanes=n,e.stateNode={isHidden:!1},e}function Rr(e,t,n){return e=Dt(6,e,null,t),e.lanes=n,e}function Lr(e,t,n){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Y0(e,t,n,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mr(0),this.expirationTimes=mr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ko(e,t,n,a,s,r,i,c,u){return e=new Y0(e,t,n,c,u),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Dt(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lo(r),e}function X0(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function Zd(e){if(!e)return Pn;e=e._reactInternals;e:{if(Yn(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(wt(n))return Zu(e,n,t)}return t}function Jd(e,t,n,a,s,r,i,c,u){return e=ko(n,a,!0,e,s,r,i,c,u),e.context=Zd(null),n=e.current,a=pt(),s=Nn(n),r=nn(a,s),r.callback=t??null,kn(n,r,s),e.current.lanes=s,ys(e,s,a),St(e,a),e}function Kl(e,t,n,a){var s=t.current,r=pt(),i=Nn(s);return n=Zd(n),t.context===null?t.context=n:t.pendingContext=n,t=nn(r,i),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=kn(s,t,i),e!==null&&(Ut(e,s,i,r),Qs(e,s,i)),i}function _l(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ic(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jo(e,t){Ic(e,t),(e=e.alternate)&&Ic(e,t)}function K0(){return null}var em=typeof reportError=="function"?reportError:function(e){console.error(e)};function No(e){this._internalRoot=e}Ql.prototype.render=No.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));Kl(e,t,null,null)};Ql.prototype.unmount=No.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gn(function(){Kl(null,e,null,null)}),t[sn]=null}};function Ql(e){this._internalRoot=e}Ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ru();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hn.length&&t!==0&&t<hn[n].priority;n++);hn.splice(n,0,e),n===0&&Tu(e)}};function Co(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $c(){}function Q0(e,t,n,a,s){if(s){if(typeof a=="function"){var r=a;a=function(){var d=_l(i);r.call(d)}}var i=Jd(t,a,e,0,null,!1,!1,"",$c);return e._reactRootContainer=i,e[sn]=i.current,rs(e.nodeType===8?e.parentNode:e),Gn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var c=a;a=function(){var d=_l(u);c.call(d)}}var u=ko(e,0,!1,null,null,!1,!1,"",$c);return e._reactRootContainer=u,e[sn]=u.current,rs(e.nodeType===8?e.parentNode:e),Gn(function(){Kl(t,u,n,a)}),u}function Jl(e,t,n,a,s){var r=n._reactRootContainer;if(r){var i=r;if(typeof s=="function"){var c=s;s=function(){var u=_l(i);c.call(u)}}Kl(t,i,e,s)}else i=Q0(n,t,e,s,a);return _l(i)}Eu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ba(t.pendingLanes);n!==0&&(Gi(t,n|1),St(t,Ke()),!(ke&6)&&(Na=Ke()+500,Rn()))}break;case 13:Gn(function(){var a=ln(e,1);if(a!==null){var s=pt();Ut(a,e,1,s)}}),jo(e,1)}};Vi=function(e){if(e.tag===13){var t=ln(e,134217728);if(t!==null){var n=pt();Ut(t,e,134217728,n)}jo(e,134217728)}};_u=function(e){if(e.tag===13){var t=Nn(e),n=ln(e,t);if(n!==null){var a=pt();Ut(n,e,t,a)}jo(e,t)}};Ru=function(){return Pe};Lu=function(e,t){var n=Pe;try{return Pe=e,t()}finally{Pe=n}};Qr=function(e,t,n){switch(t){case"input":if(Gr(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=Ul(a);if(!s)throw Error(q(90));cu(a),Gr(a,s)}}}break;case"textarea":du(e,n);break;case"select":t=n.value,t!=null&&da(e,!!n.multiple,t,!1)}};yu=vo;vu=Gn;var Z0={usingClientEntryPoint:!1,Events:[bs,sa,Ul,gu,xu,vo]},Ia={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J0={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:on.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Su(e),e===null?null:e.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||K0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bs.isDisabled&&Bs.supportsFiber)try{Fl=Bs.inject(J0),Kt=Bs}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0;Pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Co(t))throw Error(q(200));return X0(e,t,null,n)};Pt.createRoot=function(e,t){if(!Co(e))throw Error(q(299));var n=!1,a="",s=em;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ko(e,1,!1,null,null,n,!1,a,s),e[sn]=t.current,rs(e.nodeType===8?e.parentNode:e),new No(t)};Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=Su(t),e=e===null?null:e.stateNode,e};Pt.flushSync=function(e){return Gn(e)};Pt.hydrate=function(e,t,n){if(!Zl(t))throw Error(q(200));return Jl(null,e,t,!0,n)};Pt.hydrateRoot=function(e,t,n){if(!Co(e))throw Error(q(405));var a=n!=null&&n.hydratedSources||null,s=!1,r="",i=em;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Jd(t,null,e,1,n??null,s,!1,r,i),e[sn]=t.current,rs(e),a)for(e=0;e<a.length;e++)n=a[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ql(t)};Pt.render=function(e,t,n){if(!Zl(t))throw Error(q(200));return Jl(null,e,t,!1,n)};Pt.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(q(40));return e._reactRootContainer?(Gn(function(){Jl(null,null,e,!1,function(){e._reactRootContainer=null,e[sn]=null})}),!0):!1};Pt.unstable_batchedUpdates=vo;Pt.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Zl(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Jl(e,t,n,!1,a)};Pt.version="18.3.1-next-f1338f8080-20240426";function tm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tm)}catch(e){console.error(e)}}tm(),tu.exports=Pt;var ep=tu.exports,nm,zc=ep;nm=zc.createRoot,zc.hydrateRoot;function tp(){const e={},t=[],n={id:"start",name:"Origin",description:"The beginning of your journey",type:"travel",position:{x:0,y:0},connections:["str_path_1","dex_path_1","int_path_1","vit_path_1"],requirements:[],stats:{},cost:0,maxRank:1};return e[n.id]=n,np(e),ap(e),sp(e),lp(e),rp(e,t),ip(e,t),op(e,t),cp(e,t),{nodes:e,startingNode:"start",clusters:t}}function np(e){[{id:"str_path_1",name:"Might",description:"+5 Strength",type:"travel",position:{x:100,y:0},connections:["start","str_small_1"],requirements:["start"],stats:{strength:5}},{id:"str_small_1",name:"Physical Power",description:"+3% increased damage",type:"small",position:{x:150,y:0},connections:["str_path_1","str_notable_1"],requirements:["str_path_1"],stats:{damage:.03}},{id:"str_notable_1",name:"Berserker's Rage",description:"+25% increased damage, +50 health",type:"notable",position:{x:200,y:0},connections:["str_small_1","str_path_2"],requirements:["str_small_1"],stats:{damage:.25,health:50}},{id:"str_path_2",name:"Fortitude",description:"+8 Strength",type:"travel",position:{x:250,y:0},connections:["str_notable_1","str_small_2"],requirements:["str_notable_1"],stats:{strength:8}},{id:"str_small_2",name:"Weapon Mastery",description:"+5% attack speed",type:"small",position:{x:300,y:0},connections:["str_path_2","str_notable_2"],requirements:["str_path_2"],stats:{attackSpeed:.05}},{id:"str_notable_2",name:"Devastating Blows",description:"+50% critical strike damage, +10% critical chance",type:"notable",position:{x:350,y:0},connections:["str_small_2"],requirements:["str_small_2"],stats:{critChance:.1},skillModifiers:[{skillId:"all",property:"criticalDamage",value:.5,type:"additive"}]}].forEach(n=>{const a={...n,cost:n.type==="notable"?3:1,maxRank:1,skillModifiers:n.skillModifiers};e[a.id]=a})}function ap(e){[{id:"dex_path_1",name:"Agility",description:"+5 Dexterity",type:"travel",position:{x:0,y:100},connections:["start","dex_small_1"],requirements:["start"],stats:{dexterity:5}},{id:"dex_small_1",name:"Swift Strikes",description:"+4% attack speed",type:"small",position:{x:0,y:150},connections:["dex_path_1","dex_notable_1"],requirements:["dex_path_1"],stats:{attackSpeed:.04}},{id:"dex_notable_1",name:"Precision",description:"+15% critical chance, +8% dodge chance",type:"notable",position:{x:0,y:200},connections:["dex_small_1","dex_path_2"],requirements:["dex_small_1"],stats:{critChance:.15,dodgeChance:.08}},{id:"dex_path_2",name:"Finesse",description:"+8 Dexterity",type:"travel",position:{x:0,y:250},connections:["dex_notable_1","dex_small_2"],requirements:["dex_notable_1"],stats:{dexterity:8}},{id:"dex_small_2",name:"Evasion",description:"+3% dodge chance",type:"small",position:{x:0,y:300},connections:["dex_path_2","dex_notable_2"],requirements:["dex_path_2"],stats:{dodgeChance:.03}},{id:"dex_notable_2",name:"Shadow Dancer",description:"+20% dodge chance, +15% attack speed",type:"notable",position:{x:0,y:350},connections:["dex_small_2"],requirements:["dex_small_2"],stats:{dodgeChance:.2,attackSpeed:.15}}].forEach(n=>{const a={...n,cost:n.type==="notable"?3:1,maxRank:1};e[a.id]=a})}function sp(e){[{id:"int_path_1",name:"Wisdom",description:"+5 Intelligence",type:"travel",position:{x:-100,y:0},connections:["start","int_small_1"],requirements:["start"],stats:{intelligence:5}},{id:"int_small_1",name:"Mental Clarity",description:"+15 mana, +0.5 mana regeneration",type:"small",position:{x:-150,y:0},connections:["int_path_1","int_notable_1"],requirements:["int_path_1"],stats:{mana:15,manaRegen:.5}},{id:"int_notable_1",name:"Arcane Mastery",description:"+50 mana, +25% spell damage",type:"notable",position:{x:-200,y:0},connections:["int_small_1","int_path_2"],requirements:["int_small_1"],stats:{mana:50},skillModifiers:[{skillId:"fireball",property:"damage",value:.25,type:"additive"},{skillId:"lightning_bolt",property:"damage",value:.25,type:"additive"},{skillId:"ice_shard",property:"damage",value:.25,type:"additive"}]},{id:"int_path_2",name:"Scholarly Pursuit",description:"+8 Intelligence",type:"travel",position:{x:-250,y:0},connections:["int_notable_1","int_small_2"],requirements:["int_notable_1"],stats:{intelligence:8}},{id:"int_small_2",name:"Mana Efficiency",description:"+1.0 mana regeneration",type:"small",position:{x:-300,y:0},connections:["int_path_2","int_notable_2"],requirements:["int_path_2"],stats:{manaRegen:1}},{id:"int_notable_2",name:"Elemental Convergence",description:"+50% area of effect for spells",type:"notable",position:{x:-350,y:0},connections:["int_small_2"],requirements:["int_small_2"],stats:{},skillModifiers:[{skillId:"fireball",property:"area",value:.5,type:"additive"},{skillId:"lightning_bolt",property:"area",value:.5,type:"additive"},{skillId:"ice_shard",property:"area",value:.5,type:"additive"}]}].forEach(n=>{const a={...n,cost:n.type==="notable"?3:1,maxRank:1};e[a.id]=a})}function lp(e){[{id:"vit_path_1",name:"Constitution",description:"+5 Vitality",type:"travel",position:{x:0,y:-100},connections:["start","vit_small_1"],requirements:["start"],stats:{vitality:5}},{id:"vit_small_1",name:"Robust Health",description:"+25 health",type:"small",position:{x:0,y:-150},connections:["vit_path_1","vit_notable_1"],requirements:["vit_path_1"],stats:{health:25}},{id:"vit_notable_1",name:"Iron Will",description:"+100 health, +5 armor",type:"notable",position:{x:0,y:-200},connections:["vit_small_1","vit_path_2"],requirements:["vit_small_1"],stats:{health:100,armor:5}},{id:"vit_path_2",name:"Endurance",description:"+8 Vitality",type:"travel",position:{x:0,y:-250},connections:["vit_notable_1","vit_small_2"],requirements:["vit_notable_1"],stats:{vitality:8}},{id:"vit_small_2",name:"Regeneration",description:"+1.0 health regeneration",type:"small",position:{x:0,y:-300},connections:["vit_path_2","vit_notable_2"],requirements:["vit_path_2"],stats:{healthRegen:1}},{id:"vit_notable_2",name:"Undying",description:"+200 health, +3% life steal",type:"notable",position:{x:0,y:-350},connections:["vit_small_2"],requirements:["vit_small_2"],stats:{health:200,lifeSteal:.03}}].forEach(n=>{const a={...n,cost:n.type==="notable"?3:1,maxRank:1};e[a.id]=a})}function rp(e,t){const n={id:"combat_cluster_1",name:"Weapon Expertise",centerPosition:{x:200,y:-150},nodeIds:[],theme:"combat"};[{id:"combat_travel_1",name:"Weapon Training",description:"+3% attack speed",type:"travel",position:{x:150,y:-100},connections:["str_path_1","combat_small_1"],requirements:["str_path_1"],stats:{attackSpeed:.03}},{id:"combat_small_1",name:"Blade Dance",description:"+2% critical chance",type:"small",position:{x:180,y:-130},connections:["combat_travel_1","combat_notable_1"],requirements:["combat_travel_1"],stats:{critChance:.02}},{id:"combat_notable_1",name:"Master of Arms",description:"+20% attack speed, +10% critical chance",type:"notable",position:{x:200,y:-150},connections:["combat_small_1","combat_small_2"],requirements:["combat_small_1"],stats:{attackSpeed:.2,critChance:.1}},{id:"combat_small_2",name:"Lethal Precision",description:"+3% critical chance",type:"small",position:{x:220,y:-170},connections:["combat_notable_1"],requirements:["combat_notable_1"],stats:{critChance:.03}}].forEach(s=>{const r={...s,cost:s.type==="notable"?3:1,maxRank:1};e[r.id]=r,n.nodeIds.push(r.id)}),t.push(n)}function ip(e,t){const n={id:"defense_cluster_1",name:"Fortification",centerPosition:{x:-150,y:150},nodeIds:[],theme:"defense"};[{id:"defense_travel_1",name:"Shield Training",description:"+2 armor",type:"travel",position:{x:-100,y:100},connections:["vit_path_1","defense_small_1"],requirements:["vit_path_1"],stats:{armor:2}},{id:"defense_small_1",name:"Thick Skin",description:"+3 armor",type:"small",position:{x:-130,y:130},connections:["defense_travel_1","defense_notable_1"],requirements:["defense_travel_1"],stats:{armor:3}},{id:"defense_notable_1",name:"Fortress",description:"+15 armor, +5% block chance",type:"notable",position:{x:-150,y:150},connections:["defense_small_1","defense_small_2"],requirements:["defense_small_1"],stats:{armor:15,blockChance:.05}},{id:"defense_small_2",name:"Damage Reduction",description:"+5 armor",type:"small",position:{x:-170,y:170},connections:["defense_notable_1"],requirements:["defense_notable_1"],stats:{armor:5}}].forEach(s=>{const r={...s,cost:s.type==="notable"?3:1,maxRank:1};e[r.id]=r,n.nodeIds.push(r.id)}),t.push(n)}function op(e,t){const n={id:"magic_cluster_1",name:"Elemental Mastery",centerPosition:{x:-200,y:-150},nodeIds:[],theme:"magic"};[{id:"magic_travel_1",name:"Elemental Affinity",description:"+10 mana",type:"travel",position:{x:-150,y:-100},connections:["int_path_1","magic_small_1"],requirements:["int_path_1"],stats:{mana:10}},{id:"magic_small_1",name:"Spell Power",description:"+5% spell damage",type:"small",position:{x:-180,y:-130},connections:["magic_travel_1","magic_notable_1"],requirements:["magic_travel_1"],stats:{},skillModifiers:[{skillId:"fireball",property:"damage",value:.05,type:"additive"},{skillId:"lightning_bolt",property:"damage",value:.05,type:"additive"},{skillId:"ice_shard",property:"damage",value:.05,type:"additive"}]},{id:"magic_notable_1",name:"Elemental Overload",description:"+30% spell damage, -10% mana costs",type:"notable",position:{x:-200,y:-150},connections:["magic_small_1","magic_small_2"],requirements:["magic_small_1"],stats:{},skillModifiers:[{skillId:"fireball",property:"damage",value:.3,type:"additive"},{skillId:"lightning_bolt",property:"damage",value:.3,type:"additive"},{skillId:"ice_shard",property:"damage",value:.3,type:"additive"},{skillId:"fireball",property:"manaCost",value:-.1,type:"additive"},{skillId:"lightning_bolt",property:"manaCost",value:-.1,type:"additive"},{skillId:"ice_shard",property:"manaCost",value:-.1,type:"additive"}]},{id:"magic_small_2",name:"Mana Efficiency",description:"+0.8 mana regeneration",type:"small",position:{x:-220,y:-170},connections:["magic_notable_1"],requirements:["magic_notable_1"],stats:{manaRegen:.8}}].forEach(s=>{const r={...s,cost:s.type==="notable"?3:1,maxRank:1};e[r.id]=r,n.nodeIds.push(r.id)}),t.push(n)}function cp(e,t){const n={id:"utility_cluster_1",name:"Fortune's Favor",centerPosition:{x:150,y:150},nodeIds:[],theme:"utility"};[{id:"utility_travel_1",name:"Lucky Find",description:"+2 luck",type:"travel",position:{x:100,y:100},connections:["dex_path_1","utility_small_1"],requirements:["dex_path_1"],stats:{luck:2}},{id:"utility_small_1",name:"Treasure Hunter",description:"+8% magic find",type:"small",position:{x:130,y:130},connections:["utility_travel_1","utility_notable_1"],requirements:["utility_travel_1"],stats:{magicFind:.08}},{id:"utility_notable_1",name:"Master Looter",description:"+25% magic find, +20% gold find",type:"notable",position:{x:150,y:150},connections:["utility_small_1","utility_small_2"],requirements:["utility_small_1"],stats:{magicFind:.25,goldFind:.2}},{id:"utility_small_2",name:"Experience Gain",description:"+12% experience bonus",type:"small",position:{x:170,y:170},connections:["utility_notable_1"],requirements:["utility_notable_1"],stats:{experienceBonus:.12}}].forEach(s=>{const r={...s,cost:s.type==="notable"?3:1,maxRank:1};e[r.id]=r,n.nodeIds.push(r.id)}),t.push(n)}function Oa(e,t,n){const a=t.nodes[e];return!a||n.allocatedNodes[e]>=a.maxRank||n.availablePoints<a.cost?!1:a.requirements.length===0?!0:a.requirements.every(s=>n.allocatedNodes[s]>0)}function up(e,t,n){if(!Oa(e,t,n))return n;const a=t.nodes[e],s={...n};return s.allocatedNodes={...s.allocatedNodes,[e]:(s.allocatedNodes[e]||0)+1},s.availablePoints-=a.cost,s}function er(e,t){const n={};return Object.entries(t.allocatedNodes).forEach(([a,s])=>{if(s>0){const r=e.nodes[a];r&&Object.entries(r.stats).forEach(([i,c])=>{typeof c=="number"&&(n[i]=(n[i]||0)+c*s)})}}),n}function dp(e,t){const n=[];return Object.entries(t.allocatedNodes).forEach(([a,s])=>{if(s>0){const r=e.nodes[a];r&&r.skillModifiers&&r.skillModifiers.forEach(i=>{n.push({...i,value:i.value*s})})}}),n}const Yt={modifiers:new Map,damageWithStats:new Map},Rl=5e3;function am(e){const t=e.supportGems.map(n=>`${n.id}-${n.level}-${n.rarity}`).sort().join("|");return`${e.id}-${e.level}-${e.rarity}-${t}`}function mp(e,t){var s;const n=am(e),a=`${t.level||1}-${t.dps||2}-${JSON.stringify(t.attributes||{})}-${((s=t.calculatedStats)==null?void 0:s.damage)||0}`;return`${n}-${a}`}const _i={Normal:{rarity:"Normal",damageBonus:0,qualityBonus:0,colorVariant:"#ffffff"},Magic:{rarity:"Magic",damageBonus:10,qualityBonus:5,colorVariant:"#8888ff",areaOfEffectBonus:5,projectileDamageBonus:8,manaCostReduction:5},Rare:{rarity:"Rare",damageBonus:25,qualityBonus:10,colorVariant:"#ffff88",areaOfEffectBonus:12,areaDamageBonus:15,projectileDamageBonus:20,physicalDamageBonus:18,elementalDamageBonus:18,attackSpeedBonus:10,castSpeedBonus:10,criticalChanceBonus:8,durationBonus:15,manaCostReduction:10},Unique:{rarity:"Unique",damageBonus:50,qualityBonus:20,colorVariant:"#ff8800",areaOfEffectBonus:25,areaDamageBonus:30,projectileDamageBonus:40,physicalDamageBonus:35,elementalDamageBonus:35,attackSpeedBonus:20,castSpeedBonus:20,criticalChanceBonus:15,durationBonus:25,manaCostReduction:20}},Mo=[{id:"whirlwind",name:"Whirlwind",description:"Continuous spinning attack that hits all nearby enemies. Inspired by Path of Exile's Cyclone skill - channels automatically during combat with area scaling and movement.",type:"active",category:"attack",tags:["Attack","AoE","Channeling","Melee","Physical"],maxLevel:20,unlockLevel:0,skillPointCost:0,manaCost:0,cooldown:0,icon:"",rarity:"Normal",quality:0,scaling:{baseDamage:12,damagePerLevel:2.5,baseManaCost:0,manaCostPerLevel:0,baseCooldown:0,cooldownReductionPerLevel:0,baseArea:2.5,areaPerLevel:.15}},{id:"fireball",name:"Fireball",description:"Launches a fiery projectile that explodes on impact, dealing fire damage to nearby enemies.",type:"active",category:"spell",tags:["Spell","Projectile","AoE","Fire"],maxLevel:20,unlockLevel:0,skillPointCost:0,manaCost:0,cooldown:0,icon:"",rarity:"Normal",quality:0,scaling:{baseDamage:15,damagePerLevel:3,baseManaCost:0,manaCostPerLevel:0,baseCooldown:0,cooldownReductionPerLevel:0,baseArea:1.5,areaPerLevel:.1,baseRange:300,rangePerLevel:10}}],sm=[{id:"increased_damage",name:"Increased Damage",description:"Increases damage of supported skills",tags:["Attack","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:15,isPercentage:!0,description:"+15% more damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:15,valuePerLevel:2}},{id:"increased_area",name:"Increased Area of Effect",description:"Increases area of effect of supported skills",tags:["AoE"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"area",value:25,isPercentage:!0,description:"+25% increased area of effect"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:3}},{id:"multiple_projectiles",name:"Multiple Projectiles",description:"Supported skills fire additional projectiles",tags:["Projectile"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"projectiles",value:2,isPercentage:!1,description:"+2 additional projectiles"},{type:"damage",value:-20,isPercentage:!0,description:"-20% less damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:2,valuePerLevel:.2}},{id:"faster_casting",name:"Faster Casting",description:"Reduces cooldown of supported skills",tags:["Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"cooldown",value:-25,isPercentage:!0,description:"-25% reduced cooldown"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:1.5}},{id:"reduced_mana",name:"Reduced Mana Cost",description:"Reduces mana cost of supported skills",tags:["Attack","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"manaCost",value:-30,isPercentage:!0,description:"-30% reduced mana cost"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:30,valuePerLevel:1}},{id:"added_fire_damage",name:"Added Fire Damage Support",description:"Adds fire damage to supported skills.",tags:["Support","Fire"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:10,damageType:"fire",tags:["Fire"]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:10,valuePerLevel:2}},{id:"elemental_focus",name:"Elemental Focus Support",description:"Increases elemental damage but prevents critical strikes.",tags:["Support","Elemental"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage_multiplier",value:1.5,tags:["Fire","Cold","Lightning"]},{type:"critical_chance_multiplier",value:0,tags:[]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:1.5,valuePerLevel:.02}},{id:"melee_physical_damage",name:"Melee Physical Damage Support",description:"Increases physical damage of supported melee skills.",tags:["Support","Melee","Physical"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage_multiplier",value:1.4,tags:["Physical","Melee"]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:1.4,valuePerLevel:.015}},{id:"spell_echo",name:"Spell Echo Support",description:"Supported spells repeat an additional time with reduced damage.",tags:["Support","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:-25,isPercentage:!0,description:"-25% less damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:.5}},{id:"concentrated_effect",name:"Concentrated Effect Support",description:"Reduces area of effect but increases area damage.",tags:["Support","AoE"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"area",value:-30,isPercentage:!0,description:"-30% reduced area of effect"},{type:"damage",value:60,isPercentage:!0,description:"+60% more area damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:60,valuePerLevel:2}},{id:"pierce",name:"Pierce Support",description:"Projectiles pierce through enemies, hitting multiple targets.",tags:["Support","Projectile"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:10,isPercentage:!0,description:"+10% more projectile damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:10,valuePerLevel:1}},{id:"minion_damage",name:"Minion Damage Support",description:"Increases damage dealt by minions.",tags:["Support","Minion"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:50,isPercentage:!0,description:"+50% increased minion damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:50,valuePerLevel:3}},{id:"added_cold_damage",name:"Added Cold Damage Support",description:"Adds cold damage to supported skills.",tags:["Support","Cold"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:8,damageType:"cold",tags:["Cold"]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:8,valuePerLevel:1.5}},{id:"added_lightning_damage",name:"Added Lightning Damage Support",description:"Adds lightning damage to supported skills.",tags:["Support","Lightning"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:12,damageType:"lightning",tags:["Lightning"]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:12,valuePerLevel:2}},{id:"increased_duration",name:"Increased Duration Support",description:"Increases the duration of supported skills.",tags:["Support","Duration"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"duration",value:40,isPercentage:!0,description:"+40% increased skill duration"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:40,valuePerLevel:2}},{id:"critical_strike_multiplier",name:"Critical Strike Multiplier Support",description:"Increases critical strike multiplier of supported skills.",tags:["Support","Critical"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"critical_chance_multiplier",value:1.5,tags:[]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:1.5,valuePerLevel:.02}}];function fp(e,t){return t.some(n=>e.tags.includes(n))}function pp(e,t){return t.tags.length===0?!0:fp(e,t.tags)}function hp(e){return e.tags.join(", ")}function Po(e){return!e.scaling||!e.scaling.baseDamage?0:Math.floor(e.scaling.baseDamage+(e.scaling.damagePerLevel||0)*(e.level-1))}function lm(e){if(!e.scaling)return e.manaCost||0;const t=e.scaling.baseManaCost||e.manaCost,n=e.scaling.manaCostPerLevel||0;return Math.max(1,Math.floor(t+n*(e.level-1)))}function rm(e){if(!e.scaling)return e.cooldown||0;const t=e.scaling.baseCooldown||e.cooldown,n=e.scaling.cooldownReductionPerLevel||0;return Math.max(0,Math.floor(t-n*(e.level-1)))}function gp(e){return!e.scaling||!e.scaling.baseArea?0:e.scaling.baseArea+(e.scaling.areaPerLevel||0)*(e.level-1)}function xp(e){return!e.scaling||!e.scaling.baseDuration?0:(e.scaling.baseDuration+(e.scaling.durationPerLevel||0)*(e.level-1))/1e3}function Ri(e){return!e.scaling||!e.scaling.baseRange?0:e.scaling.baseRange+(e.scaling.rangePerLevel||0)*(e.level-1)}function yp(e){var t;return e.scaling?Math.floor(e.scaling.baseValue+e.scaling.valuePerLevel*(e.level-1)):((t=e.modifiers[0])==null?void 0:t.value)||0}function im(e){if(!e.scaling)return e.modifiers;const t=yp(e);return e.modifiers.map(n=>({...n,value:n.type===e.modifiers[0].type?n.value<0?-t:t:n.value,description:n.type===e.modifiers[0].type?`${n.value<0?"-":"+"}${t}${n.isPercentage?"%":""} ${n.description?n.description.split(" ").slice(-2).join(" "):""}`:n.description}))}function vp(e){const t=am(e),n=Date.now(),a=Yt.modifiers.get(t);if(a&&n-a.timestamp<Rl)return a.result;const s=bp(e);if(Yt.modifiers.set(t,{result:s,timestamp:n}),Yt.modifiers.size>100)for(const[r,i]of Yt.modifiers.entries())n-i.timestamp>Rl&&Yt.modifiers.delete(r);return s}function bp(e){if(!e||!e.scaling)return console.warn("applyModifiersToSkill: skill or skill.scaling is undefined",e),{damage:0,manaCost:0,cooldown:0,area:1,duration:0,projectileCount:1};let t=Po(e),n=lm(e),a=rm(e),s=gp(e),r=xp(e),i=1;const c=_i[e.rarity];return c&&(t*=1+c.damageBonus/100,e.tags.includes("AoE")&&(c.areaOfEffectBonus&&(s*=1+c.areaOfEffectBonus/100),c.areaDamageBonus&&(t*=1+c.areaDamageBonus/100)),e.tags.includes("Projectile")&&c.projectileDamageBonus&&(t*=1+c.projectileDamageBonus/100),e.tags.includes("Physical")&&c.physicalDamageBonus&&(t*=1+c.physicalDamageBonus/100),(e.tags.includes("Fire")||e.tags.includes("Cold")||e.tags.includes("Lightning"))&&c.elementalDamageBonus&&(t*=1+c.elementalDamageBonus/100),e.tags.includes("Critical")&&c.criticalChanceBonus&&(t*=1+c.criticalChanceBonus/100),e.tags.includes("Duration")&&c.durationBonus&&(r*=1+c.durationBonus/100),c.manaCostReduction&&(n*=1-c.manaCostReduction/100)),e.supportGems.forEach(u=>{const d=_i[u.rarity];d&&(t*=1+d.damageBonus/200,u.tags.includes("AoE")&&d.areaOfEffectBonus&&(s*=1+d.areaOfEffectBonus/200),u.tags.includes("Projectile")&&d.projectileDamageBonus&&(t*=1+d.projectileDamageBonus/200),d.manaCostReduction&&(n*=1-d.manaCostReduction/200)),im(u).forEach(v=>{switch(v.type){case"damage":v.isPercentage?t*=1+v.value/100:t+=v.value;break;case"manaCost":v.isPercentage?n*=1+v.value/100:n+=v.value;break;case"cooldown":v.isPercentage?a*=1+v.value/100:a+=v.value;break;case"area":v.isPercentage?s*=1+v.value/100:s+=v.value;break;case"duration":v.isPercentage?r*=1+v.value/100:r+=v.value;break;case"projectiles":i+=v.value;break}})}),{damage:Math.round(t),manaCost:Math.round(n),cooldown:Math.round(a),area:Math.round(s*100)/100,duration:Math.round(r),projectileCount:Math.max(1,Math.round(i))}}function $n(e){return vp(e)}function wp(e,t){const n=mp(e,t),a=Date.now(),s=Yt.damageWithStats.get(n);if(s&&a-s.timestamp<Rl)return s.result;const r=Sp(e,t);if(Yt.damageWithStats.set(n,{result:r,timestamp:a}),Yt.damageWithStats.size>100)for(const[i,c]of Yt.damageWithStats.entries())a-c.timestamp>Rl&&Yt.damageWithStats.delete(i);return r}function Sp(e,t){const n=$n(e);let a=n.damage;const s=t.attributes||{},r=s.strength||10,i=s.intelligence||10,c=s.dexterity||10,u=s.luck||5,d=t.dps||t.baseDps||2;t.critChance;const f=e.tags.includes("Physical")||["power_strike","cleave","ground_slam","whirlwind"].includes(e.id),v=e.tags.includes("Fire")||e.tags.includes("Lightning")||e.tags.includes("Cold")||["fireball","lightning_bolt","ice_shard","chain_lightning","meteor","frost_nova"].includes(e.id),b=e.tags.includes("Projectile")||["fireball","lightning_bolt","ice_shard","poison_arrow"].includes(e.id),m=d*.3;if(a+=m,f){const x=Math.max(0,r-10)*1.5;a+=x,console.log(`Physical skill ${e.name}: +${x.toFixed(1)} damage from ${r} strength`)}if(v){const x=Math.max(0,i-10)*1.8;a+=x,console.log(`Elemental skill ${e.name}: +${x.toFixed(1)} damage from ${i} intelligence`)}if(b){const x=Math.max(0,c-10)*1.2;a+=x,console.log(`Projectile skill ${e.name}: +${x.toFixed(1)} damage from ${c} dexterity`)}const p=Math.max(0,c-10)*.5;a+=p;const S=Math.max(0,u-5)*.8;if(a+=S,t.calculatedStats&&t.calculatedStats.damage){const x=t.calculatedStats.damage*.4;a+=x,console.log(`Skill ${e.name}: +${x.toFixed(1)} damage from equipment`)}if(t.passiveTreeData&&t.passiveTreeState){const x=er(t.passiveTreeData,t.passiveTreeState);if(x.damage){const h=x.damage*.5;a+=h,console.log(`Skill ${e.name}: +${h.toFixed(1)} damage from passive tree`)}}const g=(t.level||1)*.5;return a+=g,console.log(`Final damage calculation for ${e.name}: ${Math.floor(a)} (base: ${n.damage}, with stats: ${a.toFixed(1)})`),Math.floor(Math.max(1,a))}function xt(e,t){return wp(e,t)}function Eo(e){return{...e,level:1,isUnlocked:!0,isEquipped:["fireball","lightning_bolt","ice_shard","whirlwind"].includes(e.id),supportGems:[]}}function om(e){return{...e,level:1,isUnlocked:!0}}function sl(){const e=new Array(6).fill(null);return["fireball","lightning_bolt","ice_shard","whirlwind"].forEach((n,a)=>{const s=Mo.find(r=>r.id===n);s&&a<e.length&&(e[a]={...Eo(s),isEquipped:!0})}),{slots:e,maxSlots:6}}function Vn(e){return Math.floor(e*1.5)+1}function Ll(e,t){if(e.level>=e.maxLevel)return!1;const n=Vn(e.level);return t>=n}function pn(e){return e.skillPointCost}const kp=[{id:"monster_life_1",name:"Feral",description:"Monsters have 25% increased Life",type:"prefix",tier:1,effects:{monsterLife:25},requiredLevel:1},{id:"monster_life_2",name:"Savage",description:"Monsters have 50% increased Life",type:"prefix",tier:3,effects:{monsterLife:50},requiredLevel:20},{id:"monster_damage_1",name:"Brutal",description:"Monsters deal 20% increased Damage",type:"prefix",tier:2,effects:{monsterDamage:20},requiredLevel:10},{id:"monster_speed_1",name:"Fleet",description:"Monsters have 15% increased Movement and Attack Speed",type:"prefix",tier:2,effects:{monsterSpeed:15},requiredLevel:15},{id:"elemental_damage_1",name:"Burning",description:"Monsters deal 30% additional Fire Damage",type:"prefix",tier:3,effects:{elementalDamage:30},requiredLevel:25},{id:"item_quantity_1",name:"of Bounty",description:"20% increased Item Quantity",type:"suffix",tier:1,effects:{itemQuantity:20},requiredLevel:1},{id:"item_rarity_1",name:"of Fortune",description:"30% increased Item Rarity",type:"suffix",tier:2,effects:{itemRarity:30},requiredLevel:10},{id:"pack_size_1",name:"of Hordes",description:"25% increased Pack Size",type:"suffix",tier:3,effects:{packSize:25},requiredLevel:20},{id:"experience_1",name:"of Learning",description:"15% increased Experience Gain",type:"suffix",tier:2,effects:{experienceGain:15},requiredLevel:5}],cm=[{id:"beach",name:"Beach",description:"A sandy coastline overrun by corrupted sea creatures.",tier:1,baseLevel:68,layout:"linear",theme:"desert",baseRewards:[{type:"equipment",quantity:2,minLevel:68,maxLevel:72},{type:"experience",quantity:1e3}],completionTime:180},{id:"graveyard",name:"Graveyard",description:"An ancient cemetery where the dead refuse to rest.",tier:2,baseLevel:69,layout:"maze",theme:"corrupted",baseRewards:[{type:"equipment",quantity:3,minLevel:69,maxLevel:73},{type:"skillGem",quantity:1,rarity:"Normal"},{type:"experience",quantity:1200}],completionTime:240},{id:"dungeon",name:"Dungeon",description:"A dark underground complex filled with ancient horrors.",tier:3,baseLevel:70,layout:"branching",theme:"dungeon",baseRewards:[{type:"equipment",quantity:3,minLevel:70,maxLevel:74},{type:"supportGem",quantity:1,rarity:"Normal"},{type:"experience",quantity:1500}],completionTime:300},{id:"volcano",name:"Volcano",description:"A treacherous volcanic peak with rivers of molten lava.",tier:6,baseLevel:73,layout:"circular",theme:"volcanic",baseRewards:[{type:"equipment",quantity:4,minLevel:73,maxLevel:77},{type:"skillGem",quantity:1,rarity:"Magic"},{type:"experience",quantity:2500}],completionTime:420,unlockRequirement:{completedMaps:["beach","graveyard","dungeon"],playerLevel:50}},{id:"glacier",name:"Glacier",description:"A frozen wasteland where ice elementals roam freely.",tier:8,baseLevel:75,layout:"arena",theme:"ice",baseRewards:[{type:"equipment",quantity:5,minLevel:75,maxLevel:79},{type:"supportGem",quantity:2,rarity:"Magic"},{type:"experience",quantity:3500}],completionTime:480,unlockRequirement:{completedMaps:["volcano"],playerLevel:60}},{id:"shaper_realm",name:"Shaper's Realm",description:"A reality-bending dimension where the laws of physics break down.",tier:14,baseLevel:81,layout:"maze",theme:"celestial",baseRewards:[{type:"equipment",quantity:8,minLevel:81,maxLevel:85,rarity:"Rare",guaranteed:!0},{type:"skillGem",quantity:2,rarity:"Rare"},{type:"supportGem",quantity:2,rarity:"Rare"},{type:"experience",quantity:8e3}],completionTime:720,unlockRequirement:{completedMaps:["glacier"],playerLevel:80}},{id:"elder_sanctum",name:"Elder Sanctum",description:"The twisted domain of an ancient cosmic entity.",tier:16,baseLevel:83,layout:"arena",theme:"corrupted",baseRewards:[{type:"equipment",quantity:10,minLevel:83,maxLevel:87,rarity:"Unique",guaranteed:!0},{type:"skillGem",quantity:3,rarity:"Unique"},{type:"supportGem",quantity:3,rarity:"Unique"},{type:"experience",quantity:15e3}],completionTime:900,unlockRequirement:{completedMaps:["shaper_realm"],playerLevel:90}}];function jp(e,t="Normal"){const n={...e,rarity:t,modifiers:[],isCompleted:!1,timesCompleted:0},a=Np(t),s=kp.filter(r=>r.requiredLevel<=n.baseLevel);for(let r=0;r<a;r++){const i=s[Math.floor(Math.random()*s.length)];n.modifiers.find(c=>c.id===i.id)||n.modifiers.push(i)}return n}function Np(e){switch(e){case"Normal":return 0;case"Magic":return Math.floor(Math.random()*2)+1;case"Rare":return Math.floor(Math.random()*3)+3;case"Unique":return Math.floor(Math.random()*2)+4}}function Cp(e){let t=e.tier*10+e.baseLevel;return e.modifiers.forEach(n=>{t+=n.tier*5,n.effects.monsterLife&&(t+=n.effects.monsterLife/5),n.effects.monsterDamage&&(t+=n.effects.monsterDamage/3),n.effects.monsterSpeed&&(t+=n.effects.monsterSpeed/4)}),Math.floor(t)}function Mp(e){const t=[...e.baseRewards];return e.modifiers.forEach(n=>{n.effects.itemQuantity&&t.forEach(a=>{a.type==="equipment"&&(a.quantity=Math.floor(a.quantity*(1+n.effects.itemQuantity/100)))}),n.effects.experienceGain&&t.forEach(a=>{a.type==="experience"&&(a.quantity=Math.floor(a.quantity*(1+n.effects.experienceGain/100)))})}),t}function um(e,t,n){return e.unlockRequirement?!(e.unlockRequirement.playerLevel&&t<e.unlockRequirement.playerLevel||e.unlockRequirement.completedMaps&&!e.unlockRequirement.completedMaps.every(s=>n.includes(s))):!0}function Pp(e,t){return cm.filter(n=>um(n,e,t)).map(n=>jp(n,"Normal"))}function Ep(){return{availableMaps:Pp(1,[]),completedMaps:[],mapStash:[],atlasProgress:{tier:1,completedCount:0,totalCount:cm.length,bonusObjectives:0}}}const Xt={stoneStats:new Map,totalStats:new Map},Tl=3e4;function dm(e,t){var s,r;const n=((r=(s=e.sockets)==null?void 0:s.stones)==null?void 0:r.filter(i=>i!==null))||[],a=t.filter(i=>n.includes(i.id));return JSON.stringify({equipmentId:e.id,socketedStones:a.map(i=>({id:i.id,baseStats:i.baseStats,affixes:i.affixes}))})}function _p(e,t){return JSON.stringify({equipmentId:e.id,baseStats:e.baseStats,affixes:e.affixes,stoneKey:dm(e,t)})}function Rp(e,t){const n=dm(e,t),a=Date.now(),s=Xt.stoneStats.get(n);if(s&&a-s.timestamp<Tl)return s.result;const r=Lp(e,t);if(Xt.stoneStats.set(n,{result:r,timestamp:a}),Xt.stoneStats.size>50)for(const[i,c]of Xt.stoneStats.entries())a-c.timestamp>Tl&&Xt.stoneStats.delete(i);return r}function Lp(e,t){var s;const n={};return(s=e.sockets)!=null&&s.stones&&e.sockets.stones.filter(r=>r!==null).map(r=>t.find(i=>i.id===r)).filter(r=>r!==void 0).forEach(r=>{Object.entries(r.baseStats).forEach(([i,c])=>{if(typeof c=="number"){const u=n[i];typeof u=="number"&&typeof c=="number"?n[i]=u+c:typeof c=="number"&&(n[i]=c)}}),r.affixes.forEach(i=>{const c=i.stat,u=i.value;if(typeof u=="number"){const d=n[c];typeof d=="number"&&typeof u=="number"?n[c]=d+u:typeof u=="number"&&(n[c]=u)}})}),n}function Ss(e,t){return Rp(e,t)}function Tp(e,t){const n=_p(e,t),a=Date.now(),s=Xt.totalStats.get(n);if(s&&a-s.timestamp<Tl)return s.result;const r=Dp(e,t);if(Xt.totalStats.set(n,{result:r,timestamp:a}),Xt.totalStats.size>50)for(const[i,c]of Xt.totalStats.entries())a-c.timestamp>Tl&&Xt.totalStats.delete(i);return r}function Dp(e,t){const n={};Object.entries(e.baseStats).forEach(([s,r])=>{typeof r=="number"&&(n[s]=r)}),e.affixes.forEach(s=>{const r=s.stat,i=s.value;if(typeof i=="number"){const c=n[r];typeof c=="number"?n[r]=c+i:n[r]=i}});const a=Ss(e,t);return Object.entries(a).forEach(([s,r])=>{if(typeof r=="number"){const i=n[s];typeof i=="number"&&typeof r=="number"?n[s]=i+r:typeof r=="number"&&(n[s]=r)}}),n}function Ap(e,t){return Tp(e,t)}function Kn(e,t){return["critChance","dodgeChance","blockChance","lifeSteal","manaSteal","fireResistance","coldResistance","lightningResistance","chaosResistance","iceResistance","poisonResistance","spellResistance","stunResistance","increasedDamage","increasedAttackSpeed","increasedCastSpeed","increasedMovementSpeed","increasedCritMultiplier","attackSpeed","goldFind","magicFind","experienceBonus","armorPenetration","damageMultiplier","stunChance","damageReduction","movementSpeed","reflectDamage","doubleDropChance","cleaveChance","cooldownReduction"].includes(e)?`${(t*100).toFixed(1)}%`:Math.round(t*100)/100+""}function Qn(e){return{damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",critChance:"Critical Strike Chance",critMultiplier:"Critical Strike Multiplier",increasedCritMultiplier:"Increased Critical Strike Multiplier",attackSpeed:"Attack Speed",increasedAttackSpeed:"Increased Attack Speed",castSpeed:"Cast Speed",increasedCastSpeed:"Increased Cast Speed",increasedDamage:"Increased Damage",dodgeChance:"Dodge Chance",blockChance:"Block Chance",fireResistance:"Fire Resistance",coldResistance:"Cold Resistance",lightningResistance:"Lightning Resistance",chaosResistance:"Chaos Resistance",iceResistance:"Ice Resistance",poisonResistance:"Poison Resistance",spellResistance:"Spell Resistance",stunResistance:"Stun Resistance",damageReduction:"Damage Reduction",reflectDamage:"Reflect Damage",fireDamage:"Fire Damage",iceDamage:"Ice Damage",lightningDamage:"Lightning Damage",poisonDamage:"Poison Damage",armorPenetration:"Armor Penetration",damageMultiplier:"Damage Multiplier",stunChance:"Stun Chance",lifeSteal:"Life Steal",manaSteal:"Mana Steal",movementSpeed:"Movement Speed",increasedMovementSpeed:"Increased Movement Speed",doubleDropChance:"Double Drop Chance",cleaveChance:"Cleave Chance",cooldownReduction:"Cooldown Reduction",thorns:"Thorns Damage",maxHp:"Maximum Life",maxMana:"Maximum Mana",hpRegen:"Life Regeneration",manaRegen:"Mana Regeneration",healthRegen:"Health Regeneration"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}function tr(){const e=Mo.map(s=>Eo(s)),t=sm.map(s=>om(s)),n=sl();return["fireball","lightning_bolt","ice_shard","whirlwind"].forEach(s=>{const r=e.find(i=>i.id===s);r&&(r.isEquipped=!0)}),{level:10,xp:0,nextLevelXp:100,hp:120,maxHp:120,mana:50,maxMana:50,dps:2,baseDps:2,gold:0,skillPoints:20,attributePoints:5,attributes:{strength:10,dexterity:10,intelligence:10,vitality:10,luck:5},characterModel:"human_male",gender:"male",race:"human",cosmetics:{},equipment:{},equipped:void 0,calculatedStats:{},skillGems:e,supportGems:t,skillBar:n,mapDevice:Ep(),passiveTreeState:{allocatedNodes:{start:1},availablePoints:10},passiveTreeData:tp(),stones:[],attackSpeed:1,projectileSpeed:1,skills:{},armor:0,critChance:0,dodgeChance:0,lifeSteal:0,blockChance:0,healthRegen:1,manaRegen:2}}function mm(e){if(!e)return tr();const t={...e};(typeof t.gold!="number"||isNaN(t.gold))&&(console.warn("Player gold was invalid:",t.gold,"resetting to 0"),t.gold=0),(!t.equipment||typeof t.equipment!="object")&&(console.warn("Player equipment was invalid:",t.equipment,"resetting to empty object"),t.equipment={}),t.calculatedStats={},t.baseDps=2,t.maxHp=120,t.maxMana=50,t.dps=2,t.armor=0,t.critChance=0,t.dodgeChance=0,t.blockChance=0,t.lifeSteal=0,t.attackSpeed=1,t.healthRegen=0,t.manaRegen=0,t.projectileSpeed=1;const n=t.attributes??{},a=(n.strength??10)-10;t.baseDps+=Math.max(0,a),t.maxHp+=a*2;const s=(n.dexterity??10)-10;t.critChance+=s*.005,t.dodgeChance+=s*.003;const r=(n.intelligence??10)-10;t.maxMana+=r,t.manaRegen+=r*.2;const i=(n.vitality??10)-10;t.maxHp+=i*3,t.healthRegen+=i*.1;const c=(n.luck??5)-5;t.critChance+=c*.005;const u=t.skills??{};u.strength&&(t.baseDps+=u.strength),u.precision&&(t.critChance=(t.critChance??0)+u.precision*.01),u.agility&&(t.dodgeChance=(t.dodgeChance??0)+u.agility*.01),u.resilience&&(t.armor=(t.armor??0)+u.resilience);let d={};if(t.equipment){const h={};Object.values(t.equipment).forEach(y=>{if(y){for(const[w,P]of Object.entries(y.baseStats))typeof P=="number"&&w!=="resistance"&&(h[w]=(h[w]??0)+P);for(const w of y.affixes)w.stat!=="resistance"&&(h[w.stat]=(h[w.stat]??0)+w.value);if(y.sockets&&t.stones){const w=Ss(y,t.stones);for(const[P,D]of Object.entries(w))typeof D=="number"&&P!=="resistance"&&(h[P]=(h[P]??0)+D)}}}),d=h}let f={};t.passiveTreeData&&t.passiveTreeState&&(f=er(t.passiveTreeData,t.passiveTreeState));const v=d.damage??0,b=f.damage??0;t.dps=t.baseDps+v+b,t.armor+=(d.armor??0)+(f.armor??0),t.maxHp+=(d.health??0)+(f.health??0),t.maxMana+=(d.mana??0)+(f.mana??0),t.critChance+=(d.critChance??0)+(f.critChance??0),t.dodgeChance+=(d.dodgeChance??0)+(f.dodgeChance??0),t.blockChance+=(d.blockChance??0)+(f.blockChance??0),t.lifeSteal+=(d.lifeSteal??0)+(f.lifeSteal??0),t.attackSpeed+=(d.attackSpeed??0)+(f.attackSpeed??0),t.healthRegen+=(d.healthRegen??0)+(f.healthRegen??0),t.manaRegen+=(d.manaRegen??0)+(f.manaRegen??0);const m=(t.attributes.strength??0)+(d.strength??0)+(f.strength??0),p=(t.attributes.dexterity??0)+(d.dexterity??0)+(f.dexterity??0),S=(t.attributes.intelligence??0)+(d.intelligence??0)+(f.intelligence??0),g=(t.attributes.vitality??0)+(d.vitality??0)+(f.vitality??0),x=(t.attributes.luck??0)+(d.luck??0)+(f.luck??0);if(m&&(t.baseDps+=m,t.maxHp+=m*2),p&&(t.critChance+=p*.005,t.dodgeChance+=p*.003),S&&(t.maxMana+=S,t.manaRegen+=S*.2),g&&(t.maxHp+=g*3,t.healthRegen+=g*.1),x&&(t.critChance+=x*.005),t.calculatedStats={...d},t.equipped&&(t.dps+=t.equipped.power??0,t.equipped.extras))for(const h of t.equipped.extras)switch(h.key){case"hp":t.maxHp+=h.val;break;case"dps":t.dps+=h.val;break;case"critChance":t.critChance+=h.val;break;case"dodgeChance":t.dodgeChance+=h.val;break;case"lifeSteal":t.lifeSteal+=h.val;break;case"armor":t.armor+=h.val;break;case"projectileSpeed":t.projectileSpeed+=h.val;break}return t.hp=Math.min(t.hp,t.maxHp),t.mana=Math.min(t.mana,t.maxMana),t.critChance=Math.max(0,Math.min(1,t.critChance??0)),t.dodgeChance=Math.max(0,Math.min(.95,t.dodgeChance??0)),t.blockChance=Math.max(0,Math.min(.75,t.blockChance??0)),t.lifeSteal=Math.max(0,Math.min(1,t.lifeSteal??0)),t}function fm(e){var t;console.log("=== Stone Stats Integration Test ==="),console.log("Player stones:",((t=e.stones)==null?void 0:t.length)||0),e.equipment&&Object.entries(e.equipment).forEach(([n,a])=>{var s;if((s=a==null?void 0:a.sockets)!=null&&s.stones){const r=a.sockets.stones.filter(i=>i!==null);if(console.log(`${n}: ${a.name} has ${r.length} socketed stones`),r.length>0&&e.stones){const i=Ss(a,e.stones);console.log("  Stone stats:",i)}}}),console.log("Final player stats:"),console.log(`  DPS: ${e.dps}`),console.log(`  Armor: ${e.armor}`),console.log(`  Max HP: ${e.maxHp}`),console.log(`  Crit Chance: ${e.critChance}`),console.log("=== End Test ===")}typeof window<"u"&&(window.testStoneStats=fm);const Fc={melee:["Goblin","Orc Warrior","Skeleton Fighter","Bandit","Troll"],ranged:["Goblin Archer","Orc Hunter","Skeleton Archer","Bandit Marksman","Dark Elf"],caster:["Goblin Shaman","Orc Mage","Necromancer","Dark Wizard","Lich"],tank:["Orc Guardian","Stone Golem","Armored Knight","Shield Bearer","Iron Colossus"],assassin:["Shadow Rogue","Dark Assassin","Poison Blade","Night Stalker","Void Walker"],boss:["Goblin King","Orc Chieftain","Lich Lord","Dragon","Demon Lord"],beast:["Dire Wolf","Giant Spider","Cave Bear","Savage Boar","Frost Tiger"],undead:["Zombie","Wraith","Skeleton Mage","Banshee","Death Knight"],elemental:["Fire Elemental","Ice Elemental","Lightning Elemental","Earth Elemental","Wind Elemental"],demon:["Imp","Hellhound","Succubus","Balrog","Pit Lord"],construct:["Clockwork Golem","Crystal Guardian","Steam Automaton","Arcane Sentinel","War Machine"]},qs=["berserker","precise","regeneration","shield","poison","freeze","lightning"];let Ip=1;function Bc(e,t){const n=Fc[e]||Fc.melee;return`${n[Math.floor(Math.random()*n.length)]} L${t}`}function $p(e){const n=Math.floor(e/10)*.01;return Math.random()<.02+n}function zp(e,t){if(t)return qs[Math.floor(Math.random()*qs.length)];if(Math.random()<.2)switch(e){case"melee":return Math.random()<.6?"berserker":"precise";case"ranged":return Math.random()<.7?"precise":"poison";case"caster":return Math.random()<.5?"lightning":"freeze";case"tank":return Math.random()<.8?"shield":"regeneration";case"assassin":return Math.random()<.6?"poison":"precise";default:return qs[Math.floor(Math.random()*qs.length)]}}function ll(e,t){let n;const a=$p(e);if(a)n="boss";else if(t)n=t;else{const d=Math.random();d>.95?n="construct":d>.9?n="demon":d>.85?n="elemental":d>.8?n="undead":d>.75?n="beast":d>.7?n="assassin":d>.6?n="tank":d>.45?n="caster":d>.25?n="ranged":n="melee"}let s=25+e*12,r=0;switch(n){case"tank":s=Math.floor(s*1.8),r=Math.floor(e*.3);break;case"boss":s=Math.floor(s*3.5),r=Math.floor(e*.5);break;case"assassin":s=Math.floor(s*.7);break;case"caster":s=Math.floor(s*.9);break;case"beast":s=Math.floor(s*1.3),r=Math.floor(e*.1);break;case"undead":s=Math.floor(s*1.1);break;case"elemental":s=Math.floor(s*1.2),r=Math.floor(e*.2);break;case"demon":s=Math.floor(s*1.4),r=Math.floor(e*.15);break;case"construct":s=Math.floor(s*1.6),r=Math.floor(e*.4);break}const i=zp(n,a),c=Bc(a?"boss":n,e);return{id:"e"+Ip++,name:a?` ${c}`:c,level:e,maxHp:s,hp:s,type:n,specialAbility:i,isBoss:a,state:"alive",alpha:1,statusEffects:[],armor:r}}const hs={sword:{name:"Sword",slot:"weapon",baseStats:{damage:8},damageTypes:["physical","fire","ice","lightning"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/swords.svg",spriteId:"iron_sword",layer:2}},axe:{name:"Axe",slot:"weapon",baseStats:{damage:12,critChance:.05},damageTypes:["physical","fire"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/axes.svg",spriteId:"iron_axe",layer:2}},mace:{name:"Mace",slot:"weapon",baseStats:{damage:10,armor:2},damageTypes:["physical","lightning"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/maces.svg",spriteId:"iron_mace",layer:2}},dagger:{name:"Dagger",slot:"weapon",baseStats:{damage:6,critChance:.1,attackSpeed:.3},damageTypes:["physical","poison"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/daggers.svg",spriteId:"iron_dagger",layer:2}},bow:{name:"Bow",slot:"weapon",baseStats:{damage:9,critChance:.08},damageTypes:["physical","fire","ice","poison"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/bows.svg",spriteId:"wooden_bow",layer:2}},crossbow:{name:"Crossbow",slot:"weapon",baseStats:{damage:14,critChance:.06},damageTypes:["physical","lightning"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/crossbows.svg",spriteId:"light_crossbow",layer:2}},staff:{name:"Staff",slot:"weapon",baseStats:{damage:7,mana:20,manaRegen:2},damageTypes:["fire","ice","lightning"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/staves.svg",spriteId:"wooden_staff",layer:2}},wand:{name:"Wand",slot:"weapon",baseStats:{damage:5,mana:15,critChance:.07},damageTypes:["fire","ice","lightning","poison"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/wands.svg",spriteId:"basic_wand",layer:2}}},Dl={helm:{name:"Helm",slot:"helm",baseStats:{armor:5,health:15},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/helm.svg",spriteId:"leather_helm",layer:1}},chest:{name:"Chest Armor",slot:"chest",baseStats:{armor:12,health:30},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/chest.svg",spriteId:"leather_chest",layer:1}},legs:{name:"Leg Armor",slot:"legs",baseStats:{armor:8,health:20},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/legs.svg",spriteId:"leather_legs",layer:1}},boots:{name:"Boots",slot:"boots",baseStats:{armor:4,dodgeChance:.02},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/boots.svg",spriteId:"leather_boots",layer:1}},gloves:{name:"Gloves",slot:"gloves",baseStats:{armor:3,attackSpeed:.1},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/gloves.svg",spriteId:"leather_gloves",layer:1}},shield:{name:"Shield",slot:"offhand",baseStats:{armor:8,blockChance:.15},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/shields.svg",spriteId:"wooden_shield",layer:0}}},Al={ring:{name:"Ring",slot:"ring",baseStats:{},requirements:{}},amulet:{name:"Amulet",slot:"amulet",baseStats:{},requirements:{}},belt:{name:"Belt",slot:"belt",baseStats:{health:10},requirements:{}}},Fp=[{name:"of Power",stat:"damage",value:3,tier:1,weight:100},{name:"of Might",stat:"damage",value:6,tier:2,weight:80},{name:"of Devastation",stat:"damage",value:10,tier:3,weight:40},{name:"of Destruction",stat:"damage",value:15,tier:4,weight:20},{name:"of Annihilation",stat:"damage",value:22,tier:5,weight:10},{name:"of Precision",stat:"critChance",value:.03,tier:1,weight:80},{name:"of Lethality",stat:"critChance",value:.06,tier:2,weight:60},{name:"of Execution",stat:"critChance",value:.1,tier:3,weight:30},{name:"of the Assassin",stat:"critChance",value:.15,tier:4,weight:15},{name:"of Perfect Strike",stat:"critChance",value:.22,tier:5,weight:8},{name:"of Sharpness",stat:"critMultiplier",value:.2,tier:1,weight:70},{name:"of Brutality",stat:"critMultiplier",value:.4,tier:2,weight:50},{name:"of Savagery",stat:"critMultiplier",value:.7,tier:3,weight:25},{name:"of Massacre",stat:"critMultiplier",value:1,tier:4,weight:12},{name:"of Swiftness",stat:"attackSpeed",value:.1,tier:1,weight:70},{name:"of Haste",stat:"attackSpeed",value:.2,tier:2,weight:50},{name:"of Lightning",stat:"attackSpeed",value:.35,tier:3,weight:25},{name:"of the Storm",stat:"attackSpeed",value:.5,tier:4,weight:12},{name:"of Time Warp",stat:"attackSpeed",value:.75,tier:5,weight:6},{name:"of Vampirism",stat:"lifeSteal",value:.03,tier:1,weight:60},{name:"of Blood",stat:"lifeSteal",value:.06,tier:2,weight:40},{name:"of the Vampire",stat:"lifeSteal",value:.1,tier:3,weight:20},{name:"of Soul Drain",stat:"lifeSteal",value:.15,tier:4,weight:10},{name:"of Mana Burn",stat:"manaSteal",value:.05,tier:1,weight:50},{name:"of Energy Drain",stat:"manaSteal",value:.1,tier:2,weight:30},{name:"of the Void",stat:"manaSteal",value:.18,tier:3,weight:15},{name:"of the Warrior",stat:"strength",value:5,tier:1,weight:60},{name:"of the Berserker",stat:"strength",value:10,tier:2,weight:40},{name:"of the Champion",stat:"strength",value:18,tier:3,weight:20},{name:"of the Hunter",stat:"dexterity",value:5,tier:1,weight:60},{name:"of the Ranger",stat:"dexterity",value:10,tier:2,weight:40},{name:"of the Marksman",stat:"dexterity",value:18,tier:3,weight:20},{name:"of Thorns",stat:"thorns",value:3,tier:1,weight:40},{name:"of Spikes",stat:"thorns",value:7,tier:2,weight:25},{name:"of Retaliation",stat:"thorns",value:12,tier:3,weight:12},{name:"of Flames",stat:"fireDamage",value:5,tier:1,weight:50},{name:"of Inferno",stat:"fireDamage",value:12,tier:2,weight:30},{name:"of the Phoenix",stat:"fireDamage",value:22,tier:3,weight:15},{name:"of Frost",stat:"iceDamage",value:4,tier:1,weight:50},{name:"of Winter",stat:"iceDamage",value:10,tier:2,weight:30},{name:"of the Glacier",stat:"iceDamage",value:18,tier:3,weight:15},{name:"of Sparks",stat:"lightningDamage",value:6,tier:1,weight:50},{name:"of Thunder",stat:"lightningDamage",value:14,tier:2,weight:30},{name:"of the Storm Lord",stat:"lightningDamage",value:25,tier:3,weight:15},{name:"of Venom",stat:"poisonDamage",value:3,tier:1,weight:45},{name:"of Toxicity",stat:"poisonDamage",value:8,tier:2,weight:25},{name:"of the Serpent",stat:"poisonDamage",value:15,tier:3,weight:12},{name:"of Piercing",stat:"armorPenetration",value:.1,tier:1,weight:40},{name:"of Sundering",stat:"armorPenetration",value:.2,tier:2,weight:25},{name:"of Devastation",stat:"armorPenetration",value:.35,tier:3,weight:12},{name:"of Amplification",stat:"damageMultiplier",value:.08,tier:1,weight:35},{name:"of Enhancement",stat:"damageMultiplier",value:.15,tier:2,weight:20},{name:"of Supremacy",stat:"damageMultiplier",value:.25,tier:3,weight:10},{name:"of Stunning",stat:"stunChance",value:.05,tier:1,weight:30},{name:"of Paralysis",stat:"stunChance",value:.1,tier:2,weight:18},{name:"of Incapacitation",stat:"stunChance",value:.18,tier:3,weight:8}],Bp=[{name:"of Protection",stat:"armor",value:2,tier:1,weight:100},{name:"of Defense",stat:"armor",value:4,tier:2,weight:80},{name:"of the Fortress",stat:"armor",value:7,tier:3,weight:40},{name:"of the Bastion",stat:"armor",value:12,tier:4,weight:20},{name:"of Invincibility",stat:"armor",value:18,tier:5,weight:10},{name:"of Vitality",stat:"health",value:15,tier:1,weight:90},{name:"of Life",stat:"health",value:30,tier:2,weight:70},{name:"of the Titan",stat:"health",value:50,tier:3,weight:35},{name:"of the Colossus",stat:"health",value:80,tier:4,weight:18},{name:"of Immortality",stat:"health",value:120,tier:5,weight:8},{name:"of Evasion",stat:"dodgeChance",value:.02,tier:1,weight:70},{name:"of Agility",stat:"dodgeChance",value:.04,tier:2,weight:50},{name:"of the Wind",stat:"dodgeChance",value:.07,tier:3,weight:25},{name:"of the Phantom",stat:"dodgeChance",value:.12,tier:4,weight:12},{name:"of Ethereal Form",stat:"dodgeChance",value:.18,tier:5,weight:6},{name:"of Blocking",stat:"blockChance",value:.05,tier:1,weight:60},{name:"of the Shield",stat:"blockChance",value:.1,tier:2,weight:40},{name:"of the Guardian",stat:"blockChance",value:.16,tier:3,weight:20},{name:"of Perfect Defense",stat:"blockChance",value:.25,tier:4,weight:10},{name:"of Regeneration",stat:"healthRegen",value:1,tier:1,weight:60},{name:"of Recovery",stat:"healthRegen",value:2,tier:2,weight:40},{name:"of Renewal",stat:"healthRegen",value:4,tier:3,weight:20},{name:"of Restoration",stat:"healthRegen",value:7,tier:4,weight:10},{name:"of Eternal Life",stat:"healthRegen",value:12,tier:5,weight:5},{name:"of Mana",stat:"mana",value:20,tier:1,weight:70},{name:"of the Mind",stat:"mana",value:40,tier:2,weight:50},{name:"of Arcane Power",stat:"mana",value:70,tier:3,weight:25},{name:"of the Archmage",stat:"mana",value:110,tier:4,weight:12},{name:"of Meditation",stat:"manaRegen",value:1,tier:1,weight:50},{name:"of Focus",stat:"manaRegen",value:2,tier:2,weight:30},{name:"of Enlightenment",stat:"manaRegen",value:4,tier:3,weight:15},{name:"of the Bear",stat:"vitality",value:5,tier:1,weight:70},{name:"of the Ox",stat:"vitality",value:10,tier:2,weight:50},{name:"of the Mountain",stat:"vitality",value:18,tier:3,weight:25},{name:"of the Sage",stat:"intelligence",value:5,tier:1,weight:60},{name:"of the Scholar",stat:"intelligence",value:10,tier:2,weight:40},{name:"of the Wizard",stat:"intelligence",value:18,tier:3,weight:20},{name:"of Spines",stat:"thorns",value:2,tier:1,weight:50},{name:"of Barbs",stat:"thorns",value:5,tier:2,weight:30},{name:"of the Hedgehog",stat:"thorns",value:9,tier:3,weight:15},{name:"of Fire Resistance",stat:"fireResistance",value:.1,tier:1,weight:60},{name:"of Fire Immunity",stat:"fireResistance",value:.2,tier:2,weight:35},{name:"of the Salamander",stat:"fireResistance",value:.35,tier:3,weight:18},{name:"of Cold Resistance",stat:"iceResistance",value:.1,tier:1,weight:60},{name:"of Cold Immunity",stat:"iceResistance",value:.2,tier:2,weight:35},{name:"of the Yeti",stat:"iceResistance",value:.35,tier:3,weight:18},{name:"of Lightning Resistance",stat:"lightningResistance",value:.1,tier:1,weight:60},{name:"of Lightning Immunity",stat:"lightningResistance",value:.2,tier:2,weight:35},{name:"of the Storm Walker",stat:"lightningResistance",value:.35,tier:3,weight:18},{name:"of Poison Resistance",stat:"poisonResistance",value:.12,tier:1,weight:55},{name:"of Poison Immunity",stat:"poisonResistance",value:.25,tier:2,weight:30},{name:"of the Antidote",stat:"poisonResistance",value:.4,tier:3,weight:15},{name:"of Absorption",stat:"damageReduction",value:.05,tier:1,weight:45},{name:"of Mitigation",stat:"damageReduction",value:.1,tier:2,weight:25},{name:"of the Fortress",stat:"damageReduction",value:.18,tier:3,weight:12},{name:"of Swiftness",stat:"movementSpeed",value:.1,tier:1,weight:40},{name:"of Haste",stat:"movementSpeed",value:.2,tier:2,weight:25},{name:"of the Wind Walker",stat:"movementSpeed",value:.35,tier:3,weight:12},{name:"of Reflection",stat:"reflectDamage",value:.1,tier:1,weight:35},{name:"of Mirroring",stat:"reflectDamage",value:.2,tier:2,weight:20},{name:"of the Mirror Shield",stat:"reflectDamage",value:.35,tier:3,weight:10}],qp=[{name:"of Strength",stat:"strength",value:3,tier:1,weight:80},{name:"of Great Strength",stat:"strength",value:6,tier:2,weight:60},{name:"of Mighty Strength",stat:"strength",value:10,tier:3,weight:30},{name:"of Legendary Strength",stat:"strength",value:16,tier:4,weight:15},{name:"of Divine Strength",stat:"strength",value:25,tier:5,weight:8},{name:"of Dexterity",stat:"dexterity",value:3,tier:1,weight:80},{name:"of Great Dexterity",stat:"dexterity",value:6,tier:2,weight:60},{name:"of Swift Dexterity",stat:"dexterity",value:10,tier:3,weight:30},{name:"of Perfect Dexterity",stat:"dexterity",value:16,tier:4,weight:15},{name:"of Divine Grace",stat:"dexterity",value:25,tier:5,weight:8},{name:"of Intelligence",stat:"intelligence",value:3,tier:1,weight:80},{name:"of Great Intelligence",stat:"intelligence",value:6,tier:2,weight:60},{name:"of Brilliant Intelligence",stat:"intelligence",value:10,tier:3,weight:30},{name:"of Genius Intelligence",stat:"intelligence",value:16,tier:4,weight:15},{name:"of Omniscience",stat:"intelligence",value:25,tier:5,weight:8},{name:"of Vitality",stat:"vitality",value:3,tier:1,weight:80},{name:"of Great Vitality",stat:"vitality",value:6,tier:2,weight:60},{name:"of Robust Vitality",stat:"vitality",value:10,tier:3,weight:30},{name:"of Supreme Vitality",stat:"vitality",value:16,tier:4,weight:15},{name:"of Eternal Vitality",stat:"vitality",value:25,tier:5,weight:8},{name:"of Luck",stat:"luck",value:3,tier:1,weight:60},{name:"of Good Luck",stat:"luck",value:6,tier:2,weight:40},{name:"of Great Luck",stat:"luck",value:10,tier:3,weight:20},{name:"of Incredible Luck",stat:"luck",value:16,tier:4,weight:10},{name:"of Divine Fortune",stat:"luck",value:25,tier:5,weight:5},{name:"of Fortune",stat:"goldFind",value:.15,tier:1,weight:70},{name:"of Wealth",stat:"goldFind",value:.25,tier:2,weight:50},{name:"of Greed",stat:"goldFind",value:.4,tier:3,weight:25},{name:"of Avarice",stat:"goldFind",value:.6,tier:4,weight:12},{name:"of Midas",stat:"goldFind",value:.85,tier:5,weight:6},{name:"of Discovery",stat:"magicFind",value:.1,tier:1,weight:60},{name:"of Finding",stat:"magicFind",value:.2,tier:2,weight:40},{name:"of the Seeker",stat:"magicFind",value:.35,tier:3,weight:20},{name:"of the Treasure Hunter",stat:"magicFind",value:.55,tier:4,weight:10},{name:"of the Artifact Finder",stat:"magicFind",value:.8,tier:5,weight:5},{name:"of Learning",stat:"experienceBonus",value:.1,tier:1,weight:50},{name:"of Wisdom",stat:"experienceBonus",value:.2,tier:2,weight:30},{name:"of the Scholar",stat:"experienceBonus",value:.35,tier:3,weight:15},{name:"of the Master",stat:"experienceBonus",value:.55,tier:4,weight:8},{name:"of Enlightenment",stat:"experienceBonus",value:.8,tier:5,weight:4},{name:"of Accuracy",stat:"critChance",value:.02,tier:1,weight:60},{name:"of Keen Eye",stat:"critChance",value:.04,tier:2,weight:40},{name:"of Eagle Eye",stat:"critChance",value:.07,tier:3,weight:20},{name:"of Nimbleness",stat:"dodgeChance",value:.02,tier:1,weight:50},{name:"of Quickness",stat:"dodgeChance",value:.04,tier:2,weight:30},{name:"of the Cat",stat:"dodgeChance",value:.07,tier:3,weight:15},{name:"of Alacrity",stat:"attackSpeed",value:.08,tier:1,weight:40},{name:"of Velocity",stat:"attackSpeed",value:.15,tier:2,weight:25},{name:"of the Cheetah",stat:"attackSpeed",value:.25,tier:3,weight:12},{name:"of Health",stat:"health",value:25,tier:1,weight:70},{name:"of Greater Health",stat:"health",value:50,tier:2,weight:50},{name:"of Superior Health",stat:"health",value:85,tier:3,weight:25},{name:"of Energy",stat:"mana",value:30,tier:1,weight:60},{name:"of Greater Energy",stat:"mana",value:60,tier:2,weight:40},{name:"of Superior Energy",stat:"mana",value:100,tier:3,weight:20},{name:"of Vampirism",stat:"lifeSteal",value:.03,tier:1,weight:35},{name:"of Blood Drinking",stat:"lifeSteal",value:.06,tier:2,weight:20},{name:"of the Vampire Lord",stat:"lifeSteal",value:.12,tier:3,weight:10},{name:"of Siphoning",stat:"manaSteal",value:.04,tier:1,weight:30},{name:"of Draining",stat:"manaSteal",value:.08,tier:2,weight:18},{name:"of the Lich",stat:"manaSteal",value:.15,tier:3,weight:8},{name:"of Doubling",stat:"doubleDropChance",value:.05,tier:2,weight:15},{name:"of Multiplication",stat:"doubleDropChance",value:.1,tier:3,weight:8},{name:"of the Twins",stat:"doubleDropChance",value:.18,tier:4,weight:4},{name:"of Cleaving",stat:"cleaveChance",value:.1,tier:2,weight:20},{name:"of Splitting",stat:"cleaveChance",value:.2,tier:3,weight:12},{name:"of the Berserker",stat:"cleaveChance",value:.35,tier:4,weight:6},{name:"of Warding",stat:"spellResistance",value:.1,tier:1,weight:40},{name:"of Protection",stat:"spellResistance",value:.2,tier:2,weight:25},{name:"of the Arcane Shield",stat:"spellResistance",value:.35,tier:3,weight:12},{name:"of Stability",stat:"stunResistance",value:.15,tier:1,weight:35},{name:"of Steadfastness",stat:"stunResistance",value:.3,tier:2,weight:20},{name:"of the Immovable",stat:"stunResistance",value:.5,tier:3,weight:10},{name:"of Time Dilation",stat:"cooldownReduction",value:.1,tier:3,weight:8},{name:"of Temporal Mastery",stat:"cooldownReduction",value:.2,tier:4,weight:4},{name:"of the Time Lord",stat:"cooldownReduction",value:.35,tier:5,weight:2}],gs={Common:{color:"#9CA3AF",affixCount:[0,1],statMultiplier:1},Magic:{color:"#3B82F6",affixCount:[2,2],statMultiplier:1.3},Rare:{color:"#EAB308",affixCount:[3,3],statMultiplier:1.6},Legendary:{color:"#F97316",affixCount:[4,4],statMultiplier:2.2},Mythic:{color:"#E879F9",affixCount:[5,5],statMultiplier:2.8},Divine:{color:"#06B6D4",affixCount:[6,6],statMultiplier:3.5},Unique:{color:"#A855F7",affixCount:[6,6],statMultiplier:3,hasSpecialModifiers:!0}},Ie=[{id:"weapon",name:"Weapon",icon:"",category:"weapon"},{id:"offhand",name:"Off-Hand",icon:"",category:"armor"},{id:"helm",name:"Helm",icon:"",category:"armor"},{id:"chest",name:"Chest",icon:"",category:"armor"},{id:"gloves",name:"Gloves",icon:"",category:"armor"},{id:"legs",name:"Legs",icon:"",category:"armor"},{id:"boots",name:"Boots",icon:"",category:"armor"},{id:"belt",name:"Belt",icon:"",category:"accessory"},{id:"ring",name:"Ring",icon:"",category:"accessory"},{id:"amulet",name:"Amulet",icon:"",category:"accessory"}];function Op(e,t,n){if(!e.sockets)throw new Error("Equipment has no sockets");if(n<0||n>=e.sockets.maxSockets)throw new Error("Invalid socket index");if(e.sockets.stones[n]!==null)throw new Error("Socket is already occupied");const a={...e};return a.sockets={...e.sockets,stones:[...e.sockets.stones]},a.sockets.stones[n]=t,a}function Up(e,t){if(!e.sockets)throw new Error("Equipment has no sockets");if(t<0||t>=e.sockets.maxSockets)throw new Error("Invalid socket index");const n=e.sockets.stones[t],a={...e};return a.sockets={...e.sockets,stones:[...e.sockets.stones]},a.sockets.stones[t]=null,{equipment:a,removedStoneId:n}}function Gp(e){if(!e.sockets)return[];const t=[];for(let n=0;n<e.sockets.maxSockets;n++)e.sockets.stones[n]===null&&t.push(n);return t}function Vp(e){return Gp(e).length>0}const xa={ruby:{name:"Ruby",baseStats:{damage:3,strength:2},socketTypes:["weapon","ring","amulet"],primaryStat:"damage"},sapphire:{name:"Sapphire",baseStats:{mana:15,intelligence:2},socketTypes:["helm","chest","ring","amulet"],primaryStat:"mana"},emerald:{name:"Emerald",baseStats:{dexterity:3,critChance:.02},socketTypes:["weapon","gloves","ring","amulet"],primaryStat:"dexterity"},diamond:{name:"Diamond",baseStats:{armor:5,health:20},socketTypes:["helm","chest","legs","boots"],primaryStat:"armor"},topaz:{name:"Topaz",baseStats:{attackSpeed:.1,luck:2},socketTypes:["weapon","gloves","ring"],primaryStat:"attackSpeed"},amethyst:{name:"Amethyst",baseStats:{vitality:3,healthRegen:.5},socketTypes:["helm","chest","belt","amulet"],primaryStat:"vitality"},onyx:{name:"Onyx",baseStats:{dodgeChance:.02,dexterity:2},socketTypes:["boots","gloves","ring"],primaryStat:"dodgeChance"},opal:{name:"Opal",baseStats:{magicFind:.1,luck:3},socketTypes:["ring","amulet","belt"],primaryStat:"magicFind"},garnet:{name:"Garnet",baseStats:{lifeSteal:.03,strength:2},socketTypes:["weapon","ring","amulet"],primaryStat:"lifeSteal"},citrine:{name:"Citrine",baseStats:{goldFind:.15,luck:2},socketTypes:["ring","amulet","belt"],primaryStat:"goldFind"},peridot:{name:"Peridot",baseStats:{experienceBonus:.1,intelligence:2},socketTypes:["helm","amulet","ring"],primaryStat:"experienceBonus"},turquoise:{name:"Turquoise",baseStats:{manaRegen:.3,intelligence:2},socketTypes:["helm","chest","amulet"],primaryStat:"manaRegen"}},nr={Common:{color:"#9CA3AF",statMultiplier:1,affixCount:[0,1]},Rare:{color:"#3B82F6",statMultiplier:1.5,affixCount:[1,2]},Mythical:{color:"#8B5CF6",statMultiplier:2,affixCount:[2,3]},Divine:{color:"#F59E0B",statMultiplier:2.5,affixCount:[3,4]}},Wp=[{name:"of Power",stat:"damage",value:2,tier:1,weight:80},{name:"of Might",stat:"damage",value:4,tier:2,weight:60},{name:"of Force",stat:"damage",value:7,tier:3,weight:40},{name:"of Devastation",stat:"damage",value:12,tier:4,weight:20},{name:"of Life",stat:"health",value:15,tier:1,weight:80},{name:"of Vitality",stat:"health",value:30,tier:2,weight:60},{name:"of the Titan",stat:"health",value:50,tier:3,weight:40},{name:"of Immortality",stat:"health",value:80,tier:4,weight:20},{name:"of Energy",stat:"mana",value:20,tier:1,weight:70},{name:"of the Mind",stat:"mana",value:40,tier:2,weight:50},{name:"of Wisdom",stat:"mana",value:65,tier:3,weight:30},{name:"of the Arcane",stat:"mana",value:100,tier:4,weight:15},{name:"of Strength",stat:"strength",value:2,tier:1,weight:70},{name:"of Great Strength",stat:"strength",value:4,tier:2,weight:50},{name:"of Superior Strength",stat:"strength",value:7,tier:3,weight:30},{name:"of Dexterity",stat:"dexterity",value:2,tier:1,weight:70},{name:"of Great Dexterity",stat:"dexterity",value:4,tier:2,weight:50},{name:"of Superior Dexterity",stat:"dexterity",value:7,tier:3,weight:30},{name:"of Intelligence",stat:"intelligence",value:2,tier:1,weight:70},{name:"of Great Intelligence",stat:"intelligence",value:4,tier:2,weight:50},{name:"of Superior Intelligence",stat:"intelligence",value:7,tier:3,weight:30},{name:"of Vitality",stat:"vitality",value:2,tier:1,weight:70},{name:"of Great Vitality",stat:"vitality",value:4,tier:2,weight:50},{name:"of Superior Vitality",stat:"vitality",value:7,tier:3,weight:30},{name:"of Luck",stat:"luck",value:2,tier:1,weight:60},{name:"of Fortune",stat:"luck",value:4,tier:2,weight:40},{name:"of Destiny",stat:"luck",value:7,tier:3,weight:20},{name:"of Precision",stat:"critChance",value:.015,tier:1,weight:60},{name:"of Accuracy",stat:"critChance",value:.03,tier:2,weight:40},{name:"of the Eagle",stat:"critChance",value:.05,tier:3,weight:20},{name:"of Evasion",stat:"dodgeChance",value:.015,tier:1,weight:50},{name:"of the Cat",stat:"dodgeChance",value:.03,tier:2,weight:30},{name:"of the Shadow",stat:"dodgeChance",value:.05,tier:3,weight:15},{name:"of Speed",stat:"attackSpeed",value:.05,tier:1,weight:50},{name:"of Swiftness",stat:"attackSpeed",value:.1,tier:2,weight:30},{name:"of Lightning",stat:"attackSpeed",value:.18,tier:3,weight:15},{name:"of Wealth",stat:"goldFind",value:.1,tier:1,weight:40},{name:"of Greed",stat:"goldFind",value:.2,tier:2,weight:25},{name:"of Avarice",stat:"goldFind",value:.35,tier:3,weight:12},{name:"of Discovery",stat:"magicFind",value:.08,tier:1,weight:35},{name:"of Finding",stat:"magicFind",value:.15,tier:2,weight:20},{name:"of the Seeker",stat:"magicFind",value:.25,tier:3,weight:10},{name:"of Learning",stat:"experienceBonus",value:.08,tier:1,weight:30},{name:"of Wisdom",stat:"experienceBonus",value:.15,tier:2,weight:18},{name:"of the Scholar",stat:"experienceBonus",value:.25,tier:3,weight:8}];function Os(e){var t;return((t=nr[e])==null?void 0:t.color)||"#FFFFFF"}function Il(e){return{ruby:"",sapphire:"",emerald:"",diamond:"",topaz:"",amethyst:"",onyx:"",opal:"",garnet:"",citrine:"",peridot:"",turquoise:""}[e]||""}function pm(e){const t=e.reduce((a,s)=>a+s.weight,0);let n=Math.random()*t;for(const a of e)if(n-=a.weight,n<=0)return a;return e[e.length-1]}function Hp(e,t=!1){const a=[{item:"Common",weight:60},{item:"Rare",weight:25},{item:"Mythical",weight:12},{item:"Divine",weight:3}].map(({item:s,weight:r})=>{let i=r;return s==="Rare"&&(i+=Math.floor(e/10)),s==="Mythical"&&(i+=Math.floor(e/20)),s==="Divine"&&(i+=Math.floor(e/40)),t&&(s==="Rare"&&(i+=10),s==="Mythical"&&(i+=8),s==="Divine"&&(i+=5)),{item:s,weight:Math.max(1,i)}});return pm(a).item}function Yp(e){const t=Object.keys(xa);return t[Math.floor(Math.random()*t.length)]}function Xp(e,t,n){const a=nr[t];if(!a)return[];const[s,r]=a.affixCount,i=Math.floor(Math.random()*(r-s+1))+s;if(i===0)return[];const c=Math.min(4,Math.floor(n/15)+1),u=Wp.filter(m=>m.tier<=c),d=[],f=new Set,v=1+(n-1)*.03,b=a.statMultiplier;for(let m=0;m<i&&u.length>0;m++){const p=u.filter(w=>!f.has(w.stat));if(p.length===0)break;const S=pm(p),g=S.value*v*b,x={Common:.1,Rare:.15,Mythical:.18,Divine:.2}[t]||.1,h=1+(Math.random()*2-1)*x,y=g*h;d.push({...S,value:Math.max(.01,Math.round(y*100)/100)}),f.add(S.stat)}return d}function Kp(e,t,n,a){const s=xa[e],r=t!=="Common"?t:"";let i="";return a.length>0&&t!=="Common"&&(i=` ${a[0].name}`),`${r} ${s.name}${i}`.trim()}function Qp(e,t,n,a){var u;const s=((u=nr[n])==null?void 0:u.statMultiplier)||1;let r=0;e.damage&&(r+=e.damage*8),e.health&&(r+=e.health*.3),e.mana&&(r+=e.mana*.2),e.armor&&(r+=e.armor*4);const i=t.reduce((d,f)=>{const b={damage:8,armor:4,health:.3,mana:.2,critChance:150,dodgeChance:120,attackSpeed:30,strength:3,dexterity:3,intelligence:3,vitality:3,luck:5,goldFind:50,magicFind:80,experienceBonus:60}[f.stat]||1;return d+f.value*b},0),c=(r+i)*a*s*.5;return Math.max(1,Math.floor(c))}function hm(e,t=!1){const n=Hp(e,t),a=Yp(),s=xa[a],r=nr[n],i=1+(e-1)*.05,c=r.statMultiplier,u={};Object.keys(s.baseStats).forEach(m=>{const p=s.baseStats[m];if(typeof p=="number"){const S={Common:.1,Rare:.15,Mythical:.22,Divine:.25}[n]||.1,g=1+(Math.random()*2-1)*S,x=p*i*c*g;u[m]=Math.round(x*100)/100}});const d=Xp(a,n,e),f=Kp(a,n,e,d),v=Qp(u,d,n,e);return{id:$l(),name:f,type:a,rarity:n,level:e,baseStats:u,affixes:d,socketTypes:s.socketTypes,value:v}}function $l(){const e=Date.now().toString(36),t=Math.random().toString(36).substr(2,5);return`stone_${e}_${t}`}function Zp(e){const t=new Set;return e.map(n=>{let a=n.id;if(t.has(a)||!a.includes("_")||!a.startsWith("stone_"))for(a=$l();t.has(a);)a=$l();return t.add(a),{...n,id:a}})}function Jp(e){e.forEach(t=>{t.id=$l()})}function eh(e){return{Common:0,Magic:1,Rare:1,Legendary:2,Mythic:2,Divine:3,Unique:2}[e]||0}const Tr=new Map;function gm(e,t){let n;t&&Tr.has(t)?n=Tr.get(t):(n=e.reduce((s,r)=>s+r.weight,0),t&&Tr.set(t,n));let a=Math.random()*n;for(const s of e)if(a-=s.weight,a<=0)return s;return e[e.length-1]}const Dr=new Map;function th(e,t=!1){const n=`${e}-${t}`;let a;return Dr.has(n)?a=Dr.get(n):(a=[{item:"Common",weight:60},{item:"Magic",weight:25},{item:"Rare",weight:10},{item:"Legendary",weight:4},{item:"Mythic",weight:2},{item:"Divine",weight:1},{item:"Unique",weight:1}].map(({item:r,weight:i})=>{let c=i;return r==="Magic"&&(c+=Math.floor(e/5)),r==="Rare"&&(c+=Math.floor(e/10)),r==="Legendary"&&(c+=Math.floor(e/20)),r==="Mythic"&&(c+=Math.floor(e/40)),r==="Divine"&&(c+=Math.floor(e/60)),r==="Unique"&&(c+=Math.floor(e/50)),t&&(r==="Rare"&&(c+=5),r==="Legendary"&&(c+=4),r==="Mythic"&&(c+=3),r==="Divine"&&(c+=2),r==="Unique"&&(c+=3)),{item:r,weight:Math.max(1,c)}}),Dr.set(n,a)),gm(a,n).item}function nh(e){const t=Math.max(.3,.6-e*.01),n=Math.min(.5,.3+e*.008),a=Math.random();if(a<t){const s=Object.keys(hs);return{category:"weapon",type:s[Math.floor(Math.random()*s.length)]}}else if(a<t+n){const s=Object.keys(Dl);return{category:"armor",type:s[Math.floor(Math.random()*s.length)]}}else{const s=Object.keys(Al);return{category:"accessory",type:s[Math.floor(Math.random()*s.length)]}}}function ah(e,t){const a=hs[e].damageTypes,s={Common:.1,Magic:.3,Rare:.5,Legendary:.7,Mythic:.8,Divine:.9,Unique:.85}[t]||.1;if(Math.random()<s&&a.length>1){const r=a.filter(i=>i!=="physical");return r[Math.floor(Math.random()*r.length)]}return"physical"}function sh(e,t,n){const a=gs[t];if(!a)return[];const[s,r]=a.affixCount,i=Math.floor(Math.random()*(r-s+1))+s;if(i===0)return[];let c;switch(e){case"weapon":c=Fp;break;case"armor":c=Bp;break;case"accessory":c=qp;break}const u=Math.min(3,Math.floor(n/10)+1),d=c.filter(p=>p.tier<=u),f=[],v=new Set,b=1+(n-1)*.05,m=a.statMultiplier;for(let p=0;p<i&&d.length>0;p++){const S=d.filter(P=>!v.has(P.stat));if(S.length===0)break;const g=gm(S),x=g.value*b*m,h={Common:.1,Magic:.15,Rare:.18,Legendary:.22,Mythic:.25,Divine:.3,Unique:.28}[t]||.1,y=1+(Math.random()*2-1)*h,w=x*y;f.push({...g,value:Math.max(1,Math.round(w*100)/100)}),v.add(g.stat)}return f}function lh(e,t,n,a,s=[]){let r="";if(e in hs?r=hs[e].name:e in Dl?r=Dl[e].name:e in Al?r=Al[e].name:r="Unknown Item",a&&a!=="physical"){const d={fire:["Burning","Flaming","Infernal","Phoenix"],ice:["Frozen","Glacial","Frost","Winter"],lightning:["Shocking","Storm","Thunder","Volt"],poison:["Venomous","Toxic","Plague","Serpent"]}[a]||[];d.length>0&&(r=`${d[Math.floor(Math.random()*d.length)]} ${r}`)}if(s.length>0&&t!=="Common"){const u=s.reduce((d,f)=>f.tier>d.tier?f:d);r+=` ${u.name}`}const i=a&&a!=="physical"?` [${a.toUpperCase()}]`:"";return`${t} ${r}${i} (L${n})`}function rh(e,t,n,a){var u;const s=((u=gs[n])==null?void 0:u.statMultiplier)||1;let r=0;e.damage&&(r+=e.damage*5),e.armor&&(r+=e.armor*3),e.health&&(r+=e.health*.5);const i=t.reduce((d,f)=>{const b={damage:5,armor:3,health:.5,mana:.3,critChance:100,dodgeChance:80,attackSpeed:20,strength:2,dexterity:2,intelligence:2,vitality:2,luck:3}[f.stat]||1;return d+f.value*b},0),c=(r+i)*a*s;return Math.max(1,Math.floor(c))}function ar(e,t=!1){var h;const n=th(e,t),{category:a,type:s}=nh(e);let r={},i,c={},u,d;if(a==="weapon"){const y=hs[s];r={...y.baseStats},i=y.slot,c={...y.requirements},d={...y.visual},u=ah(s,n)}else if(a==="armor"){const y=Dl[s];r={...y.baseStats},i=y.slot,c={...y.requirements},d={...y.visual}}else{const y=Al[s];r={...y.baseStats},i=y.slot,c={...y.requirements}}const f=gs[n];if(!f)return console.warn("Invalid rarity:",n,"defaulting to Common"),ar(e,!1);const v=1+(e-1)*.1,b=f.statMultiplier;Object.keys(r).forEach(y=>{if(typeof r[y]=="number"){const w={Common:.15,Magic:.2,Rare:.25,Legendary:.3,Mythic:.35,Divine:.4,Unique:.38}[n]||.15,P=1+(Math.random()*2-1)*w,D=r[y]*v*b*P;r[y]=Math.round(D*100)/100}});const m=sh(a,n,e),p=lh(s,n,e,u,m),S=rh(r,m,n,e),g=eh(n),x=g>0?{stones:new Array(g).fill(null),maxSockets:g}:void 0;if(d){const w=["Common","Magic","Rare","Legendary","Mythic","Divine","Unique"].indexOf(n);a==="weapon"&&s==="sword"?d.spriteId=w>=1?"steel_sword":"iron_sword":a==="armor"&&s==="chest"&&(d.spriteId=w>=1?"chain_chest":"leather_chest"),w>=2&&(d.color=(h=gs[n])==null?void 0:h.color)}return{id:"eq_"+Math.random().toString(36).substr(2,9),name:p,type:s,slot:i,category:a,rarity:n,level:e,baseStats:r,affixes:m,damageType:u,requirements:c,value:S,sockets:x,visual:d}}function ih(e){var t;return((t=gs[e])==null?void 0:t.color)||"#9CA3AF"}const oh=[];function ch(){return oh.pop()||{}}function uh(e){const t=ch();let n=0;e.baseStats.damage&&(n+=e.baseStats.damage),e.affixes.forEach(i=>{(i.stat==="damage"||i.stat==="health"||i.stat==="armor")&&(n+=i.value*.5)}),n=Math.max(1,Math.floor(n));const a=e.affixes.map(i=>({key:i.stat==="health"?"hp":i.stat==="critChance"?"critChance":i.stat==="dodgeChance"?"dodgeChance":i.stat==="attackSpeed"?"projectileSpeed":i.stat==="lifeSteal"?"lifeSteal":i.stat==="damage"?"dps":i.stat,val:i.value})),r=["bow","crossbow"].includes(e.type)?"ranged":"melee";return Object.assign(t,{...e,power:n,type:r,element:e.damageType||"physical",extras:a,rarityColor:ih(e.rarity),elementColor:dh(e.damageType||"physical")}),t}const Ar=new Map;function dh(e){if(Ar.has(e))return Ar.get(e);let t;switch(e){case"fire":t="text-red-500";break;case"ice":t="text-cyan-400";break;case"lightning":t="text-yellow-300";break;case"poison":t="text-green-500";break;default:t="text-gray-300"}return Ar.set(e,t),t}function rl(e,t=!1){const n=t?Math.floor(Math.random()*3)+2:Math.floor(Math.random()*2)+1,a=[];for(let r=0;r<n;r++){const i=ar(e,t),c=uh(i);a.push(c)}const s=t?.35:.15;if(Math.random()<s){const r=hm(e,t);a.push(r)}return a}const xm="idle-poe-phase2-save-v1";function Ae(e){const t={...e,__meta:{lastSaved:Date.now()}};localStorage.setItem(xm,JSON.stringify(t))}function mh(){try{const e=localStorage.getItem(xm);return e?JSON.parse(e):null}catch{return null}}function fh(e,t){const n=e.skillGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Skill not found"};if(n.isUnlocked)return{success:!1,message:"Skill is already unlocked"};if(e.level<n.unlockLevel)return{success:!1,message:`Requires player level ${n.unlockLevel}`};const a=pn(n);if(e.skillPoints<a)return{success:!1,message:`Requires ${a} skill points (you have ${e.skillPoints})`};const s={...e};s.skillPoints-=a;const r=s.skillGems.findIndex(i=>i.id===t);return s.skillGems[r]={...n,isUnlocked:!0},{success:!0,message:`${n.name} unlocked!`,updatedPlayer:s}}function ph(e,t){const n=e.supportGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Support gem not found"};if(n.isUnlocked)return{success:!1,message:"Support gem is already unlocked"};if(e.level<n.unlockLevel)return{success:!1,message:`Requires player level ${n.unlockLevel}`};const a=pn(n);if(e.skillPoints<a)return{success:!1,message:`Requires ${a} skill points (you have ${e.skillPoints})`};const s={...e};s.skillPoints-=a;const r=s.supportGems.findIndex(i=>i.id===t);return s.supportGems[r]={...n,isUnlocked:!0},{success:!0,message:`${n.name} unlocked!`,updatedPlayer:s}}function hh(e,t){const n=e.skillGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Skill not found"};if(!n.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};if(!Ll(n,e.skillPoints)){const i=Vn(n.level);return n.level>=n.maxLevel?{success:!1,message:"Skill is already at maximum level"}:{success:!1,message:`Requires ${i} skill points (you have ${e.skillPoints})`}}const a=Vn(n.level),s={...e};s.skillPoints-=a;const r=s.skillGems.findIndex(i=>i.id===t);return s.skillGems[r]={...n,level:n.level+1},{success:!0,message:`${n.name} leveled up to ${n.level+1}!`,updatedPlayer:s}}function gh(e,t){const n=e.supportGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Support gem not found"};if(!n.isUnlocked)return{success:!1,message:"Support gem must be unlocked first"};if(!Ll(n,e.skillPoints)){const i=Vn(n.level);return n.level>=n.maxLevel?{success:!1,message:"Support gem is already at maximum level"}:{success:!1,message:`Requires ${i} skill points (you have ${e.skillPoints})`}}const a=Vn(n.level),s={...e};s.skillPoints-=a;const r=s.supportGems.findIndex(i=>i.id===t);return s.supportGems[r]={...n,level:n.level+1},{success:!0,message:`${n.name} leveled up to ${n.level+1}!`,updatedPlayer:s}}function xh(e,t,n){if(n<0||n>=e.skillBar.maxSlots)return{success:!1,message:`Invalid slot index. Must be between 0 and ${e.skillBar.maxSlots-1}`};const a=e.skillGems.find(i=>i.id===t);if(!a)return{success:!1,message:"Skill not found"};if(!a.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};const s={...e};s.skillBar.slots=s.skillBar.slots.map(i=>(i==null?void 0:i.id)===t?null:i),s.skillGems=s.skillGems.map(i=>i.id===t?{...i,isEquipped:!0}:i);const r=s.skillBar.slots[n];return r&&(s.skillGems=s.skillGems.map(i=>i.id===r.id?{...i,isEquipped:!1}:i)),s.skillBar.slots[n]={...a,isEquipped:!0},{success:!0,message:`${a.name} equipped to slot ${n+1}`,updatedPlayer:s}}function yh(e,t){if(console.log(` unequipSkillFromBar called with slotIndex: ${t}`),t<0||t>=e.skillBar.maxSlots)return console.log(` Invalid slot index: ${t}`),{success:!1,message:`Invalid slot index. Must be between 0 and ${e.skillBar.maxSlots-1}`};const n=e.skillBar.slots[t];if(console.log(` Skill in slot ${t}:`,n),!n)return console.log(` No skill equipped in slot ${t}`),{success:!1,message:"No skill equipped in this slot"};const a={...e};return console.log(` Creating updated player for unequipping ${n.name}`),a.skillBar.slots[t]=null,console.log(` Removed skill from slot ${t}`),a.skillGems=a.skillGems.map(s=>s.id===n.id?{...s,isEquipped:!1}:s),console.log(` Updated skill equipped status for ${n.name}`),console.log(` Successfully unequipped ${n.name} from slot ${t+1}`),{success:!0,message:`${n.name} unequipped from slot ${t+1}`,updatedPlayer:a}}function vh(e,t,n){const a=e.skillGems.find(d=>d.id===t),s=e.supportGems.find(d=>d.id===n);if(!a)return{success:!1,message:"Skill not found"};if(!s)return{success:!1,message:"Support gem not found"};if(!a.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};if(!s.isUnlocked)return{success:!1,message:"Support gem must be unlocked first"};if(a.supportGems.length>=6)return{success:!1,message:"Skill already has maximum support gems (6)"};if(a.supportGems.some(d=>d.id===n))return{success:!1,message:"Support gem is already attached to this skill"};if(!s.tags.some(d=>a.tags.includes(d)))return{success:!1,message:`${s.name} is not compatible with ${a.name}. Support gem tags (${s.tags.join(", ")}) must match at least one skill tag (${a.tags.join(", ")}).`};const i={...e},c=i.skillGems.findIndex(d=>d.id===t);i.skillGems[c]={...a,supportGems:[...a.supportGems,s]};const u=i.skillBar.slots.findIndex(d=>(d==null?void 0:d.id)===t);return u!==-1&&(i.skillBar.slots[u]=i.skillGems[c]),{success:!0,message:`${s.name} attached to ${a.name}`,updatedPlayer:i}}function bh(e,t,n){const a=e.skillGems.find(d=>d.id===t);if(!a)return{success:!1,message:"Skill not found"};const s=a.supportGems.findIndex(d=>d.id===n);if(s===-1)return{success:!1,message:"Support gem is not attached to this skill"};const r=a.supportGems[s],i={...e},c=i.skillGems.findIndex(d=>d.id===t);i.skillGems[c]={...a,supportGems:a.supportGems.filter(d=>d.id!==n)};const u=i.skillBar.slots.findIndex(d=>(d==null?void 0:d.id)===t);return u!==-1&&(i.skillBar.slots[u]=i.skillGems[c]),{success:!0,message:`${r.name} detached from ${a.name}`,updatedPlayer:i}}function wh(e){return e.skillGems.filter(t=>!t.isUnlocked&&e.level>=t.unlockLevel)}function Sh(e){return e.skillGems.filter(t=>t.isUnlocked)}function kh(e){return e.supportGems.filter(t=>!t.isUnlocked&&e.level>=t.unlockLevel)}function jh(e){return e.supportGems.filter(t=>t.isUnlocked)}const $a=new Map,Nh=1e3;function Qe(e){var r,i,c;const t=JSON.stringify({level:e.level,equipment:e.equipment,skillGems:(r=e.skillGems)==null?void 0:r.map(u=>({id:u.id,level:u.level,isEquipped:u.isEquipped})),supportGems:(i=e.supportGems)==null?void 0:i.map(u=>({id:u.id,level:u.level})),passiveTreeState:e.passiveTreeState,stones:(c=e.stones)==null?void 0:c.map(u=>({id:u.id,type:u.type,level:u.level,rarity:u.rarity}))}),n=Date.now(),a=$a.get(t);if(a&&n-a.timestamp<Nh)return a.player;const s=mm(e);if($a.set(t,{player:s,timestamp:n}),$a.size>10){const u=Array.from($a.keys())[0];$a.delete(u)}return s}const ym={player:Qe(tr()),enemies:[ll(1)],inventory:[],log:[],skills:{},activeCombinations:[],activeSynergies:[],lastStatsUpdate:Date.now(),autoCombat:!0};function Ch(e){const t={};return e.equipment&&Object.entries(e.equipment).forEach(([n,a])=>{a&&(t[n]={...a})}),t}function Mh(e,t){var n,a,s,r,i,c,u,d,f,v,b;switch(t.type){case"LOAD":{const m=t.payload||{};if(m.player&&typeof m.player=="object"){if(typeof m.player.gold!="number"&&(m.player.gold=0),(!m.player.equipment||typeof m.player.equipment!="object")&&(m.player.equipment={}),!m.player.skillBar)m.player.skillBar=sl();else if(!m.player.skillBar.slots)m.player.skillBar.slots=sl().slots;else if(!Array.isArray(m.player.skillBar.slots))m.player.skillBar.slots=sl().slots;else if(m.player.skillBar.slots.length!==6){const p=[...m.player.skillBar.slots.slice(0,6)];for(;p.length<6;)p.push(null);m.player.skillBar.slots=p}m.player.skillBar.maxSlots||(m.player.skillBar.maxSlots=6),m.player.skillGems&&Array.isArray(m.player.skillGems)&&(m.player.skillBar.slots=m.player.skillBar.slots.map(p=>{if(p&&p.id){const S=m.player.skillGems.find(g=>g.id===p.id);if(S&&S.isEquipped)return S}return p})),Array.isArray(m.player.skillGems)||(m.player.skillGems=Mo.map(p=>Eo(p))),Array.isArray(m.player.supportGems)||(m.player.supportGems=sm.map(p=>om(p))),Array.isArray(m.player.stones)?m.player.stones=Zp(m.player.stones):m.player.stones=[],m.player=Qe(m.player)}return{...e,...m,lastStatsUpdate:Date.now()}}case"SPAWN":{const m=((n=t.payload)==null?void 0:n.level)??Math.max(1,e.player.level+(Math.random()>.5?1:0)),p=(a=t.payload)==null?void 0:a.kind,S=ll(m,p),g=[...e.enemies,S].slice(0,25),x=[`Spawned ${S.name}`,...e.log].slice(0,200);return Ae({player:e.player,inventory:e.inventory,enemies:g,skills:e.skills}),{...e,enemies:g,log:x}}case"TICK":{const m=(s=t.payload)==null?void 0:s.enemyId,p=[...e.enemies],S=p.findIndex(M=>M.id===m);if(S===-1)return e;({...p[S]});let g={...e.player},x=[];g.skillCooldowns||(g.skillCooldowns={});const h=Date.now(),y=g.skillBar.slots.find(M=>(M==null?void 0:M.id)==="whirlwind");if(y&&y.isUnlocked){const M=g.skillCooldowns.whirlwind||0,j=y.scaling.baseCooldown||y.cooldown;if(j===0||h-M>=j){g.skillCooldowns.whirlwind=h;const Q=(y.scaling.baseArea+(y.level-1)*y.scaling.areaPerLevel)*30;x.push(`ANIM_SKILL|whirlwind|${h}|3000`);const K=Math.floor(y.scaling.baseDamage+(y.level-1)*y.scaling.damagePerLevel),F=e.playerPosition||{x:150,y:300};let G=0;p.forEach(Z=>{if(Z.hp>0&&Z.position){const ce=Math.hypot(Z.position.x-F.x,Z.position.y-F.y);ce<=Q&&(Z.hp=Math.max(0,Z.hp-K),x.push(`Whirlwind spins through ${Z.name} for ${K} damage! (distance: ${Math.round(ce)})`),G++)}}),x.push(` Whirlwind channels continuously! (${G} enemies hit, range: ${Math.round(Q)})`)}}const w={...g};let P=[...p],D=[...x,...e.log].slice(0,200);const O=P.filter(M=>M.hp<=0);if(O.length>0){let M=[],j=0;O.forEach(ee=>{const T=rl(ee.level,ee.isBoss);M=[...M,...T];const U=ee.isBoss?Math.floor(ee.level*12):Math.max(1,Math.floor(ee.level*4));j+=U});const I=Date.now();P=P.map(ee=>ee.hp<=0&&ee.state!=="dying"?{...ee,state:"dying",alpha:1,deathTime:I}:ee),w.xp+=j;const Q=10*4;let K=[...e.inventory],F=0,G=0,Z=0;M.forEach(ee=>{F+=ee.value,K.length>=Q?(w.gold+=ee.value,Z++):(K.push(ee),G++)});const ce=O.filter(ee=>ee.isBoss).length;for(ce>0?D.unshift(` ${ce} BOSS(ES) DEFEATED! ${M.length} Epic Items Found!`):D.unshift(`${O.length} enemies defeated! ${M.length} items dropped`),G>0&&D.unshift(` ${G} items added to inventory`),Z>0&&D.unshift(` Inventory full! ${Z} items converted to ${Z*Math.floor(F/M.length)} gold`);w.xp>=w.nextLevelXp;)w.xp-=w.nextLevelXp,w.level+=1,w.skillPoints+=1,w.passiveTreeState.availablePoints+=1,w.maxHp+=8,w.hp=w.maxHp,w.nextLevelXp=Math.floor(w.nextLevelXp*1.25),D.unshift(`Leveled up! Now level ${w.level}`);return Ae({player:w,inventory:K,enemies:P,skills:e.skills}),{...e,player:w,enemies:P,inventory:K,log:D,skills:e.skills}}return Ae({player:w,inventory:e.inventory,enemies:P,skills:e.skills}),{...e,player:w,enemies:P,log:D,skills:e.skills}}case"REMOVE":{const m=t.payload,p=e.enemies.filter(S=>S.id!==m);return Ae({player:e.player,inventory:e.inventory,enemies:p,skills:e.skills}),{...e,enemies:p}}case"EQUIP":{const m=t.payload,p=e.inventory.find(S=>S.id===m);if(!p)return e;if(p.slot&&p.category){if(!(!p.requirements||Object.entries(p.requirements).every(([y,w])=>{var D;return(((D=e.player.attributes)==null?void 0:D[y])??0)>=w})))return e;const g={...e.player.equipment};g[p.slot]=p;const x={...e.player,equipment:g},h=Qe(x);return Ae({player:h,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:h,lastStatsUpdate:Date.now()}}else{const S={...e.player,equipped:p},g=Qe(S);return Ae({player:g,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:g,lastStatsUpdate:Date.now()}}}case"UNEQUIP":{const m=t.payload;if(!m||!((r=e.player.equipment)!=null&&r[m]))return e;const p=e.player.equipment[m],S={...e.player.equipment};delete S[m];const g=[...e.inventory,p],x={...e.player,equipment:S},h=Qe(x);return Ae({player:h,inventory:g,enemies:e.enemies,skills:e.skills}),{...e,player:h,inventory:g,lastStatsUpdate:Date.now(),log:[...e.log,`Unequipped ${p.name} from ${m} slot`]}}case"DISCARD":{const m=t.payload,p=e.inventory.filter(S=>S.id!==m);return Ae({player:e.player,inventory:p,enemies:e.enemies,skills:e.skills}),{...e,inventory:p}}case"SELL_ALL":{const m=new Set(Object.values(e.player.equipment).filter(Boolean).map(P=>P.id)),p=e.inventory.filter(P=>!m.has(P.id)),S=e.inventory.filter(P=>m.has(P.id)),g=p.reduce((P,D)=>P+(D.value||0),0),x={...e.player,gold:(e.player.gold||0)+g},h=Qe(x),y=p.length,w=S.length;return Ae({player:h,inventory:S,enemies:e.enemies,skills:e.skills}),{...e,player:h,inventory:S,log:[`Sold ${y} items for ${g} gold${w>0?` (${w} equipped items protected)`:""}`,...e.log].slice(0,200),lastStatsUpdate:Date.now()}}case"TOGGLE_AUTO":return{...e,autoCombat:!e.autoCombat};case"RESET":{const m=Ch(e.player),p=tr();p.equipment=m;const S=Qe(p);return Ae({player:S,inventory:[],enemies:[ll(1)],skills:{}}),{player:S,enemies:[ll(1)],inventory:[],log:["Progress reset! Equipped items preserved for testing.",...e.log].slice(0,200),skills:{},activeCombinations:[],activeSynergies:[],lastStatsUpdate:Date.now(),autoCombat:!0,playerPosition:void 0,enemyPositions:void 0}}case"LOG":return{...e,log:[t.payload,...e.log].slice(0,200)};case"UNLOCK_SKILL_GEM":{const m=fh(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Qe(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"UNLOCK_SUPPORT_GEM":{const m=ph(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Qe(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"LEVEL_UP_SKILL_GEM":{const m=hh(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Qe(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"LEVEL_UP_SUPPORT_GEM":{const m=gh(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Qe(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"EQUIP_SKILL_TO_BAR":{const{skillId:m,slotIndex:p}=t.payload,S=xh(e.player,m,p);if(S.success&&S.updatedPlayer){const g=Qe(S.updatedPlayer);return Ae({player:g,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:g,log:[S.message,...e.log].slice(0,200)}}else return{...e,log:[S.message,...e.log].slice(0,200)}}case"UNEQUIP_SKILL_FROM_BAR":{const m=yh(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Qe(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"ATTACH_SUPPORT_GEM":{const{skillId:m,supportId:p}=t.payload,S=vh(e.player,m,p);if(S.success&&S.updatedPlayer){const g=Qe(S.updatedPlayer);return Ae({player:g,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:g,log:[S.message,...e.log].slice(0,200)}}else return{...e,log:[S.message,...e.log].slice(0,200)}}case"DETACH_SUPPORT_GEM":{const{skillId:m,supportId:p}=t.payload,S=bh(e.player,m,p);if(S.success&&S.updatedPlayer){const g=Qe(S.updatedPlayer);return Ae({player:g,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:g,log:[S.message,...e.log].slice(0,200)}}else return{...e,log:[S.message,...e.log].slice(0,200)}}case"USE_SKILL":{const m=t.payload,p=e.player.skillGems.find(y=>y.id===m&&y.isEquipped);if(!p)return{...e,log:["Skill not found or not equipped",...e.log].slice(0,200)};const S=0;if(e.player.mana<S)return{...e,log:[`Not enough mana to use ${p.name}! (${S} required, ${e.player.mana} available)`,...e.log].slice(0,200)};const g={...e.player,mana:Math.max(0,e.player.mana-S)};let x=[`Used ${p.name}!`,...e.log];if(p.id==="whirlwind"){x.unshift(`ANIM_SKILL|whirlwind|${Date.now()}|3000`);const y=xt(p,g);e.enemies.forEach(w=>{w.hp>0&&x.unshift(`ANIM_PLAYER|${w.id}|whirlwind|Unique|hit|${y}`)})}else if(p.id==="fireball"){const y=e.enemies.find(w=>w.hp>0);if(y){x.unshift(`ANIM_SKILL|fireball|${y.id}|${Date.now()}`);const w=xt(p,g);x.unshift(`ANIM_PLAYER|${y.id}|magic|Rare|hit|${w}`)}}else if(p.id==="lightning_bolt"){const y=e.enemies.find(w=>w.hp>0);if(y){x.unshift(`ANIM_SKILL|lightning_bolt|${y.id}|${Date.now()}`);const w=xt(p,g);x.unshift(`ANIM_PLAYER|${y.id}|magic|Magic|hit|${w}`)}}else if(p.id==="power_strike"){const y=e.enemies.find(w=>w.hp>0);if(y){const w=xt(p,g);x.unshift(`ANIM_PLAYER|${y.id}|melee|Unique|hit|${w}`)}}else if(p.id==="ice_shard"){const y=e.enemies.find(w=>w.hp>0);if(y){x.unshift(`ANIM_SKILL|ice_shard|${y.id}|${Date.now()}`);const w=xt(p,g);x.unshift(`ANIM_PLAYER|${y.id}|magic|Magic|hit|${w}`)}}else if(p.id==="ground_slam"){x.unshift(`ANIM_SKILL|ground_slam|${Date.now()}|800`);const y=xt(p,g);e.enemies.forEach(w=>{w.hp>0&&x.unshift(`ANIM_PLAYER|${w.id}|melee|Rare|hit|${y}`)})}else if(p.id==="poison_arrow"){const y=e.enemies.find(w=>w.hp>0);if(y){x.unshift(`ANIM_SKILL|poison_arrow|${y.id}|${Date.now()}`);const w=xt(p,g);x.unshift(`ANIM_PLAYER|${y.id}|ranged|Magic|hit|${w}`)}}else if(p.id==="chain_lightning"){x.unshift(`ANIM_SKILL|chain_lightning|${Date.now()}|800`);const y=xt(p,g);e.enemies.filter(P=>P.hp>0).slice(0,3).forEach(P=>{x.unshift(`ANIM_PLAYER|${P.id}|magic|Rare|hit|${y}`)})}else if(p.id==="meteor"){x.unshift(`ANIM_SKILL|meteor|${Date.now()}|1200`);const y=xt(p,g);e.enemies.forEach(w=>{w.hp>0&&x.unshift(`ANIM_PLAYER|${w.id}|magic|Unique|hit|${y}`)})}else if(p.id==="blade_vortex"){x.unshift(`ANIM_SKILL|blade_vortex|${Date.now()}|5000`);const y=xt(p,g);e.enemies.forEach(w=>{w.hp>0&&x.unshift(`ANIM_PLAYER|${w.id}|magic|Rare|hit|${y}`)})}else if(p.id==="frost_nova"){x.unshift(`ANIM_SKILL|frost_nova|${Date.now()}|1000`);const y=xt(p,g);e.enemies.forEach(w=>{w.hp>0&&x.unshift(`ANIM_PLAYER|${w.id}|magic|Magic|hit|${y}`)})}else if(p.id==="cleave"){x.unshift(`ANIM_SKILL|cleave|${Date.now()}|600`);const y=xt(p,g);e.enemies.filter(P=>P.hp>0).slice(0,3).forEach(P=>{x.unshift(`ANIM_PLAYER|${P.id}|melee|Rare|hit|${y}`)})}else if(p.id==="summon_skeletons")x.unshift(`ANIM_SKILL|summon_skeletons|${Date.now()}|2000`),x.unshift("Summoned skeleton minions!");else if(p.id==="heal"){const y=Math.floor(p.scaling.baseDamage+(p.level-1)*p.scaling.damagePerLevel);g.hp=Math.min(g.maxHp,g.hp+y),x.unshift(`ANIM_SKILL|heal|player|${Date.now()}`),x.unshift(`Healed for ${y} HP!`)}const h=Qe(g);return Ae({player:h,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:h,log:x.slice(0,200)}}case"UPDATE_ENEMY_POSITIONS":return{...e,enemyPositions:t.payload};case"UPDATE_PLAYER_POSITION":return{...e,playerPosition:t.payload};case"UPDATE_CHARACTER_MODEL":{const m={...e.player,characterModel:t.payload};return{...e,player:Qe(m),lastStatsUpdate:Date.now()}}case"CHANNEL_WHIRLWIND":{const m=e.player.skillBar.slots.find(y=>(y==null?void 0:y.id)==="whirlwind");if(!m||!m.isUnlocked)return e;let p={...e.player},S=[];p.skillCooldowns||(p.skillCooldowns={});const g=Date.now(),x=p.skillCooldowns.whirlwind||0,h=m.scaling.baseCooldown||m.cooldown;if(h===0||g-x>=h){p.skillCooldowns.whirlwind=g;const w=(m.scaling.baseArea+(m.level-1)*m.scaling.areaPerLevel)*30,P=Math.floor(m.scaling.baseDamage+(m.level-1)*m.scaling.damagePerLevel),D=e.playerPosition||{x:150,y:300};let O=0,M=[...e.enemies];M.forEach(K=>{K.hp>0&&K.position&&Math.hypot(K.position.x-D.x,K.position.y-D.y)<=w&&(K.hp=Math.max(0,K.hp-P),O++)}),O>0&&(S.push(`ANIM_SKILL|whirlwind|${g}|1000`),S.push(` Whirlwind channels continuously! (${O} enemies hit, range: ${Math.round(w)})`));const j=M.filter(K=>K.hp<=0);M=M.map(K=>K.hp<=0&&K.state!=="dying"?{...K,state:"dying",alpha:1,deathTime:g}:K);let I=[...e.inventory];if(j.length>0){let K=[],F=0;j.forEach(U=>{const J=rl(U.level,U.isBoss);K=[...K,...J];const $=U.isBoss?Math.floor(U.level*12):Math.max(1,Math.floor(U.level*4));F+=$}),p.xp+=F;const G=10*4;let Z=0,ce=0,ee=0;K.forEach(U=>{Z+=U.value,I.length>=G?(p.gold+=U.value,ee++):(I.push(U),ce++)});const T=j.filter(U=>U.isBoss).length;for(T>0?S.push(` ${T} BOSS(ES) DEFEATED by Whirlwind! ${K.length} Epic Items Found!`):S.push(`${j.length} enemies defeated by Whirlwind! ${K.length} items dropped`),ce>0&&S.push(` ${ce} items added to inventory`),ee>0&&S.push(` Inventory full! ${ee} items converted to ${ee*Math.floor(Z/K.length)} gold`);p.xp>=p.nextLevelXp;)p.xp-=p.nextLevelXp,p.level+=1,p.skillPoints+=1,p.passiveTreeState.availablePoints+=1,p.maxHp+=8,p.hp=p.maxHp,p.nextLevelXp=Math.floor(p.nextLevelXp*1.25),S.push(`Leveled up! Now level ${p.level}`)}const Q=Qe(p);return Ae({player:Q,inventory:I,enemies:M,skills:e.skills}),{...e,player:Q,enemies:M,inventory:I,log:[...S,...e.log].slice(0,200)}}return e}case"AUTO_SKILLS":{if(!e.autoCombat||e.enemies.length===0)return console.log(" AUTO_SKILLS skipped - autoCombat:",e.autoCombat,"enemies:",e.enemies.length),e;let m={...e.player},p=[],S=[...e.enemies];m.skillCooldowns||(m.skillCooldowns={});const g=Date.now(),x=S.filter(M=>M.hp>0);let h=null;if(x.length>0&&e.playerPosition){const M=e.playerPosition,j=x.map(I=>{var Z;const Q=(Z=e.enemyPositions)==null?void 0:Z[I.id];if(!Q)return null;const K=Q.x-M.x,F=Q.y-M.y,G=Math.sqrt(K*K+F*F);return{enemy:I,distance:G,position:Q}}).filter(Boolean);j.length>0&&(j.sort((I,Q)=>I.distance-Q.distance),h=j[0].enemy)}!h&&x.length>0&&(h=x[0]),console.log(" Nearest enemy for targeting:",h?`${h.name} (${h.id})`:"none");for(let M=0;M<m.skillBar.slots.length;M++){const j=m.skillBar.slots[M];if(console.log(` Slot ${M}:`,j?{id:j.id,isUnlocked:j.isUnlocked,isEquipped:j.isEquipped}:"empty"),j&&j.isEquipped&&j.id!=="whirlwind"){console.log(` Checking skill ${j.id} in slot ${M}:`,{isUnlocked:j.isUnlocked,currentMana:m.mana,manaCost:((i=j.scaling)==null?void 0:i.baseManaCost)||j.manaCost||0});const I=((c=m.skillCooldowns)==null?void 0:c[j.id])??0,Q=((u=j.scaling)==null?void 0:u.baseCooldown)??j.cooldown??0,K=((d=j.scaling)==null?void 0:d.baseManaCost)||j.manaCost||0;if(console.log(` Skill ${j.id} check details:`,{lastUsed:I,currentTime:g,cooldownTime:Q,timeSinceLastUse:g-I,cooldownReady:g-I>=Q,manaReady:m.mana>=K,hasTarget:!!h}),g-I>=Q&&m.mana>=K){const F=["fireball","lightning_bolt","ice_shard","poison_arrow"],G=F.includes(j.id);if(G&&!h){console.log(` Skill ${j.id} needs a target but none available`);continue}if(G&&h){const ce=Ri(j),ee=(f=e.enemyPositions)==null?void 0:f[h.id],T=e.playerPosition;if(ee&&T){const U=ee.x-T.x,J=ee.y-T.y,$=Math.sqrt(U*U+J*J),re=ce*1.2;if($>re){console.log(` Skill ${j.id} target too far: ${$.toFixed(0)}px > ${re.toFixed(0)}px effective range`);continue}console.log(` Skill ${j.id} target in range: ${$.toFixed(0)}px <= ${re.toFixed(0)}px`)}else console.log(` Position data missing for ${j.id}, allowing skill usage as fallback`)}console.log(` Triggering skill ${j.id}${h?` on ${h.name}`:""}!`),console.log(` SKILL TRIGGERED SUCCESSFULLY: ${j.id} - This confirms the AUTO_SKILLS bug fix is working!`),m.skillCooldowns=m.skillCooldowns||{},m.skillCooldowns[j.id]=g,m.mana=Math.max(0,m.mana-K);const Z=xt(j,m);if(F.includes(j.id)&&h){const ce=`ANIM_SKILL|${j.id}|${h.id}`;console.log(` Adding projectile animation log: ${ce}`),p.push(ce);const ee=S.findIndex(T=>T.id===h.id);ee!==-1&&S[ee].hp>0&&(S[ee].hp=Math.max(0,S[ee].hp-Z),p.push(`ANIM_PLAYER|${h.id}|magic|Rare|hit|${Z}`),p.push(` ${j.name} hits ${h.name} for ${Z} damage!`))}else{const ce=`ANIM_SKILL|${j.id}|${g}|${((v=j.scaling)==null?void 0:v.baseDuration)??1e3}`;console.log(` Adding AOE animation log: ${ce}`),p.push(ce);let ee=0;S.forEach((T,U)=>{T.hp>0&&(S[U].hp=Math.max(0,T.hp-Z),ee++)}),ee>0&&p.push(` ${j.name} hits ${ee} enemies for ${Z} damage each!`)}console.log(` Current skillLog after adding ${j.id}:`,p)}else{const F=h?`cooldown: ${g-I}/${Q}, mana: ${m.mana}/${K}`:"no target";console.log(` Skill ${j.id} not ready - ${F}`)}}}const y=S.filter(M=>M.hp<=0);let w=[...e.inventory];if(y.length>0){let M=[],j=0;y.forEach(Z=>{const ce=rl(Z.level,Z.isBoss);M=[...M,...ce];const ee=Z.isBoss?Math.floor(Z.level*12):Math.max(1,Math.floor(Z.level*4));j+=ee}),m.xp+=j;const I=10*4;let Q=0,K=0,F=0;M.forEach(Z=>{Q+=Z.value,w.length>=I?(m.gold+=Z.value,F++):(w.push(Z),K++)});const G=y.filter(Z=>Z.isBoss).length;for(G>0?p.unshift(` ${G} BOSS(ES) DEFEATED! ${M.length} Epic Items Found!`):p.unshift(`${y.length} enemies defeated! ${M.length} items dropped`),K>0&&p.unshift(` ${K} items added to inventory`),F>0&&p.unshift(` Inventory full! ${F} items converted to ${F*Math.floor(Q/M.length)} gold`);m.xp>=m.nextLevelXp;)m.xp-=m.nextLevelXp,m.level+=1,m.skillPoints+=1,m.passiveTreeState.availablePoints+=1,m.maxHp+=8,m.hp=m.maxHp,m.nextLevelXp=Math.floor(m.nextLevelXp*1.25),p.unshift(`Leveled up! Now level ${m.level}`)}const P=Date.now(),O=S.map(M=>M.hp<=0&&M.state!=="dying"?{...M,state:"dying",alpha:1,deathTime:P}:M).filter(M=>M.state==="dying"&&M.deathTime?P-M.deathTime<2e3:M.hp>0);return Ae({player:m,inventory:w,enemies:O,skills:e.skills}),{...e,player:m,enemies:O,inventory:w,log:[...p,...e.log].slice(0,200)}}case"MANA_REGEN":{const m={...e.player},S=(m.manaRegen||0)/10;return m.mana=Math.min(m.maxMana,m.mana+S),{...e,player:m}}case"ALLOCATE_PASSIVE_NODE":{const m=t.payload,p={...e.player};if(p.passiveTreeData&&p.passiveTreeState){const S=up(m,p.passiveTreeData,p.passiveTreeState);p.passiveTreeState=S;const g=Qe(p);return Ae({player:g,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:g,log:[`Allocated passive node: ${((b=p.passiveTreeData.nodes[m])==null?void 0:b.name)||m}`,...e.log].slice(0,200),lastStatsUpdate:Date.now()}}return e}case"ADD_STONE":{const m=t.payload,p={...e.player,stones:[...e.player.stones,m]};return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[`Generated stone: ${m.name}`,...e.log].slice(0,200)}}case"FORCE_MIGRATE_STONES":{const m=[...e.player.stones];Jp(m);const p={...e.player,stones:m};return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:["Force migrated all stone IDs for uniqueness",...e.log].slice(0,200)}}case"REMOVE_STONE":{const m=t.payload,p={...e.player,stones:e.player.stones.filter(S=>S.id!==m)};return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:["Removed stone",...e.log].slice(0,200)}}case"UPDATE_EQUIPMENT":{const{slot:m,equipment:p}=t.payload,S={...e.player.equipment};S[m]=p;const g={...e.player,equipment:S},x=Qe(g);return Ae({player:x,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:x,lastStatsUpdate:Date.now()}}default:return e}}const vm=C.createContext({state:ym,actions:{},dispatch:()=>{}});function Ph({children:e}){const[t,n]=C.useReducer(Mh,ym),a=Wn.useRef(!1);C.useEffect(()=>{if(a.current)return;const d=mh();d?(a.current=!0,n({type:"LOAD",payload:d})):a.current=!0},[]);const s=C.useCallback(d=>{n({type:"UPDATE_ENEMY_POSITIONS",payload:d})},[]),r=C.useCallback(d=>{n({type:"UPDATE_PLAYER_POSITION",payload:d})},[]),i=C.useCallback(d=>{n({type:"UPDATE_CHARACTER_MODEL",payload:d})},[]);C.useEffect(()=>{const d=setInterval(()=>{const f=t.enemies.filter(v=>v.hp>0).length;if(f<25){const v=Math.min(3,25-f);for(let b=0;b<v;b++)n({type:"SPAWN"})}},1500);return()=>clearInterval(d)},[]),C.useEffect(()=>{const d=t.skills.quick??0,v=Math.max(300,Math.round(1e3/(1+d*.05))),b=setInterval(()=>{n({type:"AUTO_SKILLS"})},v);return()=>clearInterval(b)},[t.skills]),C.useEffect(()=>{const d=t.player.skillBar.slots.find(f=>(f==null?void 0:f.id)==="whirlwind");if(d&&d.isUnlocked){const v=setInterval(()=>{n({type:"CHANNEL_WHIRLWIND"})},100);return()=>clearInterval(v)}},[t.player.skillBar]),C.useEffect(()=>{const f=setInterval(()=>{n({type:"MANA_REGEN"})},100);return()=>clearInterval(f)},[]);const c=C.useMemo(()=>({spawnEnemy:(d,f)=>n({type:"SPAWN",payload:{level:d,kind:f}}),simulateTick:d=>n({type:"TICK",payload:{enemyId:d}}),removeEnemy:d=>n({type:"REMOVE",payload:d}),equipItem:d=>n({type:"EQUIP",payload:d}),discardItem:d=>n({type:"DISCARD",payload:d}),sellAll:()=>n({type:"SELL_ALL"}),resetAll:()=>n({type:"RESET"}),log:d=>n({type:"LOG",payload:d}),unlockSkillGem:d=>n({type:"UNLOCK_SKILL_GEM",payload:d}),unlockSupportGem:d=>n({type:"UNLOCK_SUPPORT_GEM",payload:d}),levelUpSkillGem:d=>n({type:"LEVEL_UP_SKILL_GEM",payload:d}),levelUpSupportGem:d=>n({type:"LEVEL_UP_SUPPORT_GEM",payload:d}),equipSkillToBar:(d,f)=>n({type:"EQUIP_SKILL_TO_BAR",payload:{skillId:d,slotIndex:f}}),unequipSkillFromBar:d=>n({type:"UNEQUIP_SKILL_FROM_BAR",payload:d}),attachSupportGem:(d,f)=>n({type:"ATTACH_SUPPORT_GEM",payload:{skillId:d,supportId:f}}),detachSupportGem:(d,f)=>n({type:"DETACH_SUPPORT_GEM",payload:{skillId:d,supportId:f}}),useSkill:d=>n({type:"USE_SKILL",payload:d}),updateEnemyPositions:s,updatePlayerPosition:r,allocatePassiveNode:d=>n({type:"ALLOCATE_PASSIVE_NODE",payload:d}),addStone:d=>n({type:"ADD_STONE",payload:d}),removeStone:d=>n({type:"REMOVE_STONE",payload:d}),forceMigrateStones:()=>n({type:"FORCE_MIGRATE_STONES"}),updateCharacterModel:i}),[s,r,i]),u=C.useMemo(()=>({state:t,actions:c,dispatch:n}),[t,c]);return C.useEffect(()=>{typeof window<"u"&&(window.gameState=t,window.testStoneStatsNow=()=>fm(t.player),window.forceMigrateStones=c.forceMigrateStones)},[t]),l.jsx(vm.Provider,{value:u,children:e})}function it(){const e=C.useContext(vm);if(!e)throw new Error("useGame must be used within a GameProvider");return e}function Eh(){return l.jsxs("span",{className:`ml-2 inline-block bg-gradient-to-r from-purple-600 to-blue-500
                 text-xs text-white px-2 py-0.5 rounded-full shadow-md 
                 cursor-pointer hover:scale-105 transition-transform`,title:`Version: 0.2.0
Commit: 4d37c51
Built: 10/18/2025, 6:04:28 AM`,onClick:()=>navigator.clipboard.writeText("4d37c51"),children:["v","0.2.0","  ","4d37c51"]})}function _h({onOpenModal:e}){var c;const{state:t}=it(),n=t.player,a=t.skills||{},s=Math.pow(1.05,a.power||0),r=(n.attackSpeed||1)*(1+(a.quick||0)*.05),i=(n.baseDps+(((c=n.equipped)==null?void 0:c.power)||0))*s+(n.dps-n.baseDps);return l.jsx("div",{className:"sticky-header w-full bg-gray-900/95 backdrop-blur-md border-b border-gray-700 shadow-lg",children:l.jsx("div",{className:"w-full px-4 py-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h1",{className:"header-title text-2xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:"Auto Battle Arena"}),l.jsx(Eh,{})]}),l.jsxs("div",{className:"header-nav flex space-x-2",children:[l.jsx("button",{onClick:()=>e("skills"),className:"px-3 py-1.5 bg-blue-900/50 hover:bg-blue-800/60 border border-blue-600/50 text-blue-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-blue-500/20",children:" Bonuses"}),l.jsx("button",{onClick:()=>e("passiveTree"),className:"px-3 py-1.5 bg-green-900/50 hover:bg-green-800/60 border border-green-600/50 text-green-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-green-500/20",children:" Passive Tree"}),l.jsx("button",{onClick:()=>e("stones"),className:"px-3 py-1.5 bg-amber-900/50 hover:bg-amber-800/60 border border-amber-600/50 text-amber-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-amber-500/20",children:" Stones"}),l.jsx("button",{onClick:()=>e("maps"),className:"px-3 py-1.5 bg-indigo-900/50 hover:bg-indigo-800/60 border border-indigo-600/50 text-indigo-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-indigo-500/20",children:" Maps"})]}),l.jsxs("div",{className:"header-stats flex flex-wrap gap-2 mt-1",children:[l.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-600/40 text-yellow-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsx("span",{children:n.gold.toFixed(2)})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-600/40 text-red-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsx("span",{children:t.enemies.length})]}),l.jsxs("div",{className:"bg-orange-900/30 border border-orange-600/40 text-orange-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsx("span",{children:i.toFixed(2)})]}),l.jsxs("div",{className:"bg-cyan-900/30 border border-cyan-600/40 text-cyan-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:[r.toFixed(2),"/s"]})]}),l.jsxs("div",{className:"bg-purple-900/30 border border-purple-600/40 text-purple-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:["Lv.",n.level]})]}),l.jsxs("div",{className:"bg-blue-900/30 border border-blue-600/40 text-blue-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm min-w-[120px]",children:[l.jsx("span",{children:""}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"bg-blue-800/50 rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:"bg-blue-400 h-full transition-all duration-300",style:{width:`${n.xp/n.nextLevelXp*100}%`}})})})]})]})]})})})}const Ir=1400,$r=700,_t=4e3,Rt=3e3;function Rh(e){return!e||e==="Common"?"#ffffff":e==="Magic"?"#06b6d4":e==="Rare"?"#8b5cf6":e==="Unique"?"#fbbf24":"#ffffff"}const Lh=Wn.memo(function(){const t=C.useRef(null),{state:n,actions:a}=it(),[s,r]=C.useState({x:_t/2,y:Rt/2}),[i,c]=C.useState({}),[u,d]=C.useState([]),[f,v]=C.useState([]),[b,m]=C.useState([]),[p,S]=C.useState({}),[g,x]=C.useState({x:0,y:0,zoom:1}),[h,y]=C.useState(0),[w,P]=C.useState(0),[D,O]=C.useState({active:!1,startTime:0,rotation:0}),[M,j]=C.useState(!1),I=C.useRef(0),K=1e3/60,F=C.useMemo(()=>{const H=[];for(let Y=0;Y<1e3;Y++)H.push({x:0,y:0});return H},[]);let G=0;const Z=C.useCallback((H,Y)=>{const o=F[G%F.length];return o.x=H,o.y=Y,G++,o},[F]),ce=C.useCallback((H,Y,o=0)=>{const B=(H-Y)*Math.cos(Math.PI/6),V=(H+Y)*Math.sin(Math.PI/6)-o*.5;return Z(B,V)},[Z]),ee=C.useCallback(H=>Z((H.x-g.x)*g.zoom+Ir/2,(H.y-g.y)*g.zoom+$r/2),[g.x,g.y,g.zoom,Z]),T=C.useCallback((H,Y,o=0)=>{const B=ce(H,Y,o);return ee(B)},[ce,ee]);C.useCallback((H,Y)=>H+Y,[]),C.useEffect(()=>{c(H=>{const Y={...H};let o=!1;const B=[{centerX:_t*.3,centerY:Rt*.3,radius:300},{centerX:_t*.7,centerY:Rt*.3,radius:300},{centerX:_t*.3,centerY:Rt*.7,radius:300},{centerX:_t*.7,centerY:Rt*.7,radius:300},{centerX:_t*.5,centerY:Rt*.1,radius:200},{centerX:_t*.5,centerY:Rt*.9,radius:200},{centerX:_t*.1,centerY:Rt*.5,radius:200},{centerX:_t*.9,centerY:Rt*.5,radius:200}];n.enemies.forEach((de,ge)=>{if(!Y[de.id]){o=!0;const we=B[ge%B.length],fe=Math.random()*Math.PI*2,Se=Math.random()*we.radius,ve=we.centerX+Math.cos(fe)*Se,je=we.centerY+Math.sin(fe)*Se;Y[de.id]={x:Math.max(50,Math.min(_t-50,ve)),y:Math.max(50,Math.min(Rt-50,je))}}});const V=new Set(n.enemies.map(de=>de.id));return Object.keys(Y).forEach(de=>{V.has(de)||delete Y[de]}),o||Object.keys(Y).length!==Object.keys(H).length?Y:H})},[n.enemies]),C.useEffect(()=>{a.updateEnemyPositions(i)},[i,a]),C.useEffect(()=>{const H=Y=>{Y.key.toLowerCase()==="f1"&&j(B=>!B)};return window.addEventListener("keydown",H),()=>{window.removeEventListener("keydown",H)}},[]);const U=(H,Y=0)=>H.x>=Y&&H.x<=_t-Y&&H.y>=Y&&H.y<=Rt-Y,J=(H,Y)=>Math.hypot(H.x-Y.x,H.y-Y.y),$=C.useRef(0);C.useEffect(()=>{if(!n.log||n.log.length===0)return;n.log.length<$.current&&($.current=0);const H=n.log.slice(0,n.log.length-$.current);H.length!==0&&($.current=n.log.length,H.reverse().forEach(Y=>{if(console.log(` GameCanvas processing log: ${Y}`),Y.startsWith("ANIM_PLAYER|")){const o=Y.split("|"),B=o[1],V=o[2],de=o[3],ge=o[4],we=Math.floor(Number(o[5]||0)),fe=i[B],Se=Rh(de);if(V==="melee")m(ve=>[...ve,{kind:"slash",x:(fe==null?void 0:fe.x)||300,y:(fe==null?void 0:fe.y)||200,t:Date.now(),ttl:400,angle:Math.random()*Math.PI-Math.PI/2,color:Se}]);else if(V==="ranged"){if(fe){const ve=fe.x-s.x,je=fe.y-s.y,Ee=Math.hypot(ve,je)||1,N=3*(n.player.projectileSpeed||1)*(1+(n.skills.arcane||0)*.1);d(E=>[...E,{x:s.x,y:s.y,vx:ve/Ee*N,vy:je/Ee*N,life:800,color:Se,radius:3,size:2}])}}else if(V==="magic"&&fe){const ve=fe.x-s.x,je=fe.y-s.y,Ee=Math.hypot(ve,je)||1,N=2*(n.player.projectileSpeed||1)*(1+(n.skills.arcane||0)*.1);d(E=>[...E,{x:s.x,y:s.y,vx:ve/Ee*N,vy:je/Ee*N,life:1200,color:Se,radius:6,size:4,glow:!0}])}if(fe){const ve=we.toFixed(2),je=ge==="crit"?`-${ve} CRIT!`:`-${ve}`,Ee=ge==="crit";m(N=>[...N,{kind:Ee?"critical_damage":"damage",x:fe.x+(Math.random()-.5)*10,y:fe.y-10+(Math.random()-.5)*6,t:Date.now(),ttl:Ee?2e3:1600,text:je,crit:Ee,size:Math.min(Ee?32:28,(Ee?14:10)+Math.floor(we/2)),color:Ee?"#ff0066":"#ff6b6b"}]),Ee&&m(N=>[...N,{kind:"critical_burst",x:fe.x,y:fe.y,t:Date.now(),ttl:1200,color:"#ff0066",size:30}])}}if(Y.startsWith("Enemy defeated! Loot:")){const o=Y.match(/Loot: (.+)$/);o&&m(B=>[...B,{kind:"pickup",x:220,y:60,t:Date.now(),ttl:1200,text:o[1],color:"#fff"}])}if(Y.includes("dodged"))if(Y.includes("Player dodged"))m(o=>[...o,{kind:"dodge",x:s.x+(Math.random()-.5)*20,y:s.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1500,text:"DODGE!",color:"#00ffff",size:18}]),m(o=>[...o,{kind:"dodge_burst",x:s.x,y:s.y,t:Date.now(),ttl:800,color:"#00ffff",size:20}]);else{const o=Y.match(/(.+) dodged/);if(o){const B=o[1],V=n.enemies.find(de=>de.name===B);if(V){const de=i[V.id];de&&m(ge=>[...ge,{kind:"miss",x:de.x+(Math.random()-.5)*20,y:de.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1200,text:"MISS!",color:"#94a3b8",size:14}])}}}if(Y.includes("hits back for")){const o=Y.match(/hits back for (\d+)/);if(o){const B=parseInt(o[1]);m(V=>[...V,{kind:"player_damage",x:s.x+(Math.random()-.5)*15,y:s.y-15+(Math.random()-.5)*8,t:Date.now(),ttl:1400,text:`-${B}`,color:"#ef4444",size:Math.min(24,12+Math.floor(B/3))}])}}if(Y.includes("blocked")&&Y.includes("Player blocked")&&m(o=>[...o,{kind:"block",x:s.x+(Math.random()-.5)*20,y:s.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1200,text:"BLOCK!",color:"#fbbf24",size:16}]),Y.startsWith(" Critical Hit!"),Y.startsWith("ANIM_SKILL|")){const o=Y.split("|"),B=o[1];if(console.log(` Processing ANIM_SKILL: ${B}, parts:`,o),B==="whirlwind"){const V=Number(o[2]),de=Number(o[3]);O({active:!0,startTime:Date.now(),rotation:0}),setTimeout(()=>{O(ge=>({...ge,active:!1}))},de),m(ge=>[...ge,{kind:"whirlwind",x:s.x,y:s.y,t:V,ttl:de,color:"#fbbf24",duration:de}])}else if(B==="heal")m(V=>[...V,{kind:"heal",x:s.x,y:s.y,t:Date.now(),ttl:2e3,color:"#10b981"}]);else if(B==="fireball"){const V=o[2],de=i[V];if(console.log(` FIREBALL ANIM_SKILL received - targetId: ${V}, targetPos:`,de),de){const ge=de.x-s.x,we=de.y-s.y,fe=4*(n.player.projectileSpeed||1),Se=n.player.skillBar.slots.find(W=>(W==null?void 0:W.name)==="Fireball"),ve=Se?Se.supportGems.reduce((W,se)=>{var R,A;return se.id==="multiple_projectiles"?W+(((A=(R=se.modifiers)==null?void 0:R.find(_=>_.type==="projectiles"))==null?void 0:A.value)||0):W},1):1,je=20,Ee=Math.atan2(we,ge),N=s.x+Math.cos(Ee)*je,E=s.y+Math.sin(Ee)*je;for(let W=0;W<ve;W++){const se=ve>1?(W-(ve-1)/2)*.3:0,R=Ee+se,A=Math.cos(R)*fe,_=Math.sin(R)*fe,te=ve>1?(W-(ve-1)/2)*8:0,X=N+Math.cos(R+Math.PI/2)*te,ae=E+Math.sin(R+Math.PI/2)*te,ue={x:X,y:ae,vx:A,vy:_,life:8e3,color:"#ff4400",radius:10,size:8,glow:!0,type:"fireball",trail:!1,particles:!1,rotation:0,targetId:V};console.log(` Creating fireball projectile with life: ${ue.life}ms, target: ${V}`),d(L=>[...L,ue]),ie.current.calculatedProjectiles||(ie.current.calculatedProjectiles=[]),ie.current.calculatedProjectiles.push(ue)}}}else if(B==="lightning_bolt"){const V=o[2],de=i[V];if(de){const ge=de.x-s.x,we=de.y-s.y,fe=Math.hypot(ge,we)||1,Se=6*(n.player.projectileSpeed||1),ve=20,je=Math.atan2(we,ge),Ee=s.x+Math.cos(je)*ve,N=s.y+Math.sin(je)*ve;d(E=>[...E,{x:Ee,y:N,vx:ge/fe*Se,vy:we/fe*Se,life:800,color:"#00aaff",radius:6,size:4,glow:!0}])}}else if(B==="power_strike")m(V=>[...V,{kind:"power_strike",x:s.x,y:s.y,t:Date.now(),ttl:700,color:"#ffaa00",size:18}]);else if(B==="ice_shard"){const V=o[2],de=i[V];if(de){const ge=de.x-s.x,we=de.y-s.y,fe=Math.hypot(ge,we)||1,Se=5*(n.player.projectileSpeed||1),ve=20,je=Math.atan2(we,ge),Ee=s.x+Math.cos(je)*ve,N=s.y+Math.sin(je)*ve;d(E=>[...E,{x:Ee,y:N,vx:ge/fe*Se,vy:we/fe*Se,life:900,color:"#74c0fc",radius:5,size:3,glow:!0}])}}else if(B==="ground_slam")m(V=>[...V,{kind:"ground_slam",x:s.x,y:s.y,t:Date.now(),ttl:800,color:"#8b5a2b",size:25}]);else if(B==="poison_arrow"){const V=o[2],de=i[V];if(de){const ge=de.x-s.x,we=de.y-s.y,fe=Math.hypot(ge,we)||1,Se=4.5*(n.player.projectileSpeed||1);d(ve=>[...ve,{x:s.x,y:s.y,vx:ge/fe*Se,vy:we/fe*Se,life:1200,color:"#51cf66",radius:4,size:3,glow:!1}])}}else B==="chain_lightning"?m(V=>[...V,{kind:"chain_lightning",x:s.x,y:s.y,t:Date.now(),ttl:800,color:"#ffd43b",size:16}]):B==="meteor"?m(V=>[...V,{kind:"meteor",x:s.x,y:s.y,t:Date.now(),ttl:1200,color:"#ff6b6b",size:35}]):B==="blade_vortex"?m(V=>[...V,{kind:"blade_vortex",x:s.x,y:s.y,t:Date.now(),ttl:5e3,color:"#c0c0c0",size:22}]):B==="frost_nova"?m(V=>[...V,{kind:"frost_nova",x:s.x,y:s.y,t:Date.now(),ttl:1e3,color:"#74c0fc",size:28}]):B==="cleave"?m(V=>[...V,{kind:"cleave",x:s.x,y:s.y,t:Date.now(),ttl:600,color:"#fbbf24",size:20}]):B==="summon_skeletons"&&m(V=>[...V,{kind:"summon_skeletons",x:s.x,y:s.y,t:Date.now(),ttl:2e3,color:"#9ca3af",size:15}])}}))},[n.log,i,s]);const re=(H,Y,o,B)=>J(H,Y)<o+B,ie=C.useRef({idleAnimation:0,whirlwindRotation:0,lastUpdate:performance.now(),calculatedPlayerPos:null,calculatedEnemyPositions:null,calculatedProjectiles:null,calculatedEffects:null,calculatedDying:null,calculatedCamera:null});C.useEffect(()=>{let H=0,Y=performance.now(),o=0,B=0,V=performance.now();function de(ge){const we=Math.min(40,ge-Y);if(Y=ge,o++,B++,ge-V>2e3){const L=Math.round(B*1e3/(ge-V));L<45&&console.warn(` Performance Warning: FPS dropped to ${L}. Projectiles: ${u.length}, Effects: ${b.length}`),B=0,V=ge}if(ie.current.idleAnimation=ge/1e3,D.active){const L=ge-D.startTime;ie.current.whirlwindRotation=L*.01}ie.current.lastUpdate=ge;let fe=s,Se=i,ve=u,je=b,Ee=p,N=g;const E=D.active?3.5:2.2;if(n.enemies.length>0){let L=null,me=null,ne=9999;if(n.enemies.forEach(xe=>{const oe=i[xe.id];if(!oe||xe.hp<=0)return;const ye=J(s,oe);ye<ne&&(ne=ye,L=xe,me=oe)}),L&&me){const xe=n.player.skillBar.slots.filter(Ne=>Ne&&Ne.isEquipped);let oe=!1,ye=80;xe.forEach(Ne=>{if(Ne&&Ne.scaling&&["fireball","lightning_bolt","ice_shard","poison_arrow"].includes(Ne.id)){oe=!0;const He=Ri(Ne);ye=Math.max(ye,He*.7)}});const qe=me.x-s.x,Te=me.y-s.y,Ue=ne;let ze={...s},kt=!1;if(oe){const Ne=ye*.8,Re=ye*1.15,He=80,ot=n.enemies.filter(Me=>{const De=i[Me.id];return!De||Me.hp<=0?!1:J(s,De)<He}).map(Me=>({enemy:Me,pos:i[Me.id],distance:J(s,i[Me.id])}));let pe=0,Ce=0;if(ot.forEach(({pos:Me,distance:De})=>{const Le=1/Math.max(De,1),Xe=Me.x-s.x,Je=Me.y-s.y;pe+=Xe*Le,Ce+=Je*Le}),ot.length>1){const Me=Math.sqrt(pe*pe+Ce*Ce);if(Me>0){const De=-pe/Me,Le=-Ce/Me,Xe=E*1;let Je={x:s.x+De*Xe,y:s.y+Le*Xe};if(!U(Je,18)){const cn=[{x:Le,y:-De},{x:-Le,y:De},{x:De*.7+Le*.7,y:Le*.7-De*.7},{x:De*.7-Le*.7,y:Le*.7+De*.7}];for(const un of cn){const ks={x:s.x+un.x*Xe,y:s.y+un.y*Xe};if(U(ks,18)){Je=ks;break}}if(!U(Je,18)){const un=_t/2,ks=Rt/2,sr=un-s.x,lr=ks-s.y,rr=Math.sqrt(sr*sr+lr*lr);rr>0&&(Je={x:s.x+sr/rr*Xe,y:s.y+lr/rr*Xe})}}ze=Je,kt=!0}}else if(Ue<Ne){const Me=Math.min(Ne-Ue+20,E*1),De=qe/Math.max(Ue,1),Le=Te/Math.max(Ue,1);ze={x:s.x-De*Me,y:s.y-Le*Me},kt=!0}else if(Ue>Re){const Me=Math.min(Ue-ye,E),De=qe/Math.max(Ue,1),Le=Te/Math.max(Ue,1);ze={x:s.x+De*Me,y:s.y+Le*Me},kt=!0}}else if(Ue>60){const Ne=Math.min(Ue-50,E),Re=qe/Math.max(Ue,1),He=Te/Math.max(Ue,1);ze={x:s.x+Re*Ne,y:s.y+He*Ne},kt=!0}if(kt){let Ne=!0,Re=!1;oe&&(Re=n.enemies.filter(Ce=>{const Me=i[Ce.id];return Me&&Ce.hp>0&&J(s,Me)<60}).length>1);const He=Re?8:18,ot=Re?0:2;n.enemies.forEach(pe=>{const Ce=i[pe.id];if(Ce&&pe.hp>0){let Me=12;pe.type==="melee"?Me=12+pe.level*.8:pe.type==="ranged"?Me=10+pe.level*.6:Me=14+pe.level*1,re(ze,Ce,He,Me+ot)&&(Ne=!1)}}),(Ne&&U(ze,18)||Re&&U(ze,18))&&(fe=ze)}const _e=Math.atan2(Te,qe);P(_e)}}else fe={x:s.x+Math.sin(ge/2e3)*.3,y:s.y+Math.cos(ge/3e3)*.2};const W=ce(fe.x,fe.y);N={x:g.x+(W.x-g.x)*.1,y:g.y+(W.y-g.y)*.1,zoom:g.zoom};const se={...i},R={...p};n.enemies.forEach((L,me)=>{const ne=se[L.id]||{x:Ir-120,y:$r/2};if(L.hp<=0){R[L.id]||(R[L.id]=Date.now());return}const xe=fe.x-ne.x,oe=fe.y-ne.y,ye=Math.hypot(xe,oe)||1,qe={x:ne.x+xe/ye*.3,y:ne.y+oe/ye*.3};let Te=12;L.type==="melee"?Te=12+L.level*.8:L.type==="ranged"?Te=10+L.level*.6:Te=14+L.level*1;let Ue=!0;n.enemies.forEach(ze=>{if(ze.id!==L.id){const kt=se[ze.id];if(kt){let _e=12;ze.type==="melee"?_e=12+ze.level*.8:ze.type==="ranged"?_e=10+ze.level*.6:_e=14+ze.level*1,re(qe,kt,Te+1,_e+1)&&(Ue=!1)}}}),Ue&&(se[L.id]=qe)}),Se=se,Ee=R;const A=[...b],te=u.map(L=>{let me=L.vx,ne=L.vy;if(L.type==="fireball"&&L.targetId){const oe=Se[L.targetId];if(oe){const ye=oe.x-L.x,qe=oe.y-L.y,Te=Math.hypot(ye,qe);if(Te>0){const ze=ye/Te*Math.hypot(L.vx,L.vy),kt=qe/Te*Math.hypot(L.vx,L.vy);me=L.vx+(ze-L.vx)*.15,ne=L.vy+(kt-L.vy)*.15}}}const xe={...L,x:L.x+me,y:L.y+ne,vx:me,vy:ne,life:L.life-we,rotation:L.rotation!==void 0?L.rotation+.3:void 0};return L.type==="fireball"&&L.life>0&&xe.life<=0&&console.log(` Fireball expired - Original life: ${L.life}ms, dt: ${we}ms, New life: ${xe.life}ms`),L.type==="fireball"&&Math.random()<.3&&A.push({kind:"fire_particle",x:L.x+(Math.random()-.5)*10,y:L.y+(Math.random()-.5)*10,t:Date.now(),ttl:800+Math.random()*400,color:"#ff8800",size:2+Math.random()*2}),xe}).filter(L=>{if(L.life<=0)return!1;let me=!1;return n.enemies.forEach(ne=>{const xe=Se[ne.id];if(xe&&!me){let oe=12;if(ne.type==="melee"?oe=12+ne.level*.8:ne.type==="ranged"?oe=10+ne.level*.6:oe=14+ne.level*1,re({x:L.x,y:L.y},xe,L.radius,oe)){if(L.type==="fireball"){A.push({kind:"fireball_explosion",x:L.x,y:L.y,t:Date.now(),ttl:3e3,color:L.color,size:L.size*3});for(let ye=0;ye<12;ye++){const qe=ye/12*Math.PI*2,Te=20+Math.random()*40;A.push({kind:"fire_particle",x:L.x+Math.cos(qe)*Te,y:L.y+Math.sin(qe)*Te,t:Date.now(),ttl:1500+Math.random()*1e3,color:"#ff6600",size:3+Math.random()*3})}}else A.push({kind:"impact",x:L.x,y:L.y,t:Date.now(),ttl:300,color:L.color,size:L.size*2});me=!0}}}),!me}),X=250;if(te.length>X){const L=te.filter(oe=>oe.type==="fireball"),me=te.filter(oe=>oe.type!=="fireball");me.sort((oe,ye)=>{if(oe.homing&&ye.homing&&oe.targetX!==void 0&&oe.targetY!==void 0&&ye.targetX!==void 0&&ye.targetY!==void 0){const qe=Math.sqrt((oe.targetX-oe.x)**2+(oe.targetY-oe.y)**2);return Math.sqrt((ye.targetX-ye.x)**2+(ye.targetY-ye.y)**2)-qe}return(ye.life||0)-(oe.life||0)});const ne=Math.min(L.length,Math.floor(X*.4)),xe=X-ne;ve=[...L.slice(0,ne),...me.slice(0,xe)]}else ve=te;const ae=A.filter(L=>Date.now()-L.t<L.ttl),ue=400;if(ae.length>ue){const L=ae.filter(oe=>oe.kind==="fireball_explosion"||oe.kind==="fire_particle"),me=ae.filter(oe=>oe.kind!=="fireball_explosion"&&oe.kind!=="fire_particle");me.sort((oe,ye)=>ye.t-oe.t);const ne=Math.min(L.length,Math.floor(ue*.3)),xe=ue-ne;je=[...L.slice(0,ne),...me.slice(0,xe)]}else je=ae;if(o%300===0){const L=je.filter(ne=>ne.kind==="fireball_explosion"||ne.kind==="fire_particle"),me=ve.filter(ne=>ne.type==="fireball");console.log(` Fireball Status - Projectiles: ${me.length}, Effects: ${L.length}, Total Effects: ${je.length}/${ue}`),L.length===0&&me.length>0&&console.warn(" Fireball effects missing despite active fireball projectiles"),je.length>=ue&&console.log(` Effects limit reached (${ue}), prioritization active`)}ie.current.calculatedPlayerPos=fe,ie.current.calculatedEnemyPositions=Se,ie.current.calculatedProjectiles=ve,ie.current.calculatedEffects=je,ie.current.calculatedDying=Ee,ie.current.calculatedCamera=N,H=requestAnimationFrame(de)}return H=requestAnimationFrame(de),()=>cancelAnimationFrame(H)},[n.enemies,n.player,n.log,D,s,i,g,u,b,p]),C.useEffect(()=>{const Y=setInterval(()=>{const o=ie.current;o.calculatedPlayerPos&&(r(o.calculatedPlayerPos),a.updatePlayerPosition(o.calculatedPlayerPos)),o.calculatedEnemyPositions&&c(o.calculatedEnemyPositions),o.calculatedProjectiles&&d(o.calculatedProjectiles),o.calculatedEffects&&m(o.calculatedEffects),o.calculatedDying&&S(o.calculatedDying),o.calculatedCamera&&x(o.calculatedCamera)},16);return()=>clearInterval(Y)},[]);const k=C.useCallback(()=>{const H=performance.now();if(H-I.current<K)return;I.current=H,G=0;const Y=t.current;if(!Y)return;const o=Y.getContext("2d");if(!o)return;o.clearRect(0,0,Y.width,Y.height),o.fillStyle="#2a3441",o.fillRect(0,0,Y.width,Y.height),o.strokeStyle="#334155",o.lineWidth=2,o.strokeRect(10,10,Y.width-20,Y.height-20),n.enemies.forEach((N,E)=>{const W=i[N.id]||{x:200+E*40,y:100+(E%5-2)*50},se=T(W.x,W.y),R=p[N.id],A=N.hp<=0&&R?Math.max(0,1-(Date.now()-R)/1500):1;o.save(),o.globalAlpha=A;let _=12;N.type==="melee"?(o.fillStyle="#dc2626",_=12+N.level*.8):N.type==="ranged"?(o.fillStyle="#f97316",_=10+N.level*.6):(o.fillStyle="#a78bfa",_=14+N.level*1),o.beginPath(),o.arc(se.x,se.y,_*g.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#ffffff",N.type==="melee"?(o.beginPath(),o.moveTo(se.x-8*g.zoom,se.y-18*g.zoom),o.lineTo(se.x-2*g.zoom,se.y-26*g.zoom),o.lineTo(se.x+4*g.zoom,se.y-18*g.zoom),o.fill()):N.type==="ranged"?(o.beginPath(),o.arc(se.x,se.y-6*g.zoom,6*g.zoom,Math.PI*.2,Math.PI*.8),o.lineWidth=2,o.strokeStyle="#ffffff",o.stroke()):(o.beginPath(),o.arc(se.x,se.y,(_+6)*g.zoom,0,Math.PI*2),o.strokeStyle="rgba(255,255,255,0.06)",o.lineWidth=2,o.stroke()),z(o,se.x,se.y-(_+15)*g.zoom,40*g.zoom,6*g.zoom,N.hp,N.maxHp,A),he(o,`Lv.${N.level}`,se.x,se.y-(_+25)*g.zoom,A),o.restore()});const B=T(s.x,s.y);32*g.zoom;let V=0;n.enemies.length===0&&(V=Math.sin(h*2)*2*g.zoom),o.save(),D.active&&(o.translate(B.x,B.y+V),o.rotate(D.rotation),o.translate(-B.x,-B.y-V),o.shadowColor="#ffffff",o.shadowBlur=8*g.zoom);const de=Date.now()*.003,ge=25*g.zoom,we=Math.sin(de*1.5)*.2+.8,fe=de*.5;for(let N=0;N<3;N++){const E=ge*(.6+N*.2)*we,W=(.15-N*.03)*we,se=o.createRadialGradient(B.x,B.y+10*g.zoom,0,B.x,B.y+10*g.zoom,E);D.active?(se.addColorStop(0,`rgba(255, 255, 255, ${W*.8})`),se.addColorStop(.7,`rgba(200, 200, 255, ${W*.4})`),se.addColorStop(1,"rgba(255, 255, 255, 0)")):(se.addColorStop(0,`rgba(100, 150, 255, ${W})`),se.addColorStop(.7,`rgba(50, 100, 200, ${W*.6})`),se.addColorStop(1,"rgba(100, 150, 255, 0)")),o.fillStyle=se,o.beginPath(),o.arc(B.x,B.y+10*g.zoom,E,0,Math.PI*2),o.fill()}for(let N=0;N<8;N++){const E=fe+N*Math.PI*2/8,W=ge*.8,se=B.x+Math.cos(E)*W,R=B.y+10*g.zoom+Math.sin(E)*W,A=2*g.zoom*we;o.fillStyle=D.active?`rgba(255, 255, 255, ${.6*we})`:`rgba(150, 200, 255, ${.8*we})`,o.beginPath(),o.arc(se,R,A,0,Math.PI*2),o.fill()}const Se=16;o.fillStyle="#4A90E2",o.beginPath(),o.arc(B.x,B.y+V,Se*g.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#ffffff",o.beginPath(),o.arc(B.x,B.y+V,4*g.zoom,0,Math.PI*2),o.fill();const ve=1+Math.sin(de*.003)*.05;if(o.save(),o.translate(B.x,B.y+V),o.scale(ve,ve),o.translate(-B.x,-(B.y+V)),o.fillStyle="#ffffff",o.font=`${12*g.zoom}px Arial`,o.textAlign="center",o.fillText(`Lv.${n.player.level}`,B.x,B.y+V-(Se+8)*g.zoom),o.restore(),o.restore(),n.enemies.length>0){o.save();const N=40*g.zoom;30*g.zoom;const E=.3+Math.sin(de*2)*.1,W=B.x,se=B.y+V,R=W+Math.cos(w)*N,A=se+Math.sin(w)*N,_=w-Math.PI/6,te=w+Math.PI/6,X=15*g.zoom,ae=W+Math.cos(_)*X,ue=se+Math.sin(_)*X,L=W+Math.cos(te)*X,me=se+Math.sin(te)*X,ne=o.createLinearGradient(W,se,R,A);D.active?(ne.addColorStop(0,`rgba(255, 255, 255, ${E*.8})`),ne.addColorStop(.5,`rgba(200, 200, 255, ${E*.6})`),ne.addColorStop(1,`rgba(255, 255, 255, ${E*.3})`)):(ne.addColorStop(0,`rgba(100, 150, 255, ${E*.6})`),ne.addColorStop(.5,`rgba(150, 200, 255, ${E*.8})`),ne.addColorStop(1,`rgba(200, 220, 255, ${E*.4})`)),o.fillStyle=ne,o.beginPath(),o.moveTo(ae,ue),o.lineTo(R,A),o.lineTo(L,me),o.closePath(),o.fill(),o.strokeStyle=D.active?`rgba(255, 255, 255, ${E*.5})`:`rgba(150, 200, 255, ${E*.7})`,o.lineWidth=1*g.zoom,o.stroke();for(let xe=0;xe<3;xe++){const oe=(xe+1)/4,ye=ae+(R-ae)*oe,qe=ue+(A-ue)*oe,Te=L+(R-L)*oe,Ue=me+(A-me)*oe,ze=(1+Math.sin(de*3+xe))*g.zoom;o.fillStyle=D.active?`rgba(255, 255, 255, ${E*.8})`:`rgba(200, 220, 255, ${E})`,o.beginPath(),o.arc(ye,qe,ze,0,Math.PI*2),o.fill(),o.beginPath(),o.arc(Te,Ue,ze,0,Math.PI*2),o.fill()}o.restore()}if(z(o,B.x,B.y-35*g.zoom+V,50*g.zoom,8*g.zoom,n.player.hp,n.player.maxHp,1),he(o,`Lv.${n.player.level}`,B.x,B.y-50*g.zoom+V,1),M){o.save();const N=16,E=N*g.zoom;o.globalAlpha=.4,o.strokeStyle="#ff4444",o.lineWidth=2*g.zoom,o.setLineDash([4*g.zoom,2*g.zoom]),o.beginPath(),o.arc(B.x,B.y+V,E,0,Math.PI*2),o.stroke(),o.globalAlpha=.8,o.fillStyle="#ff4444",o.font=`${10*g.zoom}px Arial`,o.textAlign="center",o.fillText(`Player: ${N}px`,B.x,B.y+V-E-8*g.zoom);const W=n.player.skillBar.slots.filter(_=>_!==null);let se=0;W.forEach((_,te)=>{if(_&&_.scaling){let X=0,ae="#00ff00",ue=_.name||_.id;if(_.scaling.baseArea&&_.scaling.areaPerLevel?(X=(_.scaling.baseArea+(_.level-1)*_.scaling.areaPerLevel)*30,ae="#00ff00"):_.scaling.baseRange&&_.scaling.rangePerLevel?(X=Ri(_),ae="#ff8844",_.id==="fireball"&&console.log("Fireball Debug:",{skillId:_.id,skillName:_.name,skillLevel:_.level,baseRange:_.scaling.baseRange,rangePerLevel:_.scaling.rangePerLevel,calculatedRange:X,cameraZoom:g.zoom,scaledRange:X*g.zoom})):(_.id==="lightning_bolt"||_.id==="ice_shard")&&(X=200,ae="#ff8844"),X>0){const L=X*g.zoom;o.globalAlpha=.3,o.strokeStyle=ae,o.lineWidth=3*g.zoom,o.setLineDash([8*g.zoom,4*g.zoom]),o.beginPath(),o.arc(B.x,B.y+V,L,0,Math.PI*2),o.stroke(),o.globalAlpha=.8,o.fillStyle=ae,o.font=`${11*g.zoom}px Arial`,o.textAlign="center";const me=B.y+V+L+(15+se*15)*g.zoom;_.id==="fireball"?o.fillText(`${ue}: ${Math.round(X)}px (Lv.${_.level}) [base:${_.scaling.baseRange}, +${_.scaling.rangePerLevel}/lv, zoom:${g.zoom.toFixed(2)}]`,B.x,me):o.fillText(`${ue}: ${Math.round(X)}px (Lv.${_.level})`,B.x,me),se++}}}),o.globalAlpha=.9,o.fillStyle="#ffffff",o.font=`${12*g.zoom}px Arial`,o.textAlign="left",o.fillText(`Debug AOE (F1) | Skills: ${W.length}`,10*g.zoom,30*g.zoom);const R=50*g.zoom,A=18*g.zoom;o.font=`${10*g.zoom}px Arial`,o.fillStyle="#ff4444",o.fillText(" Player Collision (16px)",10*g.zoom,R),o.fillStyle="#00ff00",o.fillText(" AOE Skills",10*g.zoom,R+A),o.fillStyle="#4488ff",o.fillText(" Ranged Skills",10*g.zoom,R+A*2),o.fillStyle="#ff8844",o.fillText(" Projectile Skills",10*g.zoom,R+A*3),o.setLineDash([]),o.restore()}const je=ie.current.calculatedProjectiles;(je&&je.length>0?je:u).forEach(N=>{const E=T(N.x,N.y);if(o.save(),N.type==="fireball"){o.translate(E.x,E.y),N.rotation!==void 0&&o.rotate(N.rotation*Math.PI/180);const W=o.createRadialGradient(0,0,0,0,0,15*g.zoom);W.addColorStop(0,"rgba(255, 100, 0, 0.8)"),W.addColorStop(.5,"rgba(255, 50, 0, 0.4)"),W.addColorStop(1,"rgba(255, 0, 0, 0)"),o.fillStyle=W,o.beginPath(),o.arc(0,0,15*g.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#FFD700",o.beginPath(),o.arc(0,0,8*g.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#FFF",o.beginPath(),o.arc(0,0,4*g.zoom,0,Math.PI*2),o.fill()}else N.glow&&(o.shadowColor=N.color,o.shadowBlur=10*g.zoom),o.fillStyle=N.color,o.beginPath(),o.arc(E.x,E.y,N.radius*g.zoom,0,Math.PI*2),o.fill();o.restore()}),b.forEach(N=>{const E=T(N.x,N.y),W=Date.now()-N.t,se=Math.min(1,W/N.ttl);if(N.kind==="damage"||N.kind==="critical_damage"||N.kind==="player_damage"||N.kind==="dodge"||N.kind==="miss"||N.kind==="block"){if(o.save(),o.globalAlpha=1-se,o.fillStyle=N.color,N.kind==="dodge"||N.kind==="miss"||N.kind==="block")o.font=`bold ${(N.size||16)*g.zoom}px Arial`,o.strokeStyle="#000",o.lineWidth=2*g.zoom;else if(N.kind==="critical_damage"){o.font=`bold ${(N.size||20)*g.zoom}px Arial`,o.strokeStyle="#000",o.lineWidth=3*g.zoom;const A=1+Math.sin(W*.01)*.2;o.globalAlpha=(1-se)*A}else o.font=`${(N.size||16)*g.zoom}px bold sans-serif`;o.textAlign="center";const R=E.y-se*20*g.zoom;(N.kind==="dodge"||N.kind==="miss"||N.kind==="block"||N.kind==="critical_damage")&&o.strokeText(N.text||"",E.x,R),o.fillText(N.text||"",E.x,R),o.restore()}else if(N.kind==="impact"){o.save(),o.globalAlpha=(1-se)*.8,o.fillStyle=N.color;const R=(N.size||8)*se*2;o.beginPath(),o.arc(E.x,E.y,R,0,Math.PI*2),o.fill(),o.globalAlpha=(1-se)*.4,o.fillStyle="#ffffff",o.beginPath(),o.arc(E.x,E.y,R*.5,0,Math.PI*2),o.fill(),o.restore()}else if(N.kind==="fireball_explosion"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.9;const A=(N.size||24)*R*1.5;o.fillStyle=N.color,o.beginPath(),o.arc(E.x,E.y,A,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.7,o.fillStyle="#ff8800",o.beginPath(),o.arc(E.x,E.y,A*.7,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.5,o.fillStyle="#ffff00",o.beginPath(),o.arc(E.x,E.y,A*.4,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.3,o.fillStyle="#ffffff",o.beginPath(),o.arc(E.x,E.y,A*.2,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.8,o.fillStyle="#ff6600";for(let _=0;_<12;_++){const te=_/12*Math.PI*2+W*.01,X=A*(1.2+Math.sin(W*.005+_)*.3),ae=E.x+Math.cos(te)*X,ue=E.y+Math.sin(te)*X,L=(4+Math.sin(W*.008+_)*2)*g.zoom*(1-R);o.beginPath(),o.arc(ae,ue,L,0,Math.PI*2),o.fill()}o.restore()}else if(N.kind==="fire_particle"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||3)*g.zoom*(1-R*.5),_=1+Math.sin(W*.02)*.3;o.shadowColor=N.color,o.shadowBlur=8*g.zoom,o.fillStyle=N.color,o.beginPath(),o.arc(E.x,E.y,A*_,0,Math.PI*2),o.fill(),o.shadowBlur=0,o.globalAlpha=(1-R)*.6,o.fillStyle="#ffaa00",o.beginPath(),o.arc(E.x,E.y,A*.6*_,0,Math.PI*2),o.fill(),o.restore()}else if(N.kind==="slash"){o.save(),o.globalAlpha=(1-se)*.9;const R=N.angle||0,A=(N.size||30)*g.zoom,_=4*g.zoom*(1-se*.5),te=Math.sin(se*Math.PI),X=A*te,ae=E.x-Math.cos(R)*X/2,ue=E.y-Math.sin(R)*X/2,L=E.x+Math.cos(R)*X/2,me=E.y+Math.sin(R)*X/2;o.strokeStyle=N.color,o.lineWidth=_,o.lineCap="round",o.beginPath(),o.moveTo(ae,ue),o.lineTo(L,me),o.stroke(),o.globalAlpha=(1-se)*.6,o.strokeStyle="#ffffff",o.lineWidth=_*.4,o.beginPath(),o.moveTo(ae,ue),o.lineTo(L,me),o.stroke(),se<.7&&(o.globalAlpha=(1-se)*.8,o.fillStyle=N.color,o.beginPath(),o.arc(ae,ue,2*g.zoom,0,Math.PI*2),o.fill(),o.beginPath(),o.arc(L,me,2*g.zoom,0,Math.PI*2),o.fill()),o.restore()}else if(N.kind==="explosion"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||15)*R*1.5;o.fillStyle=N.color,o.beginPath(),o.arc(E.x,E.y,A,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.6,o.fillStyle="#ffff88",o.beginPath(),o.arc(E.x,E.y,A*.6,0,Math.PI*2),o.fill(),o.restore()}else if(N.kind==="lightning"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.9,o.strokeStyle=N.color,o.lineWidth=3*g.zoom,o.lineCap="round";const A=6,_=(N.size||12)*g.zoom;o.beginPath(),o.moveTo(E.x,E.y-_);for(let te=1;te<=A;te++){const X=E.y-_+te/A*_*2,ae=E.x+(Math.random()-.5)*20*g.zoom;o.lineTo(ae,X)}o.stroke(),o.globalAlpha=(1-R)*.7,o.strokeStyle="#ffffff",o.lineWidth=1*g.zoom,o.stroke(),o.restore()}else if(N.kind==="power_strike"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||16)*R*2;o.strokeStyle=N.color,o.lineWidth=4*g.zoom,o.beginPath(),o.arc(E.x,E.y,A,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-R)*.5,o.fillStyle="#ffff00",o.beginPath(),o.arc(E.x,E.y,A*.3,0,Math.PI*2),o.fill(),o.restore()}else if(N.kind==="critical_burst"){o.save();const R=Math.min(1,W/N.ttl),_=(N.size||25)*g.zoom*R,te=1+Math.sin(W*.02)*.3;o.globalAlpha=(1-R)*.8*te,o.strokeStyle=N.color,o.lineWidth=6*g.zoom,o.beginPath(),o.arc(E.x,E.y,_,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-R)*.6,o.fillStyle="#ffffff",o.beginPath(),o.arc(E.x,E.y,_*.4,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.7,o.strokeStyle=N.color,o.lineWidth=3*g.zoom;for(let X=0;X<8;X++){const ae=X*Math.PI/4+W*.005,ue=_*1.5,L=E.x+Math.cos(ae)*_*.3,me=E.y+Math.sin(ae)*_*.3,ne=E.x+Math.cos(ae)*ue,xe=E.y+Math.sin(ae)*ue;o.beginPath(),o.moveTo(L,me),o.lineTo(ne,xe),o.stroke()}o.restore()}else if(N.kind==="dodge_burst"){o.save();const R=Math.min(1,W/N.ttl),_=(N.size||20)*g.zoom*R;o.globalAlpha=(1-R)*.7,o.strokeStyle=N.color,o.lineWidth=3*g.zoom,o.setLineDash([8*g.zoom,4*g.zoom]),o.lineDashOffset=R*20,o.beginPath(),o.arc(E.x,E.y,_,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-R)*.5,o.fillStyle="#ffffff",o.beginPath(),o.arc(E.x,E.y,_*.3,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.6,o.strokeStyle=N.color,o.lineWidth=2*g.zoom,o.setLineDash([]);for(let te=0;te<6;te++){const X=te*Math.PI/3+W*.01,ae=_*.5,ue=_*1.2,L=E.x+Math.cos(X)*ae,me=E.y+Math.sin(X)*ae,ne=E.x+Math.cos(X)*ue,xe=E.y+Math.sin(X)*ue;o.beginPath(),o.moveTo(L,me),o.lineTo(ne,xe),o.stroke()}o.restore()}else if(N.kind==="pickup")o.save(),o.globalAlpha=1-se,o.fillStyle=N.color,o.font=`${14*g.zoom}px sans-serif`,o.textAlign="center",o.fillText(N.text||"",E.x,E.y),o.restore();else if(N.kind==="impact")o.save(),o.globalAlpha=1-se,o.strokeStyle=N.color,o.lineWidth=2,o.beginPath(),o.arc(N.x,N.y,se*20,0,Math.PI*2),o.stroke(),o.restore();else if(N.kind==="whirlwind"){const A=T(s.x,s.y),te=Date.now()-N.t,ae=te*.008;o.save();const L=Math.max(.7,1-se)+Math.sin(te*.01)*.2;for(let ne=0;ne<4;ne++){const xe=(ne+1)/4,oe=(30+ne*12)*g.zoom,ye=ae*(1+ne*.3);o.globalAlpha=L*(1-xe*.2),o.strokeStyle=ne===0?"#FFFFFF":"#F0F0F0",o.lineWidth=(4-ne)*g.zoom,o.beginPath(),o.setLineDash([15*g.zoom,8*g.zoom]),o.lineDashOffset=ye*30,o.arc(A.x,A.y,oe,0,Math.PI*2),o.stroke()}o.globalAlpha=L*.9,o.fillStyle="#FFFFFF",o.beginPath(),o.arc(A.x,A.y,8*g.zoom,0,Math.PI*2),o.fill(),o.globalAlpha=L*.8,o.strokeStyle="#FFFFFF",o.lineWidth=2*g.zoom;for(let ne=0;ne<6;ne++){const xe=ae*2+ne*Math.PI/3,oe=25*g.zoom,ye=A.x+Math.cos(xe)*oe,qe=A.y+Math.sin(xe)*oe,Te=A.x+Math.cos(xe+.5)*(oe+15*g.zoom),Ue=A.y+Math.sin(xe+.5)*(oe+15*g.zoom);o.beginPath(),o.moveTo(ye,qe),o.lineTo(Te,Ue),o.stroke()}o.globalAlpha=L*.7,o.fillStyle="#FFD54F";for(let ne=0;ne<8;ne++){const xe=ae*3+ne*Math.PI/4,oe=(35+Math.sin(te*.005+ne)*10)*g.zoom,ye=A.x+Math.cos(xe)*oe,qe=A.y+Math.sin(xe)*oe,Te=(2+Math.sin(te*.01+ne)*1)*g.zoom;o.beginPath(),o.arc(ye,qe,Te,0,Math.PI*2),o.fill()}o.globalAlpha=.3+Math.sin(te*.008)*.1,o.strokeStyle="#ff6b6b",o.lineWidth=3*g.zoom,o.setLineDash([10*g.zoom,5*g.zoom]),o.lineDashOffset=te*.01;const me=n.player.skillBar.slots.find(ne=>(ne==null?void 0:ne.name)==="Whirlwind");if(me){const oe=(me.scaling.baseArea+(me.level-1)*me.scaling.areaPerLevel)*30*g.zoom;o.beginPath(),o.arc(A.x,A.y,oe,0,Math.PI*2),o.stroke()}o.setLineDash([]),o.restore()}else if(N.kind==="heal"){const R=T(s.x,s.y);o.save(),o.globalAlpha=1-se,o.fillStyle=N.color;for(let A=0;A<8;A++){const _=A/8*Math.PI*2+se*Math.PI*2,te=30*g.zoom*(1-se*.5),X=R.x+Math.cos(_)*te,ae=R.y+Math.sin(_)*te;o.beginPath(),o.arc(X,ae,3*g.zoom,0,Math.PI*2),o.fill()}o.restore()}else if(N.kind==="ice_shard"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||12)*g.zoom;o.fillStyle=N.color,o.beginPath();for(let _=0;_<6;_++){const te=_*Math.PI/3+W*.002,X=E.x+Math.cos(te)*A,ae=E.y+Math.sin(te)*A;_===0?o.moveTo(X,ae):o.lineTo(X,ae)}o.closePath(),o.fill(),o.globalAlpha=(1-R)*.6,o.fillStyle="#ffffff";for(let _=0;_<8;_++){const te=_*Math.PI/4+W*.005,X=A*1.5,ae=E.x+Math.cos(te)*X,ue=E.y+Math.sin(te)*X;o.beginPath(),o.arc(ae,ue,2*g.zoom,0,Math.PI*2),o.fill()}o.restore()}else if(N.kind==="ground_slam"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||25)*R*2;o.strokeStyle=N.color,o.lineWidth=6*g.zoom,o.beginPath(),o.arc(E.x,E.y,A,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-R)*.5,o.fillStyle="#8b7355",o.beginPath(),o.arc(E.x,E.y,A*.6,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.7,o.fillStyle=N.color;for(let _=0;_<6;_++){const te=_*Math.PI/3+W*.003,X=A*.8,ae=E.x+Math.cos(te)*X,ue=E.y+Math.sin(te)*X;o.fillRect(ae-2,ue-2,4*g.zoom,4*g.zoom)}o.restore()}else if(N.kind==="poison_arrow"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.7;const A=(N.size||20)*g.zoom;o.fillStyle=N.color,o.beginPath(),o.arc(E.x,E.y,A,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.5,o.fillStyle="#40c057";for(let _=0;_<12;_++){const te=_*Math.PI/6+W*.004,X=A*(.5+Math.sin(W*.01+_)*.3),ae=E.x+Math.cos(te)*X,ue=E.y+Math.sin(te)*X,L=(2+Math.sin(W*.008+_)*1)*g.zoom;o.beginPath(),o.arc(ae,ue,L,0,Math.PI*2),o.fill()}o.restore()}else if(N.kind==="chain_lightning"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.9,o.strokeStyle=N.color,o.lineWidth=4*g.zoom,o.lineCap="round";for(let A=0;A<3;A++){const _=A*Math.PI*2/3+W*.01,te=(N.size||16)*g.zoom;o.beginPath(),o.moveTo(E.x,E.y);for(let X=1;X<=5;X++){const ae=X/5,ue=E.x+Math.cos(_)*te*ae+(Math.random()-.5)*15*g.zoom,L=E.y+Math.sin(_)*te*ae+(Math.random()-.5)*15*g.zoom;o.lineTo(ue,L)}o.stroke()}o.globalAlpha=(1-R)*.8,o.fillStyle="#ffffff",o.beginPath(),o.arc(E.x,E.y,4*g.zoom,0,Math.PI*2),o.fill(),o.restore()}else if(N.kind==="meteor"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||35)*R*1.5;o.fillStyle=N.color,o.beginPath(),o.arc(E.x,E.y,A,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.6,o.fillStyle="#ff8800",o.beginPath(),o.arc(E.x,E.y,A*.7,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.4,o.fillStyle="#ffffff",o.beginPath(),o.arc(E.x,E.y,A*.3,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.7,o.fillStyle="#ff4400";for(let _=0;_<10;_++){const te=_*Math.PI/5+W*.005,X=A*(1.2+Math.sin(W*.01+_)*.3),ae=E.x+Math.cos(te)*X,ue=E.y+Math.sin(te)*X,L=(3+Math.sin(W*.008+_)*2)*g.zoom;o.beginPath(),o.arc(ae,ue,L,0,Math.PI*2),o.fill()}o.restore()}else if(N.kind==="blade_vortex"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||22)*g.zoom,_=W*.02;o.strokeStyle=N.color,o.lineWidth=3*g.zoom,o.lineCap="round";for(let te=0;te<4;te++){const X=_+te*Math.PI/2,ae=A,ue=E.x+Math.cos(X)*(A*.3),L=E.y+Math.sin(X)*(A*.3),me=E.x+Math.cos(X)*ae,ne=E.y+Math.sin(X)*ae;o.beginPath(),o.moveTo(ue,L),o.lineTo(me,ne),o.stroke()}o.globalAlpha=(1-R)*.6,o.fillStyle="#ffffff",o.beginPath(),o.arc(E.x,E.y,4*g.zoom,0,Math.PI*2),o.fill(),o.restore()}else if(N.kind==="frost_nova"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||28)*R*2;o.strokeStyle=N.color,o.lineWidth=5*g.zoom,o.setLineDash([8*g.zoom,4*g.zoom]),o.lineDashOffset=W*.01,o.beginPath(),o.arc(E.x,E.y,A,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-R)*.6,o.fillStyle="#a5f3fc",o.beginPath(),o.arc(E.x,E.y,A*.6,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.7,o.fillStyle=N.color;for(let _=0;_<8;_++){const te=_*Math.PI/4+W*.003,X=A*.8,ae=E.x+Math.cos(te)*X,ue=E.y+Math.sin(te)*X;o.beginPath(),o.moveTo(ae,ue-4*g.zoom),o.lineTo(ae+3*g.zoom,ue),o.lineTo(ae,ue+4*g.zoom),o.lineTo(ae-3*g.zoom,ue),o.closePath(),o.fill()}o.setLineDash([]),o.restore()}else if(N.kind==="cleave"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.9;const A=(N.size||20)*g.zoom,_=Math.PI;o.strokeStyle=N.color,o.lineWidth=6*g.zoom,o.lineCap="round",o.beginPath(),o.arc(E.x,E.y,A,-_/2,_/2),o.stroke(),o.globalAlpha=(1-R)*.7,o.lineWidth=3*g.zoom;for(let te=0;te<3;te++){const X=-_/2+te*_/2,ae=E.x+Math.cos(X)*(A*.5),ue=E.y+Math.sin(X)*(A*.5),L=E.x+Math.cos(X)*A,me=E.y+Math.sin(X)*A;o.beginPath(),o.moveTo(ae,ue),o.lineTo(L,me),o.stroke()}o.restore()}else if(N.kind==="summon_skeletons"){o.save();const R=Math.min(1,W/N.ttl);o.globalAlpha=(1-R)*.8;const A=(N.size||15)*g.zoom;o.strokeStyle=N.color,o.lineWidth=3*g.zoom,o.setLineDash([6*g.zoom,3*g.zoom]),o.lineDashOffset=W*.01,o.beginPath(),o.arc(E.x,E.y,A,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-R)*.6,o.fillStyle="#6b7280",o.beginPath(),o.arc(E.x,E.y,A*.5,0,Math.PI*2),o.fill(),o.globalAlpha=(1-R)*.7,o.fillStyle="#f3f4f6";for(let _=0;_<6;_++){const te=_*Math.PI/3+W*.004,X=A*.7,ae=E.x+Math.cos(te)*X,ue=E.y+Math.sin(te)*X;o.fillRect(ae-1,ue-3,2*g.zoom,6*g.zoom),o.fillRect(ae-3,ue-1,6*g.zoom,2*g.zoom)}o.setLineDash([]),o.restore()}})},[n.enemies,i,s,u,b,p,g,h,D,T]);function z(H,Y,o,B,V,de,ge,we){const fe=Math.max(0,Math.min(1,de/ge));H.fillStyle=`rgba(31,41,55,${we})`,H.fillRect(Y-B/2,o-V/2,B,V);const Se=H.createLinearGradient(Y-B/2,o,Y+B/2,o);Se.addColorStop(0,"#16a34a"),Se.addColorStop(1,"#dc2626"),H.fillStyle=Se,H.globalAlpha=we,H.fillRect(Y-B/2,o-V/2,B*fe,V),H.globalAlpha=1,H.strokeStyle=`rgba(0,0,0,${.6*we})`,H.lineWidth=1,H.strokeRect(Y-B/2,o-V/2,B,V)}function he(H,Y,o,B,V){H.fillStyle=`rgba(255,255,255,${V})`,H.font="12px sans-serif",H.textAlign="center",H.fillText(Y,o,B)}return C.useEffect(()=>{let H;const Y=()=>{k(),H=requestAnimationFrame(Y)};return H=requestAnimationFrame(Y),()=>cancelAnimationFrame(H)},[k]),l.jsx("div",{className:"game-canvas-container",children:l.jsx("canvas",{ref:t,width:Ir,height:$r,className:"game-canvas",tabIndex:0,style:{outline:"none"},onClick:()=>{var H;return(H=t.current)==null?void 0:H.focus()}})})}),Th={health:"Maximum health points. Increased by Vitality (+3 per point) and Strength (+2 per point).",mana:"Maximum mana points. Increased by Intelligence (+1 per point).",damage:"Base damage per second. Increased by Strength (+1 per point) and equipment.",armor:"Reduces incoming damage. Increased by equipment and Resilience skill.",critChance:"Chance to deal critical damage. Increased by Dexterity (+0.5% per point), Luck (+0.5% per point), and Precision skill.",dodgeChance:"Chance to avoid incoming damage. Increased by Dexterity (+0.3% per point) and Agility skill.",blockChance:"Chance to block incoming damage. Increased by equipment.",lifeSteal:"Percentage of damage dealt returned as health. Increased by equipment.",attackSpeed:"Multiplier for attack frequency. Increased by equipment.",healthRegen:"Health points regenerated per second. Increased by Vitality (+0.1 per point) and equipment.",manaRegen:"Mana points regenerated per second. Increased by Intelligence (+0.2 per point) and equipment.",strength:"Increases damage (+1) and health (+2). Base 10, increased by equipment.",dexterity:"Increases critical chance (+0.5%) and dodge (+0.3%). Base 10, increased by equipment.",intelligence:"Increases mana (+1) and mana regeneration (+0.2). Base 10, increased by equipment.",vitality:"Increases health (+3) and health regeneration (+0.1). Base 10, increased by equipment.",luck:"Increases critical chance (+0.5%). Base 5, increased by equipment.",fireDamage:"Additional fire damage added to attacks. Effective against ice-resistant enemies.",iceDamage:"Additional ice damage added to attacks. Can slow enemies and is effective against fire-resistant foes.",lightningDamage:"Additional lightning damage added to attacks. Fast and effective against armored enemies.",poisonDamage:"Additional poison damage that deals damage over time. Effective against high-health enemies.",fireResistance:"Reduces fire damage taken. Essential for surviving fire-based attacks.",iceResistance:"Reduces ice damage taken and slowing effects. Helps maintain mobility.",lightningResistance:"Reduces lightning damage taken. Important against fast, shocking attacks.",poisonResistance:"Reduces poison damage and duration. Crucial for surviving toxic environments.",armorPenetration:"Percentage of enemy armor ignored when dealing damage. Effective against heavily armored foes.",damageMultiplier:"Multiplies all damage dealt. A powerful stat that scales with all damage sources.",stunChance:"Chance to stun enemies on hit, preventing them from acting temporarily.",damageReduction:"Reduces all incoming damage by a percentage. Stacks multiplicatively with armor.",movementSpeed:"Increases movement and positioning speed. Helps with kiting and positioning.",reflectDamage:"Returns a percentage of received damage back to the attacker.",doubleDropChance:"Chance for enemies to drop twice the normal loot. Excellent for farming.",cleaveChance:"Chance for attacks to hit multiple nearby enemies simultaneously.",spellResistance:"Reduces damage from magical attacks and spell effects.",stunResistance:"Reduces the duration and chance of being stunned by enemies.",cooldownReduction:"Reduces the cooldown time of all abilities and skills.",manaSteal:"Percentage of damage dealt returned as mana. Helps sustain mana-intensive builds.",thorns:"Deals damage to attackers when you take damage. Passive retaliation effect."};function Dh(e,t){const n=e.skills||{},a=e.attributes||{};let s=0,r=0,i=0,c=0,u=0,d={},f={};switch(e.equipment&&Object.values(e.equipment).forEach(b=>{if(b&&(Object.entries(b.baseStats).forEach(([m,p])=>{typeof p=="number"&&(d[m]=(d[m]||0)+p)}),b.affixes.forEach(m=>{d[m.stat]=(d[m.stat]||0)+m.value}),e.stones)){const m=Ss(b,e.stones);Object.entries(m).forEach(([p,S])=>{typeof S=="number"&&(f[p]=(f[p]||0)+S)})}}),t){case"health":s=120;const b=Math.max(0,(a.strength||10)-10)*2,m=Math.max(0,(a.vitality||10)-10)*3;r=b+m,i=(d.health||0)+(d.strength||0)*2+(d.vitality||0)*3,c=(f.health||0)+(f.strength||0)*2+(f.vitality||0)*3,u=(n.endurance||0)*10;break;case"mana":s=50,r=Math.max(0,(a.intelligence||10)-10),i=(d.mana||0)+(d.intelligence||0),c=(f.mana||0)+(f.intelligence||0),u=0;break;case"damage":s=2,r=Math.max(0,(a.strength||10)-10),i=(d.damage||0)+(d.strength||0),c=(f.damage||0)+(f.strength||0),u=n.strength||0;break;case"armor":s=0,r=0,i=d.armor||0,c=f.armor||0,u=n.resilience||0;break;case"critChance":s=0;const p=Math.max(0,(a.dexterity||10)-10)*.5,S=Math.max(0,(a.luck||5)-5)*.5;r=p+S,i=(d.critChance||0)*100+(d.dexterity||0)*.5+(d.luck||0)*.5,c=(f.critChance||0)*100+(f.dexterity||0)*.5+(f.luck||0)*.5,u=(n.precision||0)*1;break;case"dodgeChance":s=0,r=Math.max(0,(a.dexterity||10)-10)*.3,i=(d.dodgeChance||0)*100+(d.dexterity||0)*.3,c=(f.dodgeChance||0)*100+(f.dexterity||0)*.3,u=(n.agility||0)*1;break;case"blockChance":s=0,r=0,i=(d.blockChance||0)*100,c=(f.blockChance||0)*100,u=0;break;case"lifeSteal":s=0,r=0,i=(d.lifeSteal||0)*100,c=(f.lifeSteal||0)*100,u=0;break;case"attackSpeed":s=1,r=0,i=d.attackSpeed||0,c=f.attackSpeed||0,u=0;break;case"healthRegen":s=0,r=Math.max(0,(a.vitality||10)-10)*.1,i=(d.healthRegen||0)+(d.vitality||0)*.1,c=(f.healthRegen||0)+(f.vitality||0)*.1,u=0;break;case"manaRegen":s=0,r=Math.max(0,(a.intelligence||10)-10)*.2,i=(d.manaRegen||0)+(d.intelligence||0)*.2,c=(f.manaRegen||0)+(f.intelligence||0)*.2,u=0;break;case"strength":s=10,r=Math.max(0,(a.strength||10)-10),i=d.strength||0,c=f.strength||0,u=0;break;case"dexterity":s=10,r=Math.max(0,(a.dexterity||10)-10),i=d.dexterity||0,c=f.dexterity||0,u=0;break;case"intelligence":s=10,r=Math.max(0,(a.intelligence||10)-10),i=d.intelligence||0,c=f.intelligence||0,u=0;break;case"vitality":s=10,r=Math.max(0,(a.vitality||10)-10),i=d.vitality||0,c=f.vitality||0,u=0;break;case"luck":s=5,r=Math.max(0,(a.luck||5)-5),i=d.luck||0,c=f.luck||0,u=0;break;case"fireDamage":s=0,r=0,i=d.fireDamage||0,c=f.fireDamage||0,u=0;break;case"iceDamage":s=0,r=0,i=d.iceDamage||0,c=f.iceDamage||0,u=0;break;case"lightningDamage":s=0,r=0,i=d.lightningDamage||0,c=f.lightningDamage||0,u=0;break;case"poisonDamage":s=0,r=0,i=d.poisonDamage||0,c=f.poisonDamage||0,u=0;break;case"fireResistance":s=0,r=0,i=(d.fireResistance||0)*100,c=(f.fireResistance||0)*100,u=0;break;case"iceResistance":s=0,r=0,i=(d.iceResistance||0)*100,c=(f.iceResistance||0)*100,u=0;break;case"lightningResistance":s=0,r=0,i=(d.lightningResistance||0)*100,c=(f.lightningResistance||0)*100,u=0;break;case"poisonResistance":s=0,r=0,i=(d.poisonResistance||0)*100,c=(f.poisonResistance||0)*100,u=0;break;case"armorPenetration":s=0,r=0,i=(d.armorPenetration||0)*100,c=(f.armorPenetration||0)*100,u=0;break;case"damageMultiplier":s=0,r=0,i=(d.damageMultiplier||0)*100,c=(f.damageMultiplier||0)*100,u=0;break;case"stunChance":s=0,r=0,i=(d.stunChance||0)*100,c=(f.stunChance||0)*100,u=0;break;case"damageReduction":s=0,r=0,i=(d.damageReduction||0)*100,c=(f.damageReduction||0)*100,u=0;break;case"reflectDamage":s=0,r=0,i=(d.reflectDamage||0)*100,c=(f.reflectDamage||0)*100,u=0;break;case"movementSpeed":s=0,r=0,i=(d.movementSpeed||0)*100,c=(f.movementSpeed||0)*100,u=0;break;case"doubleDropChance":s=0,r=0,i=(d.doubleDropChance||0)*100,c=(f.doubleDropChance||0)*100,u=0;break;case"cleaveChance":s=0,r=0,i=(d.cleaveChance||0)*100,c=(f.cleaveChance||0)*100,u=0;break;case"cooldownReduction":s=0,r=0,i=(d.cooldownReduction||0)*100,c=(f.cooldownReduction||0)*100,u=0;break;case"spellResistance":s=0,r=0,i=(d.spellResistance||0)*100,c=(f.spellResistance||0)*100,u=0;break;case"stunResistance":s=0,r=0,i=(d.stunResistance||0)*100,c=(f.stunResistance||0)*100,u=0;break;case"manaSteal":s=0,r=0,i=(d.manaSteal||0)*100,c=(f.manaSteal||0)*100,u=0;break;case"thorns":s=0,r=0,i=d.thorns||0,c=f.thorns||0,u=0;break;default:s=0,r=0,i=0,c=0,u=0}const v=s+r+i+c+u;return{base:s,attributeBonus:r,equipmentBonus:i,stoneBonus:c,skillTreeBonus:u,total:v}}function Zn(e,t=""){return`${e.toFixed(2)}${t}`}function Us(e){return e>0?"text-green-400":e<0?"text-red-400":"text-gray-300"}const Ah=({statName:e,breakdown:t,description:n,position:a,visible:s})=>{if(!s)return null;const r={position:"fixed",left:Math.min(a.x-150,window.innerWidth-320),top:Math.max(a.y-10,10),zIndex:1e3,pointerEvents:"none"};return l.jsxs("div",{style:r,className:"bg-gray-900 border border-gray-600 rounded-lg p-3 shadow-xl text-xs max-w-xs",children:[l.jsxs("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[l.jsx("h4",{className:"font-semibold text-white",children:e}),l.jsx("p",{className:"text-gray-400 text-xs mt-1",children:n})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-300",children:"Base:"}),l.jsx("span",{className:"text-white",children:Zn(t.base)})]}),t.attributeBonus!==0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-purple-300",children:"Attributes:"}),l.jsxs("span",{className:Us(t.attributeBonus),children:["+",Zn(t.attributeBonus)]})]}),t.equipmentBonus!==0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-blue-300",children:"Equipment:"}),l.jsxs("span",{className:Us(t.equipmentBonus),children:["+",Zn(t.equipmentBonus)]})]}),t.stoneBonus!==0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-orange-300",children:"Stones:"}),l.jsxs("span",{className:Us(t.stoneBonus),children:["+",Zn(t.stoneBonus)]})]}),t.skillTreeBonus!==0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-yellow-300",children:"Skill Tree:"}),l.jsxs("span",{className:Us(t.skillTreeBonus),children:["+",Zn(t.skillTreeBonus)]})]}),l.jsx("div",{className:"border-t border-gray-700 pt-1 mt-2",children:l.jsxs("div",{className:"flex justify-between font-semibold",children:[l.jsx("span",{className:"text-white",children:"Total:"}),l.jsx("span",{className:"text-green-400",children:Zn(t.total)})]})})]})]})};function Ih(e){return{Common:"text-gray-400",Uncommon:"text-green-400",Rare:"text-blue-400",Epic:"text-purple-400",Legendary:"text-yellow-400"}[e||"Common"]||"text-gray-400"}function $h(e){return{Common:.05,Uncommon:.08,Rare:.12,Epic:.18,Legendary:.25}[e||"Common"]||.05}const qc=Wn.memo(function(){var S,g,x,h,y,w,P,D,O,M,j,I,Q,K,F,G,Z,ce,ee,T,U,J,$,re,ie,k,z,he,H,Y,o,B,V,de,ge,we,fe,Se,ve,je,Ee,N,E,W,se,R,A,_,te,X,ae,ue,L,me,ne,xe,oe,ye,qe,Te,Ue,ze,kt;const{state:t,actions:n}=it(),a=t.player,s=t.skills||{},[r,i]=C.useState({visible:!1,statName:"",statType:"",position:{x:0,y:0}}),c=C.useCallback((_e,Ne,Re)=>{const He=_e.currentTarget.getBoundingClientRect();i({visible:!0,statName:Ne,statType:Re,position:{x:He.left+He.width/2,y:He.top}})},[]),u=C.useCallback(()=>{i(_e=>({..._e,visible:!1}))},[]),d=C.useCallback(({label:_e,value:Ne,color:Re,statType:He,suffix:ot=""})=>l.jsxs("div",{className:"flex justify-between cursor-help hover:bg-gray-700/30 px-1 py-0.5 rounded transition-colors",onMouseEnter:pe=>c(pe,_e,He),onMouseLeave:u,children:[l.jsxs("span",{children:[_e,":"]}),l.jsxs("span",{className:Re,children:[typeof Ne=="number"?Ne.toFixed(2):Ne,ot]})]}),[c,u]),f=C.useMemo(()=>{const _e=Math.pow(1.05,s.power||0),Ne=(a.attackSpeed||1)*(1+(s.quick||0)*.05),Re=(a.projectileSpeed||1)*(1+(s.arcane||0)*.1),He=(a.dps||0)*_e,ot=(He*Ne).toFixed(2);return{powerMultiplier:_e,attackSpeed:Ne,projectileSpeed:Re,totalDps:He,estimatedDps:ot}},[a.attackSpeed,a.baseDps,a.dps,a.projectileSpeed,s]),v=C.useMemo(()=>{var Ne;let _e=0;return a.equipment&&Object.values(a.equipment).forEach(Re=>{var He,ot;(He=Re==null?void 0:Re.baseStats)!=null&&He.damage&&(_e+=Re.baseStats.damage),(ot=Re==null?void 0:Re.affixes)==null||ot.forEach(pe=>{pe.stat==="damage"&&(_e+=pe.value)})}),(Ne=a.equipped)!=null&&Ne.power&&(_e+=a.equipped.power),_e},[a.equipment,(S=a.equipped)==null?void 0:S.power]);C.useMemo(()=>{const _e=a.baseDps||0,Ne=(s.power||0)*5;return Math.floor((_e+v+Ne)*f.powerMultiplier)},[a.baseDps,s,v,f.powerMultiplier]);const b=C.useMemo(()=>{var _e;return{totalCritChance:((a.critChance||0)+$h((_e=a.equipped)==null?void 0:_e.rarity))*100,dodgeChance:(a.dodgeChance||0)*100,blockChance:(a.blockChance||0)*100,lifeSteal:(a.lifeSteal||0)*100,armor:a.armor||0,healthRegen:a.healthRegen||0,manaRegen:a.manaRegen||0}},[a.critChance,(g=a.equipped)==null?void 0:g.rarity,a.dodgeChance,a.blockChance,a.lifeSteal,a.armor,a.healthRegen,a.manaRegen]),m=C.useMemo(()=>!a.passiveTreeData||!a.passiveTreeState?null:er(a.passiveTreeData,a.passiveTreeState),[a.passiveTreeData,a.passiveTreeState]),p=C.useCallback(()=>{n.resetAll()},[n]);return l.jsxs("div",{className:"h-full flex flex-col bg-gray-900/95 text-white",children:[l.jsx("div",{className:"p-3 border-b border-gray-600",children:l.jsx("h2",{className:"text-lg font-bold text-center",children:" Character Stats"})}),l.jsxs("div",{className:"flex-1 p-3 space-y-2 overflow-y-auto text-xs",children:[l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-blue-300 mb-1",children:" Basic Info"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Level:"}),l.jsx("strong",{className:"text-blue-400",children:a.level})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"XP:"}),l.jsxs("span",{className:"text-green-400",children:[a.xp,"/",a.nextLevelXp]})]}),l.jsx(d,{label:"HP",value:`${a.hp.toFixed(2)}/${a.maxHp.toFixed(2)}`,color:"text-red-400",statType:"health"}),l.jsx(d,{label:"Mana",value:`${(a.mana||0).toFixed(2)}/${(a.maxMana||50).toFixed(2)}`,color:"text-blue-400",statType:"mana"})]})]}),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-purple-300 mb-1",children:" Attributes"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsx(d,{label:"Strength",value:(((x=a.attributes)==null?void 0:x.strength)||10)+(((h=a.calculatedStats)==null?void 0:h.strength)||0),color:"text-red-400",statType:"strength"}),l.jsx(d,{label:"Dexterity",value:(((y=a.attributes)==null?void 0:y.dexterity)||10)+(((w=a.calculatedStats)==null?void 0:w.dexterity)||0),color:"text-green-400",statType:"dexterity"}),l.jsx(d,{label:"Intelligence",value:(((P=a.attributes)==null?void 0:P.intelligence)||10)+(((D=a.calculatedStats)==null?void 0:D.intelligence)||0),color:"text-blue-400",statType:"intelligence"}),l.jsx(d,{label:"Vitality",value:(((O=a.attributes)==null?void 0:O.vitality)||10)+(((M=a.calculatedStats)==null?void 0:M.vitality)||0),color:"text-orange-400",statType:"vitality"}),l.jsx(d,{label:"Luck",value:(((j=a.attributes)==null?void 0:j.luck)||5)+(((I=a.calculatedStats)==null?void 0:I.luck)||0),color:"text-yellow-400",statType:"luck"}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Attr Points:"}),l.jsx("span",{className:"text-purple-400",children:a.attributePoints||0})]})]})]}),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-red-300 mb-1",children:" Offensive"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsx(d,{label:"Base DPS",value:a.baseDps||0,color:"text-orange-400",statType:"damage"}),l.jsx(d,{label:"Total DPS",value:a.dps||0,color:"text-orange-300",statType:"damage"}),l.jsx(d,{label:"Attack Speed",value:f.attackSpeed,color:"text-yellow-300",statType:"attackSpeed",suffix:"x"}),l.jsx(d,{label:"Crit Chance",value:b.totalCritChance,color:"text-red-400",statType:"critChance",suffix:"%"}),l.jsx(d,{label:"Life Steal",value:b.lifeSteal,color:"text-pink-400",statType:"lifeSteal",suffix:"%"})]})]}),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-blue-300 mb-1",children:" Defensive"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsx(d,{label:"Armor",value:b.armor,color:"text-gray-300",statType:"armor"}),l.jsx(d,{label:"Dodge",value:b.dodgeChance,color:"text-green-400",statType:"dodgeChance",suffix:"%"}),l.jsx(d,{label:"Block",value:b.blockChance,color:"text-blue-400",statType:"blockChance",suffix:"%"}),l.jsx(d,{label:"HP Regen",value:b.healthRegen,color:"text-red-300",statType:"healthRegen",suffix:"/s"}),l.jsx(d,{label:"MP Regen",value:b.manaRegen,color:"text-blue-300",statType:"manaRegen",suffix:"/s"}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Proj Speed:"}),l.jsxs("span",{className:"text-cyan-400",children:[f.projectileSpeed.toFixed(2),"x"]})]})]})]}),(((Q=a.calculatedStats)==null?void 0:Q.fireDamage)||((K=a.calculatedStats)==null?void 0:K.iceDamage)||((F=a.calculatedStats)==null?void 0:F.lightningDamage)||((G=a.calculatedStats)==null?void 0:G.poisonDamage))&&l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-orange-300 mb-1",children:" Elemental Damage"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(((Z=a.calculatedStats)==null?void 0:Z.fireDamage)||0)>0&&l.jsx(d,{label:" Fire",value:((ce=a.calculatedStats)==null?void 0:ce.fireDamage)||0,color:"text-red-400",statType:"fireDamage"}),(((ee=a.calculatedStats)==null?void 0:ee.iceDamage)||0)>0&&l.jsx(d,{label:" Ice",value:((T=a.calculatedStats)==null?void 0:T.iceDamage)||0,color:"text-blue-300",statType:"iceDamage"}),(((U=a.calculatedStats)==null?void 0:U.lightningDamage)||0)>0&&l.jsx(d,{label:" Lightning",value:((J=a.calculatedStats)==null?void 0:J.lightningDamage)||0,color:"text-yellow-300",statType:"lightningDamage"}),((($=a.calculatedStats)==null?void 0:$.poisonDamage)||0)>0&&l.jsx(d,{label:" Poison",value:((re=a.calculatedStats)==null?void 0:re.poisonDamage)||0,color:"text-green-300",statType:"poisonDamage"})]})]}),(((ie=a.calculatedStats)==null?void 0:ie.fireResistance)||((k=a.calculatedStats)==null?void 0:k.iceResistance)||((z=a.calculatedStats)==null?void 0:z.lightningResistance)||((he=a.calculatedStats)==null?void 0:he.poisonResistance))&&l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-cyan-300 mb-1",children:" Resistances"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(((H=a.calculatedStats)==null?void 0:H.fireResistance)||0)>0&&l.jsx(d,{label:" Fire Res",value:((Y=a.calculatedStats)==null?void 0:Y.fireResistance)||0,color:"text-red-400",statType:"fireResistance",suffix:"%"}),(((o=a.calculatedStats)==null?void 0:o.iceResistance)||0)>0&&l.jsx(d,{label:" Ice Res",value:((B=a.calculatedStats)==null?void 0:B.iceResistance)||0,color:"text-blue-300",statType:"iceResistance",suffix:"%"}),(((V=a.calculatedStats)==null?void 0:V.lightningResistance)||0)>0&&l.jsx(d,{label:" Lightning Res",value:((de=a.calculatedStats)==null?void 0:de.lightningResistance)||0,color:"text-yellow-300",statType:"lightningResistance",suffix:"%"}),(((ge=a.calculatedStats)==null?void 0:ge.poisonResistance)||0)>0&&l.jsx(d,{label:" Poison Res",value:((we=a.calculatedStats)==null?void 0:we.poisonResistance)||0,color:"text-green-300",statType:"poisonResistance",suffix:"%"})]})]}),(((fe=a.calculatedStats)==null?void 0:fe.armorPenetration)||((Se=a.calculatedStats)==null?void 0:Se.damageMultiplier)||((ve=a.calculatedStats)==null?void 0:ve.stunChance)||((je=a.calculatedStats)==null?void 0:je.damageReduction)||((Ee=a.calculatedStats)==null?void 0:Ee.reflectDamage))&&l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-purple-300 mb-1",children:" Advanced Combat"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(((N=a.calculatedStats)==null?void 0:N.armorPenetration)||0)>0&&l.jsx(d,{label:" Armor Pen",value:((E=a.calculatedStats)==null?void 0:E.armorPenetration)||0,color:"text-orange-400",statType:"armorPenetration",suffix:"%"}),(((W=a.calculatedStats)==null?void 0:W.damageMultiplier)||0)>0&&l.jsx(d,{label:" Damage Multi",value:((se=a.calculatedStats)==null?void 0:se.damageMultiplier)||0,color:"text-red-500",statType:"damageMultiplier",suffix:"%"}),(((R=a.calculatedStats)==null?void 0:R.stunChance)||0)>0&&l.jsx(d,{label:" Stun Chance",value:((A=a.calculatedStats)==null?void 0:A.stunChance)||0,color:"text-yellow-400",statType:"stunChance",suffix:"%"}),(((_=a.calculatedStats)==null?void 0:_.damageReduction)||0)>0&&l.jsx(d,{label:" Damage Red",value:((te=a.calculatedStats)==null?void 0:te.damageReduction)||0,color:"text-blue-400",statType:"damageReduction",suffix:"%"}),(((X=a.calculatedStats)==null?void 0:X.reflectDamage)||0)>0&&l.jsx(d,{label:" Reflect",value:((ae=a.calculatedStats)==null?void 0:ae.reflectDamage)||0,color:"text-purple-400",statType:"reflectDamage",suffix:"%"})]})]}),(((ue=a.calculatedStats)==null?void 0:ue.doubleDropChance)||((L=a.calculatedStats)==null?void 0:L.cleaveChance)||((me=a.calculatedStats)==null?void 0:me.cooldownReduction)||((ne=a.calculatedStats)==null?void 0:ne.movementSpeed))&&l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-pink-300 mb-1",children:" Special Effects"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(((xe=a.calculatedStats)==null?void 0:xe.doubleDropChance)||0)>0&&l.jsx(d,{label:" Double Drop",value:((oe=a.calculatedStats)==null?void 0:oe.doubleDropChance)||0,color:"text-yellow-400",statType:"doubleDropChance",suffix:"%"}),(((ye=a.calculatedStats)==null?void 0:ye.cleaveChance)||0)>0&&l.jsx(d,{label:" Cleave",value:((qe=a.calculatedStats)==null?void 0:qe.cleaveChance)||0,color:"text-orange-400",statType:"cleaveChance",suffix:"%"}),(((Te=a.calculatedStats)==null?void 0:Te.cooldownReduction)||0)>0&&l.jsx(d,{label:" CDR",value:((Ue=a.calculatedStats)==null?void 0:Ue.cooldownReduction)||0,color:"text-cyan-400",statType:"cooldownReduction",suffix:"%"}),(((ze=a.calculatedStats)==null?void 0:ze.movementSpeed)||0)>0&&l.jsx(d,{label:" Move Speed",value:((kt=a.calculatedStats)==null?void 0:kt.movementSpeed)||0,color:"text-green-400",statType:"movementSpeed",suffix:"%"})]})]}),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:" Passive Tree Bonuses"}),m?l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(m.damage||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Damage:"}),l.jsxs("span",{className:"text-red-400",children:["+",m.damage]})]}),(m.health||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Health:"}),l.jsxs("span",{className:"text-red-300",children:["+",m.health]})]}),(m.mana||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Mana:"}),l.jsxs("span",{className:"text-blue-400",children:["+",m.mana]})]}),(m.armor||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Armor:"}),l.jsxs("span",{className:"text-gray-300",children:["+",m.armor]})]}),(m.critChance||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Crit Chance:"}),l.jsxs("span",{className:"text-red-400",children:["+",((m.critChance||0)*100).toFixed(1),"%"]})]}),(m.critMultiplier||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Crit Multi:"}),l.jsxs("span",{className:"text-red-500",children:["+",((m.critMultiplier||0)*100).toFixed(1),"%"]})]}),(m.attackSpeed||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Attack Speed:"}),l.jsxs("span",{className:"text-yellow-300",children:["+",((m.attackSpeed||0)*100).toFixed(1),"%"]})]}),(m.dodgeChance||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Dodge:"}),l.jsxs("span",{className:"text-green-400",children:["+",((m.dodgeChance||0)*100).toFixed(1),"%"]})]}),(m.goldFind||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Gold Find:"}),l.jsxs("span",{className:"text-yellow-300",children:["+",((m.goldFind||0)*100).toFixed(1),"%"]})]}),(m.magicFind||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Magic Find:"}),l.jsxs("span",{className:"text-purple-400",children:["+",((m.magicFind||0)*100).toFixed(1),"%"]})]}),(m.experienceBonus||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Exp Bonus:"}),l.jsxs("span",{className:"text-cyan-400",children:["+",((m.experienceBonus||0)*100).toFixed(1),"%"]})]})]}):l.jsx("div",{className:"text-xs text-gray-400",children:"No passive tree bonuses allocated"})]}),(()=>{const _e=()=>{var Me;const pe={},Ce=[];return a.equipment&&Object.entries(a.equipment).forEach(([De,Le])=>{Le&&typeof Le=="object"&&Ce.push({slot:De,item:Le})}),a.equipped&&!((Me=a.equipment)!=null&&Me.weapon)&&Ce.push({slot:"weapon",item:a.equipped}),Ce.forEach(({item:De})=>{De.baseStats&&Object.entries(De.baseStats).forEach(([Le,Xe])=>{typeof Xe=="number"&&Xe>0&&(pe[Le]=(pe[Le]||0)+Xe)}),De.affixes&&De.affixes.forEach(Le=>{const Xe=Le.stat,Je=Le.value;typeof Je=="number"&&Je>0&&(pe[Xe]=(pe[Xe]||0)+Je)}),De.sockets&&De.sockets.stones&&De.sockets.stones.forEach(Le=>{if(Le&&a.stones){const Xe=a.stones.find(Je=>Je.id===Le);Xe&&(Xe.baseStats&&Object.entries(Xe.baseStats).forEach(([Je,cn])=>{typeof cn=="number"&&cn>0&&(pe[Je]=(pe[Je]||0)+cn)}),Xe.affixes&&Xe.affixes.forEach(Je=>{const cn=Je.stat,un=Je.value;typeof un=="number"&&un>0&&(pe[cn]=(pe[cn]||0)+un)}))}})}),{consolidatedStats:pe,equippedItems:Ce}},Ne=(pe,Ce)=>["critChance","dodgeChance","blockChance","lifeSteal","manaSteal","fireResistance","coldResistance","lightningResistance","chaosResistance","iceResistance","poisonResistance","spellResistance","stunResistance","increasedDamage","increasedAttackSpeed","increasedCastSpeed","increasedMovementSpeed","increasedCritMultiplier","attackSpeed","castSpeed","movementSpeed","damageReduction","reflectDamage","armorPenetration","damageMultiplier","stunChance","doubleDropChance","cleaveChance","cooldownReduction","goldFind","magicFind","experienceBonus","healthRegen","manaRegen"].includes(pe)?`${(Ce*100).toFixed(1)}%`:Ce.toFixed(1),Re=pe=>({damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",luck:"Luck",critChance:"Crit Chance",critMultiplier:"Crit Multiplier",attackSpeed:"Attack Speed",dodgeChance:"Dodge Chance",blockChance:"Block Chance",lifeSteal:"Life Steal",manaSteal:"Mana Steal",fireDamage:"Fire Damage",iceDamage:"Ice Damage",lightningDamage:"Lightning Damage",poisonDamage:"Poison Damage",fireResistance:"Fire Resistance",iceResistance:"Ice Resistance",lightningResistance:"Lightning Resistance",poisonResistance:"Poison Resistance",armorPenetration:"Armor Penetration",damageMultiplier:"Damage Multiplier",stunChance:"Stun Chance",damageReduction:"Damage Reduction",reflectDamage:"Reflect Damage",goldFind:"Gold Find",magicFind:"Magic Find",experienceBonus:"Experience Bonus",healthRegen:"Health Regen",manaRegen:"Mana Regen"})[pe]||pe.charAt(0).toUpperCase()+pe.slice(1),{consolidatedStats:He,equippedItems:ot}=_e();return l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:" All Equipment Bonuses"}),l.jsxs("div",{className:"text-xs space-y-1",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsx("span",{className:"text-gray-400",children:"Equipped Items:"}),l.jsx("span",{className:"text-blue-400",children:ot.length})]}),Object.keys(He).length>0?l.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Object.entries(He).filter(([pe,Ce])=>typeof Ce=="number"&&Ce>0).sort(([pe],[Ce])=>Re(pe).localeCompare(Re(Ce))).map(([pe,Ce])=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-gray-300",children:[Re(pe),":"]}),l.jsxs("span",{className:"text-green-400",children:["+",Ne(pe,Ce)]})]},pe))}):l.jsx("div",{className:"text-gray-500 text-center py-2",children:ot.length===0?"No equipment equipped":"No stat bonuses from equipment"}),ot.length>0&&l.jsxs("div",{className:"border-t border-gray-600 pt-1 mt-2",children:[l.jsx("div",{className:"text-blue-300 font-medium mb-1",children:"Equipped Slots:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:ot.map(({slot:pe,item:Ce})=>l.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${Ih(Ce.rarity)} bg-gray-700/50`,title:`${Ce.name||Ce.type||"Unknown"} (${Ce.rarity||"Common"})`,children:pe.charAt(0).toUpperCase()+pe.slice(1)},pe))})]})]})]})})(),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:" Resources"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Gold:"}),l.jsx("span",{className:"text-yellow-400",children:a.gold})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Skill Points:"}),l.jsx("span",{className:"text-purple-400",children:a.skillPoints})]})]})]}),l.jsx("button",{onClick:p,className:"w-full bg-red-600 hover:bg-red-700 text-white py-1.5 px-3 rounded text-xs font-medium transition-colors",children:" Reset Character"})]}),r.visible&&l.jsx(Ah,{statName:r.statName,breakdown:Dh(a,r.statType),description:Th[r.statType],position:r.position,visible:r.visible})]})}),zh={Common:"#9ca3af",Magic:"#06b6d4",Rare:"#8b5cf6",Unique:"#fbbf24",Legendary:"#ff6b6b",Mythic:"#ff1493",Divine:"#ffd700"};function Fh(e){return e&&zh[e]||"#9ca3af"}const Bh=Wn.memo(function(){const{state:t,dispatch:n}=it(),a=t.player,s=C.useMemo(()=>{const c=[];return Ie.forEach(u=>{let d=null;if(a.equipment&&a.equipment[u.id])d=a.equipment[u.id];else if(a.equipped&&u.id==="weapon"){const f=a.equipped.type;(f==="melee"||f==="ranged")&&(d=a.equipped)}d&&c.push({slot:u.id,item:d,slotInfo:u})}),c},[a.equipment,a.equipped]),r=C.useCallback(c=>{n({type:"UNEQUIP",payload:c})},[n]),i=C.useMemo(()=>s.reduce((c,{item:u})=>{let d=0;return u.power&&typeof u.power=="number"&&!isNaN(u.power)&&(d+=u.power),u.baseStats&&Object.values(u.baseStats).forEach(f=>{typeof f=="number"&&!isNaN(f)&&(d+=f)}),c+d},0),[s]);return l.jsxs("div",{className:"h-full flex flex-col bg-gray-800 text-white",children:[l.jsx("div",{className:"p-3 border-b border-gray-600 bg-gray-700",children:l.jsx("h2",{className:"text-lg font-bold text-center text-amber-400",children:" Equipment"})}),l.jsx("div",{className:"p-3 border-b border-gray-600 bg-gray-750",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Equipped: "}),l.jsxs("span",{className:"text-amber-400 font-medium",children:[s.length,"/",Ie.length]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Power: "}),l.jsxs("span",{className:"text-orange-400 font-bold",children:["+",i.toFixed(0)]})]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:s.length>0?l.jsx("div",{className:"p-2 space-y-2",children:s.map(({slot:c,item:u,slotInfo:d})=>l.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-3 hover:bg-gray-650 transition-colors cursor-pointer",onContextMenu:f=>{f.preventDefault(),r(c)},title:"Right-click to unequip",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"text-xl",children:d.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400",children:d.name}),l.jsx("div",{className:"font-medium",style:{color:Fh(u.rarity)},children:u.name||u.type||"Unknown Item"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-400",children:u.rarity||"Common"}),l.jsx("div",{className:"text-green-400 font-medium",children:(()=>{let f=0;return u.power&&typeof u.power=="number"&&!isNaN(u.power)&&(f+=u.power),u.baseStats&&Object.values(u.baseStats).forEach(v=>{typeof v=="number"&&!isNaN(v)&&(f+=v)}),`+${f.toFixed(0)}`})()})]})]}),u.sockets&&u.sockets.maxSockets>0&&l.jsxs("div",{className:"mt-2 flex items-center space-x-1",children:[l.jsx("span",{className:"text-xs text-gray-400",children:"Sockets:"}),l.jsx("div",{className:"flex gap-1",children:Array.from({length:u.sockets.maxSockets},(f,v)=>l.jsx("div",{className:`w-2 h-2 rounded-full ${u.sockets.stones[v]?"bg-amber-400":"bg-gray-600"}`,title:u.sockets.stones[v]?"Socket filled":"Empty socket"},v))})]})]},c))}):l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("div",{children:"No equipment equipped"}),l.jsx("div",{className:"text-sm mt-1",children:"Equip items from your inventory"})]})})}),l.jsx("div",{className:"p-2 border-t border-gray-600 bg-gray-750",children:l.jsx("div",{className:"text-xs text-gray-400 text-center",children:"Right-click equipped items to unequip"})})]})});function qh(){const{state:e}=it(),{player:t}=e,n=er(t.passiveTreeData,t.passiveTreeState),a=dp(t.passiveTreeData,t.passiveTreeState),s=Object.values(t.passiveTreeState.allocatedNodes).reduce((c,u)=>c+u,0),r=Object.keys(t.passiveTreeData.nodes).length,i=[{title:"Combat Stats",stats:[{key:"damage",label:"Damage",value:n.damage||0,suffix:""},{key:"critChance",label:"Critical Chance",value:n.critChance||0,suffix:"%"},{key:"attackSpeed",label:"Attack Speed",value:n.attackSpeed||0,suffix:"%"},{key:"lifeSteal",label:"Life Steal",value:n.lifeSteal||0,suffix:"%"}]},{title:"Defensive Stats",stats:[{key:"health",label:"Health",value:n.health||0,suffix:""},{key:"armor",label:"Armor",value:n.armor||0,suffix:""},{key:"dodgeChance",label:"Dodge Chance",value:n.dodgeChance||0,suffix:"%"},{key:"blockChance",label:"Block Chance",value:n.blockChance||0,suffix:"%"}]},{title:"Resource Stats",stats:[{key:"mana",label:"Mana",value:n.mana||0,suffix:""},{key:"healthRegen",label:"Health Regen",value:n.healthRegen||0,suffix:"/s"},{key:"manaRegen",label:"Mana Regen",value:n.manaRegen||0,suffix:"/s"}]},{title:"Attributes",stats:[{key:"strength",label:"Strength",value:n.strength||0,suffix:""},{key:"dexterity",label:"Dexterity",value:n.dexterity||0,suffix:""},{key:"intelligence",label:"Intelligence",value:n.intelligence||0,suffix:""},{key:"vitality",label:"Vitality",value:n.vitality||0,suffix:""},{key:"luck",label:"Luck",value:n.luck||0,suffix:""}]}];return l.jsxs("div",{className:"panel p-4 h-full flex flex-col",children:[l.jsx("h2",{className:"text-lg font-bold mb-3 text-green-400",children:"Passive Tree Bonuses"}),l.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded border border-gray-600",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-white font-medium",children:"Allocated Nodes"}),l.jsxs("span",{className:"text-green-400 font-bold",children:[s," / ",r]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white font-medium",children:"Available Points"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:t.passiveTreeState.availablePoints})]})]}),l.jsxs("div",{className:"space-y-4 flex-1 scrollable-panel",children:[i.map(c=>(c.stats.some(u=>u.value>0),l.jsxs("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[l.jsx("h3",{className:"font-bold text-white mb-2",children:c.title}),l.jsx("div",{className:"space-y-1",children:c.stats.map(u=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{className:u.value>0?"text-white":"text-gray-400",children:u.label}),l.jsxs("span",{className:u.value>0?"text-green-400 font-medium":"text-gray-500",children:[u.value>0?"+":"",u.value,u.suffix]})]},u.key))})]},c.title))),a.length>0&&l.jsxs("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[l.jsx("h3",{className:"font-bold text-white mb-2",children:"Skill Modifiers"}),l.jsx("div",{className:"space-y-1",children:a.map((c,u)=>l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"text-blue-400 font-medium",children:c.skillId}),l.jsxs("div",{className:"text-gray-300 ml-2",children:[c.property,": ",c.type==="multiplicative"?"":"+",c.value,c.type==="multiplicative"&&"%"]})]},u))})]}),s<=1&&l.jsxs("div",{className:"text-center text-gray-400 py-8",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("div",{className:"text-lg font-medium mb-1",children:"No Passive Bonuses"}),l.jsx("div",{className:"text-sm",children:"Allocate nodes in the Passive Tree to gain bonuses"})]})]})]})}const Oh=C.memo(({item:e,position:t,onClose:n,equippedItem:a,isPersistent:s})=>{var c,u,d;const r=C.useMemo(()=>{if(!a)return null;const f=e.baseStats||{damage:e.power||0,armor:0,health:0},v=a.baseStats||{damage:a.power||0,armor:0,health:0};return{damage:(f.damage||0)-(v.damage||0),armor:(f.armor||0)-(v.armor||0),health:(f.health||0)-(v.health||0)}},[e,a]),i=({label:f,current:v,equipped:b,diff:m})=>v==null||typeof v!="number"||isNaN(v)?null:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{children:[f,":"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:v.toFixed(1)}),b!==void 0&&m!==void 0&&typeof m=="number"&&!isNaN(m)&&l.jsxs("span",{className:`text-xs ${m>0?"text-green-400":m<0?"text-red-400":"text-gray-400"}`,children:["(",m>0?"+":"",m.toFixed(1),")"]})]})]});return l.jsxs("div",{className:"fixed z-50 bg-gray-900 border-2 border-gray-600 rounded-lg p-4 shadow-2xl max-w-sm",style:{left:Math.min(t.x,window.innerWidth-400),top:Math.min(t.y,window.innerHeight-300)},onMouseLeave:s?void 0:n,onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"font-bold text-lg flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",style:{color:bm(e.rarity)},children:[l.jsx("span",{children:e.name||"Unnamed Item"}),ya(e.damageType)&&l.jsx("span",{children:ya(e.damageType)})]}),s&&l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded",title:"Close tooltip",children:""})]}),l.jsxs("div",{className:"text-gray-400 text-sm",children:[e.slot&&l.jsx("span",{className:"capitalize",children:e.slot}),e.category&&e.slot&&l.jsx("span",{children:"  "}),e.category&&l.jsx("span",{className:"capitalize",children:e.category})]})]}),l.jsx("div",{className:"mb-3 space-y-1",children:e.baseStats?l.jsxs(l.Fragment,{children:[e.baseStats.damage&&l.jsx(i,{label:"Damage",current:e.baseStats.damage,equipped:(c=a==null?void 0:a.baseStats)==null?void 0:c.damage,diff:r==null?void 0:r.damage}),e.baseStats.armor&&l.jsx(i,{label:"Armor",current:e.baseStats.armor,equipped:(u=a==null?void 0:a.baseStats)==null?void 0:u.armor,diff:r==null?void 0:r.armor}),e.baseStats.health&&l.jsx(i,{label:"Health",current:e.baseStats.health,equipped:(d=a==null?void 0:a.baseStats)==null?void 0:d.health,diff:r==null?void 0:r.health})]}):l.jsx(i,{label:"Power",current:e.power||0,equipped:a==null?void 0:a.power,diff:a?(e.power||0)-(a.power||0):void 0})}),e.damageType&&e.damageType!=="physical"&&l.jsx("div",{className:"mb-3 text-sm",children:l.jsxs("span",{style:{color:wm(e.damageType)},children:[ya(e.damageType)," ",e.damageType," damage"]})}),e.affixes&&e.affixes.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-blue-300 font-medium text-sm mb-1",children:"Modifiers:"}),l.jsx("div",{className:"space-y-1",children:e.affixes.map((f,v)=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{className:"text-blue-200",children:[f.name,":"]}),l.jsxs("span",{className:"text-blue-100",children:["+",f.value]})]},v))})]}),e.extras&&e.extras.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-blue-300 font-medium text-sm mb-1",children:"Bonuses:"}),l.jsx("div",{className:"space-y-1",children:e.extras.map((f,v)=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{className:"text-blue-200",children:[f.key,":"]}),l.jsxs("span",{className:"text-blue-100",children:["+",f.val]})]},v))})]}),e.requirements&&l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-orange-300 font-medium text-sm mb-1",children:"Requirements:"}),l.jsx("div",{className:"space-y-1",children:Object.entries(e.requirements).map(([f,v])=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{className:"text-orange-200 capitalize",children:[f,":"]}),l.jsx("span",{className:"text-orange-100",children:v})]},f))})]}),l.jsx("div",{className:"pt-2 border-t border-gray-600",children:l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-yellow-400",children:"Value:"}),l.jsxs("span",{className:"text-yellow-300 font-medium",children:[e.value," "]})]})}),a&&r&&l.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-600",children:[l.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["vs. ",a.name,":"]}),l.jsx("div",{className:"text-xs",children:Object.entries(r).map(([f,v])=>v===0||v===void 0||v===null||typeof v!="number"||isNaN(v)?null:l.jsxs("span",{className:`mr-2 ${v>0?"text-green-400":"text-red-400"}`,children:[f,": ",v>0?"+":"",v.toFixed(1)]},f)).filter(Boolean)})]})]})}),Uh={Common:"#9ca3af",Magic:"#06b6d4",Rare:"#8b5cf6",Unique:"#fbbf24",Legendary:"#ff6b6b"},Gh={fire:"#ff6b6b",ice:"#74c0fc",lightning:"#ffd43b",poison:"#51cf66"},Vh={fire:"",ice:"",lightning:"",poison:""};function bm(e){return e&&Uh[e]||"#9ca3af"}function wm(e){return!e||e==="physical"?"":Gh[e]||""}function ya(e){return!e||e==="physical"?"":Vh[e]||""}const Wh=C.memo(({item:e,viewMode:t,onEquip:n,onUnequip:a,onSell:s,isEquipped:r,onHover:i,onLeave:c,onClick:u})=>{const d=C.useCallback(()=>n(e.id),[n,e.id]),f=C.useCallback(()=>a(e.id),[a,e.id]),v=C.useCallback(()=>s(e.id),[s,e.id]);return l.jsx("div",{className:`bg-gray-700 rounded-lg border-2 transition-all cursor-pointer hover:shadow-lg ${r?"border-green-500 bg-green-900/20 shadow-lg shadow-green-500/20":"border-gray-600 hover:border-gray-400 hover:bg-gray-600/50"} ${t==="grid"?"p-3 h-auto min-h-[200px]":"p-4"}`,onMouseEnter:b=>i==null?void 0:i(b,e),onMouseLeave:c,onClick:b=>u==null?void 0:u(b,e),children:l.jsxs("div",{className:`h-full ${t==="grid"?"flex flex-col justify-between":"flex justify-between items-start gap-4"}`,children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:`font-bold flex items-center gap-2 mb-2 ${t==="grid"?"text-sm":"text-lg"}`,style:{color:bm(e.rarity)},children:[r&&l.jsx("span",{className:"text-green-400 text-lg",children:""}),l.jsx("span",{className:"truncate",children:t==="grid"?(e.name||"Unnamed Item").split(" ").slice(0,3).join(" "):e.name||"Unnamed Item"}),ya(e.damageType)&&l.jsx("span",{className:"text-lg",children:ya(e.damageType)})]}),l.jsx("div",{className:`text-gray-400 mb-3 ${t==="grid"?"text-xs":"text-sm"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[e.slot&&l.jsx("span",{className:"capitalize bg-gray-600 px-2 py-1 rounded text-xs",children:e.slot}),e.category&&l.jsx("span",{className:"capitalize text-gray-300",children:e.category}),e.type&&!e.slot&&l.jsx("span",{className:"bg-gray-600 px-2 py-1 rounded text-xs",children:e.type})]})}),l.jsx("div",{className:`text-gray-300 mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:e.baseStats?l.jsxs("div",{className:"space-y-1 bg-gray-800/50 p-2 rounded",children:[e.baseStats.damage&&typeof e.baseStats.damage=="number"&&!isNaN(e.baseStats.damage)&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:" Damage:"}),l.jsx("span",{className:"text-red-300 font-bold",children:e.baseStats.damage.toFixed(1)})]}),e.baseStats.armor&&typeof e.baseStats.armor=="number"&&!isNaN(e.baseStats.armor)&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:" Armor:"}),l.jsx("span",{className:"text-blue-300 font-bold",children:e.baseStats.armor.toFixed(1)})]}),e.baseStats.health&&typeof e.baseStats.health=="number"&&!isNaN(e.baseStats.health)&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:" Health:"}),l.jsxs("span",{className:"text-green-300 font-bold",children:["+",e.baseStats.health.toFixed(1)]})]})]}):l.jsx("div",{className:"bg-gray-800/50 p-2 rounded",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-400",children:" Power:"}),l.jsxs("span",{className:"text-yellow-300 font-bold",children:["+",e.power]})]})})}),e.damageType&&e.damageType!=="physical"&&l.jsx("div",{className:`mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:l.jsx("div",{className:"bg-gray-800/50 p-2 rounded",children:l.jsxs("span",{style:{color:wm(e.damageType)},className:"font-medium",children:[ya(e.damageType)," ",e.damageType," damage"]})})}),e.affixes&&e.affixes.length>0&&l.jsx("div",{className:`mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:l.jsxs("div",{className:"bg-blue-900/30 p-2 rounded border border-blue-600/30",children:[l.jsx("div",{className:"font-medium text-blue-300 mb-1",children:" Modifiers:"}),l.jsx("div",{className:"space-y-1",children:e.affixes.map((b,m)=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-blue-200",children:[b.name,":"]}),l.jsxs("span",{className:"text-blue-100 font-medium",children:["+",b.value]})]},m))})]})}),e.extras&&e.extras.length>0&&l.jsx("div",{className:`mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:l.jsxs("div",{className:"bg-blue-900/30 p-2 rounded border border-blue-600/30",children:[l.jsx("div",{className:"font-medium text-blue-300 mb-1",children:" Bonuses:"}),l.jsx("div",{className:"space-y-1",children:e.extras.map((b,m)=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-blue-200",children:[b.key,":"]}),l.jsxs("span",{className:"text-blue-100 font-medium",children:["+",b.val]})]},m))})]})}),e.requirements&&l.jsx("div",{className:`mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:l.jsxs("div",{className:"bg-orange-900/30 p-2 rounded border border-orange-600/30",children:[l.jsx("div",{className:"font-medium text-orange-300 mb-1",children:" Requirements:"}),l.jsx("div",{className:"space-y-1",children:Object.entries(e.requirements).map(([b,m])=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"capitalize text-orange-200",children:[b,":"]}),l.jsx("span",{className:"text-orange-100 font-medium",children:m})]},b))})]})})]}),l.jsxs("div",{className:`${t==="grid"?"mt-auto":""}`,children:[l.jsx("div",{className:`text-yellow-400 mb-2 pt-2 border-t border-gray-600 ${t==="grid"?"text-xs":"text-sm"}`,children:l.jsxs("div",{className:"flex justify-between items-center bg-yellow-900/20 p-2 rounded",children:[l.jsx("span",{className:"text-yellow-300",children:" Value:"}),l.jsxs("span",{className:"font-bold text-yellow-200",children:[e.value," gold"]})]})}),l.jsxs("div",{className:"flex gap-2 ",children:[r?l.jsx("button",{className:`bg-orange-600 hover:bg-orange-700 rounded-lg transition-all font-medium shadow-lg hover:shadow-xl ${t==="grid"?"px-2 py-1 text-xs flex-1":"px-4 py-2 text-sm"}`,onClick:f,children:t==="grid"?" Unequip":" Unequip Item"}):l.jsx("button",{className:`bg-blue-600 hover:bg-blue-700 rounded-lg transition-all font-medium shadow-lg hover:shadow-xl ${t==="grid"?"px-2 py-1 text-xs flex-1":"px-4 py-2 text-sm"}`,onClick:d,children:t==="grid"?" Equip":" Equip Item"}),l.jsx("button",{className:`bg-red-600 hover:bg-red-700 rounded-lg transition-all font-medium shadow-lg hover:shadow-xl ${t==="grid"?"px-2 py-1 text-xs flex-1":"px-3 py-2 text-sm"}`,onClick:v,children:t==="grid"?"":" Sell"})]})]})]})})}),Hh=C.memo(function(){const{state:t,dispatch:n,actions:a}=it(),[s,r]=C.useState(0),[i,c]=C.useState("list"),[u,d]=C.useState("all"),[f,v]=C.useState(null),b=10,m=10,p=C.useMemo(()=>{let F=[...t.inventory];return u!=="all"&&(F=F.filter(G=>u==="weapons"?G.category==="weapon":u==="helm"?G.category==="armor"&&G.slot==="helm":u==="chest"?G.category==="armor"&&G.slot==="chest":u==="legs"?G.category==="armor"&&G.slot==="legs":u==="boots"?G.category==="armor"&&G.slot==="boots":u==="gloves"?G.category==="armor"&&G.slot==="gloves":u==="accessories"?G.category==="accessory":!0)),F.sort((G,Z)=>{var J,$,re,ie;const ce=["Legendary","Unique","Rare","Magic","Common"],ee=ce.indexOf(G.rarity)-ce.indexOf(Z.rarity);if(ee!==0)return ee;const T=G.power||((J=G.baseStats)==null?void 0:J.damage)||(($=G.baseStats)==null?void 0:$.armor)||0;return(Z.power||((re=Z.baseStats)==null?void 0:re.damage)||((ie=Z.baseStats)==null?void 0:ie.armor)||0)-T})},[t.inventory,u]),S=C.useMemo(()=>{const F={all:t.inventory.length,weapons:0,helm:0,chest:0,legs:0,boots:0,gloves:0,accessories:0};return t.inventory.forEach(G=>{G.category==="weapon"?F.weapons++:G.category==="armor"?G.slot==="helm"?F.helm++:G.slot==="chest"?F.chest++:G.slot==="legs"?F.legs++:G.slot==="boots"?F.boots++:G.slot==="gloves"&&F.gloves++:G.category==="accessory"&&F.accessories++}),F},[t.inventory]),g=C.useMemo(()=>{const F=Math.min(m,Math.ceil(p.length/b)),G=m*b,Z=p.slice(0,G),ce=s*b,ee=Z.slice(ce,ce+b),T=p.length-G;return{totalPages:F,displayInventory:Z,currentItems:ee,excessItems:T}},[p,s,b,m]),x=C.useMemo(()=>t.inventory.reduce((F,G)=>F+(G.value||0),0),[t.inventory]),h=C.useCallback(()=>{window.confirm(`Sell all ${t.inventory.length} items for ${x} gold?`)&&a.sellAll()},[t.inventory.length,x,a]),y=C.useCallback(F=>{c(F),r(0)},[]),w=C.useCallback(F=>{d(F),r(0)},[]),P=C.useCallback(F=>{n({type:"EQUIP",payload:F})},[n]),D=C.useCallback(F=>{const G=t.inventory.find(Z=>Z.id===F);G&&G.slot&&n({type:"UNEQUIP",payload:G.slot})},[n,t.inventory]),O=C.useCallback(F=>{var Z;if(!F.slot)return!1;const G=(Z=t.player.equipment)==null?void 0:Z[F.slot];return G&&G.id===F.id},[t.player.equipment]),M=C.useCallback(F=>{const G=t.inventory.find(Z=>Z.id===F);if(G&&O(G)){console.log("Cannot sell equipped item:",G.name);return}n({type:"DISCARD",payload:F})},[n,t.inventory,O]),j=C.useCallback((F,G)=>{var Z;if(!(f!=null&&f.isPersistent)){const ce=G.slot?(Z=t.player.equipment)==null?void 0:Z[G.slot]:void 0,ee=F.currentTarget.getBoundingClientRect(),T=400,U=300;let J=ee.right+10,$=ee.top;J+T>window.innerWidth&&(J=ee.left-T-10),J<0&&(J=Math.max(10,(window.innerWidth-T)/2)),$+U>window.innerHeight&&($=ee.top-U-10),$<0&&($=10),v({item:G,position:{x:J,y:$},equippedItem:ce,isPersistent:!1})}},[t.player.equipment,f==null?void 0:f.isPersistent]),I=C.useCallback(()=>{f!=null&&f.isPersistent||v(null)},[f==null?void 0:f.isPersistent]),Q=C.useCallback((F,G)=>{var $;F.stopPropagation();const Z=G.slot?($=t.player.equipment)==null?void 0:$[G.slot]:void 0,ce=F.currentTarget.getBoundingClientRect(),ee=400,T=300;let U=ce.right+10,J=ce.top;U+ee>window.innerWidth&&(U=ce.left-ee-10),U<0&&(U=Math.max(10,(window.innerWidth-ee)/2)),J+T>window.innerHeight&&(J=ce.top-T-10),J<0&&(J=10),v({item:G,position:{x:U,y:J},equippedItem:Z,isPersistent:!0})},[t.player.equipment]),K=C.useCallback(()=>{v(null)},[]);return l.jsxs("div",{className:"panel p-6 w-full flex flex-col bg-gray-800",onClick:F=>{f!=null&&f.isPersistent&&K()},children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:" Inventory"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>y("list"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i==="list"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:" List View"}),l.jsx("button",{onClick:()=>y("grid"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i==="grid"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:" Grid View"})]})]}),l.jsx("div",{className:"mb-4 p-3 bg-gray-800/50 rounded-lg border border-gray-600",children:l.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[l.jsxs("button",{onClick:()=>w("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="all"?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" All Items ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",S.all,")"]})]}),l.jsxs("button",{onClick:()=>w("weapons"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="weapons"?"bg-red-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" Weapons ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",S.weapons,")"]})]}),l.jsxs("button",{onClick:()=>w("helm"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="helm"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" Helms ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",S.helm,")"]})]}),l.jsxs("button",{onClick:()=>w("chest"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="chest"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" Chest ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",S.chest,")"]})]}),l.jsxs("button",{onClick:()=>w("legs"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="legs"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" Legs ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",S.legs,")"]})]}),l.jsxs("button",{onClick:()=>w("boots"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="boots"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" Boots ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",S.boots,")"]})]}),l.jsxs("button",{onClick:()=>w("gloves"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="gloves"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" Gloves ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",S.gloves,")"]})]}),l.jsxs("button",{onClick:()=>w("accessories"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="accessories"?"bg-green-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" Accessories ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",S.accessories,")"]})]})]})}),l.jsx("div",{className:"mb-4 p-4 bg-gray-700/50 rounded-lg border border-gray-600",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-yellow-400 text-lg font-bold",children:[" Gold: ",t.player.gold&&typeof t.player.gold=="number"&&!isNaN(t.player.gold)?t.player.gold.toFixed(2):"0.00"]}),l.jsxs("div",{className:"text-gray-300 text-sm",children:[u==="all"?"Total Items":`${u.charAt(0).toUpperCase()+u.slice(1)}`,": ",p.length,u!=="all"&&l.jsxs("span",{className:"text-gray-400",children:[" / ",t.inventory.length," total"]})]}),l.jsxs("div",{className:"text-gray-300 text-sm",children:["Total Value: ",x&&typeof x=="number"&&!isNaN(x)?x.toFixed(2):"0.00"," "]})]}),t.inventory.length>0&&l.jsx("button",{onClick:h,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg text-sm transition-all text-black font-bold shadow-lg hover:shadow-xl",children:" Sell All Items"})]})}),g.excessItems>0&&l.jsxs("div",{className:"mb-4 p-3 bg-orange-900/30 border border-orange-600/40 rounded-lg text-orange-300 text-sm",children:[" ",g.excessItems," excess items converted to gold automatically"]}),l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-200",children:["Items (",p.length,")"]}),g.totalPages>1&&l.jsxs("div",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:["Page ",s+1," of ",g.totalPages]})]}),l.jsxs("div",{className:`flex-1 overflow-y-auto ${i==="grid"?"grid grid-cols-2 gap-3 p-3":"space-y-3 p-2"}`,children:[g.currentItems.length===0&&l.jsx("div",{className:"text-gray-400 text-sm col-span-2",children:"No items yet."}),g.currentItems.map(F=>l.jsx(Wh,{item:F,viewMode:i,onEquip:P,onUnequip:D,onSell:M,isEquipped:!!O(F),onHover:j,onLeave:I,onClick:Q},F.id))]}),g.totalPages>1&&l.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-600 bg-gray-700/30 rounded-lg p-3",children:[l.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",onClick:()=>r(F=>Math.max(0,F-1)),disabled:s===0,children:" Previous"}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-300",children:[l.jsxs("span",{className:"bg-gray-600 px-3 py-1 rounded-lg font-medium",children:["Page ",s+1," of ",g.totalPages]}),g.totalPages>=m&&l.jsxs("span",{className:"text-orange-400 text-xs bg-orange-900/30 px-2 py-1 rounded",children:["(Max ",m," pages)"]})]}),l.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",onClick:()=>r(F=>Math.min(g.totalPages-1,F+1)),disabled:s===g.totalPages-1,children:"Next "})]})]}),f&&l.jsx(Oh,{item:f.item,position:f.position,onClose:K,equippedItem:f.equippedItem,isPersistent:f.isPersistent})]})});function Oc(){const{state:e}=it(),t=C.useRef(null),[n,a]=C.useState("All");C.useEffect(()=>{t.current&&(t.current.scrollTop=0)},[e.log]);const s=c=>c.includes("BOSS DEFEATED")?l.jsx("span",{className:"text-yellow-400 font-bold",children:c}):c.includes("defeated")?l.jsx("span",{className:"text-green-400",children:c}):c.includes("critical")?l.jsx("span",{className:"text-red-400",children:c}):c.includes("dodged")?l.jsx("span",{className:"text-blue-400",children:c}):c.includes("Level up")?l.jsx("span",{className:"text-purple-400 font-bold",children:c}):c.includes("died")?l.jsx("span",{className:"text-red-500 font-bold",children:c}):c.includes("EXP")||c.includes("exp")?l.jsx("span",{className:"text-green-300",children:c}):c.includes("Gold")||c.includes("gold")?l.jsx("span",{className:"text-yellow-300",children:c}):c.includes("found")||c.includes("dropped")||c.includes("item")?l.jsx("span",{className:"text-blue-300",children:c}):l.jsx("span",{className:"text-gray-300",children:c}),i=(()=>{let c=[...e.log];return n!=="All"&&(c=c.filter(u=>{switch(n){case"EXP":return u.includes("EXP")||u.includes("exp")||u.includes("Level up");case"Gold":return u.includes("Gold")||u.includes("gold");case"Items":return u.includes("found")||u.includes("dropped")||u.includes("item");default:return!0}})),c.slice(-50)})();return l.jsxs("div",{className:"bg-gray-900/95 border border-gray-600 rounded-lg p-4 h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:"Combat Log"}),l.jsx("div",{className:"flex space-x-1",children:["All","EXP","Gold","Items"].map(c=>l.jsx("button",{onClick:()=>a(c),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${n===c?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:c},c))})]}),l.jsxs("div",{ref:t,className:"space-y-1 flex-1 overflow-y-auto text-sm bg-gray-800/50 rounded p-3 border border-gray-700",style:{maxHeight:"200px"},children:[i.length===0&&l.jsx("div",{className:"text-gray-500",children:n==="All"?"No combat yet...":`No ${n.toLowerCase()} entries...`}),i.map((c,u)=>l.jsx("div",{className:"font-mono text-xs",children:s(c)},u))]})]})}function Yh(){const{state:e,dispatch:t}=it(),{player:n,enemies:a,log:s}=e,r=a[0],i=u=>!u||u==="physical"?"":{fire:"",ice:"",lightning:"",poison:""}[u]||"",c=u=>u?{berserker:" Berserker",precise:" Precise",regeneration:" Regeneration",shield:" Shield",poison:" Poison",freeze:" Freeze",lightning:" Lightning",summon:" Summon"}[u]||u:"";return l.jsxs("div",{className:"panel p-4 h-full flex flex-col",children:[l.jsx("h2",{className:"text-lg font-bold mb-3",children:"Combat"}),r&&l.jsxs("div",{className:"mb-4 p-3 bg-red-900 rounded",children:[l.jsxs("h3",{className:"font-bold text-red-200",children:[r.isBoss&&" ",r.name," (Level ",r.level,")",r.isBoss&&" - BOSS"]}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{children:["HP: ",r.hp,"/",r.maxHp]}),l.jsxs("div",{children:["Type: ",r.type]}),r.armor&&l.jsxs("div",{children:["Armor: ",r.armor]}),r.specialAbility&&l.jsx("div",{className:"text-yellow-300",children:c(r.specialAbility)})]})]}),l.jsxs("div",{className:"mb-4 p-3 bg-blue-900 rounded",children:[l.jsxs("h3",{className:"font-bold text-blue-200",children:["Player (Level ",n.level,")"]}),l.jsxs("div",{className:"text-sm grid grid-cols-2 gap-1",children:[l.jsxs("div",{children:["HP: ",n.hp,"/",n.maxHp]}),l.jsxs("div",{children:["DPS: ",n.dps]}),l.jsxs("div",{children:["XP: ",n.xp,"/",n.nextLevelXp]}),l.jsxs("div",{children:["Gold: ",n.gold]}),n.armor&&n.armor>0&&l.jsxs("div",{children:["Armor: ",n.armor]}),n.critChance&&n.critChance>0&&l.jsxs("div",{children:["Crit: ",(n.critChance*100).toFixed(2),"%"]}),n.dodgeChance&&n.dodgeChance>0&&l.jsxs("div",{children:["Dodge: ",(n.dodgeChance*100).toFixed(2),"%"]}),n.lifeSteal&&n.lifeSteal>0&&l.jsxs("div",{children:["Life Steal: ",(n.lifeSteal*100).toFixed(2),"%"]}),n.equipped&&n.equipped.damageType&&n.equipped.damageType!=="physical"&&l.jsxs("div",{children:["Element: ",i(n.equipped.damageType)]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("button",{onClick:()=>t({type:"SPAWN"}),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Spawn Enemy"}),r&&l.jsx("button",{onClick:()=>t({type:"TICK",payload:{enemyId:r.id}}),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Combat Tick"}),l.jsxs("button",{onClick:()=>t({type:"TOGGLE_AUTO"}),className:`px-3 py-1 rounded text-sm ${e.autoCombat?"bg-yellow-600 hover:bg-yellow-700":"bg-gray-600 hover:bg-gray-700"}`,children:["Auto: ",e.autoCombat?"ON":"OFF"]})]}),l.jsxs("div",{className:"bg-gray-900 p-3 rounded h-32 overflow-y-auto",children:[l.jsx("h4",{className:"font-bold mb-2",children:"Combat Log"}),l.jsx("div",{className:"text-sm space-y-1",children:s.slice(0,10).map((u,d)=>l.jsx("div",{className:"text-gray-300",children:u},d))})]})]})}function Xh({isOpen:e,onClose:t,title:n,children:a}){return C.useEffect(()=>{const s=r=>{r.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[e,t]),e?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 animate-fade-in",onClick:t}),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-zoom-in",children:l.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-2xl border border-gray-700 max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700 bg-gray-800",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-100",children:n}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors duration-200 group","aria-label":"Close modal",children:l.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-gray-200 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] bg-gray-900",children:a})]})})]}):null}const Kh=({skill:e,position:t,showCharacterStats:n=!0,onClose:a})=>{const{state:s}=it(),r=s.player,i=$n(e),c=Po(e),u=n?xt(e,r):i.damage,d=lm(e),f=rm(e),v=Math.max(100,i.cooldown),b=Math.round(u*1e3/v),m={projectileCount:i.projectileCount||1,area:i.area||0,duration:i.duration||0},p=_i[e.rarity],g=(()=>{if(!n)return null;const M=[];r.dps||r.baseDps;const j=Math.round((u-c)*100)/100;j>0&&M.push({name:"Character DPS Bonus",value:`+${j}`,color:"text-green-400"});const I=r.attributes||{};if(e.tags.includes("Physical")&&I.strength>10){const Q=Math.round((I.strength-10)*.02*100);M.push({name:"Strength Bonus",value:`+${Q}%`,color:"text-red-400"})}if(e.tags.includes("Spell")&&I.intelligence>10){const Q=Math.round((I.intelligence-10)*.02*100);M.push({name:"Intelligence Bonus",value:`+${Q}%`,color:"text-blue-400"})}if(e.tags.includes("Projectile")&&I.dexterity>10){const Q=Math.round((I.dexterity-10)*.015*100);M.push({name:"Dexterity Bonus",value:`+${Q}%`,color:"text-green-400"})}if(I.luck>5){const Q=Math.round((I.luck-5)*.5*10)/10;M.push({name:"Critical Chance",value:`+${Q}%`,color:"text-yellow-400"})}if(r.equipment){let Q=0,K=0;Object.values(r.equipment).forEach(F=>{var G;F&&(Q+=((G=F.baseStats)==null?void 0:G.damage)||0,F.affixes.forEach(Z=>{Z.stat==="damage"&&(Q+=Z.value)}),F.sockets&&r.stones&&F.sockets.stones.filter(ce=>ce!==null).map(ce=>r.stones.find(ee=>ee.id===ce)).filter(ce=>ce!==void 0).forEach(ce=>{ce.baseStats.damage&&(K+=ce.baseStats.damage),ce.affixes.forEach(ee=>{ee.stat==="damage"&&(K+=ee.value)})}))}),Q>0&&M.push({name:"Equipment Damage",value:`+${Q}`,color:"text-orange-400"}),K>0&&M.push({name:"Stone Damage",value:`+${K}`,color:"text-purple-400"})}return M})(),h=(()=>{const M=[];return e.supportGems.forEach(j=>{j.modifiers.forEach(I=>{let Q=I.value,K="";I.isPercentage&&(K="%"),I.type==="damage_multiplier"&&(Q=Math.round((I.value-1)*100),K="% more"),M.push({name:I.description||`${I.type} modifier`,value:`${Q>0?"+":""}${Q}${K}`,color:I.value>0?"text-green-400":"text-red-400",source:j.name})})}),M})(),w=(()=>{const M=[];return e.tags.includes("AoE")&&p.areaOfEffectBonus&&M.push({name:"Area of Effect",value:`+${p.areaOfEffectBonus}%`,color:"text-purple-400"}),e.tags.includes("Projectile")&&p.projectileDamageBonus&&M.push({name:"Projectile Damage",value:`+${p.projectileDamageBonus}%`,color:"text-cyan-400"}),e.tags.includes("Physical")&&p.physicalDamageBonus&&M.push({name:"Physical Damage",value:`+${p.physicalDamageBonus}%`,color:"text-gray-400"}),(e.tags.includes("Fire")||e.tags.includes("Cold")||e.tags.includes("Lightning"))&&p.elementalDamageBonus&&M.push({name:"Elemental Damage",value:`+${p.elementalDamageBonus}%`,color:"text-yellow-400"}),M})(),O={x:Math.max(10,Math.min(t.x,window.innerWidth-384-10)),y:Math.max(10,Math.min(t.y,window.innerHeight-600-10))};return l.jsxs("div",{className:"fixed z-50 rounded-lg shadow-2xl p-4 max-w-sm",style:{left:O.x,top:O.y,maxHeight:"80vh",overflow:"auto",background:"var(--bg-secondary)",border:`2px solid ${p.colorVariant}`,boxShadow:"0 20px 40px var(--shadow-color)"},children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-2xl",children:e.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-lg",style:{color:p.colorVariant},children:e.name}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Level ",e.level]}),l.jsx("span",{style:{color:"var(--text-secondary)"},children:""}),l.jsx("span",{style:{color:p.colorVariant},children:e.rarity}),e.quality>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:""}),l.jsxs("span",{style:{color:"var(--accent-primary)"},children:["Q",e.quality,"%"]})]})]})]}),a&&l.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded ml-2",style:{color:"var(--text-secondary)"},title:"Close tooltip",children:""})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(M=>l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:Qh(M),color:"white"},children:M},M))})]}),l.jsx("p",{className:"text-sm mb-3 leading-relaxed",style:{color:"var(--text-secondary)"},children:e.description}),l.jsxs("div",{className:"space-y-2 mb-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Damage:"}),l.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:"var(--accent-secondary)"},children:Math.round(u)}),u!==c&&l.jsxs("span",{className:"text-sm ml-1",style:{color:"var(--text-muted)"},children:["(",Math.round(c)," base)"]})]}):Math.round(c)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"DPS:"}),l.jsx("span",{style:{color:"var(--accent-secondary)"},children:b})]}),d>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Mana Cost:"}),l.jsx("span",{style:{color:"var(--accent-primary)"},children:Math.round(d)})]}),f>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Cooldown:"}),l.jsxs("span",{style:{color:"var(--accent-tertiary)"},children:[(f/1e3).toFixed(1),"s"]})]})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Active Skill Properties:"}),l.jsxs("div",{className:"p-3 rounded space-y-1",style:{background:"var(--bg-tertiary)"},children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Damage Type: "}),l.jsx("span",{className:"font-medium",style:{color:e.tags.includes("Fire")?"#ef4444":e.tags.includes("Lightning")?"#fbbf24":e.tags.includes("Cold")?"#06b6d4":e.tags.includes("Chaos")?"#10b981":"var(--text-primary)"},children:e.tags.includes("Fire")?"Fire":e.tags.includes("Lightning")?"Lightning":e.tags.includes("Cold")?"Cold":e.tags.includes("Chaos")?"Chaos":"Physical"})]}),m.projectileCount>1&&l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Projectiles: "}),l.jsx("span",{className:"font-medium",style:{color:"#06b6d4"},children:m.projectileCount})]}),m.area>0&&l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Area: "}),l.jsx("span",{className:"font-medium",style:{color:"#10b981"},children:m.area.toFixed(1)})]}),m.duration>0&&l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Duration: "}),l.jsxs("span",{className:"font-medium",style:{color:"#a855f7"},children:[(m.duration/1e3).toFixed(1),"s"]})]}),e.tags.includes("Projectile")&&l.jsx("div",{className:"text-xs",style:{color:"#06b6d4"},children:" Projectile skill - travels to target location"}),e.tags.includes("AoE")&&l.jsx("div",{className:"text-xs",style:{color:"#10b981"},children:" Area of Effect - damages multiple enemies"}),e.tags.includes("Channeling")&&l.jsx("div",{className:"text-xs",style:{color:"#a855f7"},children:" Channeling skill - continuous effect"}),e.tags.includes("Minion")&&l.jsx("div",{className:"text-xs",style:{color:"var(--accent-primary)"},children:" Summons minions to fight for you"}),e.supportGems.some(M=>M.id==="multiple_projectiles")&&l.jsx("div",{className:"text-xs",style:{color:"#06b6d4"},children:" Fires multiple projectiles simultaneously"}),e.supportGems.some(M=>M.id==="pierce")&&l.jsx("div",{className:"text-xs",style:{color:"#fbbf24"},children:" Projectiles pierce through enemies"}),e.supportGems.some(M=>M.id==="faster_casting")&&l.jsx("div",{className:"text-xs",style:{color:"var(--accent-secondary)"},children:" Enhanced casting speed"})]})]}),g&&g.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Character Bonuses:"}),l.jsx("div",{className:"space-y-1",children:g.map((M,j)=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{style:{color:"var(--text-secondary)"},children:[M.name,":"]}),l.jsx("span",{className:M.color,children:M.value})]},j))})]}),w.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Rarity Bonuses:"}),l.jsx("div",{className:"space-y-1",children:w.map((M,j)=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{style:{color:"var(--text-secondary)"},children:[M.name,":"]}),l.jsx("span",{className:M.color,children:M.value})]},j))})]}),h.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Active Modifiers:"}),l.jsx("div",{className:"space-y-1",children:h.map((M,j)=>l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{style:{color:"var(--text-secondary)"},children:[M.name,":"]}),l.jsx("span",{className:M.color,children:M.value})]}),l.jsxs("div",{className:"text-xs text-right",style:{color:"var(--text-muted)"},children:["from ",M.source]})]},j))})]}),e.supportGems.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Support Gems:"}),l.jsx("div",{className:"space-y-1",children:e.supportGems.map((M,j)=>l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"text-lg",children:M.icon}),l.jsx("span",{style:{color:"var(--text-secondary)"},children:M.name}),l.jsxs("span",{style:{color:"var(--text-muted)"},children:["Lv.",M.level]})]},j))})]})]})};function Qh(e){return{Attack:"#dc2626",Spell:"#2563eb",Aura:"#7c3aed",Support:"#059669",Physical:"#6b7280",Fire:"#dc2626",Cold:"#06b6d4",Lightning:"#fbbf24",Chaos:"#7c2d12",Elemental:"#f59e0b",Projectile:"#10b981",AoE:"#8b5cf6",Melee:"#ef4444",Channeling:"#3b82f6",Duration:"#06b6d4",Movement:"#22c55e",Minion:"#a855f7",Critical:"#fbbf24"}[e]||"#6b7280"}const Zh=Wn.memo(function({isOpen:t,onClose:n}){const{state:a,actions:s}=it(),[r,i]=C.useState("skills"),[c,u]=C.useState("list"),[d,f]=C.useState(null),[v,b]=C.useState(null),[m,p]=C.useState(""),[S,g]=C.useState("All"),[x,h]=C.useState(!1),[y,w]=C.useState(null),P=C.useMemo(()=>({unlockedSkills:Sh(a.player),availableSkills:wh(a.player),unlockedSupports:jh(a.player),availableSupports:kh(a.player)}),[a.player,a.player.skillBar]),D=C.useMemo(()=>{const k=new Set;return[...P.unlockedSkills,...P.availableSkills].forEach(z=>{z.tags.forEach(he=>k.add(he))}),Array.from(k).sort()},[P]),O=C.useMemo(()=>{let k=[...P.unlockedSkills,...P.availableSkills];return m&&(k=k.filter(z=>z.name.toLowerCase().includes(m.toLowerCase())||z.description.toLowerCase().includes(m.toLowerCase()))),S!=="All"&&(k=k.filter(z=>z.tags.includes(S))),k},[P,m,S]),M=C.useMemo(()=>{let k=[...P.unlockedSupports,...P.availableSupports];return m&&(k=k.filter(z=>z.name.toLowerCase().includes(m.toLowerCase())||z.description.toLowerCase().includes(m.toLowerCase()))),S!=="All"&&(k=k.filter(z=>z.tags.includes(S))),k},[P,m,S]),j=C.useCallback(k=>{s.unlockSkillGem(k),f(null)},[s]),I=C.useCallback(k=>{s.levelUpSkillGem(k);const z=a.player.skillGems.find(he=>he.id===k);z&&(d==null?void 0:d.id)===k&&f(z)},[s,a.player.skillGems,d]),Q=C.useCallback(k=>{s.unlockSupportGem(k),b(null)},[s]),K=C.useCallback(k=>{s.levelUpSupportGem(k);const z=a.player.supportGems.find(he=>he.id===k);z&&(v==null?void 0:v.id)===k&&b(z)},[s,a.player.supportGems,v]),F=C.useCallback((k,z)=>{s.equipSkillToBar(k,z),f(null)},[s]),G=C.useCallback(k=>{s.unequipSkillFromBar(k),f(null)},[s]),Z=C.useCallback((k,z)=>{s.attachSupportGem(k,z),h(!1),b(null)},[s]),ce=C.useCallback((k,z)=>{s.detachSupportGem(k,z)},[s]),ee=k=>({Normal:"#ffffff",Magic:"#8888ff",Rare:"#ffff88",Unique:"#ff8800"})[k]||"#ffffff",T=k=>({Spell:"#4f46e5",Attack:"#dc2626",Projectile:"#059669",AoE:"#d97706",Physical:"#6b7280",Fire:"#ef4444",Cold:"#3b82f6",Lightning:"#eab308",Chaos:"#8b5cf6",Melee:"#991b1b",Duration:"#7c3aed",Channeling:"#be185d",Movement:"#0891b2",Travel:"#0d9488",Minion:"#7c2d12",Totem:"#a16207",Trap:"#374151",Mine:"#1f2937",Critical:"#fbbf24",Bow:"#92400e",Weapon:"#6b7280",Unarmed:"#78716c",Brand:"#c2410c",Slam:"#7f1d1d",Strike:"#b91c1c",Guard:"#1e40af",Vaal:"#581c87",Trigger:"#be123c",Aura:"#06b6d4",Curse:"#f59e0b",Warcry:"#dc2626",Support:"#10b981",Elemental:"#f59e0b"})[k]||"#6b7280",U=k=>k.toFixed(2),J=()=>a.player.skillBar.slots.map((k,z)=>({index:z,skill:k,isEmpty:!k})),$=k=>{var H,Y;const z=$n(k),he=J();return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-3xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold",style:{color:ee(k.rarity)},children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Level ",k.level,"/",k.maxLevel,"  ",k.rarity,"  Quality: ",k.quality,"%"]})]})]}),l.jsx("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-white text-xl",children:""})]}),l.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:k.description}),l.jsx("div",{className:"flex flex-wrap gap-1",children:k.tags.map(o=>l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:T(o)},children:o},o))}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Damage:"}),l.jsx("span",{className:"text-red-400",children:U(z.damage)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Mana Cost:"}),l.jsx("span",{className:"text-blue-400",children:U(z.manaCost)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Cooldown:"}),l.jsxs("span",{className:"text-yellow-400",children:[U(z.cooldown/1e3),"s"]})]})]}),l.jsxs("div",{className:"space-y-2",children:[((H=k.scaling)==null?void 0:H.baseArea)&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Area:"}),l.jsx("span",{className:"text-green-400",children:U(z.area)})]}),((Y=k.scaling)==null?void 0:Y.baseDuration)&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Duration:"}),l.jsxs("span",{className:"text-purple-400",children:[U(z.duration/1e3),"s"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Unlock Cost:"}),l.jsxs("span",{className:"text-yellow-300",children:[k.skillPointCost," SP"]})]})]})]}),k.supportGems.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-white font-medium",children:"Active Support Modifiers:"}),l.jsx("div",{className:"space-y-1 bg-gray-700 p-3 rounded",children:k.supportGems.map(o=>{const B=im(o);return l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-sm font-medium text-blue-300",children:[o.name," (Lv.",o.level,")"]}),B.map((V,de)=>l.jsxs("div",{className:"text-xs text-green-300 ml-2",children:[" ",V.description||`${V.type}: ${V.isPercentage?"+":""}${V.value}${V.isPercentage?"%":""}`]},de))]},o.id)})})]}),k.isUnlocked&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h4",{className:"text-white font-medium",children:["Support Gems (",k.supportGems.length,"/6)"]}),l.jsx("button",{onClick:()=>{b(null),h(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs",disabled:k.supportGems.length>=6,children:"Attach Support"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.supportGems.map(o=>l.jsxs("div",{className:"bg-gray-700 p-2 rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{children:o.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium",children:o.name}),l.jsxs("div",{className:"text-xs text-gray-400",children:["Lv.",o.level]})]})]}),l.jsx("button",{onClick:()=>ce(k.id,o.id),className:"text-red-400 hover:text-red-300 text-xs",children:""})]},o.id))})]}),l.jsx("div",{className:"flex space-x-2",children:k.isUnlocked?l.jsxs(l.Fragment,{children:[k.level<k.maxLevel&&l.jsxs("button",{onClick:()=>I(k.id),disabled:!Ll(k,a.player.skillPoints),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Level Up (",Vn(k.level)," SP)"]}),he.filter(o=>o.isEmpty).length>0&&l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("span",{className:"text-gray-400 text-sm py-2",children:"Equip to:"}),he.filter(o=>o.isEmpty).map(o=>l.jsxs("button",{onClick:()=>F(k.id,o.index),className:"bg-purple-600 hover:bg-purple-700 text-white px-2 py-1 rounded text-sm",children:["Slot ",o.index+1]},o.index))]})]}):l.jsxs("button",{onClick:()=>j(k.id),disabled:a.player.skillPoints<pn(k)||a.player.level<k.unlockLevel,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Unlock (",pn(k)," SP)"]})})]})},re=k=>l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-3xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold",style:{color:ee(k.rarity)},children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Level ",k.level,"/",k.maxLevel,"  ",k.rarity,"  Quality: ",k.quality,"%"]})]})]}),l.jsx("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-white text-xl",children:""})]}),l.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:k.description}),l.jsx("div",{className:"flex flex-wrap gap-1",children:k.tags.map(z=>l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:T(z)},children:z},z))}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-white font-medium",children:"Modifiers:"}),l.jsx("div",{className:"space-y-1",children:k.modifiers.map((z,he)=>l.jsxs("div",{className:"text-sm text-gray-300",children:[" ",z.description||`${z.type}: ${z.isPercentage?"+":""}${z.value}${z.isPercentage?"%":""}`]},he))})]}),l.jsx("div",{className:"flex space-x-2",children:k.isUnlocked?l.jsx(l.Fragment,{children:k.level<k.maxLevel&&l.jsxs("button",{onClick:()=>K(k.id),disabled:!Ll(k,a.player.skillPoints),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Level Up (",Vn(k.level)," SP)"]})}):l.jsxs("button",{onClick:()=>Q(k.id),disabled:a.player.skillPoints<pn(k)||a.player.level<k.unlockLevel,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Unlock (",pn(k)," SP)"]})})]}),ie=()=>{if(!d||!x)return null;const k=P.unlockedSupports.filter(z=>pp(d,z)&&!d.supportGems.some(he=>he.id===z.id));return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-white font-bold",children:["Attach Support to ",d.name]}),l.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-white text-xl",children:""})]}),l.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:k.length>0?k.map(z=>l.jsxs("div",{className:"bg-gray-700 p-3 rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-lg",children:z.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:z.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",z.level]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:z.tags.map(he=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:T(he),color:"white"},children:he},he))})]})]}),l.jsx("button",{onClick:()=>Z(d.id,z.id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"Attach"})]},z.id)):l.jsx("div",{className:"text-gray-400 text-center py-4",children:"No compatible support gems available"})})]})};return t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg shadow-xl w-[90vw] h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-700",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:" Skill Gem Management"}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-xl leading-none",children:""})]}),l.jsx("div",{className:"px-4 py-2 border-b border-gray-700 text-sm text-gray-300",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Skill Points: ",a.player.skillPoints]}),l.jsxs("span",{children:["Level: ",a.player.level]})]})}),l.jsxs("div",{className:"flex border-b border-gray-700",children:[l.jsxs("button",{className:`px-4 py-2 font-medium ${r==="skills"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("skills"),children:["Skills (",P.unlockedSkills.length,")"]}),l.jsxs("button",{className:`px-4 py-2 font-medium ${r==="supports"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("supports"),children:["Support Gems (",P.unlockedSupports.length,")"]}),l.jsx("button",{className:`px-4 py-2 font-medium ${r==="skillbar"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("skillbar"),children:"Skill Bar"})]}),(r==="skills"||r==="supports")&&l.jsx("div",{className:"p-4 border-b border-gray-700 space-y-2",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("input",{type:"text",placeholder:"Search skills...",value:m,onChange:k=>p(k.target.value),className:"flex-1 bg-gray-800 border border-gray-600 rounded px-3 py-1 text-white text-sm"}),l.jsxs("select",{value:S,onChange:k=>g(k.target.value),className:"bg-gray-800 border border-gray-600 rounded px-3 py-1 text-white text-sm",children:[l.jsx("option",{value:"All",children:"All Tags"}),D.map(k=>l.jsx("option",{value:k,children:k},k))]}),l.jsx("button",{onClick:()=>u(c==="list"?"detailed":"list"),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm",children:c==="list"?"":""})]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:x?l.jsx("div",{className:"p-4 h-full overflow-y-auto",children:ie()}):d?l.jsx("div",{className:"p-4 h-full overflow-y-auto",children:$(d)}):v?l.jsx("div",{className:"p-4 h-full overflow-y-auto",children:re(v)}):l.jsxs("div",{className:"p-4 h-full overflow-y-auto",children:[r==="skills"&&l.jsxs("div",{className:"space-y-4",children:[P.unlockedSkills.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Unlocked Skills"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:O.filter(k=>k.isUnlocked).map(k=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between hover:bg-gray-750 cursor-pointer",onClick:()=>f(k),onMouseEnter:z=>{const he=z.currentTarget.getBoundingClientRect();w({skill:k,position:{x:he.right+10,y:he.top}})},onMouseLeave:()=>w(null),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.level,"  Dmg: ",U(Po(k)),k.isEquipped&&l.jsx("span",{className:"text-yellow-400 ml-2",children:" Equipped"})]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(z=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:T(z),color:"white"},children:z},z))})]})]}),l.jsx("div",{className:"text-gray-400",children:""})]},k.id))})]}),P.availableSkills.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Available Skills"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:O.filter(k=>!k.isUnlocked).map(k=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between opacity-75 hover:opacity-100 cursor-pointer",onClick:()=>f(k),onMouseEnter:z=>{const he=z.currentTarget.getBoundingClientRect();w({skill:k,position:{x:he.right+10,y:he.top}})},onMouseLeave:()=>w(null),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-300 font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Cost: ",pn(k)," SP  Req: Lv.",k.unlockLevel]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(z=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:T(z),color:"white"},children:z},z))})]})]}),l.jsx("div",{className:"text-gray-400",children:""})]},k.id))})]})]}),r==="supports"&&l.jsxs("div",{className:"space-y-4",children:[P.unlockedSupports.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Unlocked Support Gems"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:M.filter(k=>k.isUnlocked).map(k=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between hover:bg-gray-750 cursor-pointer",onClick:()=>b(k),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.level]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(z=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:T(z),color:"white"},children:z},z))})]})]}),l.jsx("div",{className:"text-gray-400",children:""})]},k.id))})]}),P.availableSupports.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Available Support Gems"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:M.filter(k=>!k.isUnlocked).map(k=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between opacity-75 hover:opacity-100 cursor-pointer",onClick:()=>b(k),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-300 font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Cost: ",pn(k)," SP  Req: Lv.",k.unlockLevel]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(z=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:T(z),color:"white"},children:z},z))})]})]}),l.jsx("div",{className:"text-gray-400",children:""})]},k.id))})]})]}),r==="skillbar"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"text-white font-semibold",children:"Skill Bar Management"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:J().map(k=>l.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[l.jsxs("div",{className:"text-white font-medium mb-2",children:["Slot ",k.index+1]}),k.skill?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-lg",children:k.skill.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:k.skill.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.skill.level]})]})]}),l.jsx("button",{onClick:()=>G(k.index),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm w-full",children:"Unequip"})]}):l.jsx("div",{className:"text-gray-400 text-center py-4",children:"Empty Slot"})]},k.index))})]})]})}),y&&l.jsx(Kh,{skill:y.skill,position:y.position,onClose:()=>w(null)})]})}):null});function Jh({className:e=""}){const{state:t,actions:n}=it(),[a,s]=C.useState(null),[r,i]=C.useState({}),[c,u]=C.useState(null),d=t.player.skillBar,f=(d==null?void 0:d.maxSlots)||6,v=x=>d!=null&&d.slots&&d.slots[x]||null,b=(x,h)=>{a===x?(s(null),u(null)):(s(x),h&&u({x:h.clientX+10,y:h.clientY+10}))},m=(x,h)=>{h.stopPropagation(),console.log(` Attempting to unequip skill from slot ${x}`);const y=v(x);console.log(" Skill to unequip:",y),n.unequipSkillFromBar(x),s(null)},p=x=>{i(h=>({...h,[x]:!h[x]}))},S=x=>{const h=v(x),y=a===x,w=!h;return l.jsxs("div",{className:`skill-slot ${w?"empty":"filled"} ${y?"selected":""}`,onClick:P=>b(x,P),children:[l.jsx("div",{className:"slot-number",children:x+1}),h?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"skill-icon",title:h.name,children:h.icon}),l.jsx("div",{className:"skill-level",children:h.level}),h.supportGems.length>0&&l.jsx("div",{className:"support-indicator",children:l.jsx("span",{className:"support-count",children:h.supportGems.length})}),l.jsx("div",{className:"skill-mana-cost",children:$n(h).manaCost}),l.jsx("button",{className:"unequip-skill-btn",onClick:P=>m(x,P),title:"Unequip skill",children:""}),y&&c&&l.jsxs("div",{className:"skill-tooltip",style:{left:Math.max(10,Math.min(c.x,window.innerWidth-420)),top:Math.max(10,Math.min(c.y,window.innerHeight-350)),maxWidth:"400px",maxHeight:"340px",overflow:"auto"},onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"tooltip-header",children:[l.jsxs("div",{children:[l.jsx("h4",{children:h.name}),l.jsx("span",{className:"skill-type",children:h.type})]}),l.jsx("button",{onClick:P=>{P.stopPropagation(),s(null),u(null)},className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded",title:"Close tooltip",children:""})]}),l.jsxs("div",{className:"skill-tags",children:[l.jsx("span",{className:"tags-label",children:"Tags: "}),l.jsx("span",{className:"tags-list",children:hp(h)})]}),l.jsx("p",{className:"skill-description",children:h.description}),l.jsxs("div",{className:"skill-stats",children:[l.jsxs("div",{children:["Level: ",h.level,"/",h.maxLevel]}),(()=>{const P=$n(h);return l.jsxs(l.Fragment,{children:[P.damage>0&&l.jsxs("div",{children:["Damage: ",P.damage]}),l.jsxs("div",{children:["Mana: ",P.manaCost]}),l.jsxs("div",{children:["Cooldown: ",P.cooldown,"ms"]}),P.projectileCount>1&&l.jsxs("div",{children:["Projectiles: ",P.projectileCount]})]})})()]}),h.supportGems.length>0&&l.jsxs("div",{className:"support-gems",children:[l.jsxs("div",{className:"support-header",onClick:()=>p(h.id),children:[l.jsxs("span",{children:["Support Gems (",h.supportGems.length,"/6)"]}),l.jsx("span",{className:`expand-icon ${r[h.id]?"expanded":""}`,children:""})]}),r[h.id]&&l.jsx("div",{className:"support-list",children:h.supportGems.map(P=>l.jsxs("div",{className:"support-item",children:[l.jsx("span",{className:"support-icon",children:P.icon}),l.jsx("span",{className:"support-name",children:P.name}),l.jsxs("span",{className:"support-level",children:["Lv.",P.level]}),l.jsx("button",{className:"detach-support-btn",onClick:D=>{D.stopPropagation(),n.detachSupportGem(h.id,P.id)},title:"Detach support gem",children:""})]},P.id))})]}),l.jsxs("div",{className:"tooltip-actions",children:[l.jsxs("div",{className:"auto-skill-status",children:[l.jsx("span",{className:"auto-indicator",children:" Auto-Active"}),l.jsx("span",{className:"skill-status",children:h.id==="whirlwind"?"Channeling in Combat":"Ready"})]}),l.jsx("button",{className:"unequip-btn-large",onClick:P=>m(x,P),title:"Unequip this skill",children:"Unequip Skill"})]})]})]}):l.jsxs("div",{className:"empty-slot-content",children:[l.jsx("div",{className:"empty-icon",children:"+"}),l.jsx("div",{className:"empty-text",children:"Empty"})]})]},x)},g=()=>{var h;const x=(h=d==null?void 0:d.slots)==null?void 0:h.find(y=>(y==null?void 0:y.id)==="whirlwind");return l.jsxs("div",{className:"combat-status",children:[l.jsxs("div",{className:"auto-combat-info",children:[l.jsx("span",{className:"status-label",children:"Combat Mode:"}),l.jsx("span",{className:"status-value",children:"Automatic Whirlwind"})]}),x&&l.jsxs("div",{className:"whirlwind-stats",children:[l.jsxs("span",{children:["Mana Cost: ",$n(x).manaCost,"/sec"]}),l.jsxs("span",{children:["Area Damage: ",$n(x).damage]})]})]})};return l.jsxs("div",{className:`skill-bar-container ${e}`,onClick:x=>{a!==null&&!x.defaultPrevented&&(s(null),u(null))},children:[l.jsxs("div",{className:"skill-bar-header",children:[l.jsx("h3",{children:"Combat Skills"}),l.jsx("div",{className:"skill-bar-info",children:l.jsxs("span",{children:["Active Skills: ",d!=null&&d.slots?d.slots.filter(x=>x!==null).length:0,"/",f]})})]}),l.jsx("div",{className:"skill-bar",children:Array.from({length:f},(x,h)=>S(h))}),g(),l.jsx("div",{className:"skill-bar-help",children:l.jsx("p",{children:"Skills activate automatically during combat  Click slots to view details and support gems"})})]})}const eg={common:[{k:"str",min:1,max:3},{k:"vit",min:2,max:4}],magic:[{k:"str",min:2,max:5},{k:"dex",min:2,max:5},{k:"vit",min:3,max:7}],rare:[{k:"str",min:3,max:8},{k:"dex",min:3,max:8},{k:"vit",min:5,max:10},{k:"crit",min:1,max:5}],unique:[{k:"str",min:6,max:12},{k:"dex",min:6,max:12},{k:"vit",min:8,max:15},{k:"crit",min:3,max:8},{k:"lifesteal",min:1,max:4}]},Gs=new Map,tg=1e3,ng={Common:2,Magic:3,Rare:4,Unique:5};function Uc(e,t){return Math.floor(Math.random()*(t-e+1))+e}function ag(e){const t=`${e}`;if(Gs.has(t)&&Math.random()>.8)return Gs.get(t).map(c=>({...c,value:Uc(Math.floor(c.value*.8),Math.ceil(c.value*1.2))}));const n=eg[e.toLowerCase()],a=ng[e],s=[],r=[...n];for(let i=0;i<a&&r.length;i++){const c=Math.floor(Math.random()*r.length),u=r.splice(c,1)[0];s.push({key:u.k,value:Uc(u.min,u.max)})}return Gs.size<tg&&Gs.set(t,[...s]),s}function Sm(e=1e3){const t=performance.now();for(let s=0;s<e;s++)ar(Math.floor(Math.random()*100)+1,Math.random()>.9);const a=performance.now()-t;return{operation:"Equipment Generation",iterations:e,totalTime:a,averageTime:a/e,itemsPerSecond:e/a*1e3}}function km(e=1e3){const t=performance.now();for(let s=0;s<e;s++)rl(Math.floor(Math.random()*100)+1,Math.random()>.9);const a=performance.now()-t;return{operation:"Loot Generation",iterations:e,totalTime:a,averageTime:a/e,itemsPerSecond:e/a*1e3}}function jm(e=1e3){const t=["Common","Magic","Rare","Unique"],n=performance.now();for(let r=0;r<e;r++){const i=t[Math.floor(Math.random()*t.length)];ag(i)}const s=performance.now()-n;return{operation:"Affix Generation",iterations:e,totalTime:s,averageTime:s/e,itemsPerSecond:e/s*1e3}}function Nm(e=100){const t=tr(),n=["weapon","helm","chest","legs","boots","gloves"];for(let i=0;i<n.length;i++){const c=ar(50,!1);t.equipment[n[i]]=c}const a=performance.now();for(let i=0;i<e;i++)mm(t);const r=performance.now()-a;return{operation:"Player Stat Calculation",iterations:e,totalTime:r,averageTime:r/e,itemsPerSecond:e/r*1e3}}function Cm(){console.log(" Starting Performance Test Suite...");const e=[];return console.log("Testing equipment generation..."),e.push(Sm(1e3)),console.log("Testing loot generation..."),e.push(km(1e3)),console.log("Testing affix generation..."),e.push(jm(1e3)),console.log("Testing stat calculation..."),e.push(Nm(100)),console.log(" Performance Test Suite Complete!"),e.forEach(t=>{console.log(`
 ${t.operation}:`),console.log(`  Iterations: ${t.iterations}`),console.log(`  Total Time: ${t.totalTime.toFixed(2)}ms`),console.log(`  Average Time: ${t.averageTime.toFixed(4)}ms`),console.log(`  Items/Second: ${t.itemsPerSecond.toFixed(0)}`)}),e}function sg(){if("memory"in performance){const e=performance.memory;console.log(`
 Memory Usage:`),console.log(`  Used JS Heap: ${(e.usedJSHeapSize/1024/1024).toFixed(2)} MB`),console.log(`  Total JS Heap: ${(e.totalJSHeapSize/1024/1024).toFixed(2)} MB`),console.log(`  Heap Limit: ${(e.jsHeapSizeLimit/1024/1024).toFixed(2)} MB`)}else console.log("Memory API not available in this browser")}typeof window<"u"&&(window.performanceTest={runSuite:Cm,testMemory:sg,testEquipment:Sm,testLoot:km,testAffixes:jm,testStats:Nm});function lg(){const[e,t]=C.useState(!1),[n,a]=C.useState([]),[s,r]=C.useState(!1),[i,c]=C.useState(""),u=async()=>{r(!0);try{const d=Cm();if(a(d),"memory"in performance){const f=performance.memory;c(`Used: ${(f.usedJSHeapSize/1024/1024).toFixed(2)} MB | Total: ${(f.totalJSHeapSize/1024/1024).toFixed(2)} MB`)}}catch(d){console.error("Performance test failed:",d)}finally{r(!1)}};return e?l.jsxs("div",{className:"fixed bottom-4 right-4 bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-md w-80 shadow-xl z-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"text-white font-bold text-sm",children:"Performance Monitor"}),l.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white text-lg leading-none",children:""})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:u,disabled:s,className:`w-full px-3 py-2 rounded text-sm font-medium ${s?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:s?"Running Tests...":"Run Performance Tests"}),i&&l.jsxs("div",{className:"text-xs text-gray-300 bg-gray-800 p-2 rounded",children:[l.jsx("strong",{children:"Memory:"})," ",i]}),n.length>0&&l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[l.jsx("h4",{className:"text-white text-xs font-semibold",children:"Test Results:"}),n.map((d,f)=>l.jsxs("div",{className:"bg-gray-800 p-2 rounded text-xs",children:[l.jsx("div",{className:"text-blue-400 font-medium",children:d.operation}),l.jsxs("div",{className:"text-gray-300 space-y-1",children:[l.jsxs("div",{children:["Iterations: ",d.iterations]}),l.jsxs("div",{children:["Avg Time: ",d.averageTime.toFixed(4),"ms"]}),l.jsxs("div",{className:"text-green-400",children:["Speed: ",d.itemsPerSecond.toFixed(0)," items/sec"]})]})]},f))]}),l.jsxs("div",{className:"text-xs text-gray-400 border-t border-gray-700 pt-2",children:[l.jsx("div",{children:" Tips:"}),l.jsx("div",{children:" Higher items/sec = better performance"}),l.jsx("div",{children:" Lower avg time = faster operations"}),l.jsx("div",{children:" Check console for detailed logs"})]})]})]}):l.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-4 right-4 bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50",children:" Performance"})}function rg({isOpen:e,onClose:t}){var m;const{state:n,actions:a}=it(),[s,r]=C.useState(null),[i,c]=C.useState("available");if(!e)return null;const u=n.player.mapDevice,d=n.player.level;if(!u)return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Map Device Error"}),l.jsx("p",{className:"text-gray-300",children:"Map device not initialized. Please restart the game."}),l.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})]})});const f=p=>{a.log(`Starting map: ${p.name} (Tier ${p.tier})`),t()},v=p=>p.map(S=>l.jsxs("div",{className:`text-xs p-1 rounded ${S.type==="prefix"?"bg-red-900/30 text-red-300":"bg-blue-900/30 text-blue-300"}`,children:[l.jsx("span",{className:"font-semibold",children:S.name}),l.jsx("div",{className:"text-xs opacity-80",children:S.description})]},S.id)),b=(p,S=!0)=>{const g=Cp(p),x=Mp(p),h=um(p,d,u.completedMaps),y=u.completedMaps.includes(p.id);return l.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${(s==null?void 0:s.id)===p.id?"border-yellow-400 bg-yellow-900/20":h?"border-gray-600 hover:border-gray-400 bg-gray-800/50":"border-gray-700 bg-gray-900/50 opacity-50"}`,onClick:()=>r(p),children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold text-lg ${p.rarity==="Unique"?"text-orange-400":p.rarity==="Rare"?"text-yellow-400":p.rarity==="Magic"?"text-blue-400":"text-white"}`,children:p.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Tier ",p.tier,"  Level ",p.baseLevel,"  ",p.layout," layout"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`text-sm font-semibold ${g<100?"text-green-400":g<200?"text-yellow-400":g<300?"text-orange-400":"text-red-400"}`,children:["Difficulty: ",g]}),y&&l.jsxs("div",{className:"text-xs text-green-400",children:[" Completed (",p.timesCompleted,"x)"]})]})]}),l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:p.description}),p.modifiers.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-1",children:"Map Modifiers:"}),l.jsx("div",{className:"space-y-1",children:v(p.modifiers)})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-1",children:"Rewards:"}),l.jsx("div",{className:"text-xs text-gray-300 space-y-1",children:x.map((w,P)=>l.jsxs("div",{children:[w.type==="equipment"&&`${w.quantity}x Equipment (Level ${w.minLevel}-${w.maxLevel})`,w.type==="skillGem"&&`${w.quantity}x ${w.rarity} Skill Gem`,w.type==="supportGem"&&`${w.quantity}x ${w.rarity} Support Gem`,w.type==="experience"&&`${w.quantity} Experience`,w.guaranteed&&" (Guaranteed)"]},P))})]}),!h&&p.unlockRequirement&&l.jsxs("div",{className:"text-xs text-red-400 mb-2",children:[l.jsx("div",{className:"font-semibold",children:"Requirements:"}),p.unlockRequirement.playerLevel&&l.jsxs("div",{children:[" Level ",p.unlockRequirement.playerLevel," (Current: ",d,")"]}),p.unlockRequirement.completedMaps&&l.jsxs("div",{children:[" Complete: ",p.unlockRequirement.completedMaps.join(", ")]})]}),S&&h&&l.jsxs("button",{onClick:w=>{w.stopPropagation(),f(p)},className:"w-full mt-2 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded transition-colors",children:["Run Map (",Math.floor(p.completionTime/60),":",(p.completionTime%60).toString().padStart(2,"0"),")"]})]},p.id)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-900 border border-gray-600 rounded-lg p-6 max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Map Device"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:""})]}),l.jsxs("div",{className:"flex space-x-4 mb-4",children:[l.jsx("button",{onClick:()=>c("available"),className:`px-4 py-2 rounded ${i==="available"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Available Maps"}),l.jsxs("button",{onClick:()=>c("stash"),className:`px-4 py-2 rounded ${i==="stash"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["Map Stash (",((m=u.mapStash)==null?void 0:m.length)||0,")"]}),l.jsx("button",{onClick:()=>c("atlas"),className:`px-4 py-2 rounded ${i==="atlas"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Atlas Progress"})]}),i==="atlas"&&l.jsxs("div",{className:"mb-4 p-4 bg-gray-800 rounded-lg",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Atlas of Worlds"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400",children:"Current Tier:"}),l.jsxs("div",{className:"text-white font-semibold",children:["Tier ",u.atlasProgress.tier]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400",children:"Maps Completed:"}),l.jsxs("div",{className:"text-white font-semibold",children:[u.atlasProgress.completedCount," / ",u.atlasProgress.totalCount]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400",children:"Bonus Objectives:"}),l.jsx("div",{className:"text-white font-semibold",children:u.atlasProgress.bonusObjectives})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400",children:"Completion Rate:"}),l.jsxs("div",{className:"text-white font-semibold",children:[Math.floor(u.atlasProgress.completedCount/u.atlasProgress.totalCount*100),"%"]})]})]})]}),l.jsxs("div",{className:"overflow-y-auto max-h-[60vh]",children:[i==="available"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.availableMaps.map(p=>b(p))}),i==="stash"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:!u.mapStash||u.mapStash.length===0?l.jsx("div",{className:"col-span-full text-center text-gray-400 py-8",children:"No maps in stash. Maps can be found as drops from enemies or purchased from vendors."}):u.mapStash.map(p=>b(p))}),i==="atlas"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.availableMaps.map(p=>b(p,!1))})]}),u.currentMap&&l.jsxs("div",{className:"mt-4 p-4 bg-green-900/30 border border-green-600 rounded-lg",children:[l.jsx("div",{className:"text-green-400 font-semibold",children:"Currently Running:"}),l.jsxs("div",{className:"text-white",children:[u.currentMap.name," (Tier ",u.currentMap.tier,")"]})]})]})})}const ig=()=>{const e=C.useRef(null),{state:t,dispatch:n}=it(),[a,s]=C.useState([]),[r,i]=C.useState({id:"dummy-enemy",x:400,y:200,health:100,maxHealth:100,size:30}),c=800,u=400,d=100,f=200,v=()=>{const b={id:`fireball-${Date.now()}`,x:d,y:f,targetX:r.x,targetY:r.y,speed:300,damage:25,skill:"fireball",startTime:Date.now(),trail:[],rotation:0,particles:[]};console.log(" Creating fireball projectile:",b),s(m=>[...m,b])};return C.useEffect(()=>{const b=setInterval(()=>{const m=Date.now();s(p=>p.map(S=>{(m-S.startTime)/1e3;const g=S.targetX-S.x,x=S.targetY-S.y,h=Math.sqrt(g*g+x*x);if(h<10)return console.log(" Fireball explosion at target!"),null;const y=g/h*S.speed*(1/60),w=x/h*S.speed*(1/60),P=S.x+y,D=S.y+w,O=[{x:S.x,y:S.y,opacity:1},...S.trail.map(j=>({...j,opacity:j.opacity*.95}))].slice(0,10),M=[...S.particles.map(j=>({...j,x:j.x+j.vx,y:j.y+j.vy,life:j.life-1})).filter(j=>j.life>0),...Array.from({length:2},()=>({x:P+(Math.random()-.5)*10,y:D+(Math.random()-.5)*10,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,life:30,maxLife:30}))];return{...S,x:P,y:D,trail:O,rotation:S.rotation+5,particles:M}}).filter(Boolean))},16.666666666666668);return()=>clearInterval(b)},[r]),C.useEffect(()=>{const b=e.current;if(!b)return;const m=b.getContext("2d");if(!m)return;m.fillStyle="#1a1a2e",m.fillRect(0,0,c,u),m.fillStyle="#4CAF50",m.beginPath(),m.arc(d,f,15,0,Math.PI*2),m.fill(),m.fillStyle="#f44336",m.beginPath(),m.arc(r.x,r.y,r.size,0,Math.PI*2),m.fill();const p=60,S=8;m.fillStyle="#333",m.fillRect(r.x-p/2,r.y-r.size-15,p,S),m.fillStyle="#4CAF50";const g=r.health/r.maxHealth;m.fillRect(r.x-p/2,r.y-r.size-15,p*g,S),a.forEach(x=>{x.trail.forEach((y,w)=>{const P=y.opacity*(1-w/x.trail.length);m.fillStyle=`rgba(255, 100, 0, ${P})`,m.beginPath(),m.arc(y.x,y.y,3*P,0,Math.PI*2),m.fill()}),x.particles.forEach(y=>{const w=y.life/y.maxLife;m.fillStyle=`rgba(255, 150, 0, ${w})`,m.beginPath(),m.arc(y.x,y.y,2*w,0,Math.PI*2),m.fill()}),m.save(),m.translate(x.x,x.y),m.rotate(x.rotation*Math.PI/180);const h=m.createRadialGradient(0,0,0,0,0,15);h.addColorStop(0,"rgba(255, 100, 0, 0.8)"),h.addColorStop(.5,"rgba(255, 50, 0, 0.4)"),h.addColorStop(1,"rgba(255, 0, 0, 0)"),m.fillStyle=h,m.beginPath(),m.arc(0,0,15,0,Math.PI*2),m.fill(),m.fillStyle="#FFD700",m.beginPath(),m.arc(0,0,8,0,Math.PI*2),m.fill(),m.fillStyle="#FFF",m.beginPath(),m.arc(0,0,4,0,Math.PI*2),m.fill(),m.restore()}),m.fillStyle="#fff",m.font="16px Arial",m.fillText("Fireball Test Canvas",10,30),m.fillText(`Projectiles: ${a.length}`,10,50),m.fillText('Click "Cast Fireball" to test',10,70)},[a,r]),l.jsxs("div",{style:{padding:"20px",backgroundColor:"#0f0f23",color:"#fff"},children:[l.jsx("h2",{children:" Fireball Test Canvas"}),l.jsx("p",{children:"This is a dedicated testing environment for fireball effects."}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("button",{onClick:v,style:{padding:"10px 20px",backgroundColor:"#ff6b35",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",marginRight:"10px"},children:" Cast Fireball"}),l.jsx("button",{onClick:()=>s([]),style:{padding:"10px 20px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px"},children:"Clear Projectiles"})]}),l.jsx("canvas",{ref:e,width:c,height:u,style:{border:"2px solid #333",borderRadius:"8px",backgroundColor:"#1a1a2e"}}),l.jsxs("div",{style:{marginTop:"20px",fontSize:"14px",color:"#ccc"},children:[l.jsx("p",{children:l.jsx("strong",{children:"Legend:"})}),l.jsx("p",{children:" Green Circle = Player"}),l.jsx("p",{children:" Red Circle = Dummy Enemy"}),l.jsx("p",{children:" Fireball = Projectile with trail and particles"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Expected Effects:"})," Glowing projectile, particle trail, rotation, explosion on impact"]})]})]})},og=({isOpen:e,onClose:t,treeData:n,treeState:a,onAllocateNode:s,availablePoints:r})=>{const[i,c]=C.useState({zoom:1,offsetX:0,offsetY:0}),[u,d]=C.useState(!1),[f,v]=C.useState({x:0,y:0}),[b,m]=C.useState(null),p=C.useRef(null),S=C.useCallback(j=>{j.button===0&&(d(!0),v({x:j.clientX,y:j.clientY}),j.preventDefault())},[]),g=C.useCallback(j=>{if(u){const I=j.clientX-f.x,Q=j.clientY-f.y;c(K=>({...K,offsetX:K.offsetX+I,offsetY:K.offsetY+Q})),v({x:j.clientX,y:j.clientY})}},[u,f]),x=C.useCallback(()=>{d(!1)},[]),h=C.useCallback(j=>{j.preventDefault();const I=j.deltaY>0?.9:1.1,Q=Math.max(.3,Math.min(3,i.zoom*I));c(K=>({...K,zoom:Q}))},[i.zoom]),y=C.useCallback(j=>{Oa(j,n,a)&&s(j)},[n,a,s]),w=j=>{const I=(a.allocatedNodes[j.id]||0)>0,Q=Oa(j.id,n,a);if(I)switch(j.type){case"travel":return"#4ade80";case"small":return"#60a5fa";case"notable":return"#f59e0b";default:return"#6b7280"}else if(Q)switch(j.type){case"travel":return"#22c55e";case"small":return"#3b82f6";case"notable":return"#d97706";default:return"#4b5563"}else return"#374151"},P=j=>{switch(j.type){case"travel":return 8;case"small":return 12;case"notable":return 18;default:return 10}},D=()=>Object.values(n.nodes).map(j=>j.connections.map(I=>{const Q=n.nodes[I];if(!Q)return null;const K=(a.allocatedNodes[j.id]||0)>0,F=(a.allocatedNodes[I]||0)>0,G=K&&F?"#4ade80":"#6b7280";return l.jsx("line",{x1:j.position.x,y1:j.position.y,x2:Q.position.x,y2:Q.position.y,stroke:G,strokeWidth:"2",opacity:"0.6"},`${j.id}-${I}`)})).flat().filter(Boolean),O=()=>Object.values(n.nodes).map(j=>{const I=(a.allocatedNodes[j.id]||0)>0,Q=Oa(j.id,n,a),K=P(j);return l.jsxs("g",{children:[l.jsx("circle",{cx:j.position.x,cy:j.position.y,r:K,fill:w(j),stroke:b===j.id?"#ffffff":"#000000",strokeWidth:b===j.id?"3":"1",style:{cursor:Q?"pointer":"default",filter:I?"brightness(1.2)":"none"},onClick:()=>y(j.id),onMouseEnter:()=>m(j.id),onMouseLeave:()=>m(null)}),j.type==="notable"&&l.jsx("circle",{cx:j.position.x,cy:j.position.y,r:K-4,fill:"none",stroke:"#ffffff",strokeWidth:"2",opacity:"0.8",pointerEvents:"none"})]},j.id)}),M=()=>{if(!b)return null;const j=n.nodes[b];if(!j)return null;const I=(a.allocatedNodes[j.id]||0)>0,Q=Oa(j.id,n,a);return l.jsx("div",{className:"absolute top-4 left-4 bg-gray-900 border border-gray-600 rounded-lg p-4 max-w-xs z-50",children:l.jsxs("div",{className:"text-white",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"font-bold text-lg",children:j.name}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${j.type==="travel"?"bg-green-600":j.type==="small"?"bg-blue-600":"bg-amber-600"}`,children:j.type})]}),l.jsx("p",{className:"text-gray-300 mb-2",children:j.description}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"text-yellow-400",children:["Cost: ",j.cost," points"]}),I&&l.jsx("div",{className:"text-green-400",children:" Allocated"}),!I&&Q&&l.jsx("div",{className:"text-blue-400",children:"Available"}),!I&&!Q&&l.jsx("div",{className:"text-red-400",children:"Requirements not met"})]})]})})};return e?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg w-[90vw] h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-600",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Passive Skill Tree"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"text-white",children:["Available Points: ",r]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:""})]})]}),l.jsxs("div",{className:"flex-1 relative overflow-hidden bg-gray-900",children:[l.jsx("svg",{ref:p,className:"w-full h-full cursor-grab active:cursor-grabbing",onMouseDown:S,onMouseMove:g,onMouseUp:x,onMouseLeave:x,onWheel:h,style:{userSelect:"none"},children:l.jsxs("g",{transform:`translate(${i.offsetX+400}, ${i.offsetY+300}) scale(${i.zoom})`,children:[D(),O()]})}),M(),l.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2",children:[l.jsx("button",{onClick:()=>c(j=>({...j,zoom:Math.min(3,j.zoom*1.2)})),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded",children:"+"}),l.jsx("button",{onClick:()=>c(j=>({...j,zoom:Math.max(.3,j.zoom*.8)})),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded",children:"-"}),l.jsx("button",{onClick:()=>c({zoom:1,offsetX:0,offsetY:0}),className:"bg-gray-700 hover:bg-gray-600 text-white px-2 py-2 rounded text-sm",children:"Reset"})]})]}),l.jsx("div",{className:"p-4 border-t border-gray-600 bg-gray-800",children:l.jsxs("div",{className:"flex gap-6 text-sm text-white",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),l.jsx("span",{children:"Travel Node"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),l.jsx("span",{children:"Small Node"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-amber-500 border-2 border-white"}),l.jsx("span",{children:"Notable Node"})]}),l.jsx("div",{className:"text-gray-400 ml-4",children:"Left click and drag to pan  Mouse wheel to zoom  Click nodes to allocate"})]})})]})}):null},cg=({equipment:e,stones:t,className:n=""})=>{var d,f,v,b;console.log("EquipmentTooltip rendering:",e.name,"Stones:",t.length);const a=Ss(e,t),s=Ap(e,t),i=(((b=(v=(f=(d=e.sockets)==null?void 0:d.stones)==null?void 0:f.filter(m=>m!==null))==null?void 0:v.map(m=>t.find(p=>p.id===m)))==null?void 0:b.filter(m=>m!==void 0))||[]).filter((m,p,S)=>S.findIndex(g=>g.id===m.id)===p),c=m=>({Common:"#FFFFFF",Magic:"#8888FF",Rare:"#FFFF88",Epic:"#FF88FF",Legendary:"#FF8800",Mythic:"#FF0000"})[m]||"#FFFFFF",u=m=>({Common:"#9CA3AF",Rare:"#3B82F6",Mythical:"#8B5CF6",Divine:"#F59E0B"})[m]||"#FFFFFF";return l.jsxs("div",{className:`bg-gray-900 border-2 border-yellow-400 rounded-lg p-4 shadow-xl w-[900px] max-h-[90vh] overflow-y-auto ${n}`,style:{zIndex:9999},children:[l.jsxs("div",{className:"mb-3 text-center",children:[l.jsx("h3",{className:"font-bold text-lg mb-1",style:{color:c(e.rarity)},children:e.name}),l.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-400",children:[l.jsxs("span",{children:[e.category,"  Level ",e.level]}),l.jsxs("span",{children:[e.rarity," ",e.type]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-3",children:[Object.keys(e.baseStats).length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-blue-400 font-semibold text-xs mb-1",children:"Base Stats:"}),l.jsx("div",{className:"space-y-0.5 bg-blue-900/10 rounded p-2",children:Object.entries(e.baseStats).map(([m,p])=>typeof p=="number"&&p>0&&l.jsxs("div",{className:"text-white text-xs",children:["+",Kn(m,p)," ",Qn(m)]},m))})]}),e.affixes.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-green-400 font-semibold text-xs mb-1",children:"Affixes:"}),l.jsx("div",{className:"space-y-1 bg-green-900/10 rounded p-2",children:e.affixes.map((m,p)=>l.jsxs("div",{children:[l.jsx("div",{className:"text-green-300 text-xs font-medium",children:m.name}),l.jsxs("div",{className:"text-green-200 text-xs ml-2",children:["+",Kn(m.stat,m.value)," ",Qn(m.stat)]})]},p))})]}),e.sockets&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-yellow-400 font-semibold text-xs mb-1",children:"Sockets:"}),l.jsxs("div",{className:"bg-yellow-900/10 rounded p-2",children:[l.jsx("div",{className:"flex space-x-1 mb-1",children:e.sockets.stones.map((m,p)=>l.jsx("div",{className:`w-5 h-5 border-2 rounded ${m?"border-purple-400 bg-purple-900":"border-gray-500 bg-gray-800"}`,title:m?"Socketed":"Empty Socket",children:m&&l.jsx("div",{className:"w-full h-full bg-purple-500 rounded opacity-60"})},p))}),l.jsxs("p",{className:"text-gray-400 text-xs",children:[i.length,"/",e.sockets.stones.length," sockets used"]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[i.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-purple-400 font-semibold text-xs mb-1",children:"Socketed Stones:"}),l.jsx("div",{className:"space-y-2",children:i.map((m,p)=>l.jsxs("div",{className:"border-l-2 border-purple-500 pl-2 bg-gray-800/30 rounded-r p-1.5",children:[l.jsx("div",{className:"text-xs font-medium mb-0.5",style:{color:u(m.rarity)},children:m.name}),Object.entries(m.baseStats).map(([S,g])=>typeof g=="number"&&g>0&&l.jsxs("div",{className:"text-purple-200 text-xs ml-1",children:["+",Kn(S,g)," ",Qn(S)]},S)),m.affixes.map((S,g)=>l.jsxs("div",{children:[l.jsx("div",{className:"text-purple-300 text-xs ml-1",children:S.name}),l.jsxs("div",{className:"text-purple-200 text-xs ml-2",children:["+",Kn(S.stat,S.value)," ",Qn(S.stat)]})]},g))]},m.id))})]}),Object.keys(a).length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-purple-400 font-semibold text-xs mb-1",children:"Stone Bonus Total:"}),l.jsx("div",{className:"space-y-0.5 bg-purple-900/20 rounded p-2",children:Object.entries(a).map(([m,p])=>typeof p=="number"&&p>0&&l.jsxs("div",{className:"text-purple-300 text-xs",children:["+",Kn(m,p)," ",Qn(m)]},m))})]})]})]}),l.jsx("div",{className:"border-t border-gray-600 pt-3 mt-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-yellow-400 font-semibold text-xs mb-1",children:"Total Equipment Stats:"}),l.jsx("div",{className:"space-y-0.5 bg-yellow-900/20 rounded p-2 max-h-32 overflow-y-auto",children:Object.entries(s).map(([m,p])=>typeof p=="number"&&p>0&&l.jsxs("div",{className:"text-yellow-300 text-xs",children:["+",Kn(m,p)," ",Qn(m)]},m))})]}),l.jsx("div",{className:"flex flex-col justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Equipment Value"}),l.jsxs("p",{className:"text-yellow-400 text-sm font-bold",children:[e.value," gold"]})]})})]})})]})},ug={Common:"#9ca3af",Magic:"#06b6d4",Rare:"#8b5cf6",Unique:"#fbbf24",Legendary:"#ff6b6b",Mythic:"#ff1493",Divine:"#ffd700"};function Vs(e){return e&&ug[e]||"#9ca3af"}const dg=Wn.memo(({slot:e,equippedItem:t,onUnequip:n,stones:a})=>{const[s,r]=C.useState(!1),[i,c]=C.useState({x:0,y:0}),u=C.useCallback(v=>{t&&(v.preventDefault(),n(e.id))},[n,e.id,t]),d=C.useCallback(v=>{if(t){const b=window.innerWidth,m=window.innerHeight,p=900,S=Math.min(m*.9,700),g=(b-p)/2,x=(m-S)/2,h={x:g,y:x};console.log("Centered tooltip position:",h,"Equipment:",t.name,"Viewport:",{viewportWidth:b,viewportHeight:m}),c(h),r(!0)}},[t]),f=C.useCallback(()=>{r(!1)},[]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-800/60 to-gray-900/80 border-2 rounded-lg flex flex-col items-center justify-center hover:from-gray-700/60 hover:to-gray-800/80 transition-all duration-300 cursor-pointer relative group shadow-lg",style:{borderColor:t?Vs(t.rarity):"#6b7280",boxShadow:t?`0 0 12px ${Vs(t.rarity)}60, inset 0 0 8px ${Vs(t.rarity)}20`:"0 2px 8px rgba(0,0,0,0.3), inset 0 0 4px rgba(107, 114, 128, 0.1)"},onContextMenu:u,onMouseEnter:d,onMouseLeave:f,children:[l.jsx("div",{className:"text-xl mb-1",children:e.icon}),t?l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 border border-gray-800"}):l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-gray-600 border border-gray-800"}),(t==null?void 0:t.sockets)&&t.sockets.maxSockets>0&&l.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 flex gap-0.5",children:Array.from({length:Math.min(t.sockets.maxSockets,3)},(v,b)=>l.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.sockets.stones[b]?"bg-amber-400":"bg-gray-600"}`},b))}),l.jsxs("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-900/95 border border-amber-600/30 text-xs px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300 whitespace-nowrap z-20 shadow-xl",children:[l.jsx("div",{className:"text-amber-400 font-medium",children:e.name}),t?l.jsx("div",{className:"text-center font-bold",style:{color:Vs(t.rarity)},children:t.name}):l.jsx("div",{className:"text-gray-500 text-center",children:"Empty Slot"}),l.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900/95"})]})]}),s&&t&&l.jsx("div",{className:"fixed pointer-events-none",style:{left:i.x,top:i.y,zIndex:9999},children:l.jsx(cg,{equipment:t,stones:a})})]})}),mg=({isOpen:e,onClose:t})=>{const{state:n,dispatch:a}=it(),s=n.player,r=C.useMemo(()=>{const f={};return Ie.forEach(v=>{if(s.equipment&&s.equipment[v.id])f[v.id]=s.equipment[v.id];else if(s.equipped&&v.id==="weapon"){const b=s.equipped.type;(b==="melee"||b==="ranged")&&(f[v.id]=s.equipped)}}),f},[s.equipment,s.equipped]),i=C.useCallback(f=>f==="ring2"?null:r[f]||null,[r]),c=C.useMemo(()=>{var v;let f=0;return s.equipment&&(f+=Object.keys(s.equipment).length),s.equipped&&!((v=s.equipment)!=null&&v.weapon)&&(f+=1),f},[s.equipment,s.equipped]),u=C.useCallback(f=>{a({type:"UNEQUIP",payload:f})},[a]),d=C.useCallback(f=>{const v=i(f.id);return l.jsx(dg,{slot:f,equippedItem:v,onUnequip:u,stones:s.stones||[]},f.id)},[i,u,s.stones]);return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,children:l.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg shadow-2xl w-[95vw] h-[95vh] overflow-hidden flex flex-col",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-amber-600/50 bg-gray-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-amber-400",children:" CHARACTER EQUIPMENT"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors text-xl px-2 py-1 hover:bg-gray-700 rounded",children:""})]}),l.jsxs("div",{className:"flex-1 p-6 relative overflow-hidden bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900",children:[l.jsxs("div",{className:"absolute inset-0 opacity-5",children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 border border-amber-600/20 rounded-full"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-24 h-24 border border-amber-600/20 rounded-full"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 border border-amber-600/10 rounded-full"})]}),l.jsxs("div",{className:"grid grid-cols-5 grid-rows-4 gap-4 h-full max-w-4xl mx-auto relative z-10",children:[l.jsx("div",{className:"col-start-3 row-start-1 flex justify-center",children:d(Ie.find(f=>f.id==="helm")||Ie[2])}),l.jsx("div",{className:"col-start-1 row-start-2 flex justify-center",children:d(Ie.find(f=>f.id==="chest")||Ie[3])}),l.jsx("div",{className:"col-start-3 row-start-2 flex justify-center",children:d(Ie.find(f=>f.id==="amulet")||Ie[9])}),l.jsx("div",{className:"col-start-5 row-start-2 flex justify-center",children:d(Ie.find(f=>f.id==="legs")||Ie[5])}),l.jsx("div",{className:"col-start-1 row-start-3 flex justify-center",children:d(Ie.find(f=>f.id==="weapon")||Ie[0])}),l.jsx("div",{className:"col-start-2 col-span-3 row-start-3 flex items-center justify-center",children:l.jsxs("div",{className:"w-40 h-48 bg-gradient-to-b from-gray-800/60 via-gray-700/40 to-gray-900/60 border-2 border-amber-600/50 rounded-lg flex items-center justify-center relative overflow-hidden shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-900/10 via-transparent to-amber-800/10"}),l.jsx("div",{className:"text-7xl text-amber-400/60 relative z-10 drop-shadow-lg",children:""}),l.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-gray-900/80 rounded px-2 py-1 text-xs",children:l.jsxs("div",{className:"flex justify-between text-amber-400",children:[l.jsxs("span",{children:["Level ",s.level||1]}),l.jsxs("span",{children:["Power: ",Object.values(r).reduce((f,v)=>{if(!v)return f;let b=0;return v.power&&typeof v.power=="number"&&!isNaN(v.power)&&(b+=v.power),v.baseStats&&Object.values(v.baseStats).forEach(m=>{typeof m=="number"&&!isNaN(m)&&(b+=m)}),f+b},0).toFixed(0)]})]})}),l.jsx("div",{className:"absolute inset-0 border-2 border-amber-500/30 rounded-lg"}),l.jsx("div",{className:"absolute inset-1 border border-amber-400/20 rounded-md"}),l.jsx("div",{className:"absolute top-2 left-2 w-3 h-3 border-l-2 border-t-2 border-amber-500/60"}),l.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 border-r-2 border-t-2 border-amber-500/60"}),l.jsx("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-l-2 border-b-2 border-amber-500/60"}),l.jsx("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-r-2 border-b-2 border-amber-500/60"}),l.jsx("div",{className:"absolute inset-0 rounded-lg shadow-inner",style:{boxShadow:"inset 0 0 20px rgba(251, 191, 36, 0.1)"}})]})}),l.jsx("div",{className:"col-start-5 row-start-3 flex justify-center",children:d(Ie.find(f=>f.id==="offhand")||Ie[1])}),l.jsx("div",{className:"col-start-1 row-start-4 flex justify-center",children:d(Ie.find(f=>f.id==="gloves")||Ie[4])}),l.jsx("div",{className:"col-start-3 row-start-4 flex justify-center",children:d(Ie.find(f=>f.id==="belt")||Ie[7])}),l.jsx("div",{className:"col-start-5 row-start-4 flex justify-center",children:d(Ie.find(f=>f.id==="boots")||Ie[6])}),l.jsx("div",{className:"col-start-2 row-start-4 flex justify-center",children:d(Ie.find(f=>f.id==="ring")||Ie[8])}),l.jsx("div",{className:"col-start-4 row-start-4 flex justify-center",children:d({...Ie.find(f=>f.id==="ring")||Ie[8],id:"ring2",name:"Ring 2"})})]})]}),l.jsx("div",{className:"border-t border-amber-600/50 p-4 bg-gray-800/50",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Equipped: "}),l.jsxs("span",{className:"text-amber-400 font-medium",children:[c,"/",Ie.length]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Total Power: "}),l.jsxs("span",{className:"text-orange-400 font-bold",children:["+",Object.values(r).reduce((f,v)=>{if(!v)return f;let b=0;return v.power&&typeof v.power=="number"&&!isNaN(v.power)&&(b+=v.power),v.baseStats&&Object.values(v.baseStats).forEach(m=>{typeof m=="number"&&!isNaN(m)&&(b+=m)}),f+b},0).toFixed(0)]})]})]})})]})}):null},fg=({onClose:e})=>{const{state:t,actions:n}=it(),a=r=>{n.updateCharacterModel(r),e()},s=[{id:"human_male",name:"Human Male",class:"Human Class"},{id:"human_female",name:"Human Female",class:"Human Class"},{id:"knight_1",name:"Knight Warrior",class:"Knight Class"},{id:"knight_2",name:"Knight Guardian",class:"Knight Class"},{id:"knight_3",name:"Knight Paladin",class:"Knight Class"},{id:"knight_4",name:"Knight Champion",class:"Knight Class"}];return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Choose Your Character"}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl",children:""})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(r=>l.jsxs("div",{className:`
                relative bg-gray-700 rounded-lg p-4 cursor-pointer transition-all duration-200
                hover:bg-gray-600 hover:scale-105
                ${t.player.characterModel===r.id?"ring-2 ring-blue-500 bg-gray-600":""}
              `,onClick:()=>a(r.id),children:[l.jsx("div",{className:"aspect-square bg-gray-600 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"w-16 h-20 bg-gradient-to-b from-gray-400 to-gray-500 rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-gray-200 text-center",children:r.name.split(" ").map(i=>i[0]).join("")})})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-white font-semibold text-sm mb-1",children:r.name}),l.jsx("p",{className:"text-gray-400 text-xs",children:r.class})]}),t.player.characterModel===r.id&&l.jsx("div",{className:"absolute top-2 right-2",children:l.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs",children:""})})})]},r.id))}),l.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:l.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors",children:"Cancel"})})]})})},pg=C.memo(({stone:e,position:t,onClose:n,isPersistent:a})=>{const s=(c,u)=>["critChance","dodgeChance","attackSpeed","goldFind","magicFind","experienceBonus","lifeSteal","healthRegen","manaRegen"].includes(c)?`${(u*100).toFixed(1)}%`:u.toFixed(1),r=c=>({damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",critChance:"Critical Chance",dodgeChance:"Dodge Chance",attackSpeed:"Attack Speed",goldFind:"Gold Find",magicFind:"Magic Find",experienceBonus:"Experience Bonus",lifeSteal:"Life Steal",healthRegen:"Health Regen",manaRegen:"Mana Regen",luck:"Luck"})[c]||c,i=c=>({Common:"#9CA3AF",Rare:"#3B82F6",Mythical:"#8B5CF6",Divine:"#F59E0B"})[c]||"#FFFFFF";return l.jsxs("div",{className:"fixed z-50 bg-gray-900 border-2 border-gray-600 rounded-lg p-4 shadow-2xl max-w-sm",style:{left:Math.min(t.x,window.innerWidth-400),top:Math.min(t.y,window.innerHeight-300)},onMouseLeave:a?void 0:n,onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"font-bold text-lg flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",style:{color:i(e.rarity)},children:[l.jsx("span",{className:"text-2xl",children:Il(e.type)}),l.jsx("span",{children:e.name})]}),a&&l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded",title:"Close tooltip",children:""})]}),l.jsxs("div",{className:"text-gray-400 text-sm",children:[l.jsx("span",{className:"capitalize",children:e.type}),"  ",l.jsx("span",{children:e.rarity}),"  Level ",e.level]})]}),Object.keys(e.baseStats).length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-blue-400 font-semibold text-sm mb-2",children:"Base Stats:"}),l.jsx("div",{className:"space-y-1",children:Object.entries(e.baseStats).map(([c,u])=>typeof u=="number"&&u>0&&l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{className:"text-gray-300",children:[r(c),":"]}),l.jsxs("span",{className:"text-green-400 font-medium",children:["+",s(c,u)]})]},c))})]}),e.affixes&&e.affixes.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-purple-400 font-semibold text-sm mb-2",children:"Affixes:"}),l.jsx("div",{className:"space-y-2",children:e.affixes.map((c,u)=>l.jsxs("div",{className:"border-l-2 border-purple-500 pl-2",children:[l.jsx("div",{className:"text-purple-300 text-sm font-medium",children:c.name}),l.jsxs("div",{className:"text-green-400 text-sm",children:["+",s(c.stat,c.value)," ",r(c.stat)]})]},u))})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-amber-400 font-semibold text-sm mb-2",children:"Compatible Sockets:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:e.socketTypes.map(c=>l.jsx("span",{className:"bg-amber-900/30 text-amber-300 px-2 py-1 rounded text-xs",children:c},c))})]}),l.jsxs("div",{className:"text-yellow-400 text-sm font-medium",children:[" Value: ",e.value," gold"]})]})}),hg=C.memo(({stone:e,viewMode:t,onEmbed:n,onRemove:a,onHover:s,onLeave:r,onClick:i,isSelected:c})=>{const u=(f,v)=>["critChance","dodgeChance","attackSpeed","goldFind","magicFind","experienceBonus","lifeSteal","healthRegen","manaRegen"].includes(f)?`${(v*100).toFixed(1)}%`:v.toFixed(1),d=f=>({damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",critChance:"Critical Chance",dodgeChance:"Dodge Chance",attackSpeed:"Attack Speed",goldFind:"Gold Find",magicFind:"Magic Find",experienceBonus:"Experience Bonus",lifeSteal:"Life Steal",healthRegen:"Health Regen",manaRegen:"Mana Regen",luck:"Luck"})[f]||f;return t==="grid"?l.jsxs("div",{className:`bg-gray-800 border-2 rounded-lg p-3 cursor-pointer transition-all hover:bg-gray-700 ${c?"border-blue-500 bg-blue-900/30":"border-gray-600"}`,onMouseEnter:s?f=>s(f,e):void 0,onMouseLeave:r,onClick:i?f=>i(f,e):void 0,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:Os(e.rarity)},children:Il(e.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-bold text-sm truncate",style:{color:Os(e.rarity)},children:e.name}),l.jsxs("div",{className:"text-xs text-gray-400",children:["Level ",e.level,"  ",e.rarity]})]})]}),l.jsx("div",{className:"text-xs space-y-1 mb-2",children:Object.entries(e.baseStats).slice(0,2).map(([f,v])=>typeof v=="number"&&v>0&&l.jsxs("div",{className:"text-green-400",children:["+",u(f,v)," ",d(f)]},f))}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:f=>{f.stopPropagation(),n(e.id)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-xs py-1 px-2 rounded transition-colors",children:"Embed"}),l.jsx("button",{onClick:f=>{f.stopPropagation(),a(e.id)},className:"bg-red-600 hover:bg-red-700 text-white text-xs py-1 px-2 rounded transition-colors",children:""})]})]}):l.jsx("div",{className:`bg-gray-800 border-2 rounded-lg p-3 cursor-pointer transition-all hover:bg-gray-700 ${c?"border-blue-500 bg-blue-900/30":"border-gray-600"}`,onMouseEnter:s?f=>s(f,e):void 0,onMouseLeave:r,onClick:i?f=>i(f,e):void 0,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xl",style:{backgroundColor:Os(e.rarity)},children:Il(e.type)}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("div",{className:"font-bold",style:{color:Os(e.rarity)},children:e.name}),l.jsxs("div",{className:"text-xs text-gray-400",children:["Level ",e.level,"  ",e.rarity]})]}),l.jsxs("div",{className:"text-sm space-y-1",children:[Object.entries(e.baseStats).map(([f,v])=>typeof v=="number"&&v>0&&l.jsxs("span",{className:"text-green-400 mr-3",children:["+",u(f,v)," ",d(f)]},f)),e.affixes&&e.affixes.map((f,v)=>l.jsxs("span",{className:"text-purple-300 mr-3",children:[f.name,": +",u(f.stat,f.value)," ",d(f.stat)]},v))]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.socketTypes.map(f=>l.jsx("span",{className:"bg-amber-900/30 text-amber-300 px-2 py-1 rounded text-xs",children:f},f))})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"text-yellow-400 text-sm font-medium text-right",children:[" ",e.value]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:f=>{f.stopPropagation(),n(e.id)},className:"bg-blue-600 hover:bg-blue-700 text-white text-xs py-1 px-3 rounded transition-colors",children:"Embed"}),l.jsx("button",{onClick:f=>{f.stopPropagation(),a(e.id)},className:"bg-red-600 hover:bg-red-700 text-white text-xs py-1 px-2 rounded transition-colors",children:""})]})]})]})})}),gg=C.memo(function(){var T,U,J;const{state:t,actions:n,dispatch:a}=it(),[s,r]=C.useState(0),[i,c]=C.useState("list"),[u,d]=C.useState("all"),[f,v]=C.useState(null),[b,m]=C.useState(null),[p,S]=C.useState(null),g=10,x=10,h=C.useMemo(()=>{let $=[...t.player.stones||[]];const re=new Set;return $=$.filter(ie=>re.has(ie.id)?!1:(re.add(ie.id),!0)),u!=="all"&&($=$.filter(ie=>ie.type===u)),$.sort((ie,k)=>{const z=["Divine","Mythical","Rare","Common"],he=z.indexOf(ie.rarity)-z.indexOf(k.rarity);return he!==0?he:k.level-ie.level})},[t.player.stones,u]),y=C.useMemo(()=>{var re,ie;const $={all:((re=t.player.stones)==null?void 0:re.length)||0,ruby:0,sapphire:0,emerald:0,diamond:0,topaz:0,amethyst:0,onyx:0,opal:0,garnet:0,citrine:0,peridot:0,turquoise:0};return(ie=t.player.stones)==null||ie.forEach(k=>{$.hasOwnProperty(k.type)&&$[k.type]++}),$},[t.player.stones]),w=C.useMemo(()=>{const $=Math.min(x,Math.ceil(h.length/g)),re=x*g,ie=h.slice(0,re),k=s*g,z=ie.slice(k,k+g),he=h.length-re;return{totalPages:$,displayStones:ie,currentItems:z,excessItems:he}},[h,s,g,x]),P=C.useMemo(()=>(t.player.stones||[]).reduce(($,re)=>$+(re.value||0),0),[t.player.stones]),D=C.useCallback(()=>{const $=hm(t.player.level,!1);n.addStone($)},[t.player.level,n]),O=C.useCallback(($,re,ie)=>{const k=t.player.equipment[$];if(!(!k||!Vp(k)))try{const z=Op(k,re,ie);a({type:"UPDATE_EQUIPMENT",payload:{slot:$,equipment:z}}),v(null)}catch(z){console.error("Failed to embed stone:",z)}},[t.player.equipment,a]),M=C.useCallback(($,re)=>{const ie=t.player.equipment[$];if(!(!ie||!ie.sockets))try{const{equipment:k,removedStoneId:z}=Up(ie,re);a({type:"UPDATE_EQUIPMENT",payload:{slot:$,equipment:k}}),z&&console.log("Removed stone:",z)}catch(k){console.error("Failed to remove stone:",k)}},[a]),j=C.useCallback($=>{c($),r(0)},[]),I=C.useCallback($=>{d($),r(0)},[]),Q=C.useCallback($=>{v($)},[]),K=C.useCallback($=>{n.removeStone($)},[n]),F=C.useCallback(($,re)=>{if(!(p!=null&&p.isPersistent)){const ie=$.currentTarget.getBoundingClientRect(),k=400;S({stone:re,position:{x:ie.right+10>window.innerWidth-k?ie.left-k-10:ie.right+10,y:Math.max(10,ie.top)}})}},[p]),G=C.useCallback(()=>{p!=null&&p.isPersistent||S(null)},[p]),Z=C.useCallback(($,re)=>{const ie=$.currentTarget.getBoundingClientRect(),k=400;S({stone:re,position:{x:ie.right+10>window.innerWidth-k?ie.left-k-10:ie.right+10,y:Math.max(10,ie.top)},isPersistent:!0})},[]),ce=C.useCallback(()=>{S(null)},[]),ee=()=>Object.entries(t.player.equipment).map(([$,re])=>{var ie;return!re||!re.sockets||re.sockets.maxSockets===0?null:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4 border border-gray-600",children:[l.jsx("h3",{className:"text-white font-bold mb-2 capitalize",children:$}),l.jsx("p",{className:"text-gray-300 text-sm mb-3",children:re.name}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:((ie=re.sockets)==null?void 0:ie.maxSockets)||0},(k,z)=>{var Y;const H=((Y=re.sockets)==null?void 0:Y.stones[z])===null;return l.jsx("div",{className:`w-12 h-12 border-2 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${H?"border-gray-600 bg-gray-700 hover:border-gray-500":"border-amber-500 bg-amber-900 hover:border-amber-400"}`,onClick:()=>{H&&f?O($,f,z):H||M($,z)},children:H?l.jsx("span",{className:"text-gray-500 text-xs",children:"+"}):l.jsx("span",{className:"text-amber-300 text-lg",children:""})},z)})})]},$)}).filter(Boolean);return l.jsxs("div",{className:"flex flex-col h-full bg-gray-900 text-white",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-800/50 border-b border-gray-600",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:" Stone Management"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>j("list"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i==="list"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:" List View"}),l.jsx("button",{onClick:()=>j("grid"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i==="grid"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:" Grid View"}),l.jsx("button",{onClick:D,className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors text-white font-medium",children:" Generate Stone"})]})]}),l.jsx("div",{className:"p-3 bg-gray-800/50 border-b border-gray-600",children:l.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[l.jsxs("button",{onClick:()=>I("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u==="all"?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" All Stones ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",y.all,")"]})]}),Object.entries(xa).map(([$,re])=>l.jsxs("button",{onClick:()=>I($),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${u===$?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[Il($)," ",re.name," ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",y[$],")"]})]},$))]})}),l.jsx("div",{className:"p-4 bg-gray-700/50 border-b border-gray-600",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-yellow-400 text-lg font-bold",children:[" Gold: ",t.player.gold&&typeof t.player.gold=="number"&&!isNaN(t.player.gold)?t.player.gold.toFixed(2):"0.00"]}),l.jsxs("div",{className:"text-gray-300 text-sm",children:[u==="all"?"Total Stones":`${((T=xa[u])==null?void 0:T.name)||u}`,": ",h.length,u!=="all"&&l.jsxs("span",{className:"text-gray-400",children:[" / ",((U=t.player.stones)==null?void 0:U.length)||0," total"]})]}),l.jsxs("div",{className:"text-gray-300 text-sm",children:["Total Value: ",P.toFixed(2)," "]})]}),f&&l.jsx("div",{className:"text-blue-400 text-sm font-medium",children:"Selected stone - click on equipment socket to embed"})]})}),w.excessItems>0&&l.jsxs("div",{className:"mx-4 mt-4 p-3 bg-orange-900/30 border border-orange-600/40 rounded-lg text-orange-300 text-sm",children:[" ",w.excessItems," excess stones converted to gold automatically"]}),l.jsxs("div",{className:"flex-1 flex gap-4 p-4 overflow-hidden",children:[l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-200",children:["Stones (",h.length,")"]}),w.totalPages>1&&l.jsxs("div",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:["Page ",s+1," of ",w.totalPages]})]}),l.jsxs("div",{className:`flex-1 overflow-y-auto ${i==="grid"?"grid grid-cols-2 gap-3 p-3":"space-y-3 p-2"}`,children:[w.currentItems.length===0&&l.jsxs("div",{className:"text-gray-400 text-sm col-span-2 text-center py-8",children:[u==="all"?"No stones yet.":`No ${((J=xa[u])==null?void 0:J.name)||u} stones yet.`,l.jsx("br",{}),l.jsx("span",{className:"text-xs",children:'Click "Generate Stone" to create stones'})]}),w.currentItems.map($=>l.jsx(hg,{stone:$,viewMode:i,onEmbed:Q,onRemove:K,isSelected:f===$.id,onHover:F,onLeave:G,onClick:Z},$.id))]}),w.totalPages>1&&l.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-600 bg-gray-700/30 rounded-lg p-3",children:[l.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",onClick:()=>r($=>Math.max(0,$-1)),disabled:s===0,children:" Previous"}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-300",children:[l.jsxs("span",{className:"bg-gray-600 px-3 py-1 rounded-lg font-medium",children:["Page ",s+1," of ",w.totalPages]}),w.totalPages>=x&&l.jsxs("span",{className:"text-orange-400 text-xs bg-orange-900/30 px-2 py-1 rounded",children:["(Max ",x," pages)"]})]}),l.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",onClick:()=>r($=>Math.min(w.totalPages-1,$+1)),disabled:s===w.totalPages-1,children:"Next "})]})]}),l.jsxs("div",{className:"w-80 flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Equipment Sockets"}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[ee(),ee().length===0&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center border border-gray-600",children:[l.jsx("p",{className:"text-gray-400",children:"No equipment with sockets found"}),l.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Equip items with sockets to embed stones"})]})]}),l.jsxs("div",{className:"mt-4 bg-gray-800 rounded-lg p-4 border border-gray-600",children:[l.jsx("h4",{className:"text-lg font-bold mb-2",children:"How to Use:"}),l.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[l.jsx("li",{children:' Select a stone by clicking "Embed"'}),l.jsx("li",{children:" Click an empty socket (+) to embed the stone"}),l.jsx("li",{children:" Click a filled socket () to remove the stone"}),l.jsx("li",{children:" Stones provide stat bonuses when embedded"})]})]})]})]}),p&&l.jsx(pg,{stone:p.stone,position:p.position,onClose:ce,isPersistent:p.isPersistent})]})});function xg(){const{state:e,actions:t}=it(),[n,a]=C.useState(null),[s,r]=C.useState(!1),[i,c]=C.useState(!1),u=b=>{a(b)},d=()=>{a(null)},f=()=>{switch(n){case"combat":return l.jsx(Yh,{});case"character":return l.jsx(qc,{});case"skills":return l.jsx(qh,{});case"passiveTree":return l.jsx(og,{isOpen:!0,onClose:d,treeData:e.player.passiveTreeData,treeState:e.player.passiveTreeState,onAllocateNode:t.allocatePassiveNode,availablePoints:e.player.passiveTreeState.availablePoints});case"equipment":return l.jsx(mg,{isOpen:!0,onClose:d});case"characterSelection":return l.jsx(fg,{onClose:d});case"stones":return l.jsx(gg,{});case"log":return l.jsx(Oc,{});case"maps":return l.jsx(rg,{isOpen:!0,onClose:d});case"fireball-test":return l.jsx(ig,{});default:return null}},v=()=>{switch(n){case"combat":return"Combat";case"character":return"Character Status";case"skills":return"Passive Tree Bonuses";case"passiveTree":return"Passive Skill Tree";case"equipment":return"Character Equipment";case"characterSelection":return"Character Selection";case"stones":return"Stone Management";case"log":return"Combat Log";case"maps":return"Map Device";case"fireball-test":return"Fireball Test Canvas";default:return""}};return l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(_h,{onOpenModal:u}),l.jsxs("main",{className:"flex-1 flex",children:[l.jsx("div",{className:"w-80 min-w-80 bg-gray-900/95 border-r border-gray-600 flex flex-col",children:l.jsx(qc,{})}),l.jsxs("div",{className:"flex-1 flex flex-col p-2",children:[l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx(Lh,{})}),l.jsx("div",{className:"mt-2",children:l.jsx(Jh,{})}),l.jsx("div",{className:"h-64 mt-2",children:l.jsx(Oc,{})})]}),l.jsx("div",{className:"w-80 min-w-80 bg-gray-900/95 border-l border-gray-600 flex flex-col",children:l.jsx(Bh,{})})]}),l.jsx(Xh,{isOpen:n!==null,onClose:d,title:v(),children:f()}),l.jsx("button",{onClick:()=>u("equipment"),className:"fixed bottom-48 right-4 px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",style:{background:"linear-gradient(135deg, #8b5cf6, #a855f7)",color:"white",border:"none"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 8px 25px rgba(139, 92, 246, 0.4)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 4px 14px rgba(139, 92, 246, 0.3)"},children:" Equipment"}),!i&&l.jsx("button",{onClick:()=>c(!0),className:"fixed bottom-32 right-4 px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",style:{background:"linear-gradient(135deg, var(--accent-tertiary), #22c55e)",color:"white",border:"none"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 8px 25px rgba(52, 211, 153, 0.4)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 4px 14px rgba(52, 211, 153, 0.3)"},children:" Inventory"}),!s&&l.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-16 right-4 px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",style:{background:"linear-gradient(135deg, var(--accent-primary), var(--accent-secondary))",color:"white",border:"none"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 8px 25px rgba(96, 165, 250, 0.4)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 4px 14px rgba(96, 165, 250, 0.3)"},children:" Skills"}),l.jsx("button",{onClick:()=>u("fireball-test"),className:"fixed bottom-8 right-4 bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",children:" Fireball Test"}),i&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>c(!1),children:l.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg shadow-2xl w-[90vw] h-[90vh] overflow-hidden flex flex-col",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-600",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:" Inventory"}),l.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white transition-colors text-xl px-2 py-1 hover:bg-gray-700 rounded",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto",children:l.jsx(Hh,{})})]})}),s&&l.jsx(Zh,{isOpen:!0,onClose:()=>r(!1)}),l.jsx(lg,{})]})}nm(document.getElementById("root")).render(l.jsx(Wn.StrictMode,{children:l.jsx(Ph,{children:l.jsx(xg,{})})}));
