var S0=Object.defineProperty;var k0=(e,t,n)=>t in e?S0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fs=(e,t,n)=>k0(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function j0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bd={exports:{}},ar={},wd={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Es=Symbol.for("react.element"),N0=Symbol.for("react.portal"),C0=Symbol.for("react.fragment"),M0=Symbol.for("react.strict_mode"),_0=Symbol.for("react.profiler"),P0=Symbol.for("react.provider"),E0=Symbol.for("react.context"),R0=Symbol.for("react.forward_ref"),T0=Symbol.for("react.suspense"),L0=Symbol.for("react.memo"),D0=Symbol.for("react.lazy"),Jo=Symbol.iterator;function I0(e){return e===null||typeof e!="object"?null:(e=Jo&&e[Jo]||e["@@iterator"],typeof e=="function"?e:null)}var Sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kd=Object.assign,jd={};function Fa(e,t,n){this.props=e,this.context=t,this.refs=jd,this.updater=n||Sd}Fa.prototype.isReactComponent={};Fa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Nd(){}Nd.prototype=Fa.prototype;function eo(e,t,n){this.props=e,this.context=t,this.refs=jd,this.updater=n||Sd}var to=eo.prototype=new Nd;to.constructor=eo;kd(to,Fa.prototype);to.isPureReactComponent=!0;var ec=Array.isArray,Cd=Object.prototype.hasOwnProperty,no={current:null},Md={key:!0,ref:!0,__self:!0,__source:!0};function _d(e,t,n){var a,s={},r=null,i=null;if(t!=null)for(a in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(r=""+t.key),t)Cd.call(t,a)&&!Md.hasOwnProperty(a)&&(s[a]=t[a]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];s.children=d}if(e&&e.defaultProps)for(a in c=e.defaultProps,c)s[a]===void 0&&(s[a]=c[a]);return{$$typeof:Es,type:e,key:r,ref:i,props:s,_owner:no.current}}function $0(e,t){return{$$typeof:Es,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ao(e){return typeof e=="object"&&e!==null&&e.$$typeof===Es}function A0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tc=/\/+/g;function Cr(e,t){return typeof e=="object"&&e!==null&&e.key!=null?A0(""+e.key):t.toString(36)}function dl(e,t,n,a,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(r){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Es:case N0:i=!0}}if(i)return i=e,s=s(i),e=a===""?"."+Cr(i,0):a,ec(s)?(n="",e!=null&&(n=e.replace(tc,"$&/")+"/"),dl(s,t,n,"",function(u){return u})):s!=null&&(ao(s)&&(s=$0(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(tc,"$&/")+"/")+e)),t.push(s)),1;if(i=0,a=a===""?".":a+":",ec(e))for(var c=0;c<e.length;c++){r=e[c];var d=a+Cr(r,c);i+=dl(r,t,n,d,s)}else if(d=I0(e),typeof d=="function")for(e=d.call(e),c=0;!(r=e.next()).done;)r=r.value,d=a+Cr(r,c++),i+=dl(r,t,n,d,s);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function qs(e,t,n){if(e==null)return e;var a=[],s=0;return dl(e,a,"","",function(r){return t.call(n,r,s++)}),a}function z0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},ul={transition:null},F0={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:ul,ReactCurrentOwner:no};function Pd(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:qs,forEach:function(e,t,n){qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qs(e,function(){t++}),t},toArray:function(e){return qs(e,function(t){return t})||[]},only:function(e){if(!ao(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=Fa;Ce.Fragment=C0;Ce.Profiler=_0;Ce.PureComponent=eo;Ce.StrictMode=M0;Ce.Suspense=T0;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F0;Ce.act=Pd;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=kd({},e.props),s=e.key,r=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,i=no.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Cd.call(t,d)&&!Md.hasOwnProperty(d)&&(a[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)a.children=n;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];a.children=c}return{$$typeof:Es,type:e.type,key:s,ref:r,props:a,_owner:i}};Ce.createContext=function(e){return e={$$typeof:E0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:P0,_context:e},e.Consumer=e};Ce.createElement=_d;Ce.createFactory=function(e){var t=_d.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:R0,render:e}};Ce.isValidElement=ao;Ce.lazy=function(e){return{$$typeof:D0,_payload:{_status:-1,_result:e},_init:z0}};Ce.memo=function(e,t){return{$$typeof:L0,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=ul.transition;ul.transition={};try{e()}finally{ul.transition=t}};Ce.unstable_act=Pd;Ce.useCallback=function(e,t){return vt.current.useCallback(e,t)};Ce.useContext=function(e){return vt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return vt.current.useEffect(e,t)};Ce.useId=function(){return vt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return vt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return vt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return vt.current.useReducer(e,t,n)};Ce.useRef=function(e){return vt.current.useRef(e)};Ce.useState=function(e){return vt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return vt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return vt.current.useTransition()};Ce.version="18.3.1";wd.exports=Ce;var j=wd.exports;const pn=j0(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0=j,B0=Symbol.for("react.element"),O0=Symbol.for("react.fragment"),U0=Object.prototype.hasOwnProperty,G0=q0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V0={key:!0,ref:!0,__self:!0,__source:!0};function Ed(e,t,n){var a,s={},r=null,i=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(i=t.ref);for(a in t)U0.call(t,a)&&!V0.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:B0,type:e,key:r,ref:i,props:s,_owner:G0.current}}ar.Fragment=O0;ar.jsx=Ed;ar.jsxs=Ed;bd.exports=ar;var l=bd.exports,Rd={exports:{}},$t={},Td={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,Q){var X=A.length;A.push(Q);e:for(;0<X;){var L=X-1>>>1,G=A[L];if(0<s(G,Q))A[L]=Q,A[X]=G,X=L;else break e}}function n(A){return A.length===0?null:A[0]}function a(A){if(A.length===0)return null;var Q=A[0],X=A.pop();if(X!==Q){A[0]=X;e:for(var L=0,G=A.length,le=G>>>1;L<le;){var k=2*(L+1)-1,I=A[k],ce=k+1,ze=A[ce];if(0>s(I,X))ce<G&&0>s(ze,I)?(A[L]=ze,A[ce]=X,L=ce):(A[L]=I,A[k]=X,L=k);else if(ce<G&&0>s(ze,X))A[L]=ze,A[ce]=X,L=ce;else break e}}return Q}function s(A,Q){var X=A.sortIndex-Q.sortIndex;return X!==0?X:A.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var d=[],u=[],f=1,v=null,x=3,h=!1,w=!1,N=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(A){for(var Q=n(u);Q!==null;){if(Q.callback===null)a(u);else if(Q.startTime<=A)a(u),Q.sortIndex=Q.expirationTime,t(d,Q);else break;Q=n(u)}}function g(A){if(N=!1,p(A),!w)if(n(d)!==null)w=!0,xe(S);else{var Q=n(u);Q!==null&&oe(g,Q.startTime-A)}}function S(A,Q){w=!1,N&&(N=!1,b(C),C=-1),h=!0;var X=x;try{for(p(Q),v=n(d);v!==null&&(!(v.expirationTime>Q)||A&&!E());){var L=v.callback;if(typeof L=="function"){v.callback=null,x=v.priorityLevel;var G=L(v.expirationTime<=Q);Q=e.unstable_now(),typeof G=="function"?v.callback=G:v===n(d)&&a(d),p(Q)}else a(d);v=n(d)}if(v!==null)var le=!0;else{var k=n(u);k!==null&&oe(g,k.startTime-Q),le=!1}return le}finally{v=null,x=X,h=!1}}var P=!1,T=null,C=-1,_=5,D=-1;function E(){return!(e.unstable_now()-D<_)}function ie(){if(T!==null){var A=e.unstable_now();D=A;var Q=!0;try{Q=T(!0,A)}finally{Q?q():(P=!1,T=null)}}else P=!1}var q;if(typeof m=="function")q=function(){m(ie)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,me=V.port2;V.port1.onmessage=ie,q=function(){me.postMessage(null)}}else q=function(){y(ie,0)};function xe(A){T=A,P||(P=!0,q())}function oe(A,Q){C=y(function(){A(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){w||h||(w=!0,xe(S))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(A){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var X=x;x=Q;try{return A()}finally{x=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,Q){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var X=x;x=A;try{return Q()}finally{x=X}},e.unstable_scheduleCallback=function(A,Q,X){var L=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?L+X:L):X=L,A){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=X+G,A={id:f++,callback:Q,priorityLevel:A,startTime:X,expirationTime:G,sortIndex:-1},X>L?(A.sortIndex=X,t(u,A),n(d)===null&&A===n(u)&&(N?(b(C),C=-1):N=!0,oe(g,X-L))):(A.sortIndex=G,t(d,A),w||h||(w=!0,xe(S))),A},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(A){var Q=x;return function(){var X=x;x=Q;try{return A.apply(this,arguments)}finally{x=X}}}})(Ld);Td.exports=Ld;var W0=Td.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0=j,It=W0;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dd=new Set,us={};function ra(e,t){Ta(e,t),Ta(e+"Capture",t)}function Ta(e,t){for(us[e]=t,e=0;e<t.length;e++)Dd.add(t[e])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ai=Object.prototype.hasOwnProperty,Y0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nc={},ac={};function K0(e){return ai.call(ac,e)?!0:ai.call(nc,e)?!1:Y0.test(e)?ac[e]=!0:(nc[e]=!0,!1)}function X0(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q0(e,t,n,a){if(t===null||typeof t>"u"||X0(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,n,a,s,r,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dt[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dt[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dt[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var so=/[\-:]([a-z])/g;function lo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(so,lo);dt[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(so,lo);dt[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(so,lo);dt[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dt[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});dt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dt[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ro(e,t,n,a){var s=dt.hasOwnProperty(t)?dt[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q0(t,n,s,a)&&(n=null),a||s===null?K0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,a=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var hn=H0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bs=Symbol.for("react.element"),pa=Symbol.for("react.portal"),ha=Symbol.for("react.fragment"),io=Symbol.for("react.strict_mode"),si=Symbol.for("react.profiler"),Id=Symbol.for("react.provider"),$d=Symbol.for("react.context"),oo=Symbol.for("react.forward_ref"),li=Symbol.for("react.suspense"),ri=Symbol.for("react.suspense_list"),co=Symbol.for("react.memo"),yn=Symbol.for("react.lazy"),Ad=Symbol.for("react.offscreen"),sc=Symbol.iterator;function Oa(e){return e===null||typeof e!="object"?null:(e=sc&&e[sc]||e["@@iterator"],typeof e=="function"?e:null)}var He=Object.assign,Mr;function Qa(e){if(Mr===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mr=t&&t[1]||""}return`
`+Mr+e}var _r=!1;function Pr(e,t){if(!e||_r)return"";_r=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var a=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){a=u}e.call(t.prototype)}else{try{throw Error()}catch(u){a=u}e()}}catch(u){if(u&&a&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=a.stack.split(`
`),i=s.length-1,c=r.length-1;1<=i&&0<=c&&s[i]!==r[c];)c--;for(;1<=i&&0<=c;i--,c--)if(s[i]!==r[c]){if(i!==1||c!==1)do if(i--,c--,0>c||s[i]!==r[c]){var d=`
`+s[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=c);break}}}finally{_r=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Qa(e):""}function Z0(e){switch(e.tag){case 5:return Qa(e.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 2:case 15:return e=Pr(e.type,!1),e;case 11:return e=Pr(e.type.render,!1),e;case 1:return e=Pr(e.type,!0),e;default:return""}}function ii(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ha:return"Fragment";case pa:return"Portal";case si:return"Profiler";case io:return"StrictMode";case li:return"Suspense";case ri:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $d:return(e.displayName||"Context")+".Consumer";case Id:return(e._context.displayName||"Context")+".Provider";case oo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case co:return t=e.displayName||null,t!==null?t:ii(e.type)||"Memo";case yn:t=e._payload,e=e._init;try{return ii(e(t))}catch{}}return null}function J0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ii(t);case 8:return t===io?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ef(e){var t=zd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){a=""+i,r.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Os(e){e._valueTracker||(e._valueTracker=ef(e))}function Fd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=zd(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Nl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function oi(e,t){var n=t.checked;return He({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function lc(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=Dn(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qd(e,t){t=t.checked,t!=null&&ro(e,"checked",t,!1)}function ci(e,t){qd(e,t);var n=Dn(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?di(e,t.type,n):t.hasOwnProperty("defaultValue")&&di(e,t.type,Dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function di(e,t,n){(t!=="number"||Nl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Za=Array.isArray;function Ca(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Dn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ui(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return He({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ic(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(H(92));if(Za(n)){if(1<n.length)throw Error(H(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Dn(n)}}function Bd(e,t){var n=Dn(t.value),a=Dn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function oc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Od(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Od(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Us,Ud=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Us=Us||document.createElement("div"),Us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ms(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tf=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(e){tf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ts[t]=ts[e]})});function Gd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ts.hasOwnProperty(e)&&ts[e]?(""+t).trim():t+"px"}function Vd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,s=Gd(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,s):e[n]=s}}var nf=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fi(e,t){if(t){if(nf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function pi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=null;function uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gi=null,Ma=null,_a=null;function cc(e){if(e=Ls(e)){if(typeof gi!="function")throw Error(H(280));var t=e.stateNode;t&&(t=or(t),gi(e.stateNode,e.type,t))}}function Wd(e){Ma?_a?_a.push(e):_a=[e]:Ma=e}function Hd(){if(Ma){var e=Ma,t=_a;if(_a=Ma=null,cc(e),t)for(e=0;e<t.length;e++)cc(t[e])}}function Yd(e,t){return e(t)}function Kd(){}var Er=!1;function Xd(e,t,n){if(Er)return e(t,n);Er=!0;try{return Yd(e,t,n)}finally{Er=!1,(Ma!==null||_a!==null)&&(Kd(),Hd())}}function fs(e,t){var n=e.stateNode;if(n===null)return null;var a=or(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(H(231,t,typeof n));return n}var xi=!1;if(dn)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){xi=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{xi=!1}function af(e,t,n,a,s,r,i,c,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var ns=!1,Cl=null,Ml=!1,yi=null,sf={onError:function(e){ns=!0,Cl=e}};function lf(e,t,n,a,s,r,i,c,d){ns=!1,Cl=null,af.apply(sf,arguments)}function rf(e,t,n,a,s,r,i,c,d){if(lf.apply(this,arguments),ns){if(ns){var u=Cl;ns=!1,Cl=null}else throw Error(H(198));Ml||(Ml=!0,yi=u)}}function ia(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Qd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function dc(e){if(ia(e)!==e)throw Error(H(188))}function of(e){var t=e.alternate;if(!t){if(t=ia(e),t===null)throw Error(H(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(a=s.return,a!==null){n=a;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return dc(s),e;if(r===a)return dc(s),t;r=r.sibling}throw Error(H(188))}if(n.return!==a.return)n=s,a=r;else{for(var i=!1,c=s.child;c;){if(c===n){i=!0,n=s,a=r;break}if(c===a){i=!0,a=s,n=r;break}c=c.sibling}if(!i){for(c=r.child;c;){if(c===n){i=!0,n=r,a=s;break}if(c===a){i=!0,a=r,n=s;break}c=c.sibling}if(!i)throw Error(H(189))}}if(n.alternate!==a)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?e:t}function Zd(e){return e=of(e),e!==null?Jd(e):null}function Jd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jd(e);if(t!==null)return t;e=e.sibling}return null}var eu=It.unstable_scheduleCallback,uc=It.unstable_cancelCallback,cf=It.unstable_shouldYield,df=It.unstable_requestPaint,Xe=It.unstable_now,uf=It.unstable_getCurrentPriorityLevel,mo=It.unstable_ImmediatePriority,tu=It.unstable_UserBlockingPriority,_l=It.unstable_NormalPriority,mf=It.unstable_LowPriority,nu=It.unstable_IdlePriority,sr=null,nn=null;function ff(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(sr,e,void 0,(e.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:gf,pf=Math.log,hf=Math.LN2;function gf(e){return e>>>=0,e===0?32:31-(pf(e)/hf|0)|0}var Gs=64,Vs=4194304;function Ja(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pl(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,s=e.suspendedLanes,r=e.pingedLanes,i=n&268435455;if(i!==0){var c=i&~s;c!==0?a=Ja(c):(r&=i,r!==0&&(a=Ja(r)))}else i=n&~s,i!==0?a=Ja(i):r!==0&&(a=Ja(r));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-Yt(t),s=1<<n,a|=e[n],t&=~s;return a}function xf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yf(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-Yt(r),c=1<<i,d=s[i];d===-1?(!(c&n)||c&a)&&(s[i]=xf(c,t)):d<=t&&(e.expiredLanes|=c),r&=~c}}function vi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function au(){var e=Gs;return Gs<<=1,!(Gs&4194240)&&(Gs=64),e}function Rr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yt(t),e[t]=n}function vf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Yt(n),r=1<<s;t[s]=0,a[s]=-1,e[s]=-1,n&=~r}}function fo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Yt(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}var Ie=0;function su(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lu,po,ru,iu,ou,bi=!1,Ws=[],Cn=null,Mn=null,_n=null,ps=new Map,hs=new Map,wn=[],bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mc(e,t){switch(e){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(t.pointerId)}}function Ga(e,t,n,a,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Ls(t),t!==null&&po(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function wf(e,t,n,a,s){switch(t){case"focusin":return Cn=Ga(Cn,e,t,n,a,s),!0;case"dragenter":return Mn=Ga(Mn,e,t,n,a,s),!0;case"mouseover":return _n=Ga(_n,e,t,n,a,s),!0;case"pointerover":var r=s.pointerId;return ps.set(r,Ga(ps.get(r)||null,e,t,n,a,s)),!0;case"gotpointercapture":return r=s.pointerId,hs.set(r,Ga(hs.get(r)||null,e,t,n,a,s)),!0}return!1}function cu(e){var t=Wn(e.target);if(t!==null){var n=ia(t);if(n!==null){if(t=n.tag,t===13){if(t=Qd(n),t!==null){e.blockedOn=t,ou(e.priority,function(){ru(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ml(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);hi=a,n.target.dispatchEvent(a),hi=null}else return t=Ls(n),t!==null&&po(t),e.blockedOn=n,!1;t.shift()}return!0}function fc(e,t,n){ml(e)&&n.delete(t)}function Sf(){bi=!1,Cn!==null&&ml(Cn)&&(Cn=null),Mn!==null&&ml(Mn)&&(Mn=null),_n!==null&&ml(_n)&&(_n=null),ps.forEach(fc),hs.forEach(fc)}function Va(e,t){e.blockedOn===t&&(e.blockedOn=null,bi||(bi=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,Sf)))}function gs(e){function t(s){return Va(s,e)}if(0<Ws.length){Va(Ws[0],e);for(var n=1;n<Ws.length;n++){var a=Ws[n];a.blockedOn===e&&(a.blockedOn=null)}}for(Cn!==null&&Va(Cn,e),Mn!==null&&Va(Mn,e),_n!==null&&Va(_n,e),ps.forEach(t),hs.forEach(t),n=0;n<wn.length;n++)a=wn[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<wn.length&&(n=wn[0],n.blockedOn===null);)cu(n),n.blockedOn===null&&wn.shift()}var Pa=hn.ReactCurrentBatchConfig,El=!0;function kf(e,t,n,a){var s=Ie,r=Pa.transition;Pa.transition=null;try{Ie=1,ho(e,t,n,a)}finally{Ie=s,Pa.transition=r}}function jf(e,t,n,a){var s=Ie,r=Pa.transition;Pa.transition=null;try{Ie=4,ho(e,t,n,a)}finally{Ie=s,Pa.transition=r}}function ho(e,t,n,a){if(El){var s=wi(e,t,n,a);if(s===null)Br(e,t,a,Rl,n),mc(e,a);else if(wf(s,e,t,n,a))a.stopPropagation();else if(mc(e,a),t&4&&-1<bf.indexOf(e)){for(;s!==null;){var r=Ls(s);if(r!==null&&lu(r),r=wi(e,t,n,a),r===null&&Br(e,t,a,Rl,n),r===s)break;s=r}s!==null&&a.stopPropagation()}else Br(e,t,a,null,n)}}var Rl=null;function wi(e,t,n,a){if(Rl=null,e=uo(a),e=Wn(e),e!==null)if(t=ia(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Qd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Rl=e,null}function du(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uf()){case mo:return 1;case tu:return 4;case _l:case mf:return 16;case nu:return 536870912;default:return 16}default:return 16}}var kn=null,go=null,fl=null;function uu(){if(fl)return fl;var e,t=go,n=t.length,a,s="value"in kn?kn.value:kn.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(a=1;a<=i&&t[n-a]===s[r-a];a++);return fl=s.slice(e,1<a?1-a:void 0)}function pl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hs(){return!0}function pc(){return!1}function At(e){function t(n,a,s,r,i){this._reactName=n,this._targetInst=s,this.type=a,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(r):r[c]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Hs:pc,this.isPropagationStopped=pc,this}return He(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),t}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=At(qa),Ts=He({},qa,{view:0,detail:0}),Nf=At(Ts),Tr,Lr,Wa,lr=He({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wa&&(Wa&&e.type==="mousemove"?(Tr=e.screenX-Wa.screenX,Lr=e.screenY-Wa.screenY):Lr=Tr=0,Wa=e),Tr)},movementY:function(e){return"movementY"in e?e.movementY:Lr}}),hc=At(lr),Cf=He({},lr,{dataTransfer:0}),Mf=At(Cf),_f=He({},Ts,{relatedTarget:0}),Dr=At(_f),Pf=He({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Ef=At(Pf),Rf=He({},qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tf=At(Rf),Lf=He({},qa,{data:0}),gc=At(Lf),Df={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},If={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$f={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Af(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$f[e])?!!t[e]:!1}function yo(){return Af}var zf=He({},Ts,{key:function(e){if(e.key){var t=Df[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?If[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(e){return e.type==="keypress"?pl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ff=At(zf),qf=He({},lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=At(qf),Bf=He({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Of=At(Bf),Uf=He({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gf=At(Uf),Vf=He({},lr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wf=At(Vf),Hf=[9,13,27,32],vo=dn&&"CompositionEvent"in window,as=null;dn&&"documentMode"in document&&(as=document.documentMode);var Yf=dn&&"TextEvent"in window&&!as,mu=dn&&(!vo||as&&8<as&&11>=as),yc=" ",vc=!1;function fu(e,t){switch(e){case"keyup":return Hf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ga=!1;function Kf(e,t){switch(e){case"compositionend":return pu(t);case"keypress":return t.which!==32?null:(vc=!0,yc);case"textInput":return e=t.data,e===yc&&vc?null:e;default:return null}}function Xf(e,t){if(ga)return e==="compositionend"||!vo&&fu(e,t)?(e=uu(),fl=go=kn=null,ga=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mu&&t.locale!=="ko"?null:t.data;default:return null}}var Qf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qf[e.type]:t==="textarea"}function hu(e,t,n,a){Wd(a),t=Tl(t,"onChange"),0<t.length&&(n=new xo("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var ss=null,xs=null;function Zf(e){Cu(e,0)}function rr(e){var t=va(e);if(Fd(t))return e}function Jf(e,t){if(e==="change")return t}var gu=!1;if(dn){var Ir;if(dn){var $r="oninput"in document;if(!$r){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),$r=typeof wc.oninput=="function"}Ir=$r}else Ir=!1;gu=Ir&&(!document.documentMode||9<document.documentMode)}function Sc(){ss&&(ss.detachEvent("onpropertychange",xu),xs=ss=null)}function xu(e){if(e.propertyName==="value"&&rr(xs)){var t=[];hu(t,xs,e,uo(e)),Xd(Zf,t)}}function ep(e,t,n){e==="focusin"?(Sc(),ss=t,xs=n,ss.attachEvent("onpropertychange",xu)):e==="focusout"&&Sc()}function tp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rr(xs)}function np(e,t){if(e==="click")return rr(t)}function ap(e,t){if(e==="input"||e==="change")return rr(t)}function sp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:sp;function ys(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!ai.call(t,s)||!Xt(e[s],t[s]))return!1}return!0}function kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jc(e,t){var n=kc(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kc(n)}}function yu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vu(){for(var e=window,t=Nl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Nl(e.document)}return t}function bo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lp(e){var t=vu(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yu(n.ownerDocument.documentElement,n)){if(a!==null&&bo(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(a.start,s);a=a.end===void 0?r:Math.min(a.end,s),!e.extend&&r>a&&(s=a,a=r,r=s),s=jc(n,r);var i=jc(n,a);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rp=dn&&"documentMode"in document&&11>=document.documentMode,xa=null,Si=null,ls=null,ki=!1;function Nc(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ki||xa==null||xa!==Nl(a)||(a=xa,"selectionStart"in a&&bo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ls&&ys(ls,a)||(ls=a,a=Tl(Si,"onSelect"),0<a.length&&(t=new xo("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=xa)))}function Ys(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ya={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},Ar={},bu={};dn&&(bu=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function ir(e){if(Ar[e])return Ar[e];if(!ya[e])return e;var t=ya[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bu)return Ar[e]=t[n];return e}var wu=ir("animationend"),Su=ir("animationiteration"),ku=ir("animationstart"),ju=ir("transitionend"),Nu=new Map,Cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(e,t){Nu.set(e,t),ra(t,[e])}for(var zr=0;zr<Cc.length;zr++){var Fr=Cc[zr],ip=Fr.toLowerCase(),op=Fr[0].toUpperCase()+Fr.slice(1);$n(ip,"on"+op)}$n(wu,"onAnimationEnd");$n(Su,"onAnimationIteration");$n(ku,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(ju,"onTransitionEnd");Ta("onMouseEnter",["mouseout","mouseover"]);Ta("onMouseLeave",["mouseout","mouseover"]);Ta("onPointerEnter",["pointerout","pointerover"]);Ta("onPointerLeave",["pointerout","pointerover"]);ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cp=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function Mc(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,rf(a,t,void 0,e),e.currentTarget=null}function Cu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var i=a.length-1;0<=i;i--){var c=a[i],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==r&&s.isPropagationStopped())break e;Mc(s,c,u),r=d}else for(i=0;i<a.length;i++){if(c=a[i],d=c.instance,u=c.currentTarget,c=c.listener,d!==r&&s.isPropagationStopped())break e;Mc(s,c,u),r=d}}}if(Ml)throw e=yi,Ml=!1,yi=null,e}function Be(e,t){var n=t[_i];n===void 0&&(n=t[_i]=new Set);var a=e+"__bubble";n.has(a)||(Mu(t,e,2,!1),n.add(a))}function qr(e,t,n){var a=0;t&&(a|=4),Mu(n,e,a,t)}var Ks="_reactListening"+Math.random().toString(36).slice(2);function vs(e){if(!e[Ks]){e[Ks]=!0,Dd.forEach(function(n){n!=="selectionchange"&&(cp.has(n)||qr(n,!1,e),qr(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ks]||(t[Ks]=!0,qr("selectionchange",!1,t))}}function Mu(e,t,n,a){switch(du(t)){case 1:var s=kf;break;case 4:s=jf;break;default:s=ho}n=s.bind(null,t,n,e),s=void 0,!xi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Br(e,t,n,a,s){var r=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var c=a.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(i===4)for(i=a.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;i=i.return}for(;c!==null;){if(i=Wn(c),i===null)return;if(d=i.tag,d===5||d===6){a=r=i;continue e}c=c.parentNode}}a=a.return}Xd(function(){var u=r,f=uo(n),v=[];e:{var x=Nu.get(e);if(x!==void 0){var h=xo,w=e;switch(e){case"keypress":if(pl(n)===0)break e;case"keydown":case"keyup":h=Ff;break;case"focusin":w="focus",h=Dr;break;case"focusout":w="blur",h=Dr;break;case"beforeblur":case"afterblur":h=Dr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Mf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Of;break;case wu:case Su:case ku:h=Ef;break;case ju:h=Gf;break;case"scroll":h=Nf;break;case"wheel":h=Wf;break;case"copy":case"cut":case"paste":h=Tf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=xc}var N=(t&4)!==0,y=!N&&e==="scroll",b=N?x!==null?x+"Capture":null:x;N=[];for(var m=u,p;m!==null;){p=m;var g=p.stateNode;if(p.tag===5&&g!==null&&(p=g,b!==null&&(g=fs(m,b),g!=null&&N.push(bs(m,g,p)))),y)break;m=m.return}0<N.length&&(x=new h(x,w,null,n,f),v.push({event:x,listeners:N}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",x&&n!==hi&&(w=n.relatedTarget||n.fromElement)&&(Wn(w)||w[un]))break e;if((h||x)&&(x=f.window===f?f:(x=f.ownerDocument)?x.defaultView||x.parentWindow:window,h?(w=n.relatedTarget||n.toElement,h=u,w=w?Wn(w):null,w!==null&&(y=ia(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(h=null,w=u),h!==w)){if(N=hc,g="onMouseLeave",b="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(N=xc,g="onPointerLeave",b="onPointerEnter",m="pointer"),y=h==null?x:va(h),p=w==null?x:va(w),x=new N(g,m+"leave",h,n,f),x.target=y,x.relatedTarget=p,g=null,Wn(f)===u&&(N=new N(b,m+"enter",w,n,f),N.target=p,N.relatedTarget=y,g=N),y=g,h&&w)t:{for(N=h,b=w,m=0,p=N;p;p=oa(p))m++;for(p=0,g=b;g;g=oa(g))p++;for(;0<m-p;)N=oa(N),m--;for(;0<p-m;)b=oa(b),p--;for(;m--;){if(N===b||b!==null&&N===b.alternate)break t;N=oa(N),b=oa(b)}N=null}else N=null;h!==null&&_c(v,x,h,N,!1),w!==null&&y!==null&&_c(v,y,w,N,!0)}}e:{if(x=u?va(u):window,h=x.nodeName&&x.nodeName.toLowerCase(),h==="select"||h==="input"&&x.type==="file")var S=Jf;else if(bc(x))if(gu)S=ap;else{S=tp;var P=ep}else(h=x.nodeName)&&h.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(S=np);if(S&&(S=S(e,u))){hu(v,S,n,f);break e}P&&P(e,x,u),e==="focusout"&&(P=x._wrapperState)&&P.controlled&&x.type==="number"&&di(x,"number",x.value)}switch(P=u?va(u):window,e){case"focusin":(bc(P)||P.contentEditable==="true")&&(xa=P,Si=u,ls=null);break;case"focusout":ls=Si=xa=null;break;case"mousedown":ki=!0;break;case"contextmenu":case"mouseup":case"dragend":ki=!1,Nc(v,n,f);break;case"selectionchange":if(rp)break;case"keydown":case"keyup":Nc(v,n,f)}var T;if(vo)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ga?fu(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(mu&&n.locale!=="ko"&&(ga||C!=="onCompositionStart"?C==="onCompositionEnd"&&ga&&(T=uu()):(kn=f,go="value"in kn?kn.value:kn.textContent,ga=!0)),P=Tl(u,C),0<P.length&&(C=new gc(C,e,null,n,f),v.push({event:C,listeners:P}),T?C.data=T:(T=pu(n),T!==null&&(C.data=T)))),(T=Yf?Kf(e,n):Xf(e,n))&&(u=Tl(u,"onBeforeInput"),0<u.length&&(f=new gc("onBeforeInput","beforeinput",null,n,f),v.push({event:f,listeners:u}),f.data=T))}Cu(v,t)})}function bs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Tl(e,t){for(var n=t+"Capture",a=[];e!==null;){var s=e,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=fs(e,n),r!=null&&a.unshift(bs(e,r,s)),r=fs(e,t),r!=null&&a.push(bs(e,r,s))),e=e.return}return a}function oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _c(e,t,n,a,s){for(var r=t._reactName,i=[];n!==null&&n!==a;){var c=n,d=c.alternate,u=c.stateNode;if(d!==null&&d===a)break;c.tag===5&&u!==null&&(c=u,s?(d=fs(n,r),d!=null&&i.unshift(bs(n,d,c))):s||(d=fs(n,r),d!=null&&i.push(bs(n,d,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var dp=/\r\n?/g,up=/\u0000|\uFFFD/g;function Pc(e){return(typeof e=="string"?e:""+e).replace(dp,`
`).replace(up,"")}function Xs(e,t,n){if(t=Pc(t),Pc(e)!==t&&n)throw Error(H(425))}function Ll(){}var ji=null,Ni=null;function Ci(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mi=typeof setTimeout=="function"?setTimeout:void 0,mp=typeof clearTimeout=="function"?clearTimeout:void 0,Ec=typeof Promise=="function"?Promise:void 0,fp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ec<"u"?function(e){return Ec.resolve(null).then(e).catch(pp)}:Mi;function pp(e){setTimeout(function(){throw e})}function Or(e,t){var n=t,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(a===0){e.removeChild(s),gs(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=s}while(n);gs(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Rc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Ba,ws="__reactProps$"+Ba,un="__reactContainer$"+Ba,_i="__reactEvents$"+Ba,hp="__reactListeners$"+Ba,gp="__reactHandles$"+Ba;function Wn(e){var t=e[Jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[un]||n[Jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Rc(e);e!==null;){if(n=e[Jt])return n;e=Rc(e)}return t}e=n,n=e.parentNode}return null}function Ls(e){return e=e[Jt]||e[un],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function va(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function or(e){return e[ws]||null}var Pi=[],ba=-1;function An(e){return{current:e}}function Oe(e){0>ba||(e.current=Pi[ba],Pi[ba]=null,ba--)}function qe(e,t){ba++,Pi[ba]=e.current,e.current=t}var In={},gt=An(In),Mt=An(!1),ea=In;function La(e,t){var n=e.type.contextTypes;if(!n)return In;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=t[r];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _t(e){return e=e.childContextTypes,e!=null}function Dl(){Oe(Mt),Oe(gt)}function Tc(e,t,n){if(gt.current!==In)throw Error(H(168));qe(gt,t),qe(Mt,n)}function _u(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(H(108,J0(e)||"Unknown",s));return He({},n,a)}function Il(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||In,ea=gt.current,qe(gt,e),qe(Mt,Mt.current),!0}function Lc(e,t,n){var a=e.stateNode;if(!a)throw Error(H(169));n?(e=_u(e,t,ea),a.__reactInternalMemoizedMergedChildContext=e,Oe(Mt),Oe(gt),qe(gt,e)):Oe(Mt),qe(Mt,n)}var ln=null,cr=!1,Ur=!1;function Pu(e){ln===null?ln=[e]:ln.push(e)}function xp(e){cr=!0,Pu(e)}function zn(){if(!Ur&&ln!==null){Ur=!0;var e=0,t=Ie;try{var n=ln;for(Ie=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}ln=null,cr=!1}catch(s){throw ln!==null&&(ln=ln.slice(e+1)),eu(mo,zn),s}finally{Ie=t,Ur=!1}}return null}var wa=[],Sa=0,$l=null,Al=0,zt=[],Ft=0,ta=null,rn=1,on="";function On(e,t){wa[Sa++]=Al,wa[Sa++]=$l,$l=e,Al=t}function Eu(e,t,n){zt[Ft++]=rn,zt[Ft++]=on,zt[Ft++]=ta,ta=e;var a=rn;e=on;var s=32-Yt(a)-1;a&=~(1<<s),n+=1;var r=32-Yt(t)+s;if(30<r){var i=s-s%5;r=(a&(1<<i)-1).toString(32),a>>=i,s-=i,rn=1<<32-Yt(t)+s|n<<s|a,on=r+e}else rn=1<<r|n<<s|a,on=e}function wo(e){e.return!==null&&(On(e,1),Eu(e,1,0))}function So(e){for(;e===$l;)$l=wa[--Sa],wa[Sa]=null,Al=wa[--Sa],wa[Sa]=null;for(;e===ta;)ta=zt[--Ft],zt[Ft]=null,on=zt[--Ft],zt[Ft]=null,rn=zt[--Ft],zt[Ft]=null}var Dt=null,Lt=null,Ue=!1,Ht=null;function Ru(e,t){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Dc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Lt=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ta!==null?{id:rn,overflow:on}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Lt=null,!0):!1;default:return!1}}function Ei(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ri(e){if(Ue){var t=Lt;if(t){var n=t;if(!Dc(e,t)){if(Ei(e))throw Error(H(418));t=Pn(n.nextSibling);var a=Dt;t&&Dc(e,t)?Ru(a,n):(e.flags=e.flags&-4097|2,Ue=!1,Dt=e)}}else{if(Ei(e))throw Error(H(418));e.flags=e.flags&-4097|2,Ue=!1,Dt=e}}}function Ic(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function Qs(e){if(e!==Dt)return!1;if(!Ue)return Ic(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ci(e.type,e.memoizedProps)),t&&(t=Lt)){if(Ei(e))throw Tu(),Error(H(418));for(;t;)Ru(e,t),t=Pn(t.nextSibling)}if(Ic(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lt=Pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=Dt?Pn(e.stateNode.nextSibling):null;return!0}function Tu(){for(var e=Lt;e;)e=Pn(e.nextSibling)}function Da(){Lt=Dt=null,Ue=!1}function ko(e){Ht===null?Ht=[e]:Ht.push(e)}var yp=hn.ReactCurrentBatchConfig;function Ha(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var a=n.stateNode}if(!a)throw Error(H(147,e));var s=a,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(i){var c=s.refs;i===null?delete c[r]:c[r]=i},t._stringRef=r,t)}if(typeof e!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,e))}return e}function Zs(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $c(e){var t=e._init;return t(e._payload)}function Lu(e){function t(b,m){if(e){var p=b.deletions;p===null?(b.deletions=[m],b.flags|=16):p.push(m)}}function n(b,m){if(!e)return null;for(;m!==null;)t(b,m),m=m.sibling;return null}function a(b,m){for(b=new Map;m!==null;)m.key!==null?b.set(m.key,m):b.set(m.index,m),m=m.sibling;return b}function s(b,m){return b=Ln(b,m),b.index=0,b.sibling=null,b}function r(b,m,p){return b.index=p,e?(p=b.alternate,p!==null?(p=p.index,p<m?(b.flags|=2,m):p):(b.flags|=2,m)):(b.flags|=1048576,m)}function i(b){return e&&b.alternate===null&&(b.flags|=2),b}function c(b,m,p,g){return m===null||m.tag!==6?(m=Xr(p,b.mode,g),m.return=b,m):(m=s(m,p),m.return=b,m)}function d(b,m,p,g){var S=p.type;return S===ha?f(b,m,p.props.children,g,p.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===yn&&$c(S)===m.type)?(g=s(m,p.props),g.ref=Ha(b,m,p),g.return=b,g):(g=wl(p.type,p.key,p.props,null,b.mode,g),g.ref=Ha(b,m,p),g.return=b,g)}function u(b,m,p,g){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=Qr(p,b.mode,g),m.return=b,m):(m=s(m,p.children||[]),m.return=b,m)}function f(b,m,p,g,S){return m===null||m.tag!==7?(m=Jn(p,b.mode,g,S),m.return=b,m):(m=s(m,p),m.return=b,m)}function v(b,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Xr(""+m,b.mode,p),m.return=b,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Bs:return p=wl(m.type,m.key,m.props,null,b.mode,p),p.ref=Ha(b,null,m),p.return=b,p;case pa:return m=Qr(m,b.mode,p),m.return=b,m;case yn:var g=m._init;return v(b,g(m._payload),p)}if(Za(m)||Oa(m))return m=Jn(m,b.mode,p,null),m.return=b,m;Zs(b,m)}return null}function x(b,m,p,g){var S=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:c(b,m,""+p,g);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Bs:return p.key===S?d(b,m,p,g):null;case pa:return p.key===S?u(b,m,p,g):null;case yn:return S=p._init,x(b,m,S(p._payload),g)}if(Za(p)||Oa(p))return S!==null?null:f(b,m,p,g,null);Zs(b,p)}return null}function h(b,m,p,g,S){if(typeof g=="string"&&g!==""||typeof g=="number")return b=b.get(p)||null,c(m,b,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Bs:return b=b.get(g.key===null?p:g.key)||null,d(m,b,g,S);case pa:return b=b.get(g.key===null?p:g.key)||null,u(m,b,g,S);case yn:var P=g._init;return h(b,m,p,P(g._payload),S)}if(Za(g)||Oa(g))return b=b.get(p)||null,f(m,b,g,S,null);Zs(m,g)}return null}function w(b,m,p,g){for(var S=null,P=null,T=m,C=m=0,_=null;T!==null&&C<p.length;C++){T.index>C?(_=T,T=null):_=T.sibling;var D=x(b,T,p[C],g);if(D===null){T===null&&(T=_);break}e&&T&&D.alternate===null&&t(b,T),m=r(D,m,C),P===null?S=D:P.sibling=D,P=D,T=_}if(C===p.length)return n(b,T),Ue&&On(b,C),S;if(T===null){for(;C<p.length;C++)T=v(b,p[C],g),T!==null&&(m=r(T,m,C),P===null?S=T:P.sibling=T,P=T);return Ue&&On(b,C),S}for(T=a(b,T);C<p.length;C++)_=h(T,b,C,p[C],g),_!==null&&(e&&_.alternate!==null&&T.delete(_.key===null?C:_.key),m=r(_,m,C),P===null?S=_:P.sibling=_,P=_);return e&&T.forEach(function(E){return t(b,E)}),Ue&&On(b,C),S}function N(b,m,p,g){var S=Oa(p);if(typeof S!="function")throw Error(H(150));if(p=S.call(p),p==null)throw Error(H(151));for(var P=S=null,T=m,C=m=0,_=null,D=p.next();T!==null&&!D.done;C++,D=p.next()){T.index>C?(_=T,T=null):_=T.sibling;var E=x(b,T,D.value,g);if(E===null){T===null&&(T=_);break}e&&T&&E.alternate===null&&t(b,T),m=r(E,m,C),P===null?S=E:P.sibling=E,P=E,T=_}if(D.done)return n(b,T),Ue&&On(b,C),S;if(T===null){for(;!D.done;C++,D=p.next())D=v(b,D.value,g),D!==null&&(m=r(D,m,C),P===null?S=D:P.sibling=D,P=D);return Ue&&On(b,C),S}for(T=a(b,T);!D.done;C++,D=p.next())D=h(T,b,C,D.value,g),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?C:D.key),m=r(D,m,C),P===null?S=D:P.sibling=D,P=D);return e&&T.forEach(function(ie){return t(b,ie)}),Ue&&On(b,C),S}function y(b,m,p,g){if(typeof p=="object"&&p!==null&&p.type===ha&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Bs:e:{for(var S=p.key,P=m;P!==null;){if(P.key===S){if(S=p.type,S===ha){if(P.tag===7){n(b,P.sibling),m=s(P,p.props.children),m.return=b,b=m;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===yn&&$c(S)===P.type){n(b,P.sibling),m=s(P,p.props),m.ref=Ha(b,P,p),m.return=b,b=m;break e}n(b,P);break}else t(b,P);P=P.sibling}p.type===ha?(m=Jn(p.props.children,b.mode,g,p.key),m.return=b,b=m):(g=wl(p.type,p.key,p.props,null,b.mode,g),g.ref=Ha(b,m,p),g.return=b,b=g)}return i(b);case pa:e:{for(P=p.key;m!==null;){if(m.key===P)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(b,m.sibling),m=s(m,p.children||[]),m.return=b,b=m;break e}else{n(b,m);break}else t(b,m);m=m.sibling}m=Qr(p,b.mode,g),m.return=b,b=m}return i(b);case yn:return P=p._init,y(b,m,P(p._payload),g)}if(Za(p))return w(b,m,p,g);if(Oa(p))return N(b,m,p,g);Zs(b,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(b,m.sibling),m=s(m,p),m.return=b,b=m):(n(b,m),m=Xr(p,b.mode,g),m.return=b,b=m),i(b)):n(b,m)}return y}var Ia=Lu(!0),Du=Lu(!1),zl=An(null),Fl=null,ka=null,jo=null;function No(){jo=ka=Fl=null}function Co(e){var t=zl.current;Oe(zl),e._currentValue=t}function Ti(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){Fl=e,jo=ka=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(jo!==e)if(e={context:e,memoizedValue:t,next:null},ka===null){if(Fl===null)throw Error(H(308));ka=e,Fl.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Hn=null;function Mo(e){Hn===null?Hn=[e]:Hn.push(e)}function Iu(e,t,n,a){var s=t.interleaved;return s===null?(n.next=n,Mo(t)):(n.next=s.next,s.next=n),t.interleaved=n,mn(e,a)}function mn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vn=!1;function _o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $u(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function En(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Re&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,mn(e,n)}return s=a.interleaved,s===null?(t.next=t,Mo(a)):(t.next=s.next,s.next=t),a.interleaved=t,mn(e,n)}function hl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,fo(e,n)}}function Ac(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=i:r=r.next=i,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ql(e,t,n,a){var s=e.updateQueue;vn=!1;var r=s.firstBaseUpdate,i=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var d=c,u=d.next;d.next=null,i===null?r=u:i.next=u,i=d;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==i&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=d))}if(r!==null){var v=s.baseState;i=0,f=u=d=null,c=r;do{var x=c.lane,h=c.eventTime;if((a&x)===x){f!==null&&(f=f.next={eventTime:h,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=e,N=c;switch(x=t,h=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){v=w.call(h,v,x);break e}v=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,x=typeof w=="function"?w.call(h,v,x):w,x==null)break e;v=He({},v,x);break e;case 2:vn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,x=s.effects,x===null?s.effects=[c]:x.push(c))}else h={eventTime:h,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=h,d=v):f=f.next=h,i|=x;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;x=c,c=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(f===null&&(d=v),s.baseState=d,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);aa|=i,e.lanes=i,e.memoizedState=v}}function zc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=n,typeof s!="function")throw Error(H(191,s));s.call(a)}}}var Ds={},an=An(Ds),Ss=An(Ds),ks=An(Ds);function Yn(e){if(e===Ds)throw Error(H(174));return e}function Po(e,t){switch(qe(ks,t),qe(Ss,e),qe(an,Ds),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mi(t,e)}Oe(an),qe(an,t)}function $a(){Oe(an),Oe(Ss),Oe(ks)}function Au(e){Yn(ks.current);var t=Yn(an.current),n=mi(t,e.type);t!==n&&(qe(Ss,e),qe(an,n))}function Eo(e){Ss.current===e&&(Oe(an),Oe(Ss))}var Ve=An(0);function Bl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gr=[];function Ro(){for(var e=0;e<Gr.length;e++)Gr[e]._workInProgressVersionPrimary=null;Gr.length=0}var gl=hn.ReactCurrentDispatcher,Vr=hn.ReactCurrentBatchConfig,na=0,We=null,tt=null,at=null,Ol=!1,rs=!1,js=0,vp=0;function ft(){throw Error(H(321))}function To(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xt(e[n],t[n]))return!1;return!0}function Lo(e,t,n,a,s,r){if(na=r,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gl.current=e===null||e.memoizedState===null?kp:jp,e=n(a,s),rs){r=0;do{if(rs=!1,js=0,25<=r)throw Error(H(301));r+=1,at=tt=null,t.updateQueue=null,gl.current=Np,e=n(a,s)}while(rs)}if(gl.current=Ul,t=tt!==null&&tt.next!==null,na=0,at=tt=We=null,Ol=!1,t)throw Error(H(300));return e}function Do(){var e=js!==0;return js=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?We.memoizedState=at=e:at=at.next=e,at}function Ut(){if(tt===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=at===null?We.memoizedState:at.next;if(t!==null)at=t,tt=e;else{if(e===null)throw Error(H(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},at===null?We.memoizedState=at=e:at=at.next=e}return at}function Ns(e,t){return typeof t=="function"?t(e):t}function Wr(e){var t=Ut(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var a=tt,s=a.baseQueue,r=n.pending;if(r!==null){if(s!==null){var i=s.next;s.next=r.next,r.next=i}a.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,a=a.baseState;var c=i=null,d=null,u=r;do{var f=u.lane;if((na&f)===f)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var v={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=v,i=a):d=d.next=v,We.lanes|=f,aa|=f}u=u.next}while(u!==null&&u!==r);d===null?i=a:d.next=c,Xt(a,t.memoizedState)||(Ct=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=d,n.lastRenderedState=a}if(e=n.interleaved,e!==null){s=e;do r=s.lane,We.lanes|=r,aa|=r,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Hr(e){var t=Ut(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do r=e(r,i.action),i=i.next;while(i!==s);Xt(r,t.memoizedState)||(Ct=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function zu(){}function Fu(e,t){var n=We,a=Ut(),s=t(),r=!Xt(a.memoizedState,s);if(r&&(a.memoizedState=s,Ct=!0),a=a.queue,Io(Ou.bind(null,n,a,e),[e]),a.getSnapshot!==t||r||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,Cs(9,Bu.bind(null,n,a,s,t),void 0,null),st===null)throw Error(H(349));na&30||qu(n,t,s)}return s}function qu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bu(e,t,n,a){t.value=n,t.getSnapshot=a,Uu(t)&&Gu(e)}function Ou(e,t,n){return n(function(){Uu(t)&&Gu(e)})}function Uu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xt(e,n)}catch{return!0}}function Gu(e){var t=mn(e,1);t!==null&&Kt(t,e,1,-1)}function Fc(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:e},t.queue=e,e=e.dispatch=Sp.bind(null,We,e),[t.memoizedState,e]}function Cs(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function Vu(){return Ut().memoizedState}function xl(e,t,n,a){var s=Zt();We.flags|=e,s.memoizedState=Cs(1|t,n,void 0,a===void 0?null:a)}function dr(e,t,n,a){var s=Ut();a=a===void 0?null:a;var r=void 0;if(tt!==null){var i=tt.memoizedState;if(r=i.destroy,a!==null&&To(a,i.deps)){s.memoizedState=Cs(t,n,r,a);return}}We.flags|=e,s.memoizedState=Cs(1|t,n,r,a)}function qc(e,t){return xl(8390656,8,e,t)}function Io(e,t){return dr(2048,8,e,t)}function Wu(e,t){return dr(4,2,e,t)}function Hu(e,t){return dr(4,4,e,t)}function Yu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ku(e,t,n){return n=n!=null?n.concat([e]):null,dr(4,4,Yu.bind(null,t,e),n)}function $o(){}function Xu(e,t){var n=Ut();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&To(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Qu(e,t){var n=Ut();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&To(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Zu(e,t,n){return na&21?(Xt(n,t)||(n=au(),We.lanes|=n,aa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=n)}function bp(e,t){var n=Ie;Ie=n!==0&&4>n?n:4,e(!0);var a=Vr.transition;Vr.transition={};try{e(!1),t()}finally{Ie=n,Vr.transition=a}}function Ju(){return Ut().memoizedState}function wp(e,t,n){var a=Tn(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},em(e))tm(t,n);else if(n=Iu(e,t,n,a),n!==null){var s=yt();Kt(n,e,a,s),nm(n,t,a)}}function Sp(e,t,n){var a=Tn(e),s={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(em(e))tm(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var i=t.lastRenderedState,c=r(i,n);if(s.hasEagerState=!0,s.eagerState=c,Xt(c,i)){var d=t.interleaved;d===null?(s.next=s,Mo(t)):(s.next=d.next,d.next=s),t.interleaved=s;return}}catch{}finally{}n=Iu(e,t,s,a),n!==null&&(s=yt(),Kt(n,e,a,s),nm(n,t,a))}}function em(e){var t=e.alternate;return e===We||t!==null&&t===We}function tm(e,t){rs=Ol=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function nm(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,fo(e,n)}}var Ul={readContext:Ot,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},kp={readContext:Ot,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:qc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xl(4194308,4,Yu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xl(4194308,4,e,t)},useInsertionEffect:function(e,t){return xl(4,2,e,t)},useMemo:function(e,t){var n=Zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Zt();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=wp.bind(null,We,e),[a.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:Fc,useDebugValue:$o,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=Fc(!1),t=e[0];return e=bp.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=We,s=Zt();if(Ue){if(n===void 0)throw Error(H(407));n=n()}else{if(n=t(),st===null)throw Error(H(349));na&30||qu(a,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,qc(Ou.bind(null,a,r,e),[e]),a.flags|=2048,Cs(9,Bu.bind(null,a,r,n,t),void 0,null),n},useId:function(){var e=Zt(),t=st.identifierPrefix;if(Ue){var n=on,a=rn;n=(a&~(1<<32-Yt(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=js++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=vp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jp={readContext:Ot,useCallback:Xu,useContext:Ot,useEffect:Io,useImperativeHandle:Ku,useInsertionEffect:Wu,useLayoutEffect:Hu,useMemo:Qu,useReducer:Wr,useRef:Vu,useState:function(){return Wr(Ns)},useDebugValue:$o,useDeferredValue:function(e){var t=Ut();return Zu(t,tt.memoizedState,e)},useTransition:function(){var e=Wr(Ns)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:zu,useSyncExternalStore:Fu,useId:Ju,unstable_isNewReconciler:!1},Np={readContext:Ot,useCallback:Xu,useContext:Ot,useEffect:Io,useImperativeHandle:Ku,useInsertionEffect:Wu,useLayoutEffect:Hu,useMemo:Qu,useReducer:Hr,useRef:Vu,useState:function(){return Hr(Ns)},useDebugValue:$o,useDeferredValue:function(e){var t=Ut();return tt===null?t.memoizedState=e:Zu(t,tt.memoizedState,e)},useTransition:function(){var e=Hr(Ns)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:zu,useSyncExternalStore:Fu,useId:Ju,unstable_isNewReconciler:!1};function Vt(e,t){if(e&&e.defaultProps){t=He({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Li(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:He({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ur={isMounted:function(e){return(e=e._reactInternals)?ia(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=yt(),s=Tn(e),r=cn(a,s);r.payload=t,n!=null&&(r.callback=n),t=En(e,r,s),t!==null&&(Kt(t,e,s,a),hl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=yt(),s=Tn(e),r=cn(a,s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=En(e,r,s),t!==null&&(Kt(t,e,s,a),hl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yt(),a=Tn(e),s=cn(n,a);s.tag=2,t!=null&&(s.callback=t),t=En(e,s,a),t!==null&&(Kt(t,e,a,n),hl(t,e,a))}};function Bc(e,t,n,a,s,r,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,r,i):t.prototype&&t.prototype.isPureReactComponent?!ys(n,a)||!ys(s,r):!0}function am(e,t,n){var a=!1,s=In,r=t.contextType;return typeof r=="object"&&r!==null?r=Ot(r):(s=_t(t)?ea:gt.current,a=t.contextTypes,r=(a=a!=null)?La(e,s):In),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ur,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function Oc(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&ur.enqueueReplaceState(t,t.state,null)}function Di(e,t,n,a){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},_o(e);var r=t.contextType;typeof r=="object"&&r!==null?s.context=Ot(r):(r=_t(t)?ea:gt.current,s.context=La(e,r)),s.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Li(e,t,r,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ur.enqueueReplaceState(s,s.state,null),ql(e,n,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Aa(e,t){try{var n="",a=t;do n+=Z0(a),a=a.return;while(a);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:s,digest:null}}function Yr(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ii(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Cp=typeof WeakMap=="function"?WeakMap:Map;function sm(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Vl||(Vl=!0,Vi=a),Ii(e,t)},n}function lm(e,t,n){n=cn(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;n.payload=function(){return a(s)},n.callback=function(){Ii(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Ii(e,t),typeof a!="function"&&(Rn===null?Rn=new Set([this]):Rn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Uc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Cp;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(n)||(s.add(n),e=qp.bind(null,e,t,n),t.then(e,e))}function Gc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vc(e,t,n,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,En(n,t,1))),n.lanes|=1),e)}var Mp=hn.ReactCurrentOwner,Ct=!1;function xt(e,t,n,a){t.child=e===null?Du(t,null,n,a):Ia(t,e.child,n,a)}function Wc(e,t,n,a,s){n=n.render;var r=t.ref;return Ea(t,s),a=Lo(e,t,n,a,r,s),n=Do(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fn(e,t,s)):(Ue&&n&&wo(t),t.flags|=1,xt(e,t,a,s),t.child)}function Hc(e,t,n,a,s){if(e===null){var r=n.type;return typeof r=="function"&&!Go(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,rm(e,t,r,a,s)):(e=wl(n.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&s)){var i=r.memoizedProps;if(n=n.compare,n=n!==null?n:ys,n(i,a)&&e.ref===t.ref)return fn(e,t,s)}return t.flags|=1,e=Ln(r,a),e.ref=t.ref,e.return=t,t.child=e}function rm(e,t,n,a,s){if(e!==null){var r=e.memoizedProps;if(ys(r,a)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=a=r,(e.lanes&s)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,fn(e,t,s)}return $i(e,t,n,a,s)}function im(e,t,n){var a=t.pendingProps,s=a.children,r=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Na,Tt),Tt|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(Na,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=r!==null?r.baseLanes:n,qe(Na,Tt),Tt|=a}else r!==null?(a=r.baseLanes|n,t.memoizedState=null):a=n,qe(Na,Tt),Tt|=a;return xt(e,t,s,n),t.child}function om(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $i(e,t,n,a,s){var r=_t(n)?ea:gt.current;return r=La(t,r),Ea(t,s),n=Lo(e,t,n,a,r,s),a=Do(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fn(e,t,s)):(Ue&&a&&wo(t),t.flags|=1,xt(e,t,n,s),t.child)}function Yc(e,t,n,a,s){if(_t(n)){var r=!0;Il(t)}else r=!1;if(Ea(t,s),t.stateNode===null)yl(e,t),am(t,n,a),Di(t,n,a,s),a=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var d=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ot(u):(u=_t(n)?ea:gt.current,u=La(t,u));var f=n.getDerivedStateFromProps,v=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";v||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==a||d!==u)&&Oc(t,i,a,u),vn=!1;var x=t.memoizedState;i.state=x,ql(t,a,i,s),d=t.memoizedState,c!==a||x!==d||Mt.current||vn?(typeof f=="function"&&(Li(t,n,f,a),d=t.memoizedState),(c=vn||Bc(t,n,c,a,x,d,u))?(v||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=d),i.props=a,i.state=d,i.context=u,a=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,$u(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:Vt(t.type,c),i.props=u,v=t.pendingProps,x=i.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ot(d):(d=_t(n)?ea:gt.current,d=La(t,d));var h=n.getDerivedStateFromProps;(f=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==v||x!==d)&&Oc(t,i,a,d),vn=!1,x=t.memoizedState,i.state=x,ql(t,a,i,s);var w=t.memoizedState;c!==v||x!==w||Mt.current||vn?(typeof h=="function"&&(Li(t,n,h,a),w=t.memoizedState),(u=vn||Bc(t,n,u,a,x,w,d)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,w,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,w,d)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=w),i.props=a,i.state=w,i.context=d,a=u):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),a=!1)}return Ai(e,t,n,a,r,s)}function Ai(e,t,n,a,s,r){om(e,t);var i=(t.flags&128)!==0;if(!a&&!i)return s&&Lc(t,n,!1),fn(e,t,r);a=t.stateNode,Mp.current=t;var c=i&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&i?(t.child=Ia(t,e.child,null,r),t.child=Ia(t,null,c,r)):xt(e,t,c,r),t.memoizedState=a.state,s&&Lc(t,n,!0),t.child}function cm(e){var t=e.stateNode;t.pendingContext?Tc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tc(e,t.context,!1),Po(e,t.containerInfo)}function Kc(e,t,n,a,s){return Da(),ko(s),t.flags|=256,xt(e,t,n,a),t.child}var zi={dehydrated:null,treeContext:null,retryLane:0};function Fi(e){return{baseLanes:e,cachePool:null,transitions:null}}function dm(e,t,n){var a=t.pendingProps,s=Ve.current,r=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),qe(Ve,s&1),e===null)return Ri(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=a.children,e=a.fallback,r?(a=t.mode,r=t.child,i={mode:"hidden",children:i},!(a&1)&&r!==null?(r.childLanes=0,r.pendingProps=i):r=pr(i,a,0,null),e=Jn(e,a,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Fi(n),t.memoizedState=zi,e):Ao(t,i));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return _p(e,t,i,a,c,s,n);if(r){r=a.fallback,i=t.mode,s=e.child,c=s.sibling;var d={mode:"hidden",children:a.children};return!(i&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=d,t.deletions=null):(a=Ln(s,d),a.subtreeFlags=s.subtreeFlags&14680064),c!==null?r=Ln(c,r):(r=Jn(r,i,n,null),r.flags|=2),r.return=t,a.return=t,a.sibling=r,t.child=a,a=r,r=t.child,i=e.child.memoizedState,i=i===null?Fi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},r.memoizedState=i,r.childLanes=e.childLanes&~n,t.memoizedState=zi,a}return r=e.child,e=r.sibling,a=Ln(r,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ao(e,t){return t=pr({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Js(e,t,n,a){return a!==null&&ko(a),Ia(t,e.child,null,n),e=Ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _p(e,t,n,a,s,r,i){if(n)return t.flags&256?(t.flags&=-257,a=Yr(Error(H(422))),Js(e,t,i,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=a.fallback,s=t.mode,a=pr({mode:"visible",children:a.children},s,0,null),r=Jn(r,s,i,null),r.flags|=2,a.return=t,r.return=t,a.sibling=r,t.child=a,t.mode&1&&Ia(t,e.child,null,i),t.child.memoizedState=Fi(i),t.memoizedState=zi,r);if(!(t.mode&1))return Js(e,t,i,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var c=a.dgst;return a=c,r=Error(H(419)),a=Yr(r,a,void 0),Js(e,t,i,a)}if(c=(i&e.childLanes)!==0,Ct||c){if(a=st,a!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|i)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,mn(e,s),Kt(a,e,s,-1))}return Uo(),a=Yr(Error(H(421))),Js(e,t,i,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Bp.bind(null,e),s._reactRetry=t,null):(e=r.treeContext,Lt=Pn(s.nextSibling),Dt=t,Ue=!0,Ht=null,e!==null&&(zt[Ft++]=rn,zt[Ft++]=on,zt[Ft++]=ta,rn=e.id,on=e.overflow,ta=t),t=Ao(t,a.children),t.flags|=4096,t)}function Xc(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Ti(e.return,t,n)}function Kr(e,t,n,a,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=s)}function um(e,t,n){var a=t.pendingProps,s=a.revealOrder,r=a.tail;if(xt(e,t,a.children,n),a=Ve.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xc(e,n,t);else if(e.tag===19)Xc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(qe(Ve,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Bl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Kr(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Bl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Kr(t,!0,n,null,r);break;case"together":Kr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),aa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Pp(e,t,n){switch(t.tag){case 3:cm(t),Da();break;case 5:Au(t);break;case 1:_t(t.type)&&Il(t);break;case 4:Po(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;qe(zl,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(qe(Ve,Ve.current&1),t.flags|=128,null):n&t.child.childLanes?dm(e,t,n):(qe(Ve,Ve.current&1),e=fn(e,t,n),e!==null?e.sibling:null);qe(Ve,Ve.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return um(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(Ve,Ve.current),a)break;return null;case 22:case 23:return t.lanes=0,im(e,t,n)}return fn(e,t,n)}var mm,qi,fm,pm;mm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qi=function(){};fm=function(e,t,n,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,Yn(an.current);var r=null;switch(n){case"input":s=oi(e,s),a=oi(e,a),r=[];break;case"select":s=He({},s,{value:void 0}),a=He({},a,{value:void 0}),r=[];break;case"textarea":s=ui(e,s),a=ui(e,a),r=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Ll)}fi(n,a);var i;n=null;for(u in s)if(!a.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var c=s[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(us.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in a){var d=a[u];if(c=s!=null?s[u]:void 0,a.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(i in c)!c.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in d)d.hasOwnProperty(i)&&c[i]!==d[i]&&(n||(n={}),n[i]=d[i])}else n||(r||(r=[]),r.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(r=r||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(r=r||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(us.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Be("scroll",e),r||c===d||(r=[])):(r=r||[]).push(u,d))}n&&(r=r||[]).push("style",n);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};pm=function(e,t,n,a){n!==a&&(t.flags|=4)};function Ya(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Ep(e,t,n){var a=t.pendingProps;switch(So(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return _t(t.type)&&Dl(),pt(t),null;case 3:return a=t.stateNode,$a(),Oe(Mt),Oe(gt),Ro(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Qs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(Yi(Ht),Ht=null))),qi(e,t),pt(t),null;case 5:Eo(t);var s=Yn(ks.current);if(n=t.type,e!==null&&t.stateNode!=null)fm(e,t,n,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(H(166));return pt(t),null}if(e=Yn(an.current),Qs(t)){a=t.stateNode,n=t.type;var r=t.memoizedProps;switch(a[Jt]=t,a[ws]=r,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",a),Be("close",a);break;case"iframe":case"object":case"embed":Be("load",a);break;case"video":case"audio":for(s=0;s<es.length;s++)Be(es[s],a);break;case"source":Be("error",a);break;case"img":case"image":case"link":Be("error",a),Be("load",a);break;case"details":Be("toggle",a);break;case"input":lc(a,r),Be("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!r.multiple},Be("invalid",a);break;case"textarea":ic(a,r),Be("invalid",a)}fi(n,r),s=null;for(var i in r)if(r.hasOwnProperty(i)){var c=r[i];i==="children"?typeof c=="string"?a.textContent!==c&&(r.suppressHydrationWarning!==!0&&Xs(a.textContent,c,e),s=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(r.suppressHydrationWarning!==!0&&Xs(a.textContent,c,e),s=["children",""+c]):us.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Be("scroll",a)}switch(n){case"input":Os(a),rc(a,r,!0);break;case"textarea":Os(a),oc(a);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(a.onclick=Ll)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Od(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=i.createElement(n,{is:a.is}):(e=i.createElement(n),n==="select"&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,n),e[Jt]=t,e[ws]=a,mm(e,t,!1,!1),t.stateNode=e;e:{switch(i=pi(n,a),n){case"dialog":Be("cancel",e),Be("close",e),s=a;break;case"iframe":case"object":case"embed":Be("load",e),s=a;break;case"video":case"audio":for(s=0;s<es.length;s++)Be(es[s],e);s=a;break;case"source":Be("error",e),s=a;break;case"img":case"image":case"link":Be("error",e),Be("load",e),s=a;break;case"details":Be("toggle",e),s=a;break;case"input":lc(e,a),s=oi(e,a),Be("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=He({},a,{value:void 0}),Be("invalid",e);break;case"textarea":ic(e,a),s=ui(e,a),Be("invalid",e);break;default:s=a}fi(n,s),c=s;for(r in c)if(c.hasOwnProperty(r)){var d=c[r];r==="style"?Vd(e,d):r==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Ud(e,d)):r==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&ms(e,d):typeof d=="number"&&ms(e,""+d):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(us.hasOwnProperty(r)?d!=null&&r==="onScroll"&&Be("scroll",e):d!=null&&ro(e,r,d,i))}switch(n){case"input":Os(e),rc(e,a,!1);break;case"textarea":Os(e),oc(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Dn(a.value));break;case"select":e.multiple=!!a.multiple,r=a.value,r!=null?Ca(e,!!a.multiple,r,!1):a.defaultValue!=null&&Ca(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ll)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)pm(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(H(166));if(n=Yn(ks.current),Yn(an.current),Qs(t)){if(a=t.stateNode,n=t.memoizedProps,a[Jt]=t,(r=a.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:Xs(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xs(a.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[Jt]=t,t.stateNode=a}return pt(t),null;case 13:if(Oe(Ve),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&Lt!==null&&t.mode&1&&!(t.flags&128))Tu(),Da(),t.flags|=98560,r=!1;else if(r=Qs(t),a!==null&&a.dehydrated!==null){if(e===null){if(!r)throw Error(H(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(H(317));r[Jt]=t}else Da(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),r=!1}else Ht!==null&&(Yi(Ht),Ht=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ve.current&1?nt===0&&(nt=3):Uo())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return $a(),qi(e,t),e===null&&vs(t.stateNode.containerInfo),pt(t),null;case 10:return Co(t.type._context),pt(t),null;case 17:return _t(t.type)&&Dl(),pt(t),null;case 19:if(Oe(Ve),r=t.memoizedState,r===null)return pt(t),null;if(a=(t.flags&128)!==0,i=r.rendering,i===null)if(a)Ya(r,!1);else{if(nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Bl(e),i!==null){for(t.flags|=128,Ya(r,!1),a=i.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)r=n,e=a,r.flags&=14680066,i=r.alternate,i===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,r.type=i.type,e=i.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return qe(Ve,Ve.current&1|2),t.child}e=e.sibling}r.tail!==null&&Xe()>za&&(t.flags|=128,a=!0,Ya(r,!1),t.lanes=4194304)}else{if(!a)if(e=Bl(i),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ya(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!Ue)return pt(t),null}else 2*Xe()-r.renderingStartTime>za&&n!==1073741824&&(t.flags|=128,a=!0,Ya(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(n=r.last,n!==null?n.sibling=i:t.child=i,r.last=i)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Xe(),t.sibling=null,n=Ve.current,qe(Ve,a?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return Oo(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Tt&1073741824&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function Rp(e,t){switch(So(t),t.tag){case 1:return _t(t.type)&&Dl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $a(),Oe(Mt),Oe(gt),Ro(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Eo(t),null;case 13:if(Oe(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));Da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Ve),null;case 4:return $a(),null;case 10:return Co(t.type._context),null;case 22:case 23:return Oo(),null;case 24:return null;default:return null}}var el=!1,ht=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,se=null;function ja(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){Ye(e,t,a)}else n.current=null}function Bi(e,t,n){try{n()}catch(a){Ye(e,t,a)}}var Qc=!1;function Lp(e,t){if(ji=El,e=vu(),bo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var s=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var i=0,c=-1,d=-1,u=0,f=0,v=e,x=null;t:for(;;){for(var h;v!==n||s!==0&&v.nodeType!==3||(c=i+s),v!==r||a!==0&&v.nodeType!==3||(d=i+a),v.nodeType===3&&(i+=v.nodeValue.length),(h=v.firstChild)!==null;)x=v,v=h;for(;;){if(v===e)break t;if(x===n&&++u===s&&(c=i),x===r&&++f===a&&(d=i),(h=v.nextSibling)!==null)break;v=x,x=v.parentNode}v=h}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ni={focusedElem:e,selectionRange:n},El=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,y=w.memoizedState,b=t.stateNode,m=b.getSnapshotBeforeUpdate(t.elementType===t.type?N:Vt(t.type,N),y);b.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(g){Ye(t,t.return,g)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return w=Qc,Qc=!1,w}function is(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,r!==void 0&&Bi(t,n,r)}s=s.next}while(s!==a)}}function mr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function Oi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hm(e){var t=e.alternate;t!==null&&(e.alternate=null,hm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[ws],delete t[_i],delete t[hp],delete t[gp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gm(e){return e.tag===5||e.tag===3||e.tag===4}function Zc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ui(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ll));else if(a!==4&&(e=e.child,e!==null))for(Ui(e,t,n),e=e.sibling;e!==null;)Ui(e,t,n),e=e.sibling}function Gi(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Gi(e,t,n),e=e.sibling;e!==null;)Gi(e,t,n),e=e.sibling}var it=null,Wt=!1;function xn(e,t,n){for(n=n.child;n!==null;)xm(e,t,n),n=n.sibling}function xm(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(sr,n)}catch{}switch(n.tag){case 5:ht||ja(n,t);case 6:var a=it,s=Wt;it=null,xn(e,t,n),it=a,Wt=s,it!==null&&(Wt?(e=it,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(Wt?(e=it,n=n.stateNode,e.nodeType===8?Or(e.parentNode,n):e.nodeType===1&&Or(e,n),gs(e)):Or(it,n.stateNode));break;case 4:a=it,s=Wt,it=n.stateNode.containerInfo,Wt=!0,xn(e,t,n),it=a,Wt=s;break;case 0:case 11:case 14:case 15:if(!ht&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var r=s,i=r.destroy;r=r.tag,i!==void 0&&(r&2||r&4)&&Bi(n,t,i),s=s.next}while(s!==a)}xn(e,t,n);break;case 1:if(!ht&&(ja(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(c){Ye(n,t,c)}xn(e,t,n);break;case 21:xn(e,t,n);break;case 22:n.mode&1?(ht=(a=ht)||n.memoizedState!==null,xn(e,t,n),ht=a):xn(e,t,n);break;default:xn(e,t,n)}}function Jc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Tp),t.forEach(function(a){var s=Op.bind(null,e,a);n.has(a)||(n.add(a),a.then(s,s))})}}function Gt(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a];try{var r=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:it=c.stateNode,Wt=!1;break e;case 3:it=c.stateNode.containerInfo,Wt=!0;break e;case 4:it=c.stateNode.containerInfo,Wt=!0;break e}c=c.return}if(it===null)throw Error(H(160));xm(r,i,s),it=null,Wt=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(u){Ye(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ym(t,e),t=t.sibling}function ym(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),Qt(e),a&4){try{is(3,e,e.return),mr(3,e)}catch(N){Ye(e,e.return,N)}try{is(5,e,e.return)}catch(N){Ye(e,e.return,N)}}break;case 1:Gt(t,e),Qt(e),a&512&&n!==null&&ja(n,n.return);break;case 5:if(Gt(t,e),Qt(e),a&512&&n!==null&&ja(n,n.return),e.flags&32){var s=e.stateNode;try{ms(s,"")}catch(N){Ye(e,e.return,N)}}if(a&4&&(s=e.stateNode,s!=null)){var r=e.memoizedProps,i=n!==null?n.memoizedProps:r,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&r.type==="radio"&&r.name!=null&&qd(s,r),pi(c,i);var u=pi(c,r);for(i=0;i<d.length;i+=2){var f=d[i],v=d[i+1];f==="style"?Vd(s,v):f==="dangerouslySetInnerHTML"?Ud(s,v):f==="children"?ms(s,v):ro(s,f,v,u)}switch(c){case"input":ci(s,r);break;case"textarea":Bd(s,r);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var h=r.value;h!=null?Ca(s,!!r.multiple,h,!1):x!==!!r.multiple&&(r.defaultValue!=null?Ca(s,!!r.multiple,r.defaultValue,!0):Ca(s,!!r.multiple,r.multiple?[]:"",!1))}s[ws]=r}catch(N){Ye(e,e.return,N)}}break;case 6:if(Gt(t,e),Qt(e),a&4){if(e.stateNode===null)throw Error(H(162));s=e.stateNode,r=e.memoizedProps;try{s.nodeValue=r}catch(N){Ye(e,e.return,N)}}break;case 3:if(Gt(t,e),Qt(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{gs(t.containerInfo)}catch(N){Ye(e,e.return,N)}break;case 4:Gt(t,e),Qt(e);break;case 13:Gt(t,e),Qt(e),s=e.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(qo=Xe())),a&4&&Jc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ht=(u=ht)||f,Gt(t,e),ht=u):Gt(t,e),Qt(e),a&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(se=e,f=e.child;f!==null;){for(v=se=f;se!==null;){switch(x=se,h=x.child,x.tag){case 0:case 11:case 14:case 15:is(4,x,x.return);break;case 1:ja(x,x.return);var w=x.stateNode;if(typeof w.componentWillUnmount=="function"){a=x,n=x.return;try{t=a,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){Ye(a,n,N)}}break;case 5:ja(x,x.return);break;case 22:if(x.memoizedState!==null){td(v);continue}}h!==null?(h.return=x,se=h):td(v)}f=f.sibling}e:for(f=null,v=e;;){if(v.tag===5){if(f===null){f=v;try{s=v.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(c=v.stateNode,d=v.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Gd("display",i))}catch(N){Ye(e,e.return,N)}}}else if(v.tag===6){if(f===null)try{v.stateNode.nodeValue=u?"":v.memoizedProps}catch(N){Ye(e,e.return,N)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;f===v&&(f=null),v=v.return}f===v&&(f=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Gt(t,e),Qt(e),a&4&&Jc(e);break;case 21:break;default:Gt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gm(n)){var a=n;break e}n=n.return}throw Error(H(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(ms(s,""),a.flags&=-33);var r=Zc(e);Gi(e,r,s);break;case 3:case 4:var i=a.stateNode.containerInfo,c=Zc(e);Ui(e,c,i);break;default:throw Error(H(161))}}catch(d){Ye(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dp(e,t,n){se=e,vm(e)}function vm(e,t,n){for(var a=(e.mode&1)!==0;se!==null;){var s=se,r=s.child;if(s.tag===22&&a){var i=s.memoizedState!==null||el;if(!i){var c=s.alternate,d=c!==null&&c.memoizedState!==null||ht;c=el;var u=ht;if(el=i,(ht=d)&&!u)for(se=s;se!==null;)i=se,d=i.child,i.tag===22&&i.memoizedState!==null?nd(s):d!==null?(d.return=i,se=d):nd(s);for(;r!==null;)se=r,vm(r),r=r.sibling;se=s,el=c,ht=u}ed(e)}else s.subtreeFlags&8772&&r!==null?(r.return=s,se=r):ed(e)}}function ed(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||mr(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!ht)if(n===null)a.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Vt(t.type,n.memoizedProps);a.componentDidUpdate(s,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&zc(t,r,a);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zc(t,i,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var v=f.dehydrated;v!==null&&gs(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}ht||t.flags&512&&Oi(t)}catch(x){Ye(t,t.return,x)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function td(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function nd(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mr(4,t)}catch(d){Ye(t,n,d)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(d){Ye(t,s,d)}}var r=t.return;try{Oi(t)}catch(d){Ye(t,r,d)}break;case 5:var i=t.return;try{Oi(t)}catch(d){Ye(t,i,d)}}}catch(d){Ye(t,t.return,d)}if(t===e){se=null;break}var c=t.sibling;if(c!==null){c.return=t.return,se=c;break}se=t.return}}var Ip=Math.ceil,Gl=hn.ReactCurrentDispatcher,zo=hn.ReactCurrentOwner,Bt=hn.ReactCurrentBatchConfig,Re=0,st=null,Je=null,ct=0,Tt=0,Na=An(0),nt=0,Ms=null,aa=0,fr=0,Fo=0,os=null,Nt=null,qo=0,za=1/0,sn=null,Vl=!1,Vi=null,Rn=null,tl=!1,jn=null,Wl=0,cs=0,Wi=null,vl=-1,bl=0;function yt(){return Re&6?Xe():vl!==-1?vl:vl=Xe()}function Tn(e){return e.mode&1?Re&2&&ct!==0?ct&-ct:yp.transition!==null?(bl===0&&(bl=au()),bl):(e=Ie,e!==0||(e=window.event,e=e===void 0?16:du(e.type)),e):1}function Kt(e,t,n,a){if(50<cs)throw cs=0,Wi=null,Error(H(185));Rs(e,n,a),(!(Re&2)||e!==st)&&(e===st&&(!(Re&2)&&(fr|=n),nt===4&&Sn(e,ct)),Pt(e,a),n===1&&Re===0&&!(t.mode&1)&&(za=Xe()+500,cr&&zn()))}function Pt(e,t){var n=e.callbackNode;yf(e,t);var a=Pl(e,e===st?ct:0);if(a===0)n!==null&&uc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&uc(n),t===1)e.tag===0?xp(ad.bind(null,e)):Pu(ad.bind(null,e)),fp(function(){!(Re&6)&&zn()}),n=null;else{switch(su(a)){case 1:n=mo;break;case 4:n=tu;break;case 16:n=_l;break;case 536870912:n=nu;break;default:n=_l}n=Mm(n,bm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bm(e,t){if(vl=-1,bl=0,Re&6)throw Error(H(327));var n=e.callbackNode;if(Ra()&&e.callbackNode!==n)return null;var a=Pl(e,e===st?ct:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Hl(e,a);else{t=a;var s=Re;Re|=2;var r=Sm();(st!==e||ct!==t)&&(sn=null,za=Xe()+500,Zn(e,t));do try{zp();break}catch(c){wm(e,c)}while(!0);No(),Gl.current=r,Re=s,Je!==null?t=0:(st=null,ct=0,t=nt)}if(t!==0){if(t===2&&(s=vi(e),s!==0&&(a=s,t=Hi(e,s))),t===1)throw n=Ms,Zn(e,0),Sn(e,a),Pt(e,Xe()),n;if(t===6)Sn(e,a);else{if(s=e.current.alternate,!(a&30)&&!$p(s)&&(t=Hl(e,a),t===2&&(r=vi(e),r!==0&&(a=r,t=Hi(e,r))),t===1))throw n=Ms,Zn(e,0),Sn(e,a),Pt(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(H(345));case 2:Un(e,Nt,sn);break;case 3:if(Sn(e,a),(a&130023424)===a&&(t=qo+500-Xe(),10<t)){if(Pl(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){yt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Mi(Un.bind(null,e,Nt,sn),t);break}Un(e,Nt,sn);break;case 4:if(Sn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var i=31-Yt(a);r=1<<i,i=t[i],i>s&&(s=i),a&=~r}if(a=s,a=Xe()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ip(a/1960))-a,10<a){e.timeoutHandle=Mi(Un.bind(null,e,Nt,sn),a);break}Un(e,Nt,sn);break;case 5:Un(e,Nt,sn);break;default:throw Error(H(329))}}}return Pt(e,Xe()),e.callbackNode===n?bm.bind(null,e):null}function Hi(e,t){var n=os;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=Hl(e,t),e!==2&&(t=Nt,Nt=n,t!==null&&Yi(t)),e}function Yi(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function $p(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!Xt(r(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sn(e,t){for(t&=~Fo,t&=~fr,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yt(t),a=1<<n;e[n]=-1,t&=~a}}function ad(e){if(Re&6)throw Error(H(327));Ra();var t=Pl(e,0);if(!(t&1))return Pt(e,Xe()),null;var n=Hl(e,t);if(e.tag!==0&&n===2){var a=vi(e);a!==0&&(t=a,n=Hi(e,a))}if(n===1)throw n=Ms,Zn(e,0),Sn(e,t),Pt(e,Xe()),n;if(n===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Un(e,Nt,sn),Pt(e,Xe()),null}function Bo(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(za=Xe()+500,cr&&zn())}}function sa(e){jn!==null&&jn.tag===0&&!(Re&6)&&Ra();var t=Re;Re|=1;var n=Bt.transition,a=Ie;try{if(Bt.transition=null,Ie=1,e)return e()}finally{Ie=a,Bt.transition=n,Re=t,!(Re&6)&&zn()}}function Oo(){Tt=Na.current,Oe(Na)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mp(n)),Je!==null)for(n=Je.return;n!==null;){var a=n;switch(So(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Dl();break;case 3:$a(),Oe(Mt),Oe(gt),Ro();break;case 5:Eo(a);break;case 4:$a();break;case 13:Oe(Ve);break;case 19:Oe(Ve);break;case 10:Co(a.type._context);break;case 22:case 23:Oo()}n=n.return}if(st=e,Je=e=Ln(e.current,null),ct=Tt=t,nt=0,Ms=null,Fo=fr=aa=0,Nt=os=null,Hn!==null){for(t=0;t<Hn.length;t++)if(n=Hn[t],a=n.interleaved,a!==null){n.interleaved=null;var s=a.next,r=n.pending;if(r!==null){var i=r.next;r.next=s,a.next=i}n.pending=a}Hn=null}return e}function wm(e,t){do{var n=Je;try{if(No(),gl.current=Ul,Ol){for(var a=We.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}Ol=!1}if(na=0,at=tt=We=null,rs=!1,js=0,zo.current=null,n===null||n.return===null){nt=1,Ms=t,Je=null;break}e:{var r=e,i=n.return,c=n,d=t;if(t=ct,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,f=c,v=f.tag;if(!(f.mode&1)&&(v===0||v===11||v===15)){var x=f.alternate;x?(f.updateQueue=x.updateQueue,f.memoizedState=x.memoizedState,f.lanes=x.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=Gc(i);if(h!==null){h.flags&=-257,Vc(h,i,c,r,t),h.mode&1&&Uc(r,u,t),t=h,d=u;var w=t.updateQueue;if(w===null){var N=new Set;N.add(d),t.updateQueue=N}else w.add(d);break e}else{if(!(t&1)){Uc(r,u,t),Uo();break e}d=Error(H(426))}}else if(Ue&&c.mode&1){var y=Gc(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Vc(y,i,c,r,t),ko(Aa(d,c));break e}}r=d=Aa(d,c),nt!==4&&(nt=2),os===null?os=[r]:os.push(r),r=i;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var b=sm(r,d,t);Ac(r,b);break e;case 1:c=d;var m=r.type,p=r.stateNode;if(!(r.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Rn===null||!Rn.has(p)))){r.flags|=65536,t&=-t,r.lanes|=t;var g=lm(r,c,t);Ac(r,g);break e}}r=r.return}while(r!==null)}jm(n)}catch(S){t=S,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Sm(){var e=Gl.current;return Gl.current=Ul,e===null?Ul:e}function Uo(){(nt===0||nt===3||nt===2)&&(nt=4),st===null||!(aa&268435455)&&!(fr&268435455)||Sn(st,ct)}function Hl(e,t){var n=Re;Re|=2;var a=Sm();(st!==e||ct!==t)&&(sn=null,Zn(e,t));do try{Ap();break}catch(s){wm(e,s)}while(!0);if(No(),Re=n,Gl.current=a,Je!==null)throw Error(H(261));return st=null,ct=0,nt}function Ap(){for(;Je!==null;)km(Je)}function zp(){for(;Je!==null&&!cf();)km(Je)}function km(e){var t=Cm(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?jm(e):Je=t,zo.current=null}function jm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Rp(n,t),n!==null){n.flags&=32767,Je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nt=6,Je=null;return}}else if(n=Ep(n,t,Tt),n!==null){Je=n;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);nt===0&&(nt=5)}function Un(e,t,n){var a=Ie,s=Bt.transition;try{Bt.transition=null,Ie=1,Fp(e,t,n,a)}finally{Bt.transition=s,Ie=a}return null}function Fp(e,t,n,a){do Ra();while(jn!==null);if(Re&6)throw Error(H(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(vf(e,r),e===st&&(Je=st=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tl||(tl=!0,Mm(_l,function(){return Ra(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=Bt.transition,Bt.transition=null;var i=Ie;Ie=1;var c=Re;Re|=4,zo.current=null,Lp(e,n),ym(n,e),lp(Ni),El=!!ji,Ni=ji=null,e.current=n,Dp(n),df(),Re=c,Ie=i,Bt.transition=r}else e.current=n;if(tl&&(tl=!1,jn=e,Wl=s),r=e.pendingLanes,r===0&&(Rn=null),ff(n.stateNode),Pt(e,Xe()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],a(s.value,{componentStack:s.stack,digest:s.digest});if(Vl)throw Vl=!1,e=Vi,Vi=null,e;return Wl&1&&e.tag!==0&&Ra(),r=e.pendingLanes,r&1?e===Wi?cs++:(cs=0,Wi=e):cs=0,zn(),null}function Ra(){if(jn!==null){var e=su(Wl),t=Bt.transition,n=Ie;try{if(Bt.transition=null,Ie=16>e?16:e,jn===null)var a=!1;else{if(e=jn,jn=null,Wl=0,Re&6)throw Error(H(331));var s=Re;for(Re|=4,se=e.current;se!==null;){var r=se,i=r.child;if(se.flags&16){var c=r.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(se=u;se!==null;){var f=se;switch(f.tag){case 0:case 11:case 15:is(8,f,r)}var v=f.child;if(v!==null)v.return=f,se=v;else for(;se!==null;){f=se;var x=f.sibling,h=f.return;if(hm(f),f===u){se=null;break}if(x!==null){x.return=h,se=x;break}se=h}}}var w=r.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var y=N.sibling;N.sibling=null,N=y}while(N!==null)}}se=r}}if(r.subtreeFlags&2064&&i!==null)i.return=r,se=i;else e:for(;se!==null;){if(r=se,r.flags&2048)switch(r.tag){case 0:case 11:case 15:is(9,r,r.return)}var b=r.sibling;if(b!==null){b.return=r.return,se=b;break e}se=r.return}}var m=e.current;for(se=m;se!==null;){i=se;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,se=p;else e:for(i=m;se!==null;){if(c=se,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:mr(9,c)}}catch(S){Ye(c,c.return,S)}if(c===i){se=null;break e}var g=c.sibling;if(g!==null){g.return=c.return,se=g;break e}se=c.return}}if(Re=s,zn(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(sr,e)}catch{}a=!0}return a}finally{Ie=n,Bt.transition=t}}return!1}function sd(e,t,n){t=Aa(n,t),t=sm(e,t,1),e=En(e,t,1),t=yt(),e!==null&&(Rs(e,1,t),Pt(e,t))}function Ye(e,t,n){if(e.tag===3)sd(e,e,n);else for(;t!==null;){if(t.tag===3){sd(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Rn===null||!Rn.has(a))){e=Aa(n,e),e=lm(t,e,1),t=En(t,e,1),e=yt(),t!==null&&(Rs(t,1,e),Pt(t,e));break}}t=t.return}}function qp(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=yt(),e.pingedLanes|=e.suspendedLanes&n,st===e&&(ct&n)===n&&(nt===4||nt===3&&(ct&130023424)===ct&&500>Xe()-qo?Zn(e,0):Fo|=n),Pt(e,t)}function Nm(e,t){t===0&&(e.mode&1?(t=Vs,Vs<<=1,!(Vs&130023424)&&(Vs=4194304)):t=1);var n=yt();e=mn(e,t),e!==null&&(Rs(e,t,n),Pt(e,n))}function Bp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Nm(e,n)}function Op(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(H(314))}a!==null&&a.delete(t),Nm(e,n)}var Cm;Cm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)Ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ct=!1,Pp(e,t,n);Ct=!!(e.flags&131072)}else Ct=!1,Ue&&t.flags&1048576&&Eu(t,Al,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;yl(e,t),e=t.pendingProps;var s=La(t,gt.current);Ea(t,n),s=Lo(null,t,a,e,s,n);var r=Do();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_t(a)?(r=!0,Il(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_o(t),s.updater=ur,t.stateNode=s,s._reactInternals=t,Di(t,a,e,n),t=Ai(null,t,a,!0,r,n)):(t.tag=0,Ue&&r&&wo(t),xt(null,t,s,n),t=t.child),t;case 16:a=t.elementType;e:{switch(yl(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=Gp(a),e=Vt(a,e),s){case 0:t=$i(null,t,a,e,n);break e;case 1:t=Yc(null,t,a,e,n);break e;case 11:t=Wc(null,t,a,e,n);break e;case 14:t=Hc(null,t,a,Vt(a.type,e),n);break e}throw Error(H(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Vt(a,s),$i(e,t,a,s,n);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Vt(a,s),Yc(e,t,a,s,n);case 3:e:{if(cm(t),e===null)throw Error(H(387));a=t.pendingProps,r=t.memoizedState,s=r.element,$u(e,t),ql(t,a,null,n);var i=t.memoizedState;if(a=i.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=Aa(Error(H(423)),t),t=Kc(e,t,a,n,s);break e}else if(a!==s){s=Aa(Error(H(424)),t),t=Kc(e,t,a,n,s);break e}else for(Lt=Pn(t.stateNode.containerInfo.firstChild),Dt=t,Ue=!0,Ht=null,n=Du(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Da(),a===s){t=fn(e,t,n);break e}xt(e,t,a,n)}t=t.child}return t;case 5:return Au(t),e===null&&Ri(t),a=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,i=s.children,Ci(a,s)?i=null:r!==null&&Ci(a,r)&&(t.flags|=32),om(e,t),xt(e,t,i,n),t.child;case 6:return e===null&&Ri(t),null;case 13:return dm(e,t,n);case 4:return Po(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Ia(t,null,a,n):xt(e,t,a,n),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Vt(a,s),Wc(e,t,a,s,n);case 7:return xt(e,t,t.pendingProps,n),t.child;case 8:return xt(e,t,t.pendingProps.children,n),t.child;case 12:return xt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,r=t.memoizedProps,i=s.value,qe(zl,a._currentValue),a._currentValue=i,r!==null)if(Xt(r.value,i)){if(r.children===s.children&&!Mt.current){t=fn(e,t,n);break e}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var c=r.dependencies;if(c!==null){i=r.child;for(var d=c.firstContext;d!==null;){if(d.context===a){if(r.tag===1){d=cn(-1,n&-n),d.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?d.next=d:(d.next=f.next,f.next=d),u.pending=d}}r.lanes|=n,d=r.alternate,d!==null&&(d.lanes|=n),Ti(r.return,n,t),c.lanes|=n;break}d=d.next}}else if(r.tag===10)i=r.type===t.type?null:r.child;else if(r.tag===18){if(i=r.return,i===null)throw Error(H(341));i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ti(i,n,t),i=r.sibling}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===t){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}xt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,Ea(t,n),s=Ot(s),a=a(s),t.flags|=1,xt(e,t,a,n),t.child;case 14:return a=t.type,s=Vt(a,t.pendingProps),s=Vt(a.type,s),Hc(e,t,a,s,n);case 15:return rm(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:Vt(a,s),yl(e,t),t.tag=1,_t(a)?(e=!0,Il(t)):e=!1,Ea(t,n),am(t,a,s),Di(t,a,s,n),Ai(null,t,a,!0,e,n);case 19:return um(e,t,n);case 22:return im(e,t,n)}throw Error(H(156,t.tag))};function Mm(e,t){return eu(e,t)}function Up(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,n,a){return new Up(e,t,n,a)}function Go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gp(e){if(typeof e=="function")return Go(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oo)return 11;if(e===co)return 14}return 2}function Ln(e,t){var n=e.alternate;return n===null?(n=qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function wl(e,t,n,a,s,r){var i=2;if(a=e,typeof e=="function")Go(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ha:return Jn(n.children,s,r,t);case io:i=8,s|=8;break;case si:return e=qt(12,n,t,s|2),e.elementType=si,e.lanes=r,e;case li:return e=qt(13,n,t,s),e.elementType=li,e.lanes=r,e;case ri:return e=qt(19,n,t,s),e.elementType=ri,e.lanes=r,e;case Ad:return pr(n,s,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Id:i=10;break e;case $d:i=9;break e;case oo:i=11;break e;case co:i=14;break e;case yn:i=16,a=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=qt(i,n,t,s),t.elementType=e,t.type=a,t.lanes=r,t}function Jn(e,t,n,a){return e=qt(7,e,a,t),e.lanes=n,e}function pr(e,t,n,a){return e=qt(22,e,a,t),e.elementType=Ad,e.lanes=n,e.stateNode={isHidden:!1},e}function Xr(e,t,n){return e=qt(6,e,null,t),e.lanes=n,e}function Qr(e,t,n){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vp(e,t,n,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rr(0),this.expirationTimes=Rr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vo(e,t,n,a,s,r,i,c,d){return e=new Vp(e,t,n,c,d),t===1?(t=1,r===!0&&(t|=8)):t=0,r=qt(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_o(r),e}function Wp(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pa,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function _m(e){if(!e)return In;e=e._reactInternals;e:{if(ia(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var n=e.type;if(_t(n))return _u(e,n,t)}return t}function Pm(e,t,n,a,s,r,i,c,d){return e=Vo(n,a,!0,e,s,r,i,c,d),e.context=_m(null),n=e.current,a=yt(),s=Tn(n),r=cn(a,s),r.callback=t??null,En(n,r,s),e.current.lanes=s,Rs(e,s,a),Pt(e,a),e}function hr(e,t,n,a){var s=t.current,r=yt(),i=Tn(s);return n=_m(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(r,i),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=En(s,t,i),e!==null&&(Kt(e,s,i,r),hl(e,s,i)),i}function Yl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ld(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wo(e,t){ld(e,t),(e=e.alternate)&&ld(e,t)}function Hp(){return null}var Em=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ho(e){this._internalRoot=e}gr.prototype.render=Ho.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));hr(e,t,null,null)};gr.prototype.unmount=Ho.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sa(function(){hr(null,e,null,null)}),t[un]=null}};function gr(e){this._internalRoot=e}gr.prototype.unstable_scheduleHydration=function(e){if(e){var t=iu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wn.length&&t!==0&&t<wn[n].priority;n++);wn.splice(n,0,e),n===0&&cu(e)}};function Yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rd(){}function Yp(e,t,n,a,s){if(s){if(typeof a=="function"){var r=a;a=function(){var u=Yl(i);r.call(u)}}var i=Pm(t,a,e,0,null,!1,!1,"",rd);return e._reactRootContainer=i,e[un]=i.current,vs(e.nodeType===8?e.parentNode:e),sa(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var c=a;a=function(){var u=Yl(d);c.call(u)}}var d=Vo(e,0,!1,null,null,!1,!1,"",rd);return e._reactRootContainer=d,e[un]=d.current,vs(e.nodeType===8?e.parentNode:e),sa(function(){hr(t,d,n,a)}),d}function yr(e,t,n,a,s){var r=n._reactRootContainer;if(r){var i=r;if(typeof s=="function"){var c=s;s=function(){var d=Yl(i);c.call(d)}}hr(t,i,e,s)}else i=Yp(n,t,e,s,a);return Yl(i)}lu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ja(t.pendingLanes);n!==0&&(fo(t,n|1),Pt(t,Xe()),!(Re&6)&&(za=Xe()+500,zn()))}break;case 13:sa(function(){var a=mn(e,1);if(a!==null){var s=yt();Kt(a,e,1,s)}}),Wo(e,1)}};po=function(e){if(e.tag===13){var t=mn(e,134217728);if(t!==null){var n=yt();Kt(t,e,134217728,n)}Wo(e,134217728)}};ru=function(e){if(e.tag===13){var t=Tn(e),n=mn(e,t);if(n!==null){var a=yt();Kt(n,e,t,a)}Wo(e,t)}};iu=function(){return Ie};ou=function(e,t){var n=Ie;try{return Ie=e,t()}finally{Ie=n}};gi=function(e,t,n){switch(t){case"input":if(ci(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=or(a);if(!s)throw Error(H(90));Fd(a),ci(a,s)}}}break;case"textarea":Bd(e,n);break;case"select":t=n.value,t!=null&&Ca(e,!!n.multiple,t,!1)}};Yd=Bo;Kd=sa;var Kp={usingClientEntryPoint:!1,Events:[Ls,va,or,Wd,Hd,Bo]},Ka={findFiberByHostInstance:Wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xp={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zd(e),e===null?null:e.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||Hp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{sr=nl.inject(Xp),nn=nl}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kp;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yo(t))throw Error(H(200));return Wp(e,t,null,n)};$t.createRoot=function(e,t){if(!Yo(e))throw Error(H(299));var n=!1,a="",s=Em;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Vo(e,1,!1,null,null,n,!1,a,s),e[un]=t.current,vs(e.nodeType===8?e.parentNode:e),new Ho(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=Zd(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return sa(e)};$t.hydrate=function(e,t,n){if(!xr(t))throw Error(H(200));return yr(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!Yo(e))throw Error(H(405));var a=n!=null&&n.hydratedSources||null,s=!1,r="",i=Em;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Pm(t,null,e,1,n??null,s,!1,r,i),e[un]=t.current,vs(e),a)for(e=0;e<a.length;e++)n=a[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new gr(t)};$t.render=function(e,t,n){if(!xr(t))throw Error(H(200));return yr(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!xr(e))throw Error(H(40));return e._reactRootContainer?(sa(function(){yr(null,null,e,!1,function(){e._reactRootContainer=null,e[un]=null})}),!0):!1};$t.unstable_batchedUpdates=Bo;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!xr(n))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return yr(e,t,n,!1,a)};$t.version="18.3.1-next-f1338f8080-20240426";function Rm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rm)}catch(e){console.error(e)}}Rm(),Rd.exports=$t;var Qp=Rd.exports,Tm,id=Qp;Tm=id.createRoot,id.hydrateRoot;function vr(){const e={},t=[],n=[{id:"combat",name:"Combat Mastery",description:"Damage, attack speed, critical strikes, and attack modifiers",color:"#ef4444",position:{x:300,y:-200},radius:250},{id:"defense",name:"Defensive Arts",description:"Health, armor, resistances, and survival",color:"#3b82f6",position:{x:-300,y:-200},radius:250},{id:"utility",name:"Utility & Wealth",description:"Experience gain, gold find, magic find, and loot bonuses",color:"#10b981",position:{x:300,y:200},radius:250},{id:"magic",name:"Arcane Arts",description:"Spell damage, mana, elemental effects, and magical abilities",color:"#8b5cf6",position:{x:-300,y:200},radius:250},{id:"mastery",name:"Ultimate Mastery",description:"Endgame keystones and transcendent abilities",color:"#f59e0b",position:{x:0,y:0},radius:150}],a={id:"start",name:"Origin",description:"The beginning of your journey",type:"travel",position:{x:0,y:0},connections:["str_path_1","dex_path_1","int_path_1","vit_path_1"],requirements:[],stats:{},cost:0,maxRank:1,tier:1,archetype:"mastery"};return e[a.id]=a,Zp(e),Jp(e),eh(e),th(e),nh(e,t),ah(e,t),sh(e,t),lh(e,t),dh(e,t),uh(e,t),mh(e,t),fh(e,t),ph(e),{nodes:e,startingNode:"start",clusters:t,archetypes:n}}function Zp(e){[{id:"str_path_1",name:"Might",description:"+5 Strength",type:"travel",position:{x:100,y:0},connections:["start","str_small_1"],requirements:["start"],stats:{strength:5},tier:1},{id:"str_small_1",name:"Physical Power",description:"+3% increased damage",type:"small",position:{x:150,y:0},connections:["str_path_1","str_notable_1"],requirements:["str_path_1"],stats:{damage:.03},tier:1},{id:"str_notable_1",name:"Berserker's Rage",description:"+25% increased damage, +50 health",type:"notable",position:{x:200,y:0},connections:["str_small_1","str_path_2"],requirements:["str_small_1"],stats:{damage:.25,health:50},tier:1},{id:"str_path_2",name:"Fortitude",description:"+8 Strength",type:"travel",position:{x:250,y:0},connections:["str_notable_1","str_small_2"],requirements:["str_notable_1"],stats:{strength:8},tier:2},{id:"str_small_2",name:"Weapon Mastery",description:"+5% attack speed",type:"small",position:{x:300,y:0},connections:["str_path_2","str_notable_2"],requirements:["str_path_2"],stats:{attackSpeed:.05},tier:2},{id:"str_notable_2",name:"Devastating Blows",description:"+50% critical strike damage, +10% critical chance",type:"notable",position:{x:350,y:0},connections:["str_small_2","str_path_3"],requirements:["str_small_2"],stats:{critChance:.1},skillModifiers:[{skillId:"all",property:"criticalDamage",value:.5,type:"additive"}],tier:2},{id:"str_path_3",name:"Warrior's Resolve",description:"+12 Strength",type:"travel",position:{x:400,y:0},connections:["str_notable_2","str_small_3"],requirements:["str_notable_2"],stats:{strength:12},tier:3},{id:"str_small_3",name:"Brutal Efficiency",description:"+8% damage, +3% attack speed",type:"small",position:{x:450,y:0},connections:["str_path_3","str_notable_3"],requirements:["str_path_3"],stats:{damage:.08,attackSpeed:.03},tier:3},{id:"str_notable_3",name:"Unstoppable Force",description:"+100% damage, +100 health, +5% life steal",type:"notable",position:{x:500,y:0},connections:["str_small_3","str_keystone_1"],requirements:["str_small_3"],stats:{damage:1,health:100,lifeSteal:.05},tier:3},{id:"str_keystone_1",name:"Avatar of Strength",description:"+20 Strength, +200% damage, +200 health, but -50% attack speed",type:"keystone",position:{x:550,y:0},connections:["str_notable_3","str_mastery_path"],requirements:["str_notable_3"],stats:{strength:20,damage:2,health:200,attackSpeed:-.5},tier:4},{id:"str_mastery_path",name:"Path to Mastery",description:"+15 Strength",type:"travel",position:{x:600,y:0},connections:["str_keystone_1","str_mastery_1"],requirements:["str_keystone_1"],stats:{strength:15},tier:5},{id:"str_mastery_1",name:"Strength Mastery I",description:"+25 Strength, +150% damage",type:"mastery",position:{x:650,y:0},connections:["str_mastery_path","str_mastery_2"],requirements:["str_mastery_path"],stats:{strength:25,damage:1.5},tier:5},{id:"str_mastery_2",name:"Strength Mastery II",description:"+35 Strength, +250% damage, +10% life steal",type:"mastery",position:{x:700,y:0},connections:["str_mastery_1"],requirements:["str_mastery_1"],stats:{strength:35,damage:2.5,lifeSteal:.1},tier:6}].forEach(n=>{const a={...n,cost:wt(n.type,n.tier||1),maxRank:1,skillModifiers:n.skillModifiers};e[a.id]=a})}function Jp(e){[{id:"dex_path_1",name:"Agility",description:"+5 Dexterity",type:"travel",position:{x:0,y:100},connections:["start","dex_small_1"],requirements:["start"],stats:{dexterity:5},tier:1},{id:"dex_small_1",name:"Swift Strikes",description:"+5% attack speed",type:"small",position:{x:0,y:150},connections:["dex_path_1","dex_notable_1"],requirements:["dex_path_1"],stats:{attackSpeed:.05},tier:1},{id:"dex_notable_1",name:"Evasion Training",description:"+15% dodge chance, +10% attack speed",type:"notable",position:{x:0,y:200},connections:["dex_small_1","dex_path_2"],requirements:["dex_small_1"],stats:{dodgeChance:.15,attackSpeed:.1},tier:1},{id:"dex_path_2",name:"Precision",description:"+8 Dexterity",type:"travel",position:{x:0,y:250},connections:["dex_notable_1","dex_small_2"],requirements:["dex_notable_1"],stats:{dexterity:8},tier:2},{id:"dex_small_2",name:"Nimble Fighter",description:"+3% dodge chance, +3% critical chance",type:"small",position:{x:0,y:300},connections:["dex_path_2","dex_notable_2"],requirements:["dex_path_2"],stats:{dodgeChance:.03,critChance:.03},tier:2},{id:"dex_notable_2",name:"Shadow Dancer",description:"+25% dodge chance, +15% attack speed, +10% critical chance",type:"notable",position:{x:0,y:350},connections:["dex_small_2","dex_path_3"],requirements:["dex_small_2"],stats:{dodgeChance:.25,attackSpeed:.15,critChance:.1},tier:2},{id:"dex_path_3",name:"Master Assassin",description:"+12 Dexterity",type:"travel",position:{x:0,y:400},connections:["dex_notable_2","dex_small_3"],requirements:["dex_notable_2"],stats:{dexterity:12},tier:3},{id:"dex_small_3",name:"Lethal Precision",description:"+12% critical chance, +8% attack speed",type:"small",position:{x:0,y:450},connections:["dex_path_3","dex_notable_3"],requirements:["dex_path_3"],stats:{critChance:.12,attackSpeed:.08},tier:3},{id:"dex_notable_3",name:"Perfect Balance",description:"+40% dodge chance, +25% critical chance, +20% attack speed",type:"notable",position:{x:0,y:500},connections:["dex_small_3","dex_keystone_1"],requirements:["dex_small_3"],stats:{dodgeChance:.4,critChance:.25,attackSpeed:.2},tier:3},{id:"dex_keystone_1",name:"Avatar of Dexterity",description:"+20 Dexterity, +75% dodge chance, +50% critical chance, but -25% damage",type:"keystone",position:{x:0,y:550},connections:["dex_notable_3","dex_mastery_path"],requirements:["dex_notable_3"],stats:{dexterity:20,dodgeChance:.75,critChance:.5,damage:-.25},tier:4},{id:"dex_mastery_path",name:"Path to Mastery",description:"+15 Dexterity",type:"travel",position:{x:0,y:600},connections:["dex_keystone_1","dex_mastery_1"],requirements:["dex_keystone_1"],stats:{dexterity:15},tier:5},{id:"dex_mastery_1",name:"Dexterity Mastery I",description:"+25 Dexterity, +100% critical chance",type:"mastery",position:{x:0,y:650},connections:["dex_mastery_path","dex_mastery_2"],requirements:["dex_mastery_path"],stats:{dexterity:25,critChance:1},tier:5},{id:"dex_mastery_2",name:"Dexterity Mastery II",description:"+35 Dexterity, +150% critical chance, +50% attack speed",type:"mastery",position:{x:0,y:700},connections:["dex_mastery_1"],requirements:["dex_mastery_1"],stats:{dexterity:35,critChance:1.5,attackSpeed:.5},tier:6}].forEach(n=>{const a={...n,cost:wt(n.type,n.tier||1),maxRank:1};e[a.id]=a})}function eh(e){[{id:"int_path_1",name:"Wisdom",description:"+5 Intelligence",type:"travel",position:{x:-100,y:0},connections:["start","int_small_1"],requirements:["start"],stats:{intelligence:5},tier:1},{id:"int_small_1",name:"Arcane Knowledge",description:"+25 mana, +0.5 mana regeneration",type:"small",position:{x:-150,y:0},connections:["int_path_1","int_notable_1"],requirements:["int_path_1"],stats:{mana:25,manaRegen:.5},tier:1},{id:"int_notable_1",name:"Spell Power",description:"+20% spell damage, +50 mana",type:"notable",position:{x:-200,y:0},connections:["int_small_1","int_path_2"],requirements:["int_small_1"],stats:{mana:50},skillModifiers:[{skillId:"fireball",property:"damage",value:.2,type:"additive"},{skillId:"lightning_bolt",property:"damage",value:.2,type:"additive"},{skillId:"ice_shard",property:"damage",value:.2,type:"additive"}],tier:1},{id:"int_path_2",name:"Scholarly Pursuit",description:"+8 Intelligence",type:"travel",position:{x:-250,y:0},connections:["int_notable_1","int_small_2"],requirements:["int_notable_1"],stats:{intelligence:8},tier:2},{id:"int_small_2",name:"Mana Efficiency",description:"+1.0 mana regeneration, -10% mana costs",type:"small",position:{x:-300,y:0},connections:["int_path_2","int_notable_2"],requirements:["int_path_2"],stats:{manaRegen:1},skillModifiers:[{skillId:"all",property:"manaCost",value:-.1,type:"additive"}],tier:2},{id:"int_notable_2",name:"Elemental Convergence",description:"+50% spell damage, +50% area of effect for spells",type:"notable",position:{x:-350,y:0},connections:["int_small_2","int_path_3"],requirements:["int_small_2"],stats:{},skillModifiers:[{skillId:"fireball",property:"damage",value:.5,type:"additive"},{skillId:"lightning_bolt",property:"damage",value:.5,type:"additive"},{skillId:"ice_shard",property:"damage",value:.5,type:"additive"},{skillId:"fireball",property:"area",value:.5,type:"additive"},{skillId:"lightning_bolt",property:"area",value:.5,type:"additive"},{skillId:"ice_shard",property:"area",value:.5,type:"additive"}],tier:2},{id:"int_path_3",name:"Archmage's Path",description:"+12 Intelligence",type:"travel",position:{x:-400,y:0},connections:["int_notable_2","int_small_3"],requirements:["int_notable_2"],stats:{intelligence:12},tier:3},{id:"int_small_3",name:"Spell Mastery",description:"+100% spell damage, +2.0 mana regeneration",type:"small",position:{x:-450,y:0},connections:["int_path_3","int_notable_3"],requirements:["int_path_3"],stats:{manaRegen:2},skillModifiers:[{skillId:"all",property:"damage",value:1,type:"additive"}],tier:3},{id:"int_notable_3",name:"Elemental Mastery",description:"+200% spell damage, +100% area of effect, -25% mana costs",type:"notable",position:{x:-500,y:0},connections:["int_small_3","int_keystone_1"],requirements:["int_small_3"],stats:{},skillModifiers:[{skillId:"all",property:"damage",value:2,type:"additive"},{skillId:"all",property:"area",value:1,type:"additive"},{skillId:"all",property:"manaCost",value:-.25,type:"additive"}],tier:3},{id:"int_keystone_1",name:"Avatar of Intelligence",description:"+20 Intelligence, +500% spell damage, +200 mana, but +50% mana costs",type:"keystone",position:{x:-550,y:0},connections:["int_notable_3","int_mastery_path"],requirements:["int_notable_3"],stats:{intelligence:20,mana:200},skillModifiers:[{skillId:"all",property:"damage",value:5,type:"additive"},{skillId:"all",property:"manaCost",value:.5,type:"additive"}],tier:4},{id:"int_mastery_path",name:"Path to Mastery",description:"+15 Intelligence",type:"travel",position:{x:-600,y:0},connections:["int_keystone_1","int_mastery_1"],requirements:["int_keystone_1"],stats:{intelligence:15},tier:5},{id:"int_mastery_1",name:"Intelligence Mastery I",description:"+25 Intelligence, +1000% spell damage",type:"mastery",position:{x:-650,y:0},connections:["int_mastery_path","int_mastery_2"],requirements:["int_mastery_path"],stats:{intelligence:25},skillModifiers:[{skillId:"all",property:"damage",value:10,type:"additive"}],tier:5},{id:"int_mastery_2",name:"Intelligence Mastery II",description:"+35 Intelligence, +2000% spell damage, +5.0 mana regeneration",type:"mastery",position:{x:-700,y:0},connections:["int_mastery_1"],requirements:["int_mastery_1"],stats:{intelligence:35,manaRegen:5},skillModifiers:[{skillId:"all",property:"damage",value:20,type:"additive"}],tier:6}].forEach(n=>{const a={...n,cost:wt(n.type,n.tier||1),maxRank:1,skillModifiers:n.skillModifiers};e[a.id]=a})}function th(e){[{id:"vit_path_1",name:"Constitution",description:"+5 Vitality",type:"travel",position:{x:0,y:-100},connections:["start","vit_small_1"],requirements:["start"],stats:{vitality:5},tier:1},{id:"vit_small_1",name:"Robust Health",description:"+25 health, +0.5 health regeneration",type:"small",position:{x:0,y:-150},connections:["vit_path_1","vit_notable_1"],requirements:["vit_path_1"],stats:{health:25,healthRegen:.5},tier:1},{id:"vit_notable_1",name:"Iron Will",description:"+100 health, +5 armor, +1.0 health regeneration",type:"notable",position:{x:0,y:-200},connections:["vit_small_1","vit_path_2"],requirements:["vit_small_1"],stats:{health:100,armor:5,healthRegen:1},tier:1},{id:"vit_path_2",name:"Endurance",description:"+8 Vitality",type:"travel",position:{x:0,y:-250},connections:["vit_notable_1","vit_small_2"],requirements:["vit_notable_1"],stats:{vitality:8},tier:2},{id:"vit_small_2",name:"Regeneration",description:"+1.5 health regeneration, +3% life steal",type:"small",position:{x:0,y:-300},connections:["vit_path_2","vit_notable_2"],requirements:["vit_path_2"],stats:{healthRegen:1.5,lifeSteal:.03},tier:2},{id:"vit_notable_2",name:"Undying",description:"+200 health, +5% life steal, +10 armor",type:"notable",position:{x:0,y:-350},connections:["vit_small_2","vit_path_3"],requirements:["vit_small_2"],stats:{health:200,lifeSteal:.05,armor:10},tier:2},{id:"vit_path_3",name:"Immortal Resolve",description:"+12 Vitality",type:"travel",position:{x:0,y:-400},connections:["vit_notable_2","vit_small_3"],requirements:["vit_notable_2"],stats:{vitality:12},tier:3},{id:"vit_small_3",name:"Life Force",description:"+300 health, +3.0 health regeneration",type:"small",position:{x:0,y:-450},connections:["vit_path_3","vit_notable_3"],requirements:["vit_path_3"],stats:{health:300,healthRegen:3},tier:3},{id:"vit_notable_3",name:"Eternal Guardian",description:"+500 health, +10% life steal, +25 armor",type:"notable",position:{x:0,y:-500},connections:["vit_small_3","vit_keystone_1"],requirements:["vit_small_3"],stats:{health:500,lifeSteal:.1,armor:25},tier:3},{id:"vit_keystone_1",name:"Avatar of Vitality",description:"+20 Vitality, +1000 health, +20% life steal, but -50% damage",type:"keystone",position:{x:0,y:-550},connections:["vit_notable_3","vit_mastery_path"],requirements:["vit_notable_3"],stats:{vitality:20,health:1e3,lifeSteal:.2,damage:-.5},tier:4},{id:"vit_mastery_path",name:"Path to Mastery",description:"+15 Vitality",type:"travel",position:{x:0,y:-600},connections:["vit_keystone_1","vit_mastery_1"],requirements:["vit_keystone_1"],stats:{vitality:15},tier:5},{id:"vit_mastery_1",name:"Vitality Mastery I",description:"+25 Vitality, +2000 health, +50 armor",type:"mastery",position:{x:0,y:-650},connections:["vit_mastery_path","vit_mastery_2"],requirements:["vit_mastery_path"],stats:{vitality:25,health:2e3,armor:50},tier:5},{id:"vit_mastery_2",name:"Vitality Mastery II",description:"+35 Vitality, +3000 health, +100 armor, +10.0 health regeneration",type:"mastery",position:{x:0,y:-700},connections:["vit_mastery_1"],requirements:["vit_mastery_1"],stats:{vitality:35,health:3e3,armor:100,healthRegen:10},tier:6}].forEach(n=>{const a={...n,cost:wt(n.type,n.tier||1),maxRank:1};e[a.id]=a})}function wt(e,t){return 1}function nh(e,t){Ko(e,t,1,{x:150,y:-150}),Xo(e,t,1,{x:-150,y:150}),Qo(e,t,1,{x:-200,y:-150}),Lm(e,t,1,{x:150,y:150})}function ah(e,t){Ko(e,t,2,{x:300,y:-300}),Xo(e,t,2,{x:-300,y:300}),Qo(e,t,2,{x:-400,y:-300}),Lm(e,t,2,{x:300,y:300}),Sl(e,t,"fire",{x:-500,y:-200}),Sl(e,t,"ice",{x:-500,y:0}),Sl(e,t,"lightning",{x:-500,y:200})}function sh(e,t){Ko(e,t,3,{x:500,y:-500}),Xo(e,t,3,{x:-500,y:500}),Qo(e,t,3,{x:-700,y:-500}),Ki(e,t,1,{x:400,y:-200}),Ki(e,t,2,{x:600,y:-400}),Xi(e,t,1,{x:200,y:400}),Xi(e,t,2,{x:400,y:600})}function lh(e,t){al(e,t,"ultimate_power",{x:800,y:0}),al(e,t,"ultimate_defense",{x:0,y:800}),al(e,t,"ultimate_magic",{x:-800,y:0}),al(e,t,"ultimate_speed",{x:0,y:-800}),rh(e,t,{x:0,y:0})}function Ko(e,t,n,a){const s=`combat_cluster_${n}`,r={id:s,name:`Combat Mastery ${n}`,centerPosition:a,nodeIds:[],theme:"combat",tier:n*3,archetype:"combat"},i=n*2;[{id:`${s}_travel_1`,name:"Combat Training",description:`+${3*i}% damage, +${2*i}% attack speed`,type:"travel",position:{x:a.x-50,y:a.y-50},connections:n===1?["str_path_1"]:[`combat_cluster_${n-1}_notable_1`],requirements:n===1?["str_path_1"]:[`combat_cluster_${n-1}_notable_1`],stats:{damage:.03*i,attackSpeed:.02*i},tier:n*3,archetype:"combat"},{id:`${s}_small_1`,name:"Wide Slash",description:`+${25*i}% slash arc width, +${10*i}% melee range`,type:"small",position:{x:a.x-30,y:a.y-30},connections:[`${s}_travel_1`,`${s}_notable_1`],requirements:[`${s}_travel_1`],stats:{},skillModifiers:[{skillId:"basic_attack",property:"slashArcWidth",value:.25*i,type:"additive"},{skillId:"basic_attack",property:"meleeRange",value:.1*i,type:"additive"}],tier:n*3,archetype:"combat"},{id:`${s}_notable_1`,name:`Combat Mastery ${n}`,description:`+${20*i}% damage, +${10*i}% attack speed, +${5*i}% critical chance`,type:"notable",position:a,connections:[`${s}_small_1`,`${s}_small_2`,`${s}_small_3`],requirements:[`${s}_small_1`],stats:{damage:.2*i,attackSpeed:.1*i,critChance:.05*i},tier:n*3,archetype:"combat"},{id:`${s}_small_2`,name:"Cleaving Strikes",description:`+${50*i}% area damage, attacks hit +${Math.floor(i/2)} additional enemies`,type:"small",position:{x:a.x+30,y:a.y+30},connections:[`${s}_notable_1`],requirements:[`${s}_notable_1`],stats:{},skillModifiers:[{skillId:"basic_attack",property:"areaDamage",value:.5*i,type:"additive"},{skillId:"basic_attack",property:"additionalTargets",value:Math.floor(i/2),type:"additive"}],tier:n*3,archetype:"combat"},{id:`${s}_small_3`,name:"Projectile Mastery",description:`+${30*i}% projectile speed, +${Math.floor(i/3)} additional projectiles`,type:"small",position:{x:a.x,y:a.y+50},connections:[`${s}_notable_1`],requirements:[`${s}_notable_1`],stats:{},skillModifiers:[{skillId:"basic_attack",property:"projectileSpeed",value:.3*i,type:"additive"},{skillId:"basic_attack",property:"additionalProjectiles",value:Math.floor(i/3),type:"additive"}],tier:n*3,archetype:"combat"}].forEach(d=>{const u={...d,cost:wt(d.type,d.tier||1),maxRank:1};e[u.id]=u,r.nodeIds.push(u.id)}),t.push(r)}function Xo(e,t,n,a){const s=`defense_cluster_${n}`,r={id:s,name:`Defense Mastery ${n}`,centerPosition:a,nodeIds:[],theme:"defense",tier:n*3,archetype:"defense"},i=n*2;[{id:`${s}_travel_1`,name:"Shield Training",description:`+${2*i} armor`,type:"travel",position:{x:a.x-50,y:a.y+50},connections:n===1?["vit_path_1"]:[`defense_cluster_${n-1}_notable_1`],requirements:n===1?["vit_path_1"]:[`defense_cluster_${n-1}_notable_1`],stats:{armor:2*i},tier:n*3},{id:`${s}_small_1`,name:"Thick Skin",description:`+${3*i} armor, +${25*i} health`,type:"small",position:{x:a.x-30,y:a.y+30},connections:[`${s}_travel_1`,`${s}_notable_1`],requirements:[`${s}_travel_1`],stats:{armor:3*i,health:25*i},tier:n*3},{id:`${s}_notable_1`,name:`Fortress ${n}`,description:`+${15*i} armor, +${5*i}% block chance, +${100*i} health`,type:"notable",position:a,connections:[`${s}_small_1`,`${s}_small_2`],requirements:[`${s}_small_1`],stats:{armor:15*i,blockChance:.05*i,health:100*i},tier:n*3},{id:`${s}_small_2`,name:"Damage Reduction",description:`+${5*i} armor, +${1*i}% life steal`,type:"small",position:{x:a.x+30,y:a.y-30},connections:[`${s}_notable_1`],requirements:[`${s}_notable_1`],stats:{armor:5*i,lifeSteal:.01*i},tier:n*3}].forEach(d=>{const u={...d,cost:wt(d.type,d.tier||1),maxRank:1};e[u.id]=u,r.nodeIds.push(u.id)}),t.push(r)}function Qo(e,t,n,a){const s=`magic_cluster_${n}`,r={id:s,name:`Magic Mastery ${n}`,centerPosition:a,nodeIds:[],theme:"magic",tier:n*3,archetype:"magic"},i=n*2;[{id:`${s}_travel_1`,name:"Arcane Studies",description:`+${25*i} mana, +${.5*i} mana regeneration`,type:"travel",position:{x:a.x+50,y:a.y-50},connections:n===1?["int_path_1"]:[`magic_cluster_${n-1}_notable_1`],requirements:n===1?["int_path_1"]:[`magic_cluster_${n-1}_notable_1`],stats:{mana:25*i,manaRegen:.5*i},tier:n*3},{id:`${s}_small_1`,name:"Spell Focus",description:`+${15*i}% spell damage, +${50*i} mana`,type:"small",position:{x:a.x+30,y:a.y-30},connections:[`${s}_travel_1`,`${s}_notable_1`],requirements:[`${s}_travel_1`],stats:{mana:50*i},skillModifiers:[{skillId:"all",property:"damage",value:.15*i,type:"additive"}],tier:n*3},{id:`${s}_notable_1`,name:`Arcane Mastery ${n}`,description:`+${30*i}% spell damage, -${10*i}% mana costs, +${100*i} mana`,type:"notable",position:a,connections:[`${s}_small_1`,`${s}_small_2`],requirements:[`${s}_small_1`],stats:{mana:100*i},skillModifiers:[{skillId:"all",property:"damage",value:.3*i,type:"additive"},{skillId:"all",property:"manaCost",value:-.1*i,type:"additive"}],tier:n*3},{id:`${s}_small_2`,name:"Mana Efficiency",description:`+${.8*i} mana regeneration, -${5*i}% mana costs`,type:"small",position:{x:a.x-30,y:a.y+30},connections:[`${s}_notable_1`],requirements:[`${s}_notable_1`],stats:{manaRegen:.8*i},skillModifiers:[{skillId:"all",property:"manaCost",value:-.05*i,type:"additive"}],tier:n*3}].forEach(d=>{const u={...d,cost:wt(d.type,d.tier||1),maxRank:1,skillModifiers:d.skillModifiers};e[u.id]=u,r.nodeIds.push(u.id)}),t.push(r)}function Lm(e,t,n,a){const s=`utility_cluster_${n}`,r={id:s,name:`Utility Mastery ${n}`,centerPosition:a,nodeIds:[],theme:"utility",tier:n*3,archetype:"utility"},i=n*2;[{id:`${s}_travel_1`,name:"Treasure Hunter",description:`+${5*i}% magic find, +${5*i}% gold find`,type:"travel",position:{x:a.x-50,y:a.y-50},connections:n===1?["dex_path_1"]:[`utility_cluster_${n-1}_notable_1`],requirements:n===1?["dex_path_1"]:[`utility_cluster_${n-1}_notable_1`],stats:{damage:0,health:0,mana:0,armor:0,magicResist:0,attackSpeed:0,criticalChance:0,criticalDamage:0,strength:0,dexterity:0,intelligence:0,vitality:0,magicFind:.05*i,goldFind:.05*i,experienceGain:0},tier:n*3,archetype:"utility"},{id:`${s}_small_1`,name:"Lucky Find",description:`+${10*i}% magic find, +${8*i}% experience gain`,type:"small",position:{x:a.x-30,y:a.y-30},connections:[`${s}_travel_1`,`${s}_notable_1`],requirements:[`${s}_travel_1`],stats:{damage:0,health:0,mana:0,armor:0,magicResist:0,attackSpeed:0,criticalChance:0,criticalDamage:0,strength:0,dexterity:0,intelligence:0,vitality:0,magicFind:.1*i,goldFind:0,experienceGain:.08*i},tier:n*3,archetype:"utility"},{id:`${s}_notable_1`,name:`Fortune's Favor ${n}`,description:`+${25*i}% magic find, +${20*i}% gold find, +${15*i}% experience gain`,type:"notable",position:a,connections:[`${s}_small_1`,`${s}_small_2`,`${s}_small_3`],requirements:[`${s}_small_1`],stats:{damage:0,health:0,mana:0,armor:0,magicResist:0,attackSpeed:0,criticalChance:0,criticalDamage:0,strength:0,dexterity:0,intelligence:0,vitality:0,magicFind:.25*i,goldFind:.2*i,experienceGain:.15*i},tier:n*3,archetype:"utility"},{id:`${s}_small_2`,name:"Experience Mastery",description:`+${15*i}% experience gain, +${5*i}% faster skill progression`,type:"small",position:{x:a.x+30,y:a.y+30},connections:[`${s}_notable_1`],requirements:[`${s}_notable_1`],stats:{damage:0,health:0,mana:0,armor:0,magicResist:0,attackSpeed:0,criticalChance:0,criticalDamage:0,strength:0,dexterity:0,intelligence:0,vitality:0,magicFind:0,goldFind:0,experienceGain:.15*i},skillModifiers:[{skillId:"all",property:"skillProgressionRate",value:.05*i,type:"additive"}],tier:n*3,archetype:"utility"},{id:`${s}_small_3`,name:"Loot Specialist",description:`+${12*i}% chance for rare drops, +${8*i}% item quantity`,type:"small",position:{x:a.x,y:a.y+50},connections:[`${s}_notable_1`],requirements:[`${s}_notable_1`],stats:{damage:0,health:0,mana:0,armor:0,magicResist:0,attackSpeed:0,criticalChance:0,criticalDamage:0,strength:0,dexterity:0,intelligence:0,vitality:0,magicFind:.08*i,goldFind:0,experienceGain:0},skillModifiers:[{skillId:"loot",property:"rareDropChance",value:.12*i,type:"additive"},{skillId:"loot",property:"itemQuantity",value:.08*i,type:"additive"}],tier:n*3,archetype:"utility"}].forEach(d=>{const u={...d,cost:wt(d.type,d.tier||1),maxRank:1};e[u.id]=u,r.nodeIds.push(u.id)}),t.push(r)}function Sl(e,t,n,a){const s=`${n}_cluster`,r={id:s,name:`${n.charAt(0).toUpperCase()+n.slice(1)} Mastery`,centerPosition:a,nodeIds:[],theme:"elemental",tier:5,archetype:"magic"};[{id:`${s}_travel_1`,name:`${n.charAt(0).toUpperCase()+n.slice(1)} Affinity`,description:`+25% ${n} damage`,type:"travel",position:{x:a.x-50,y:a.y},connections:["int_path_2"],requirements:["int_path_2"],stats:{},skillModifiers:n==="fire"?[{skillId:"fireball",property:"damage",value:.25,type:"additive"}]:n==="ice"?[{skillId:"ice_shard",property:"damage",value:.25,type:"additive"}]:[{skillId:"lightning_bolt",property:"damage",value:.25,type:"additive"}],tier:5},{id:`${s}_notable_1`,name:`${n.charAt(0).toUpperCase()+n.slice(1)} Mastery`,description:`+100% ${n} damage, +50% area of effect`,type:"notable",position:a,connections:[`${s}_travel_1`],requirements:[`${s}_travel_1`],stats:{},skillModifiers:n==="fire"?[{skillId:"fireball",property:"damage",value:1,type:"additive"},{skillId:"fireball",property:"area",value:.5,type:"additive"}]:n==="ice"?[{skillId:"ice_shard",property:"damage",value:1,type:"additive"},{skillId:"ice_shard",property:"area",value:.5,type:"additive"}]:[{skillId:"lightning_bolt",property:"damage",value:1,type:"additive"},{skillId:"lightning_bolt",property:"area",value:.5,type:"additive"}],tier:5}].forEach(c=>{const d={...c,cost:wt(c.type,c.tier||1),maxRank:1,skillModifiers:c.skillModifiers};e[d.id]=d,r.nodeIds.push(d.id)}),t.push(r)}function Ki(e,t,n,a){const s=`critical_cluster_${n}`,r={id:s,name:`Critical Mastery ${n}`,centerPosition:a,nodeIds:[],theme:"critical",tier:6+n,archetype:"combat"},i=n*3;[{id:`${s}_notable_1`,name:`Critical Mastery ${n}`,description:`+${25*i}% critical chance, +${100*i}% critical damage`,type:"notable",position:a,connections:["str_notable_2"],requirements:["str_notable_2"],stats:{critChance:.25*i},skillModifiers:[{skillId:"all",property:"criticalDamage",value:1*i,type:"additive"}],tier:6+n}].forEach(d=>{const u={...d,cost:wt(d.type,d.tier||1),maxRank:1,skillModifiers:d.skillModifiers};e[u.id]=u,r.nodeIds.push(u.id)}),t.push(r)}function Xi(e,t,n,a){const s=`speed_cluster_${n}`,r={id:s,name:`Speed Mastery ${n}`,centerPosition:a,nodeIds:[],theme:"speed",tier:7+n,archetype:"combat"},i=n*2;[{id:`${s}_notable_1`,name:`Speed Mastery ${n}`,description:`+${30*i}% attack speed, +${15*i}% movement speed`,type:"notable",position:a,connections:["dex_notable_2"],requirements:["dex_notable_2"],stats:{attackSpeed:.3*i,movementSpeed:.15*i},tier:7+n}].forEach(d=>{const u={...d,cost:wt(d.type,d.tier||1),maxRank:1};e[u.id]=u,r.nodeIds.push(u.id)}),t.push(r)}function al(e,t,n,a){const s=`${n}_cluster`,r={id:s,name:`${n.replace("_"," ").replace(/\b\w/g,c=>c.toUpperCase())}`,centerPosition:a,nodeIds:[],theme:"mastery",tier:10,archetype:"mastery"};[{id:`${s}_keystone_1`,name:`${n.replace("_"," ").replace(/\b\w/g,c=>c.toUpperCase())} Keystone`,description:ih(n),type:"keystone",position:a,connections:od(n),requirements:od(n),stats:oh(n),skillModifiers:ch(n),tier:10}].forEach(c=>{const d={...c,cost:wt(c.type,c.tier||1),maxRank:1,skillModifiers:c.skillModifiers};e[d.id]=d,r.nodeIds.push(d.id)}),t.push(r)}function rh(e,t,n){const a="transcendence_cluster",s={id:a,name:"Transcendence",centerPosition:n,nodeIds:[],theme:"mastery",tier:10,archetype:"mastery"};[{id:`${a}_ultimate`,name:"Transcendence",description:"+50 to all attributes, +1000% to all damage types, +5000 health, +1000 mana, +50% to all resistances",type:"keystone",position:n,connections:["ultimate_power_cluster_keystone_1","ultimate_defense_cluster_keystone_1","ultimate_magic_cluster_keystone_1","ultimate_speed_cluster_keystone_1"],requirements:["ultimate_power_cluster_keystone_1","ultimate_defense_cluster_keystone_1","ultimate_magic_cluster_keystone_1","ultimate_speed_cluster_keystone_1"],stats:{strength:50,dexterity:50,intelligence:50,vitality:50,health:5e3,mana:1e3,damage:10},skillModifiers:[{skillId:"all",property:"damage",value:10,type:"additive"}],tier:10}].forEach(i=>{const c={...i,cost:wt(i.type,i.tier||1),maxRank:1,skillModifiers:i.skillModifiers};e[c.id]=c,s.nodeIds.push(c.id)}),t.push(s)}function ih(e){switch(e){case"ultimate_power":return"+100 Strength, +2000% damage, +1000 health, +25% life steal";case"ultimate_defense":return"+100 Vitality, +500 armor, +10000 health, +50% damage reduction";case"ultimate_magic":return"+100 Intelligence, +5000% spell damage, +2000 mana, +20.0 mana regeneration";case"ultimate_speed":return"+100 Dexterity, +500% attack speed, +200% critical chance, +100% dodge chance";default:return"Ultimate mastery node"}}function od(e){switch(e){case"ultimate_power":return["str_mastery_2"];case"ultimate_defense":return["vit_mastery_2"];case"ultimate_magic":return["int_mastery_2"];case"ultimate_speed":return["dex_mastery_2"];default:return[]}}function oh(e){switch(e){case"ultimate_power":return{strength:100,damage:20,health:1e3,lifeSteal:.25};case"ultimate_defense":return{vitality:100,armor:500,health:1e4};case"ultimate_magic":return{intelligence:100,mana:2e3,manaRegen:20};case"ultimate_speed":return{dexterity:100,attackSpeed:5,critChance:2,dodgeChance:1};default:return{}}}function ch(e){switch(e){case"ultimate_power":return[{skillId:"all",property:"damage",value:20,type:"additive"}];case"ultimate_defense":return[{skillId:"all",property:"damageReduction",value:.5,type:"additive"}];case"ultimate_magic":return[{skillId:"all",property:"damage",value:50,type:"additive"}];case"ultimate_speed":return[];default:return[]}}function dh(e,t){const n=["fire","ice","lightning","earth","wind","dark","light"];n.forEach((a,s)=>{const r=s*2*Math.PI/n.length,i=600,c={x:Math.cos(r)*i,y:Math.sin(r)*i};s<3||Sl(e,t,a,c)})}function uh(e,t){for(let n=3;n<=5;n++){const a={x:200+n*150,y:-100-n*100};Ki(e,t,n,a)}}function mh(e,t){[{x:-400,y:400},{x:-600,y:600},{x:-800,y:800}].forEach((a,s)=>{const r=`survival_cluster_${s+1}`,i={id:r,name:`Survival Mastery ${s+1}`,centerPosition:a,nodeIds:[],theme:"survival",tier:6+s,archetype:"defense"},c=(s+1)*3;[{id:`${r}_notable_1`,name:`Survival Instinct ${s+1}`,description:`+${50*c} armor, +${20*c}% life steal, +${500*c} health`,type:"notable",position:a,connections:s===0?["vit_notable_2"]:[`survival_cluster_${s}_notable_1`],requirements:s===0?["vit_notable_2"]:[`survival_cluster_${s}_notable_1`],stats:{armor:50*c,lifeSteal:.2*c,health:500*c},tier:6+s}].forEach(u=>{const f={...u,cost:wt(u.type,u.tier||1),maxRank:1};e[f.id]=f,i.nodeIds.push(f.id)}),t.push(i)})}function fh(e,t){for(let n=3;n<=5;n++){const a={x:100+n*150,y:200+n*150};Xi(e,t,n,a)}}function ph(e){[{from:"str_notable_1",to:"dex_path_2"},{from:"dex_notable_1",to:"str_path_2"},{from:"int_notable_1",to:"vit_path_2"},{from:"vit_notable_1",to:"int_path_2"},{from:"str_notable_2",to:"int_notable_2"},{from:"dex_notable_2",to:"vit_notable_2"},{from:"combat_cluster_1_notable_1",to:"defense_cluster_1_travel_1"},{from:"magic_cluster_1_notable_1",to:"utility_cluster_1_travel_1"},{from:"str_path_3",to:"combat_cluster_1_travel_1"},{from:"dex_path_3",to:"utility_cluster_1_travel_1"},{from:"int_path_3",to:"magic_cluster_1_travel_1"},{from:"vit_path_3",to:"defense_cluster_1_travel_1"}].forEach(n=>{hh(e,n.from,n.to)}),gh(e),xh(e)}function hh(e,t,n){const a=e[t],s=e[n];a&&s&&(a.connections.includes(n)||a.connections.push(n),s.connections.includes(t)||s.connections.push(t))}function gh(e){Object.values(e).forEach(t=>{t.connections.forEach(n=>{const a=e[n];a&&!a.connections.includes(t.id)&&a.connections.push(t.id)})})}function xh(e){const a=1e3-Object.keys(e).length;for(let s=0;s<a;s++){const r=Math.floor(s/50)+1,i=2*Math.PI/50,c=s%50*i,d=150+r*100,u={x:Math.cos(c)*d,y:Math.sin(c)*d},f=`filler_${s+1}`,v=Math.min(Math.floor(r/2)+1,10);let x="small";s%10===0&&(x="notable"),s%25===0&&(x="travel");const h=yh(u,v),w=vh(h),N={id:f,name:`Node ${s+1}`,description:w,type:x,position:u,connections:[],requirements:[],stats:h,cost:wt(),maxRank:1,tier:v};e[f]=N}bh(e)}function yh(e,t){const n={},a=t;return e.x>0&&e.y>=0?(n.strength=2*a,n.damage=.02*a):e.x<=0&&e.y>0?(n.intelligence=2*a,n.mana=10*a):e.x<0&&e.y<=0?(n.vitality=2*a,n.health=15*a):(n.dexterity=2*a,n.attackSpeed=.01*a),n}function vh(e,t){const n=[];return Object.entries(e).forEach(([a,s])=>{if(typeof s=="number"&&s!==0){let r=s,i="";(a.includes("Chance")||a.includes("Speed")||a==="damage")&&(r=Math.round(s*100),i="%");const c=a.charAt(0).toUpperCase()+a.slice(1);n.push(`+${r}${i} ${c}`)}}),n.join(", ")}function bh(e){const t=Object.values(e);t.forEach(n=>{if(n.id.startsWith("filler_")){const a=t.filter(i=>i.id===n.id?!1:Math.sqrt(Math.pow(n.position.x-i.position.x,2)+Math.pow(n.position.y-i.position.y,2))<120),s=Math.min(3,a.length),r=a.sort((i,c)=>{const d=Math.sqrt(Math.pow(n.position.x-i.position.x,2)+Math.pow(n.position.y-i.position.y,2)),u=Math.sqrt(Math.pow(n.position.x-c.position.x,2)+Math.pow(n.position.y-c.position.y,2));return d-u});for(let i=0;i<s;i++){const c=r[i];n.connections.includes(c.id)||n.connections.push(c.id),c.connections.includes(n.id)||c.connections.push(n.id),n.requirements.length===0&&n.requirements.push(c.id)}}})}function Kn(e,t,n){const a=t.nodes[e];return!a||n.allocatedNodes[e]>=a.maxRank||n.availablePoints<a.cost?!1:a.requirements.length===0?!0:a.requirements.every(s=>n.allocatedNodes[s]>0)}function Dm(e,t,n){if(!Kn(e,t,n))return n;const a=t.nodes[e],s={...n};return s.allocatedNodes={...s.allocatedNodes,[e]:(s.allocatedNodes[e]||0)+1},s.availablePoints-=a.cost,s}function Is(e,t){const n={};return Object.entries(t.allocatedNodes).forEach(([a,s])=>{if(s>0){const r=e.nodes[a];r&&Object.entries(r.stats).forEach(([i,c])=>{typeof c=="number"&&(n[i]=(n[i]||0)+c*s)})}}),n}function wh(e,t){const n=[];return Object.entries(t.allocatedNodes).forEach(([a,s])=>{if(s>0){const r=e.nodes[a];r&&r.skillModifiers&&r.skillModifiers.forEach(i=>{n.push({...i,value:i.value*s})})}}),n}const en={modifiers:new Map,damageWithStats:new Map},Kl=5e3;function Im(e){const t=e.supportGems.map(n=>`${n.id}-${n.level}-${n.rarity}`).sort().join("|");return`${e.id}-${e.level}-${e.rarity}-${t}`}function Sh(e,t){var s;const n=Im(e),a=`${t.level||1}-${t.dps||2}-${JSON.stringify(t.attributes||{})}-${((s=t.calculatedStats)==null?void 0:s.damage)||0}`;return`${n}-${a}`}const Qi={Normal:{rarity:"Normal",damageBonus:0,qualityBonus:0,colorVariant:"#ffffff"},Magic:{rarity:"Magic",damageBonus:10,qualityBonus:5,colorVariant:"#8888ff",areaOfEffectBonus:5,projectileDamageBonus:8,manaCostReduction:5},Rare:{rarity:"Rare",damageBonus:25,qualityBonus:10,colorVariant:"#ffff88",areaOfEffectBonus:12,areaDamageBonus:15,projectileDamageBonus:20,physicalDamageBonus:18,elementalDamageBonus:18,attackSpeedBonus:10,castSpeedBonus:10,criticalChanceBonus:8,durationBonus:15,manaCostReduction:10},Unique:{rarity:"Unique",damageBonus:50,qualityBonus:20,colorVariant:"#ff8800",areaOfEffectBonus:25,areaDamageBonus:30,projectileDamageBonus:40,physicalDamageBonus:35,elementalDamageBonus:35,attackSpeedBonus:20,castSpeedBonus:20,criticalChanceBonus:15,durationBonus:25,manaCostReduction:20}},$m=[{id:"whirlwind",name:"Whirlwind",description:"Continuous spinning attack that hits all nearby enemies. Inspired by Path of Exile's Cyclone skill - channels automatically during combat with area scaling and movement.",type:"active",category:"attack",tags:["Attack","AoE","Channeling","Melee","Physical"],maxLevel:20,unlockLevel:0,skillPointCost:0,manaCost:0,cooldown:0,icon:"",rarity:"Normal",quality:0,scaling:{baseDamage:12,damagePerLevel:2.5,baseManaCost:0,manaCostPerLevel:0,baseCooldown:0,cooldownReductionPerLevel:0,baseArea:2.5,areaPerLevel:.15}},{id:"fireball",name:"Fireball",description:"Launches a fiery projectile that explodes on impact, dealing fire damage to nearby enemies.",type:"active",category:"spell",tags:["Spell","Projectile","AoE","Fire"],maxLevel:20,unlockLevel:0,skillPointCost:0,manaCost:0,cooldown:0,icon:"",rarity:"Normal",quality:0,scaling:{baseDamage:15,damagePerLevel:3,baseManaCost:0,manaCostPerLevel:0,baseCooldown:0,cooldownReductionPerLevel:0,baseArea:1.5,areaPerLevel:.1,baseRange:300,rangePerLevel:10}}],Am=[{id:"increased_damage",name:"Increased Damage",description:"Increases damage of supported skills",tags:["Attack","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:15,isPercentage:!0,description:"+15% more damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:15,valuePerLevel:2}},{id:"increased_area",name:"Increased Area of Effect",description:"Increases area of effect of supported skills",tags:["AoE"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"area",value:25,isPercentage:!0,description:"+25% increased area of effect"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:3}},{id:"multiple_projectiles",name:"Multiple Projectiles",description:"Supported skills fire additional projectiles",tags:["Projectile"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"projectiles",value:2,isPercentage:!1,description:"+2 additional projectiles"},{type:"damage",value:-20,isPercentage:!0,description:"-20% less damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:2,valuePerLevel:.2}},{id:"faster_casting",name:"Faster Casting",description:"Reduces cooldown of supported skills",tags:["Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"cooldown",value:-25,isPercentage:!0,description:"-25% reduced cooldown"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:1.5}},{id:"reduced_mana",name:"Reduced Mana Cost",description:"Reduces mana cost of supported skills",tags:["Attack","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"manaCost",value:-30,isPercentage:!0,description:"-30% reduced mana cost"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:30,valuePerLevel:1}},{id:"added_fire_damage",name:"Added Fire Damage Support",description:"Adds fire damage to supported skills.",tags:["Support","Fire"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:10,damageType:"fire",tags:["Fire"]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:10,valuePerLevel:2}},{id:"elemental_focus",name:"Elemental Focus Support",description:"Increases elemental damage but prevents critical strikes.",tags:["Support","Elemental"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage_multiplier",value:1.5,tags:["Fire","Cold","Lightning"]},{type:"critical_chance_multiplier",value:0,tags:[]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:1.5,valuePerLevel:.02}},{id:"melee_physical_damage",name:"Melee Physical Damage Support",description:"Increases physical damage of supported melee skills.",tags:["Support","Melee","Physical"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage_multiplier",value:1.4,tags:["Physical","Melee"]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:1.4,valuePerLevel:.015}},{id:"spell_echo",name:"Spell Echo Support",description:"Supported spells repeat an additional time with reduced damage.",tags:["Support","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:-25,isPercentage:!0,description:"-25% less damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:.5}},{id:"concentrated_effect",name:"Concentrated Effect Support",description:"Reduces area of effect but increases area damage.",tags:["Support","AoE"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"area",value:-30,isPercentage:!0,description:"-30% reduced area of effect"},{type:"damage",value:60,isPercentage:!0,description:"+60% more area damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:60,valuePerLevel:2}},{id:"pierce",name:"Pierce Support",description:"Projectiles pierce through enemies, hitting multiple targets.",tags:["Support","Projectile"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:10,isPercentage:!0,description:"+10% more projectile damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:10,valuePerLevel:1}},{id:"minion_damage",name:"Minion Damage Support",description:"Increases damage dealt by minions.",tags:["Support","Minion"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:50,isPercentage:!0,description:"+50% increased minion damage"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:50,valuePerLevel:3}},{id:"added_cold_damage",name:"Added Cold Damage Support",description:"Adds cold damage to supported skills.",tags:["Support","Cold"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:8,damageType:"cold",tags:["Cold"]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:8,valuePerLevel:1.5}},{id:"added_lightning_damage",name:"Added Lightning Damage Support",description:"Adds lightning damage to supported skills.",tags:["Support","Lightning"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:12,damageType:"lightning",tags:["Lightning"]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:12,valuePerLevel:2}},{id:"increased_duration",name:"Increased Duration Support",description:"Increases the duration of supported skills.",tags:["Support","Duration"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"duration",value:40,isPercentage:!0,description:"+40% increased skill duration"}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:40,valuePerLevel:2}},{id:"critical_strike_multiplier",name:"Critical Strike Multiplier Support",description:"Increases critical strike multiplier of supported skills.",tags:["Support","Critical"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"critical_chance_multiplier",value:1.5,tags:[]}],icon:"",rarity:"Normal",quality:0,scaling:{baseValue:1.5,valuePerLevel:.02}}];function kh(e,t){return t.some(n=>e.tags.includes(n))}function jh(e,t){return t.tags.length===0?!0:kh(e,t.tags)}function Nh(e){return e.tags.join(", ")}function Zo(e){return!e.scaling||!e.scaling.baseDamage?0:Math.floor(e.scaling.baseDamage+(e.scaling.damagePerLevel||0)*(e.level-1))}function zm(e){if(!e.scaling)return e.manaCost||0;const t=e.scaling.baseManaCost||e.manaCost,n=e.scaling.manaCostPerLevel||0;return Math.max(1,Math.floor(t+n*(e.level-1)))}function Fm(e){if(!e.scaling)return e.cooldown||0;const t=e.scaling.baseCooldown||e.cooldown,n=e.scaling.cooldownReductionPerLevel||0;return Math.max(0,Math.floor(t-n*(e.level-1)))}function Ch(e){return!e.scaling||!e.scaling.baseArea?0:e.scaling.baseArea+(e.scaling.areaPerLevel||0)*(e.level-1)}function Mh(e){return!e.scaling||!e.scaling.baseDuration?0:(e.scaling.baseDuration+(e.scaling.durationPerLevel||0)*(e.level-1))/1e3}function ds(e){return!e.scaling||!e.scaling.baseRange?0:e.scaling.baseRange+(e.scaling.rangePerLevel||0)*(e.level-1)}function _h(e){var t;return e.scaling?Math.floor(e.scaling.baseValue+e.scaling.valuePerLevel*(e.level-1)):((t=e.modifiers[0])==null?void 0:t.value)||0}function qm(e){if(!e.scaling)return e.modifiers;const t=_h(e);return e.modifiers.map(n=>({...n,value:n.type===e.modifiers[0].type?n.value<0?-t:t:n.value,description:n.type===e.modifiers[0].type?`${n.value<0?"-":"+"}${t}${n.isPercentage?"%":""} ${n.description?n.description.split(" ").slice(-2).join(" "):""}`:n.description}))}function Ph(e){const t=Im(e),n=Date.now(),a=en.modifiers.get(t);if(a&&n-a.timestamp<Kl)return a.result;const s=Eh(e);if(en.modifiers.set(t,{result:s,timestamp:n}),en.modifiers.size>100)for(const[r,i]of en.modifiers.entries())n-i.timestamp>Kl&&en.modifiers.delete(r);return s}function Eh(e){if(!e||!e.scaling)return console.warn("applyModifiersToSkill: skill or skill.scaling is undefined",e),{damage:0,manaCost:0,cooldown:0,area:1,duration:0,projectileCount:1};let t=Zo(e),n=zm(e),a=Fm(e),s=Ch(e),r=Mh(e),i=1;const c=Qi[e.rarity];return c&&(t*=1+c.damageBonus/100,e.tags.includes("AoE")&&(c.areaOfEffectBonus&&(s*=1+c.areaOfEffectBonus/100),c.areaDamageBonus&&(t*=1+c.areaDamageBonus/100)),e.tags.includes("Projectile")&&c.projectileDamageBonus&&(t*=1+c.projectileDamageBonus/100),e.tags.includes("Physical")&&c.physicalDamageBonus&&(t*=1+c.physicalDamageBonus/100),(e.tags.includes("Fire")||e.tags.includes("Cold")||e.tags.includes("Lightning"))&&c.elementalDamageBonus&&(t*=1+c.elementalDamageBonus/100),e.tags.includes("Critical")&&c.criticalChanceBonus&&(t*=1+c.criticalChanceBonus/100),e.tags.includes("Duration")&&c.durationBonus&&(r*=1+c.durationBonus/100),c.manaCostReduction&&(n*=1-c.manaCostReduction/100)),e.supportGems.forEach(d=>{const u=Qi[d.rarity];u&&(t*=1+u.damageBonus/200,d.tags.includes("AoE")&&u.areaOfEffectBonus&&(s*=1+u.areaOfEffectBonus/200),d.tags.includes("Projectile")&&u.projectileDamageBonus&&(t*=1+u.projectileDamageBonus/200),u.manaCostReduction&&(n*=1-u.manaCostReduction/200)),qm(d).forEach(v=>{switch(v.type){case"damage":v.isPercentage?t*=1+v.value/100:t+=v.value;break;case"manaCost":v.isPercentage?n*=1+v.value/100:n+=v.value;break;case"cooldown":v.isPercentage?a*=1+v.value/100:a+=v.value;break;case"area":v.isPercentage?s*=1+v.value/100:s+=v.value;break;case"duration":v.isPercentage?r*=1+v.value/100:r+=v.value;break;case"projectiles":i+=v.value;break}})}),{damage:Math.round(t),manaCost:Math.round(n),cooldown:Math.round(a),area:Math.round(s*100)/100,duration:Math.round(r),projectileCount:Math.max(1,Math.round(i))}}function Xn(e){return Ph(e)}function Rh(e,t){const n=Sh(e,t),a=Date.now(),s=en.damageWithStats.get(n);if(s&&a-s.timestamp<Kl)return s.result;const r=Th(e,t);if(en.damageWithStats.set(n,{result:r,timestamp:a}),en.damageWithStats.size>100)for(const[i,c]of en.damageWithStats.entries())a-c.timestamp>Kl&&en.damageWithStats.delete(i);return r}function Th(e,t){const n=Xn(e);let a=n.damage;const s=t.attributes||{},r=s.strength||10,i=s.intelligence||10,c=s.dexterity||10,d=s.luck||5,u=t.dps||t.baseDps||2;t.critChance;const f=e.tags.includes("Physical")||["power_strike","cleave","ground_slam","whirlwind"].includes(e.id),v=e.tags.includes("Fire")||e.tags.includes("Lightning")||e.tags.includes("Cold")||["fireball","lightning_bolt","ice_shard","chain_lightning","meteor","frost_nova"].includes(e.id),x=e.tags.includes("Projectile")||["fireball","lightning_bolt","ice_shard","poison_arrow"].includes(e.id),h=u*.3;if(a+=h,f){const b=Math.max(0,r-10)*1.5;a+=b,console.log(`Physical skill ${e.name}: +${b.toFixed(1)} damage from ${r} strength`)}if(v){const b=Math.max(0,i-10)*1.8;a+=b,console.log(`Elemental skill ${e.name}: +${b.toFixed(1)} damage from ${i} intelligence`)}if(x){const b=Math.max(0,c-10)*1.2;a+=b,console.log(`Projectile skill ${e.name}: +${b.toFixed(1)} damage from ${c} dexterity`)}const w=Math.max(0,c-10)*.5;a+=w;const N=Math.max(0,d-5)*.8;if(a+=N,t.calculatedStats&&t.calculatedStats.damage){const b=t.calculatedStats.damage*.4;a+=b,console.log(`Skill ${e.name}: +${b.toFixed(1)} damage from equipment`)}if(t.passiveTreeData&&t.passiveTreeState){const b=Is(t.passiveTreeData,t.passiveTreeState);if(b.damage){const m=b.damage*.5;a+=m,console.log(`Skill ${e.name}: +${m.toFixed(1)} damage from passive tree`)}}const y=(t.level||1)*.5;return a+=y,console.log(`Final damage calculation for ${e.name}: ${Math.floor(a)} (base: ${n.damage}, with stats: ${a.toFixed(1)})`),Math.floor(Math.max(1,a))}function jt(e,t){return Rh(e,t)}function Bm(e){return{...e,level:1,isUnlocked:!0,isEquipped:!1,supportGems:[]}}function Om(e){return{...e,level:1,isUnlocked:!0}}function kl(){return{slots:new Array(6).fill(null),maxSlots:6}}function la(e){return Math.floor(e*1.5)+1}function Xl(e,t){if(e.level>=e.maxLevel)return!1;const n=la(e.level);return t>=n}function bn(e){return e.skillPointCost}const Lh=[{id:"monster_life_1",name:"Feral",description:"Monsters have 25% increased Life",type:"prefix",tier:1,effects:{monsterLife:25},requiredLevel:1},{id:"monster_life_2",name:"Savage",description:"Monsters have 50% increased Life",type:"prefix",tier:3,effects:{monsterLife:50},requiredLevel:20},{id:"monster_damage_1",name:"Brutal",description:"Monsters deal 20% increased Damage",type:"prefix",tier:2,effects:{monsterDamage:20},requiredLevel:10},{id:"monster_speed_1",name:"Fleet",description:"Monsters have 15% increased Movement and Attack Speed",type:"prefix",tier:2,effects:{monsterSpeed:15},requiredLevel:15},{id:"elemental_damage_1",name:"Burning",description:"Monsters deal 30% additional Fire Damage",type:"prefix",tier:3,effects:{elementalDamage:30},requiredLevel:25},{id:"item_quantity_1",name:"of Bounty",description:"20% increased Item Quantity",type:"suffix",tier:1,effects:{itemQuantity:20},requiredLevel:1},{id:"item_rarity_1",name:"of Fortune",description:"30% increased Item Rarity",type:"suffix",tier:2,effects:{itemRarity:30},requiredLevel:10},{id:"pack_size_1",name:"of Hordes",description:"25% increased Pack Size",type:"suffix",tier:3,effects:{packSize:25},requiredLevel:20},{id:"experience_1",name:"of Learning",description:"15% increased Experience Gain",type:"suffix",tier:2,effects:{experienceGain:15},requiredLevel:5}],Um=[{id:"beach",name:"Beach",description:"A sandy coastline overrun by corrupted sea creatures.",tier:1,baseLevel:68,layout:"linear",theme:"desert",baseRewards:[{type:"equipment",quantity:2,minLevel:68,maxLevel:72},{type:"experience",quantity:1e3}],completionTime:180},{id:"graveyard",name:"Graveyard",description:"An ancient cemetery where the dead refuse to rest.",tier:2,baseLevel:69,layout:"maze",theme:"corrupted",baseRewards:[{type:"equipment",quantity:3,minLevel:69,maxLevel:73},{type:"skillGem",quantity:1,rarity:"Normal"},{type:"experience",quantity:1200}],completionTime:240},{id:"dungeon",name:"Dungeon",description:"A dark underground complex filled with ancient horrors.",tier:3,baseLevel:70,layout:"branching",theme:"dungeon",baseRewards:[{type:"equipment",quantity:3,minLevel:70,maxLevel:74},{type:"supportGem",quantity:1,rarity:"Normal"},{type:"experience",quantity:1500}],completionTime:300},{id:"volcano",name:"Volcano",description:"A treacherous volcanic peak with rivers of molten lava.",tier:6,baseLevel:73,layout:"circular",theme:"volcanic",baseRewards:[{type:"equipment",quantity:4,minLevel:73,maxLevel:77},{type:"skillGem",quantity:1,rarity:"Magic"},{type:"experience",quantity:2500}],completionTime:420,unlockRequirement:{completedMaps:["beach","graveyard","dungeon"],playerLevel:50}},{id:"glacier",name:"Glacier",description:"A frozen wasteland where ice elementals roam freely.",tier:8,baseLevel:75,layout:"arena",theme:"ice",baseRewards:[{type:"equipment",quantity:5,minLevel:75,maxLevel:79},{type:"supportGem",quantity:2,rarity:"Magic"},{type:"experience",quantity:3500}],completionTime:480,unlockRequirement:{completedMaps:["volcano"],playerLevel:60}},{id:"shaper_realm",name:"Shaper's Realm",description:"A reality-bending dimension where the laws of physics break down.",tier:14,baseLevel:81,layout:"maze",theme:"celestial",baseRewards:[{type:"equipment",quantity:8,minLevel:81,maxLevel:85,rarity:"Rare",guaranteed:!0},{type:"skillGem",quantity:2,rarity:"Rare"},{type:"supportGem",quantity:2,rarity:"Rare"},{type:"experience",quantity:8e3}],completionTime:720,unlockRequirement:{completedMaps:["glacier"],playerLevel:80}},{id:"elder_sanctum",name:"Elder Sanctum",description:"The twisted domain of an ancient cosmic entity.",tier:16,baseLevel:83,layout:"arena",theme:"corrupted",baseRewards:[{type:"equipment",quantity:10,minLevel:83,maxLevel:87,rarity:"Unique",guaranteed:!0},{type:"skillGem",quantity:3,rarity:"Unique"},{type:"supportGem",quantity:3,rarity:"Unique"},{type:"experience",quantity:15e3}],completionTime:900,unlockRequirement:{completedMaps:["shaper_realm"],playerLevel:90}}];function Dh(e,t="Normal"){const n={...e,rarity:t,modifiers:[],isCompleted:!1,timesCompleted:0},a=Ih(t),s=Lh.filter(r=>r.requiredLevel<=n.baseLevel);for(let r=0;r<a;r++){const i=s[Math.floor(Math.random()*s.length)];n.modifiers.find(c=>c.id===i.id)||n.modifiers.push(i)}return n}function Ih(e){switch(e){case"Normal":return 0;case"Magic":return Math.floor(Math.random()*2)+1;case"Rare":return Math.floor(Math.random()*3)+3;case"Unique":return Math.floor(Math.random()*2)+4}}function $h(e){let t=e.tier*10+e.baseLevel;return e.modifiers.forEach(n=>{t+=n.tier*5,n.effects.monsterLife&&(t+=n.effects.monsterLife/5),n.effects.monsterDamage&&(t+=n.effects.monsterDamage/3),n.effects.monsterSpeed&&(t+=n.effects.monsterSpeed/4)}),Math.floor(t)}function Ah(e){const t=[...e.baseRewards];return e.modifiers.forEach(n=>{n.effects.itemQuantity&&t.forEach(a=>{a.type==="equipment"&&(a.quantity=Math.floor(a.quantity*(1+n.effects.itemQuantity/100)))}),n.effects.experienceGain&&t.forEach(a=>{a.type==="experience"&&(a.quantity=Math.floor(a.quantity*(1+n.effects.experienceGain/100)))})}),t}function Gm(e,t,n){return e.unlockRequirement?!(e.unlockRequirement.playerLevel&&t<e.unlockRequirement.playerLevel||e.unlockRequirement.completedMaps&&!e.unlockRequirement.completedMaps.every(s=>n.includes(s))):!0}function zh(e,t){return Um.filter(n=>Gm(n,e,t)).map(n=>Dh(n,"Normal"))}function Fh(){return{availableMaps:zh(1,[]),completedMaps:[],mapStash:[],atlasProgress:{tier:1,completedCount:0,totalCount:Um.length,bonusObjectives:0}}}const tn={stoneStats:new Map,totalStats:new Map},Ql=3e4;function Vm(e,t){var s,r;const n=((r=(s=e.sockets)==null?void 0:s.stones)==null?void 0:r.filter(i=>i!==null))||[],a=t.filter(i=>n.includes(i.id));return JSON.stringify({equipmentId:e.id,socketedStones:a.map(i=>({id:i.id,baseStats:i.baseStats,affixes:i.affixes}))})}function qh(e,t){return JSON.stringify({equipmentId:e.id,baseStats:e.baseStats,affixes:e.affixes,stoneKey:Vm(e,t)})}function Bh(e,t){const n=Vm(e,t),a=Date.now(),s=tn.stoneStats.get(n);if(s&&a-s.timestamp<Ql)return s.result;const r=Oh(e,t);if(tn.stoneStats.set(n,{result:r,timestamp:a}),tn.stoneStats.size>50)for(const[i,c]of tn.stoneStats.entries())a-c.timestamp>Ql&&tn.stoneStats.delete(i);return r}function Oh(e,t){var s;const n={};return(s=e.sockets)!=null&&s.stones&&e.sockets.stones.filter(r=>r!==null).map(r=>t.find(i=>i.id===r)).filter(r=>r!==void 0).forEach(r=>{Object.entries(r.baseStats).forEach(([i,c])=>{if(typeof c=="number"){const d=n[i];typeof d=="number"&&typeof c=="number"?n[i]=d+c:typeof c=="number"&&(n[i]=c)}}),r.affixes.forEach(i=>{const c=i.stat,d=i.value;if(typeof d=="number"){const u=n[c];typeof u=="number"&&typeof d=="number"?n[c]=u+d:typeof d=="number"&&(n[c]=d)}})}),n}function $s(e,t){return Bh(e,t)}function Uh(e,t){const n=qh(e,t),a=Date.now(),s=tn.totalStats.get(n);if(s&&a-s.timestamp<Ql)return s.result;const r=Gh(e,t);if(tn.totalStats.set(n,{result:r,timestamp:a}),tn.totalStats.size>50)for(const[i,c]of tn.totalStats.entries())a-c.timestamp>Ql&&tn.totalStats.delete(i);return r}function Gh(e,t){const n={};Object.entries(e.baseStats).forEach(([s,r])=>{typeof r=="number"&&(n[s]=r)}),e.affixes.forEach(s=>{const r=s.stat,i=s.value;if(typeof i=="number"){const c=n[r];typeof c=="number"?n[r]=c+i:n[r]=i}});const a=$s(e,t);return Object.entries(a).forEach(([s,r])=>{if(typeof r=="number"){const i=n[s];typeof i=="number"&&typeof r=="number"?n[s]=i+r:typeof r=="number"&&(n[s]=r)}}),n}function Vh(e,t){return Uh(e,t)}function ca(e,t){return["critChance","dodgeChance","blockChance","lifeSteal","manaSteal","fireResistance","coldResistance","lightningResistance","chaosResistance","iceResistance","poisonResistance","spellResistance","stunResistance","increasedDamage","increasedAttackSpeed","increasedCastSpeed","increasedMovementSpeed","increasedCritMultiplier","attackSpeed","goldFind","magicFind","experienceBonus","armorPenetration","damageMultiplier","stunChance","damageReduction","movementSpeed","reflectDamage","doubleDropChance","cleaveChance","cooldownReduction"].includes(e)?`${(t*100).toFixed(1)}%`:Math.round(t*100)/100+""}function da(e){return{damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",critChance:"Critical Strike Chance",critMultiplier:"Critical Strike Multiplier",increasedCritMultiplier:"Increased Critical Strike Multiplier",attackSpeed:"Attack Speed",increasedAttackSpeed:"Increased Attack Speed",castSpeed:"Cast Speed",increasedCastSpeed:"Increased Cast Speed",increasedDamage:"Increased Damage",dodgeChance:"Dodge Chance",blockChance:"Block Chance",fireResistance:"Fire Resistance",coldResistance:"Cold Resistance",lightningResistance:"Lightning Resistance",chaosResistance:"Chaos Resistance",iceResistance:"Ice Resistance",poisonResistance:"Poison Resistance",spellResistance:"Spell Resistance",stunResistance:"Stun Resistance",damageReduction:"Damage Reduction",reflectDamage:"Reflect Damage",fireDamage:"Fire Damage",iceDamage:"Ice Damage",lightningDamage:"Lightning Damage",poisonDamage:"Poison Damage",armorPenetration:"Armor Penetration",damageMultiplier:"Damage Multiplier",stunChance:"Stun Chance",lifeSteal:"Life Steal",manaSteal:"Mana Steal",movementSpeed:"Movement Speed",increasedMovementSpeed:"Increased Movement Speed",doubleDropChance:"Double Drop Chance",cleaveChance:"Cleave Chance",cooldownReduction:"Cooldown Reduction",thorns:"Thorns Damage",maxHp:"Maximum Life",maxMana:"Maximum Mana",hpRegen:"Life Regeneration",manaRegen:"Mana Regeneration",healthRegen:"Health Regeneration"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}function br(){const e=$m.map(a=>Bm(a)),t=Am.map(a=>Om(a)),n=kl();return{id:"default_player",level:10,xp:0,nextLevelXp:100,hp:120,maxHp:120,mana:50,maxMana:50,dps:2,baseDps:2,gold:0,skillPoints:20,attributePoints:5,attributes:{strength:10,dexterity:10,intelligence:10,vitality:10,luck:5},characterModel:"human_male",gender:"male",race:"human",cosmetics:{},equipment:{},equipped:void 0,calculatedStats:{},skillGems:e,supportGems:t,skillBar:n,mapDevice:Fh(),passiveTreeState:{allocatedNodes:{start:1},availablePoints:10},passiveTreeData:vr(),stones:[],attackSpeed:1,projectileSpeed:1,skills:{},armor:0,critChance:0,dodgeChance:0,lifeSteal:0,blockChance:0,healthRegen:1,manaRegen:2}}function Wm(e){if(!e)return br();const t={...e};(typeof t.gold!="number"||isNaN(t.gold))&&(console.warn("Player gold was invalid:",t.gold,"resetting to 0"),t.gold=0),(!t.equipment||typeof t.equipment!="object")&&(console.warn("Player equipment was invalid:",t.equipment,"resetting to empty object"),t.equipment={}),t.calculatedStats={},t.baseDps=2,t.maxHp=120,t.maxMana=50,t.dps=2,t.armor=0,t.critChance=0,t.dodgeChance=0,t.blockChance=0,t.lifeSteal=0,t.attackSpeed=1,t.healthRegen=0,t.manaRegen=0,t.projectileSpeed=1;const n=t.attributes??{},a=(n.strength??10)-10;t.baseDps+=Math.max(0,a),t.maxHp+=a*2;const s=(n.dexterity??10)-10;t.critChance+=s*.005,t.dodgeChance+=s*.003;const r=(n.intelligence??10)-10;t.maxMana+=r,t.manaRegen+=r*.2;const i=(n.vitality??10)-10;t.maxHp+=i*3,t.healthRegen+=i*.1;const c=(n.luck??5)-5;t.critChance+=c*.005;const d=t.skills??{};d.strength&&(t.baseDps+=d.strength),d.precision&&(t.critChance=(t.critChance??0)+d.precision*.01),d.agility&&(t.dodgeChance=(t.dodgeChance??0)+d.agility*.01),d.resilience&&(t.armor=(t.armor??0)+d.resilience);let u={};if(t.equipment){const m={};Object.values(t.equipment).forEach(p=>{if(p){for(const[g,S]of Object.entries(p.baseStats))typeof S=="number"&&g!=="resistance"&&(m[g]=(m[g]??0)+S);for(const g of p.affixes)g.stat!=="resistance"&&(m[g.stat]=(m[g.stat]??0)+g.value);if(p.sockets&&t.stones){const g=$s(p,t.stones);for(const[S,P]of Object.entries(g))typeof P=="number"&&S!=="resistance"&&(m[S]=(m[S]??0)+P)}}}),u=m}let f={};t.passiveTreeData&&t.passiveTreeState&&(f=Is(t.passiveTreeData,t.passiveTreeState));const v=u.damage??0,x=f.damage??0;t.dps=t.baseDps+v+x,t.armor+=(u.armor??0)+(f.armor??0),t.maxHp+=(u.health??0)+(f.health??0),t.maxMana+=(u.mana??0)+(f.mana??0),t.critChance+=(u.critChance??0)+(f.critChance??0),t.dodgeChance+=(u.dodgeChance??0)+(f.dodgeChance??0),t.blockChance+=(u.blockChance??0)+(f.blockChance??0),t.lifeSteal+=(u.lifeSteal??0)+(f.lifeSteal??0),t.attackSpeed+=(u.attackSpeed??0)+(f.attackSpeed??0),t.healthRegen+=(u.healthRegen??0)+(f.healthRegen??0),t.manaRegen+=(u.manaRegen??0)+(f.manaRegen??0);const h=(t.attributes.strength??0)+(u.strength??0)+(f.strength??0),w=(t.attributes.dexterity??0)+(u.dexterity??0)+(f.dexterity??0),N=(t.attributes.intelligence??0)+(u.intelligence??0)+(f.intelligence??0),y=(t.attributes.vitality??0)+(u.vitality??0)+(f.vitality??0),b=(t.attributes.luck??0)+(u.luck??0)+(f.luck??0);if(h&&(t.baseDps+=h,t.maxHp+=h*2),w&&(t.critChance+=w*.005,t.dodgeChance+=w*.003),N&&(t.maxMana+=N,t.manaRegen+=N*.2),y&&(t.maxHp+=y*3,t.healthRegen+=y*.1),b&&(t.critChance+=b*.005),t.calculatedStats={...u},f&&Object.entries(f).forEach(([m,p])=>{if(typeof p=="number"){const g=t.calculatedStats[m]||0;t.calculatedStats[m]=g+p}}),t.equipped&&(t.dps+=t.equipped.power??0,t.equipped.extras))for(const m of t.equipped.extras)switch(m.key){case"hp":t.maxHp+=m.val;break;case"dps":t.dps+=m.val;break;case"critChance":t.critChance+=m.val;break;case"dodgeChance":t.dodgeChance+=m.val;break;case"lifeSteal":t.lifeSteal+=m.val;break;case"armor":t.armor+=m.val;break;case"projectileSpeed":t.projectileSpeed+=m.val;break}return t.hp=Math.min(t.hp,t.maxHp),t.mana=Math.min(t.mana,t.maxMana),t.critChance=Math.max(0,Math.min(1,t.critChance??0)),t.dodgeChance=Math.max(0,Math.min(.95,t.dodgeChance??0)),t.blockChance=Math.max(0,Math.min(.75,t.blockChance??0)),t.lifeSteal=Math.max(0,Math.min(1,t.lifeSteal??0)),t}function Hm(e){var t;console.log("=== Stone Stats Integration Test ==="),console.log("Player stones:",((t=e.stones)==null?void 0:t.length)||0),e.equipment&&Object.entries(e.equipment).forEach(([n,a])=>{var s;if((s=a==null?void 0:a.sockets)!=null&&s.stones){const r=a.sockets.stones.filter(i=>i!==null);if(console.log(`${n}: ${a.name} has ${r.length} socketed stones`),r.length>0&&e.stones){const i=$s(a,e.stones);console.log("  Stone stats:",i)}}}),console.log("Final player stats:"),console.log(`  DPS: ${e.dps}`),console.log(`  Armor: ${e.armor}`),console.log(`  Max HP: ${e.maxHp}`),console.log(`  Crit Chance: ${e.critChance}`),console.log("=== End Test ===")}typeof window<"u"&&(window.testStoneStats=Hm);const cd={melee:["Goblin","Orc Warrior","Skeleton Fighter","Bandit","Troll"],ranged:["Goblin Archer","Orc Hunter","Skeleton Archer","Bandit Marksman","Dark Elf"],caster:["Goblin Shaman","Orc Mage","Necromancer","Dark Wizard","Lich"],tank:["Orc Guardian","Stone Golem","Armored Knight","Shield Bearer","Iron Colossus"],assassin:["Shadow Rogue","Dark Assassin","Poison Blade","Night Stalker","Void Walker"],boss:["Goblin King","Orc Chieftain","Lich Lord","Dragon","Demon Lord"],beast:["Dire Wolf","Giant Spider","Cave Bear","Savage Boar","Frost Tiger"],undead:["Zombie","Wraith","Skeleton Mage","Banshee","Death Knight"],elemental:["Fire Elemental","Ice Elemental","Lightning Elemental","Earth Elemental","Wind Elemental"],demon:["Imp","Hellhound","Succubus","Balrog","Pit Lord"],construct:["Clockwork Golem","Crystal Guardian","Steam Automaton","Arcane Sentinel","War Machine"],training_dummy:["Training Dummy","Practice Target","Combat Dummy","Test Target","Sparring Dummy"],swarm:["Rat Swarm","Spider Brood","Locust Cloud","Bat Colony","Wasp Nest"],mimic:["Treasure Mimic","Chest Mimic","Door Mimic","Weapon Mimic","Armor Mimic"],phase_beast:["Phase Spider","Ethereal Wolf","Dimensional Cat","Void Hound","Astral Tiger"],necromancer:["Death Caller","Bone Lord","Soul Reaper","Grave Master","Undead Summoner"],void_spawn:["Void Crawler","Shadow Spawn","Dark Tendril","Abyss Walker","Nightmare Entity"],crystal_guardian:["Crystal Sentinel","Gem Protector","Prism Guardian","Shard Keeper","Mineral Warden"]},sl=["berserker","precise","regeneration","shield","poison","freeze","lightning","split","mimic_equipment","phase_shift","raise_dead","void_drain","crystal_armor","adaptive_resistance","life_link","temporal_shift"];let Ym=1;function Zi(e,t){const n=cd[e]||cd.melee;return`${n[Math.floor(Math.random()*n.length)]} L${t}`}function Wh(e){const n=Math.floor(e/10)*.01;return Math.random()<.02+n}function Hh(e,t){if(t)return sl[Math.floor(Math.random()*sl.length)];if(Math.random()<.2)switch(e){case"melee":return Math.random()<.6?"berserker":"precise";case"ranged":return Math.random()<.7?"precise":"poison";case"caster":return Math.random()<.5?"lightning":"freeze";case"tank":return Math.random()<.8?"shield":"regeneration";case"assassin":return Math.random()<.6?"poison":"precise";case"swarm":return"split";case"mimic":return"mimic_equipment";case"phase_beast":return"phase_shift";case"necromancer":return Math.random()<.7?"raise_dead":"regeneration";case"void_spawn":return Math.random()<.8?"void_drain":"adaptive_resistance";case"crystal_guardian":return Math.random()<.6?"crystal_armor":"adaptive_resistance";default:return sl[Math.floor(Math.random()*sl.length)]}}function jl(e,t){let n;const a=Wh(e);if(a)n="boss";else if(t)n=t;else{const u=Math.random();u>.98?n="crystal_guardian":u>.96?n="void_spawn":u>.94?n="necromancer":u>.92?n="phase_beast":u>.9?n="mimic":u>.88?n="swarm":u>.85?n="construct":u>.82?n="demon":u>.79?n="elemental":u>.76?n="undead":u>.73?n="beast":u>.68?n="assassin":u>.58?n="tank":u>.43?n="caster":u>.23?n="ranged":n="melee"}let s=25+e*12,r=0;switch(n){case"tank":s=Math.floor(s*1.8),r=Math.floor(e*.3);break;case"boss":s=Math.floor(s*3.5),r=Math.floor(e*.5);break;case"assassin":s=Math.floor(s*.7);break;case"caster":s=Math.floor(s*.9);break;case"beast":s=Math.floor(s*1.3),r=Math.floor(e*.1);break;case"undead":s=Math.floor(s*1.1);break;case"elemental":s=Math.floor(s*1.2),r=Math.floor(e*.2);break;case"demon":s=Math.floor(s*1.4),r=Math.floor(e*.15);break;case"construct":s=Math.floor(s*1.6),r=Math.floor(e*.4);break;case"training_dummy":s=Math.floor(s*2),r=0;break;case"swarm":s=Math.floor(s*.4),r=0;break;case"mimic":s=Math.floor(s*1.5),r=Math.floor(e*.2);break;case"phase_beast":s=Math.floor(s*.8),r=0;break;case"necromancer":s=Math.floor(s*1.2),r=Math.floor(e*.1);break;case"void_spawn":s=Math.floor(s*1.1),r=Math.floor(e*.05);break;case"crystal_guardian":s=Math.floor(s*2.2),r=Math.floor(e*.6);break}const i=Hh(n,a),c=Zi(a?"boss":n,e);return{id:"e"+Ym++,name:a?`[Boss] ${c}`:c,level:e,maxHp:s,hp:s,type:n,specialAbility:i,isBoss:a,state:"alive",alpha:1,statusEffects:[],armor:r,splitCount:n==="swarm"?Math.floor(e/5)+2:void 0,mimickedEquipment:n==="mimic"?null:void 0,phaseTimer:n==="phase_beast"?0:void 0,summonedMinions:n==="necromancer"?[]:void 0,resistances:n==="crystal_guardian"||n==="void_spawn"?{}:void 0,lastDamageType:void 0,linkedEnemies:void 0,temporalShiftCooldown:0}}function Yh(e){switch(e){case"melee":return"text-red-400";case"ranged":return"text-green-400";case"caster":return"text-blue-400";case"tank":return"text-gray-400";case"assassin":return"text-purple-400";case"boss":return"text-yellow-400";case"beast":return"text-orange-400";case"undead":return"text-gray-300";case"elemental":return"text-cyan-400";case"demon":return"text-red-600";case"construct":return"text-amber-400";case"training_dummy":return"text-pink-400";case"swarm":return"text-yellow-300";case"mimic":return"text-indigo-400";case"phase_beast":return"text-violet-400";case"necromancer":return"text-green-600";case"void_spawn":return"text-black";case"crystal_guardian":return"text-emerald-400";default:return"text-white"}}function Kh(e=1){const t=Math.floor((25+e*12)*40),n=Zi("training_dummy",e);return{id:"dummy"+Ym++,name:` ${n}`,level:e,maxHp:t,hp:t,type:"training_dummy",specialAbility:void 0,isBoss:!1,state:"alive",alpha:1,statusEffects:[],armor:0}}function Xh(e){if(e.specialAbility!=="split"||!e.splitCount||e.hp>0)return[];const t=[],n=Math.min(e.splitCount,4);for(let a=0;a<n;a++){const s={...e,id:`${e.id}_split_${a}`,name:`Small ${e.name}`,level:Math.max(1,e.level-2),maxHp:Math.floor(e.maxHp*.3),hp:Math.floor(e.maxHp*.3),splitCount:void 0,specialAbility:void 0};t.push(s)}return t}function Qh(e,t){var a,s,r,i;return e.specialAbility!=="mimic_equipment"||e.mimickedEquipment?{}:{armor:(e.armor||0)+(((a=t.calculatedStats)==null?void 0:a.armor)||0)*.5,mimickedEquipment:{weapon:(s=t.equipment)==null?void 0:s.weapon,armor:(r=t.equipment)==null?void 0:r.chest,accessory:(i=t.equipment)==null?void 0:i.amulet}}}function Zh(e){if(e.specialAbility!=="phase_shift")return{isIntangible:!1,phaseTimer:0};const t=Date.now(),n=e.phaseTimer||0;return{isIntangible:(t-n)%5e3>3e3,phaseTimer:n||t}}function Jh(e,t){if(e.specialAbility!=="void_drain"||e.hp<=0)return{};if(Math.random()>.15)return{};const n=Math.floor(t.maxMana*.1),a=Math.floor(t.maxHp*.02);return{playerEffects:{manaDrain:n,hpDrain:a,statusEffect:"void drained"},damage:a}}function eg(e,t,n){if(e.specialAbility!=="crystal_armor")return n;e.resistances||(e.resistances={});const a=e.resistances[t]||0,s=Math.min(.7,a+.1);return e.resistances[t]=s,Math.floor(n*(1-s))}function tg(e,t){if(e.specialAbility!=="adaptive_resistance")return 1;if(e.resistances||(e.resistances={}),e.lastDamageType===t){const n=e.resistances[t]||0,a=Math.min(.5,n+.15);e.resistances[t]=a}return e.lastDamageType=t,1-(e.resistances[t]||0)}function ng(e){if(e.specialAbility!=="temporal_shift")return!1;const t=Date.now(),n=e.temporalShiftCooldown||0;return t-n>8e3&&Math.random()<.1?(e.temporalShiftCooldown=t,!0):t-n<1e3}function ag(e,t,n,a){var c;let s=n,r="",i=[];switch(e.specialAbility){case"split":e.hp<=0&&(i=Xh(e),i.length>0&&(r=`${e.name} splits into ${i.length} smaller enemies!`));break;case"mimic_equipment":const d=Qh(e,t);Object.keys(d).length>0&&(Object.assign(e,d),r=`${e.name} mimics your equipment!`);break;case"phase_shift":const u=Zh(e);u.isIntangible&&(s=0,r=`${e.name} phases out, becoming intangible!`),e.phaseTimer=u.phaseTimer;break;case"void_drain":const f=Jh(e,t);(c=f.playerEffects)!=null&&c.manaDrain&&(t.mana=Math.max(0,(t.mana||0)-f.playerEffects.manaDrain),r=`${e.name} drains ${f.playerEffects.manaDrain} mana!`);break;case"crystal_armor":s=eg(e,a,s),s<n&&(r=`${e.name}'s crystal armor reduces damage!`);break;case"adaptive_resistance":const v=tg(e,a);s=Math.floor(s*(1-v)),v>0&&(r=`${e.name} adapts to ${a} damage!`);break;case"temporal_shift":ng(e)&&(s=0,r=`${e.name} shifts through time, avoiding damage!`,e.temporalShiftCooldown=Date.now()+1e4);break}return{message:r||void 0,statusEffect:void 0,spawnedEnemies:i.length>0?i:void 0}}function sg(e){return e==="Magic"?.03:e==="Rare"?.06:e==="Unique"?.1:e==="Legendary"?.15:0}function Km(e){return e==="Magic"?.02:e==="Rare"?.04:e==="Unique"?.07:e==="Legendary"?.1:0}function lg(e){return(e==null?void 0:e.damageType)||"physical"}function Xm(e){const n=e*.9,a=e*(1+.1);return Math.floor(Math.random()*(a-n+1))+n}function rg(e,t,n){let a=e,s;switch(t){case"fire":a=Math.floor(e*1.1),Math.random()<.15&&(s="burning");break;case"ice":Math.random()<.2&&(s="slowed");break;case"lightning":Math.random()<.1&&(s="stunned");break;case"poison":a=Math.floor(e*.8),Math.random()<.25&&(s="poisoned");break}return{damage:a,statusEffect:s}}function ig(e){return .05+Math.min(.15,e.level*.005)}function dd(e,t){var v,x,h,w,N,y,b;let n=Math.max(1,Math.floor(e.dps||1));(v=e.calculatedStats)!=null&&v.damage&&(n+=e.calculatedStats.damage);let a=0;if(e.attributes){const m=e.attributes.strength||0,p=e.attributes.intelligence||0,g=e.attributes.dexterity||0,S=e.attributes.luck||0;t==="physical"&&(a+=Math.floor(m*.6+Math.sqrt(m)*.4)),t!=="physical"&&(a+=Math.floor(p*.8+Math.sqrt(p)*.6)),a+=Math.floor(g*.4+Math.sqrt(g)*.2),a+=Math.floor(S*.2+Math.sqrt(S)*.3)}let s=0;if(e.calculatedStats)switch(t){case"fire":s=(e.calculatedStats.fireDamage||0)*1.1;break;case"ice":s=(e.calculatedStats.iceDamage||0)*1;break;case"lightning":s=(e.calculatedStats.lightningDamage||0)*1.2;break;case"poison":s=(e.calculatedStats.poisonDamage||0)*.9;break}let r=((x=e.calculatedStats)==null?void 0:x.critChance)||.05;if((h=e.equipped)!=null&&h.rarity&&(r+=sg(e.equipped.rarity)),e.attributes){const m=e.attributes.dexterity||0,p=e.attributes.luck||0;r+=Math.min(.25,m*.003),r+=Math.min(.35,p*.002+Math.sqrt(p)*.001)}t==="lightning"&&(r+=.08),t==="ice"&&(r+=.03);let i=1.8;if((w=e.calculatedStats)!=null&&w.critMultiplier&&(i+=e.calculatedStats.critMultiplier),(N=e.attributes)!=null&&N.luck){const m=e.attributes.luck;i+=Math.min(1,m*.015+Math.sqrt(m)*.01)}const c=Math.random()<r,d=((y=e.calculatedStats)==null?void 0:y.armorPenetration)||0;let u=n+a+s;(b=e.calculatedStats)!=null&&b.damageMultiplier&&(u=Math.floor(u*(1+e.calculatedStats.damageMultiplier))),u=Xm(u);const f=c?Math.floor(u*i):u;return{baseDamage:n,attributeBonus:a,elementalBonus:s,criticalMultiplier:c?i:1,armorPenetration:d,finalDamage:f,isCritical:c,damageType:t}}function ud(e,t){var u,f,v,x,h,w,N,y;const n=((u=e.calculatedStats)==null?void 0:u.armor)||0;let a=(((f=e.calculatedStats)==null?void 0:f.dodgeChance)||0)+(((v=e.skills)==null?void 0:v.agility)||0)*.01;if((x=e.equipped)!=null&&x.rarity&&(a+=Km(e.equipped.rarity)),(h=e.attributes)!=null&&h.dexterity){const b=e.attributes.dexterity;a+=Math.min(.3,b*.002+Math.sqrt(b)*.001)}const s=((w=e.calculatedStats)==null?void 0:w.blockChance)||0,r=Math.min(.85,n*.012+Math.sqrt(n)*.008),i=n;let c=((N=e.calculatedStats)==null?void 0:N.damageReduction)||0;if((y=e.attributes)!=null&&y.vitality){const b=e.attributes.vitality;c+=Math.min(.4,b*.006+Math.sqrt(b)*.004)}const d=Math.min(.9,r+c);return{baseArmor:n,effectiveArmor:i,damageReduction:c,blockChance:s,dodgeChance:a,finalDamageReduction:d}}function og(e,t){var P,T,C,_,D,E,ie,q,V,me,xe,oe;const n={...e},a={...t};let s=(((P=n.calculatedStats)==null?void 0:P.dodgeChance)||0)+(((T=n.skills)==null?void 0:T.agility)||0)*.01;(C=n.equipped)!=null&&C.rarity&&(s+=Km(n.equipped.rarity));const r=ig(a);let i=!0,c=!1,d=!1,u=!0,f=0,v=0,x=!1,h,w="";Math.random()<r&&(d=!0,i=!1);let N="physical";if((D=(_=n.equipment)==null?void 0:_.weapon)!=null&&D.damageType?N=n.equipment.weapon.damageType:n.equipped&&(N=lg(n.equipped)),i){const A=dd(n,N);f=A.finalDamage,x=A.isCritical,console.log(`Combat: Advanced damage calculation - Base: ${A.baseDamage}, Final: ${A.finalDamage}, Crit: ${x}`);const Q=rg(f,N);if(f=Q.damage,h=Q.statusEffect,(E=n.calculatedStats)!=null&&E.lifeSteal&&f>0){const L=Math.floor(f*n.calculatedStats.lifeSteal);n.hp=Math.min(n.maxHp,n.hp+L)}if((ie=n.calculatedStats)!=null&&ie.manaSteal&&f>0){const L=Math.floor(f*n.calculatedStats.manaSteal);n.mana=Math.min(n.maxMana||100,(n.mana||0)+L)}(q=n.calculatedStats)!=null&&q.cleaveChance&&Math.random()<n.calculatedStats.cleaveChance&&(h=h?`${h}, cleave`:"cleave"),(V=n.calculatedStats)!=null&&V.stunChance&&Math.random()<n.calculatedStats.stunChance&&(h=h?`${h}, stunned`:"stunned"),a.hp-=f;const X=ag(a,n,f,N);X.message&&(w=X.message)}let y="",b=!1;if(i){const A=x?" (CRITICAL!)":"",Q=N!=="physical"?` [${N.toUpperCase()}]`:"",X=h?` (${h})`:"";y=`Player hits ${a.name} for ${f}${Q}${A}${X}`,w&&(y+=`. ${w}`)}else y=`${a.name} dodged player's attack!`;if(a.hp<=0)b=!0,y=i?`Player dealt final blow to ${a.name}!`:y;else if(i)if(Math.random()<s)c=!0,u=!1,y+=`. Player dodged ${a.name}'s attack!`;else{const A=((me=n.calculatedStats)==null?void 0:me.blockChance)||0;if(Math.random()<A)u=!1,y+=`. Player blocked ${a.name}'s attack!`;else{const X=a.type==="melee"?.9:a.type==="ranged"?.75:1;let L=Math.max(.5,X+a.level*.5);if(a.specialAbility)switch(a.specialAbility){case"berserker":a.hp<a.maxHp*.3&&(L=Math.floor(L*1.5),y+=" (BERSERKER RAGE!)");break;case"precise":Math.random()<.15&&(L=Math.floor(L*1.3),y+=" (PRECISE STRIKE!)");break;case"poison":Math.random()<.2&&(h=h?`${h}, poisoned`:"poisoned",y+=" (POISON ATTACK!)");break;case"lightning":Math.random()<.15&&(L=Math.floor(L*1.2),h=h?`${h}, stunned`:"stunned",y+=" (LIGHTNING STRIKE!)");break}v=Xm(L);const G=ud(n);if(v=Math.floor(v*(1-G.finalDamageReduction)),v=Math.max(1,v),console.log(`Combat: Advanced defense calculation - Incoming: ${L}, Final reduction: ${G.finalDamageReduction}, Final damage: ${v}`),(xe=n.calculatedStats)!=null&&xe.thorns&&n.calculatedStats.thorns>0&&(a.hp-=n.calculatedStats.thorns,y+=`. Thorns deals ${n.calculatedStats.thorns} damage to ${a.name}`),(oe=n.calculatedStats)!=null&&oe.reflectDamage&&n.calculatedStats.reflectDamage>0){const le=Math.floor(v*n.calculatedStats.reflectDamage);a.hp-=le,y+=`. Reflected ${le} damage to ${a.name}`}n.hp-=v,y+=`. ${a.name} hits back for ${v}`,n.hp<=0&&(n.hp=Math.max(1,Math.floor(n.maxHp*.6)),n.gold=Math.max(0,n.gold-Math.min(10,Math.floor(n.level*2))),y+=". Player was knocked out and revived!")}}let m=0,p=0,g=0,S=0;if(i){const A=dd(n,N);m=A.armorPenetration,g=A.isCritical?1:0,S=A.criticalMultiplier}return u&&!c&&(p=ud(n).finalDamageReduction),{player:n,enemy:a,enemyDefeated:b,message:y,didPlayerHit:i,didEnemyHit:u,playerDodged:c,enemyDodged:d,crit:x,damage:f,enemyDamage:v,damageType:N,statusEffect:h,armorPenetration:m,damageReduction:p,effectiveCritChance:g,effectiveCritMultiplier:S}}const _s={sword:{name:"Sword",slot:"weapon",baseStats:{damage:8},damageTypes:["physical","fire","ice","lightning"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/swords.svg",spriteId:"iron_sword",layer:2}},axe:{name:"Axe",slot:"weapon",baseStats:{damage:12,critChance:.05},damageTypes:["physical","fire"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/axes.svg",spriteId:"iron_axe",layer:2}},mace:{name:"Mace",slot:"weapon",baseStats:{damage:10,armor:2},damageTypes:["physical","lightning"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/maces.svg",spriteId:"iron_mace",layer:2}},dagger:{name:"Dagger",slot:"weapon",baseStats:{damage:6,critChance:.1,attackSpeed:.3},damageTypes:["physical","poison"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/daggers.svg",spriteId:"iron_dagger",layer:2}},bow:{name:"Bow",slot:"weapon",baseStats:{damage:9,critChance:.08},damageTypes:["physical","fire","ice","poison"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/bows.svg",spriteId:"wooden_bow",layer:2}},crossbow:{name:"Crossbow",slot:"weapon",baseStats:{damage:14,critChance:.06},damageTypes:["physical","lightning"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/crossbows.svg",spriteId:"light_crossbow",layer:2}},staff:{name:"Staff",slot:"weapon",baseStats:{damage:7,mana:20,manaRegen:2},damageTypes:["fire","ice","lightning"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/staves.svg",spriteId:"wooden_staff",layer:2}},wand:{name:"Wand",slot:"weapon",baseStats:{damage:5,mana:15,critChance:.07},damageTypes:["fire","ice","lightning","poison"],requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/weapons/wands.svg",spriteId:"basic_wand",layer:2}}},Zl={helm:{name:"Helm",slot:"helm",baseStats:{armor:5,health:15},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/helm.svg",spriteId:"leather_helm",layer:1}},chest:{name:"Chest Armor",slot:"chest",baseStats:{armor:12,health:30},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/chest.svg",spriteId:"leather_chest",layer:1}},legs:{name:"Leg Armor",slot:"legs",baseStats:{armor:8,health:20},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/legs.svg",spriteId:"leather_legs",layer:1}},boots:{name:"Boots",slot:"boots",baseStats:{armor:4,dodgeChance:.02},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/boots.svg",spriteId:"leather_boots",layer:1}},gloves:{name:"Gloves",slot:"gloves",baseStats:{armor:3,attackSpeed:.1},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/gloves.svg",spriteId:"leather_gloves",layer:1}},shield:{name:"Shield",slot:"offhand",baseStats:{armor:8,blockChance:.15},requirements:{},visual:{spriteSheet:"/auto-battle-is-awesome-v3/sprites/equipment/armor/shields.svg",spriteId:"wooden_shield",layer:0}}},Jl={ring:{name:"Ring",slot:"ring",baseStats:{},requirements:{}},amulet:{name:"Amulet",slot:"amulet",baseStats:{},requirements:{}},belt:{name:"Belt",slot:"belt",baseStats:{health:10},requirements:{}}},cg=[{name:"of Power",stat:"damage",value:3,tier:1,weight:100},{name:"of Might",stat:"damage",value:6,tier:2,weight:80},{name:"of Devastation",stat:"damage",value:10,tier:3,weight:40},{name:"of Destruction",stat:"damage",value:15,tier:4,weight:20},{name:"of Annihilation",stat:"damage",value:22,tier:5,weight:10},{name:"of Precision",stat:"critChance",value:.03,tier:1,weight:80},{name:"of Lethality",stat:"critChance",value:.06,tier:2,weight:60},{name:"of Execution",stat:"critChance",value:.1,tier:3,weight:30},{name:"of the Assassin",stat:"critChance",value:.15,tier:4,weight:15},{name:"of Perfect Strike",stat:"critChance",value:.22,tier:5,weight:8},{name:"of Sharpness",stat:"critMultiplier",value:.2,tier:1,weight:70},{name:"of Brutality",stat:"critMultiplier",value:.4,tier:2,weight:50},{name:"of Savagery",stat:"critMultiplier",value:.7,tier:3,weight:25},{name:"of Massacre",stat:"critMultiplier",value:1,tier:4,weight:12},{name:"of Swiftness",stat:"attackSpeed",value:.1,tier:1,weight:70},{name:"of Haste",stat:"attackSpeed",value:.2,tier:2,weight:50},{name:"of Lightning",stat:"attackSpeed",value:.35,tier:3,weight:25},{name:"of the Storm",stat:"attackSpeed",value:.5,tier:4,weight:12},{name:"of Time Warp",stat:"attackSpeed",value:.75,tier:5,weight:6},{name:"of Vampirism",stat:"lifeSteal",value:.03,tier:1,weight:60},{name:"of Blood",stat:"lifeSteal",value:.06,tier:2,weight:40},{name:"of the Vampire",stat:"lifeSteal",value:.1,tier:3,weight:20},{name:"of Soul Drain",stat:"lifeSteal",value:.15,tier:4,weight:10},{name:"of Mana Burn",stat:"manaSteal",value:.05,tier:1,weight:50},{name:"of Energy Drain",stat:"manaSteal",value:.1,tier:2,weight:30},{name:"of the Void",stat:"manaSteal",value:.18,tier:3,weight:15},{name:"of the Warrior",stat:"strength",value:5,tier:1,weight:60},{name:"of the Berserker",stat:"strength",value:10,tier:2,weight:40},{name:"of the Champion",stat:"strength",value:18,tier:3,weight:20},{name:"of the Hunter",stat:"dexterity",value:5,tier:1,weight:60},{name:"of the Ranger",stat:"dexterity",value:10,tier:2,weight:40},{name:"of the Marksman",stat:"dexterity",value:18,tier:3,weight:20},{name:"of Thorns",stat:"thorns",value:3,tier:1,weight:40},{name:"of Spikes",stat:"thorns",value:7,tier:2,weight:25},{name:"of Retaliation",stat:"thorns",value:12,tier:3,weight:12},{name:"of Flames",stat:"fireDamage",value:5,tier:1,weight:50},{name:"of Inferno",stat:"fireDamage",value:12,tier:2,weight:30},{name:"of the Phoenix",stat:"fireDamage",value:22,tier:3,weight:15},{name:"of Frost",stat:"iceDamage",value:4,tier:1,weight:50},{name:"of Winter",stat:"iceDamage",value:10,tier:2,weight:30},{name:"of the Glacier",stat:"iceDamage",value:18,tier:3,weight:15},{name:"of Sparks",stat:"lightningDamage",value:6,tier:1,weight:50},{name:"of Thunder",stat:"lightningDamage",value:14,tier:2,weight:30},{name:"of the Storm Lord",stat:"lightningDamage",value:25,tier:3,weight:15},{name:"of Venom",stat:"poisonDamage",value:3,tier:1,weight:45},{name:"of Toxicity",stat:"poisonDamage",value:8,tier:2,weight:25},{name:"of the Serpent",stat:"poisonDamage",value:15,tier:3,weight:12},{name:"of Piercing",stat:"armorPenetration",value:.1,tier:1,weight:40},{name:"of Sundering",stat:"armorPenetration",value:.2,tier:2,weight:25},{name:"of Devastation",stat:"armorPenetration",value:.35,tier:3,weight:12},{name:"of Amplification",stat:"damageMultiplier",value:.08,tier:1,weight:35},{name:"of Enhancement",stat:"damageMultiplier",value:.15,tier:2,weight:20},{name:"of Supremacy",stat:"damageMultiplier",value:.25,tier:3,weight:10},{name:"of Stunning",stat:"stunChance",value:.05,tier:1,weight:30},{name:"of Paralysis",stat:"stunChance",value:.1,tier:2,weight:18},{name:"of Incapacitation",stat:"stunChance",value:.18,tier:3,weight:8}],dg=[{name:"of Protection",stat:"armor",value:2,tier:1,weight:100},{name:"of Defense",stat:"armor",value:4,tier:2,weight:80},{name:"of the Fortress",stat:"armor",value:7,tier:3,weight:40},{name:"of the Bastion",stat:"armor",value:12,tier:4,weight:20},{name:"of Invincibility",stat:"armor",value:18,tier:5,weight:10},{name:"of Vitality",stat:"health",value:15,tier:1,weight:90},{name:"of Life",stat:"health",value:30,tier:2,weight:70},{name:"of the Titan",stat:"health",value:50,tier:3,weight:35},{name:"of the Colossus",stat:"health",value:80,tier:4,weight:18},{name:"of Immortality",stat:"health",value:120,tier:5,weight:8},{name:"of Evasion",stat:"dodgeChance",value:.02,tier:1,weight:70},{name:"of Agility",stat:"dodgeChance",value:.04,tier:2,weight:50},{name:"of the Wind",stat:"dodgeChance",value:.07,tier:3,weight:25},{name:"of the Phantom",stat:"dodgeChance",value:.12,tier:4,weight:12},{name:"of Ethereal Form",stat:"dodgeChance",value:.18,tier:5,weight:6},{name:"of Blocking",stat:"blockChance",value:.05,tier:1,weight:60},{name:"of the Shield",stat:"blockChance",value:.1,tier:2,weight:40},{name:"of the Guardian",stat:"blockChance",value:.16,tier:3,weight:20},{name:"of Perfect Defense",stat:"blockChance",value:.25,tier:4,weight:10},{name:"of Regeneration",stat:"healthRegen",value:1,tier:1,weight:60},{name:"of Recovery",stat:"healthRegen",value:2,tier:2,weight:40},{name:"of Renewal",stat:"healthRegen",value:4,tier:3,weight:20},{name:"of Restoration",stat:"healthRegen",value:7,tier:4,weight:10},{name:"of Eternal Life",stat:"healthRegen",value:12,tier:5,weight:5},{name:"of Mana",stat:"mana",value:20,tier:1,weight:70},{name:"of the Mind",stat:"mana",value:40,tier:2,weight:50},{name:"of Arcane Power",stat:"mana",value:70,tier:3,weight:25},{name:"of the Archmage",stat:"mana",value:110,tier:4,weight:12},{name:"of Meditation",stat:"manaRegen",value:1,tier:1,weight:50},{name:"of Focus",stat:"manaRegen",value:2,tier:2,weight:30},{name:"of Enlightenment",stat:"manaRegen",value:4,tier:3,weight:15},{name:"of the Bear",stat:"vitality",value:5,tier:1,weight:70},{name:"of the Ox",stat:"vitality",value:10,tier:2,weight:50},{name:"of the Mountain",stat:"vitality",value:18,tier:3,weight:25},{name:"of the Sage",stat:"intelligence",value:5,tier:1,weight:60},{name:"of the Scholar",stat:"intelligence",value:10,tier:2,weight:40},{name:"of the Wizard",stat:"intelligence",value:18,tier:3,weight:20},{name:"of Spines",stat:"thorns",value:2,tier:1,weight:50},{name:"of Barbs",stat:"thorns",value:5,tier:2,weight:30},{name:"of the Hedgehog",stat:"thorns",value:9,tier:3,weight:15},{name:"of Fire Resistance",stat:"fireResistance",value:.1,tier:1,weight:60},{name:"of Fire Immunity",stat:"fireResistance",value:.2,tier:2,weight:35},{name:"of the Salamander",stat:"fireResistance",value:.35,tier:3,weight:18},{name:"of Cold Resistance",stat:"iceResistance",value:.1,tier:1,weight:60},{name:"of Cold Immunity",stat:"iceResistance",value:.2,tier:2,weight:35},{name:"of the Yeti",stat:"iceResistance",value:.35,tier:3,weight:18},{name:"of Lightning Resistance",stat:"lightningResistance",value:.1,tier:1,weight:60},{name:"of Lightning Immunity",stat:"lightningResistance",value:.2,tier:2,weight:35},{name:"of the Storm Walker",stat:"lightningResistance",value:.35,tier:3,weight:18},{name:"of Poison Resistance",stat:"poisonResistance",value:.12,tier:1,weight:55},{name:"of Poison Immunity",stat:"poisonResistance",value:.25,tier:2,weight:30},{name:"of the Antidote",stat:"poisonResistance",value:.4,tier:3,weight:15},{name:"of Absorption",stat:"damageReduction",value:.05,tier:1,weight:45},{name:"of Mitigation",stat:"damageReduction",value:.1,tier:2,weight:25},{name:"of the Fortress",stat:"damageReduction",value:.18,tier:3,weight:12},{name:"of Swiftness",stat:"movementSpeed",value:.1,tier:1,weight:40},{name:"of Haste",stat:"movementSpeed",value:.2,tier:2,weight:25},{name:"of the Wind Walker",stat:"movementSpeed",value:.35,tier:3,weight:12},{name:"of Reflection",stat:"reflectDamage",value:.1,tier:1,weight:35},{name:"of Mirroring",stat:"reflectDamage",value:.2,tier:2,weight:20},{name:"of the Mirror Shield",stat:"reflectDamage",value:.35,tier:3,weight:10}],ug=[{name:"of Strength",stat:"strength",value:3,tier:1,weight:80},{name:"of Great Strength",stat:"strength",value:6,tier:2,weight:60},{name:"of Mighty Strength",stat:"strength",value:10,tier:3,weight:30},{name:"of Legendary Strength",stat:"strength",value:16,tier:4,weight:15},{name:"of Divine Strength",stat:"strength",value:25,tier:5,weight:8},{name:"of Dexterity",stat:"dexterity",value:3,tier:1,weight:80},{name:"of Great Dexterity",stat:"dexterity",value:6,tier:2,weight:60},{name:"of Swift Dexterity",stat:"dexterity",value:10,tier:3,weight:30},{name:"of Perfect Dexterity",stat:"dexterity",value:16,tier:4,weight:15},{name:"of Divine Grace",stat:"dexterity",value:25,tier:5,weight:8},{name:"of Intelligence",stat:"intelligence",value:3,tier:1,weight:80},{name:"of Great Intelligence",stat:"intelligence",value:6,tier:2,weight:60},{name:"of Brilliant Intelligence",stat:"intelligence",value:10,tier:3,weight:30},{name:"of Genius Intelligence",stat:"intelligence",value:16,tier:4,weight:15},{name:"of Omniscience",stat:"intelligence",value:25,tier:5,weight:8},{name:"of Vitality",stat:"vitality",value:3,tier:1,weight:80},{name:"of Great Vitality",stat:"vitality",value:6,tier:2,weight:60},{name:"of Robust Vitality",stat:"vitality",value:10,tier:3,weight:30},{name:"of Supreme Vitality",stat:"vitality",value:16,tier:4,weight:15},{name:"of Eternal Vitality",stat:"vitality",value:25,tier:5,weight:8},{name:"of Luck",stat:"luck",value:3,tier:1,weight:60},{name:"of Good Luck",stat:"luck",value:6,tier:2,weight:40},{name:"of Great Luck",stat:"luck",value:10,tier:3,weight:20},{name:"of Incredible Luck",stat:"luck",value:16,tier:4,weight:10},{name:"of Divine Fortune",stat:"luck",value:25,tier:5,weight:5},{name:"of Fortune",stat:"goldFind",value:.15,tier:1,weight:70},{name:"of Wealth",stat:"goldFind",value:.25,tier:2,weight:50},{name:"of Greed",stat:"goldFind",value:.4,tier:3,weight:25},{name:"of Avarice",stat:"goldFind",value:.6,tier:4,weight:12},{name:"of Midas",stat:"goldFind",value:.85,tier:5,weight:6},{name:"of Discovery",stat:"magicFind",value:.1,tier:1,weight:60},{name:"of Finding",stat:"magicFind",value:.2,tier:2,weight:40},{name:"of the Seeker",stat:"magicFind",value:.35,tier:3,weight:20},{name:"of the Treasure Hunter",stat:"magicFind",value:.55,tier:4,weight:10},{name:"of the Artifact Finder",stat:"magicFind",value:.8,tier:5,weight:5},{name:"of Learning",stat:"experienceBonus",value:.1,tier:1,weight:50},{name:"of Wisdom",stat:"experienceBonus",value:.2,tier:2,weight:30},{name:"of the Scholar",stat:"experienceBonus",value:.35,tier:3,weight:15},{name:"of the Master",stat:"experienceBonus",value:.55,tier:4,weight:8},{name:"of Enlightenment",stat:"experienceBonus",value:.8,tier:5,weight:4},{name:"of Accuracy",stat:"critChance",value:.02,tier:1,weight:60},{name:"of Keen Eye",stat:"critChance",value:.04,tier:2,weight:40},{name:"of Eagle Eye",stat:"critChance",value:.07,tier:3,weight:20},{name:"of Nimbleness",stat:"dodgeChance",value:.02,tier:1,weight:50},{name:"of Quickness",stat:"dodgeChance",value:.04,tier:2,weight:30},{name:"of the Cat",stat:"dodgeChance",value:.07,tier:3,weight:15},{name:"of Alacrity",stat:"attackSpeed",value:.08,tier:1,weight:40},{name:"of Velocity",stat:"attackSpeed",value:.15,tier:2,weight:25},{name:"of the Cheetah",stat:"attackSpeed",value:.25,tier:3,weight:12},{name:"of Health",stat:"health",value:25,tier:1,weight:70},{name:"of Greater Health",stat:"health",value:50,tier:2,weight:50},{name:"of Superior Health",stat:"health",value:85,tier:3,weight:25},{name:"of Energy",stat:"mana",value:30,tier:1,weight:60},{name:"of Greater Energy",stat:"mana",value:60,tier:2,weight:40},{name:"of Superior Energy",stat:"mana",value:100,tier:3,weight:20},{name:"of Vampirism",stat:"lifeSteal",value:.03,tier:1,weight:35},{name:"of Blood Drinking",stat:"lifeSteal",value:.06,tier:2,weight:20},{name:"of the Vampire Lord",stat:"lifeSteal",value:.12,tier:3,weight:10},{name:"of Siphoning",stat:"manaSteal",value:.04,tier:1,weight:30},{name:"of Draining",stat:"manaSteal",value:.08,tier:2,weight:18},{name:"of the Lich",stat:"manaSteal",value:.15,tier:3,weight:8},{name:"of Doubling",stat:"doubleDropChance",value:.05,tier:2,weight:15},{name:"of Multiplication",stat:"doubleDropChance",value:.1,tier:3,weight:8},{name:"of the Twins",stat:"doubleDropChance",value:.18,tier:4,weight:4},{name:"of Cleaving",stat:"cleaveChance",value:.1,tier:2,weight:20},{name:"of Splitting",stat:"cleaveChance",value:.2,tier:3,weight:12},{name:"of the Berserker",stat:"cleaveChance",value:.35,tier:4,weight:6},{name:"of Warding",stat:"spellResistance",value:.1,tier:1,weight:40},{name:"of Protection",stat:"spellResistance",value:.2,tier:2,weight:25},{name:"of the Arcane Shield",stat:"spellResistance",value:.35,tier:3,weight:12},{name:"of Stability",stat:"stunResistance",value:.15,tier:1,weight:35},{name:"of Steadfastness",stat:"stunResistance",value:.3,tier:2,weight:20},{name:"of the Immovable",stat:"stunResistance",value:.5,tier:3,weight:10},{name:"of Time Dilation",stat:"cooldownReduction",value:.1,tier:3,weight:8},{name:"of Temporal Mastery",stat:"cooldownReduction",value:.2,tier:4,weight:4},{name:"of the Time Lord",stat:"cooldownReduction",value:.35,tier:5,weight:2}],Ps={Common:{color:"#9CA3AF",affixCount:[0,1],statMultiplier:1},Magic:{color:"#3B82F6",affixCount:[2,2],statMultiplier:1.3},Rare:{color:"#EAB308",affixCount:[3,3],statMultiplier:1.6},Legendary:{color:"#F97316",affixCount:[4,4],statMultiplier:2.2},Mythic:{color:"#E879F9",affixCount:[5,5],statMultiplier:2.8},Divine:{color:"#06B6D4",affixCount:[6,6],statMultiplier:3.5},Unique:{color:"#A855F7",affixCount:[6,6],statMultiplier:3,hasSpecialModifiers:!0}},Fe=[{id:"weapon",name:"Weapon",icon:"",category:"weapon"},{id:"offhand",name:"Off-Hand",icon:"",category:"armor"},{id:"helm",name:"Helm",icon:"",category:"armor"},{id:"chest",name:"Chest",icon:"",category:"armor"},{id:"gloves",name:"Gloves",icon:"",category:"armor"},{id:"legs",name:"Legs",icon:"",category:"armor"},{id:"boots",name:"Boots",icon:"",category:"armor"},{id:"belt",name:"Belt",icon:"",category:"accessory"},{id:"ring",name:"Ring",icon:"",category:"accessory"},{id:"amulet",name:"Amulet",icon:"",category:"accessory"}];function Qm(e,t,n){if(!e.sockets)throw new Error("Equipment has no sockets");if(n<0||n>=e.sockets.maxSockets)throw new Error("Invalid socket index");if(e.sockets.stones[n]!==null)throw new Error("Socket is already occupied");const a={...e};return a.sockets={...e.sockets,stones:[...e.sockets.stones]},a.sockets.stones[n]=t,a}function Zm(e,t){if(!e.sockets)throw new Error("Equipment has no sockets");if(t<0||t>=e.sockets.maxSockets)throw new Error("Invalid socket index");const n=e.sockets.stones[t],a={...e};return a.sockets={...e.sockets,stones:[...e.sockets.stones]},a.sockets.stones[t]=null,{equipment:a,removedStoneId:n}}function mg(e){if(!e.sockets)return[];const t=[];for(let n=0;n<e.sockets.maxSockets;n++)e.sockets.stones[n]===null&&t.push(n);return t}function md(e){return mg(e).length>0}const Qn={ruby:{name:"Ruby",baseStats:{damage:3,strength:2},socketTypes:["weapon","ring","amulet"],primaryStat:"damage"},sapphire:{name:"Sapphire",baseStats:{mana:15,intelligence:2},socketTypes:["helm","chest","ring","amulet"],primaryStat:"mana"},emerald:{name:"Emerald",baseStats:{dexterity:3,critChance:.02},socketTypes:["weapon","gloves","ring","amulet"],primaryStat:"dexterity"},diamond:{name:"Diamond",baseStats:{armor:5,health:20},socketTypes:["helm","chest","legs","boots"],primaryStat:"armor"},topaz:{name:"Topaz",baseStats:{attackSpeed:.1,luck:2},socketTypes:["weapon","gloves","ring"],primaryStat:"attackSpeed"},amethyst:{name:"Amethyst",baseStats:{vitality:3,healthRegen:.5},socketTypes:["helm","chest","belt","amulet"],primaryStat:"vitality"},onyx:{name:"Onyx",baseStats:{dodgeChance:.02,dexterity:2},socketTypes:["boots","gloves","ring"],primaryStat:"dodgeChance"},opal:{name:"Opal",baseStats:{magicFind:.1,luck:3},socketTypes:["ring","amulet","belt"],primaryStat:"magicFind"},garnet:{name:"Garnet",baseStats:{lifeSteal:.03,strength:2},socketTypes:["weapon","ring","amulet"],primaryStat:"lifeSteal"},citrine:{name:"Citrine",baseStats:{goldFind:.15,luck:2},socketTypes:["ring","amulet","belt"],primaryStat:"goldFind"},peridot:{name:"Peridot",baseStats:{experienceBonus:.1,intelligence:2},socketTypes:["helm","amulet","ring"],primaryStat:"experienceBonus"},turquoise:{name:"Turquoise",baseStats:{manaRegen:.3,intelligence:2},socketTypes:["helm","chest","amulet"],primaryStat:"manaRegen"}},wr={Common:{color:"#9CA3AF",statMultiplier:1,affixCount:[0,1]},Rare:{color:"#3B82F6",statMultiplier:1.5,affixCount:[1,2]},Mythical:{color:"#8B5CF6",statMultiplier:2,affixCount:[2,3]},Divine:{color:"#F59E0B",statMultiplier:2.5,affixCount:[3,4]}},fg=[{name:"of Power",stat:"damage",value:2,tier:1,weight:80},{name:"of Might",stat:"damage",value:4,tier:2,weight:60},{name:"of Force",stat:"damage",value:7,tier:3,weight:40},{name:"of Devastation",stat:"damage",value:12,tier:4,weight:20},{name:"of Life",stat:"health",value:15,tier:1,weight:80},{name:"of Vitality",stat:"health",value:30,tier:2,weight:60},{name:"of the Titan",stat:"health",value:50,tier:3,weight:40},{name:"of Immortality",stat:"health",value:80,tier:4,weight:20},{name:"of Energy",stat:"mana",value:20,tier:1,weight:70},{name:"of the Mind",stat:"mana",value:40,tier:2,weight:50},{name:"of Wisdom",stat:"mana",value:65,tier:3,weight:30},{name:"of the Arcane",stat:"mana",value:100,tier:4,weight:15},{name:"of Strength",stat:"strength",value:2,tier:1,weight:70},{name:"of Great Strength",stat:"strength",value:4,tier:2,weight:50},{name:"of Superior Strength",stat:"strength",value:7,tier:3,weight:30},{name:"of Dexterity",stat:"dexterity",value:2,tier:1,weight:70},{name:"of Great Dexterity",stat:"dexterity",value:4,tier:2,weight:50},{name:"of Superior Dexterity",stat:"dexterity",value:7,tier:3,weight:30},{name:"of Intelligence",stat:"intelligence",value:2,tier:1,weight:70},{name:"of Great Intelligence",stat:"intelligence",value:4,tier:2,weight:50},{name:"of Superior Intelligence",stat:"intelligence",value:7,tier:3,weight:30},{name:"of Vitality",stat:"vitality",value:2,tier:1,weight:70},{name:"of Great Vitality",stat:"vitality",value:4,tier:2,weight:50},{name:"of Superior Vitality",stat:"vitality",value:7,tier:3,weight:30},{name:"of Luck",stat:"luck",value:2,tier:1,weight:60},{name:"of Fortune",stat:"luck",value:4,tier:2,weight:40},{name:"of Destiny",stat:"luck",value:7,tier:3,weight:20},{name:"of Precision",stat:"critChance",value:.015,tier:1,weight:60},{name:"of Accuracy",stat:"critChance",value:.03,tier:2,weight:40},{name:"of the Eagle",stat:"critChance",value:.05,tier:3,weight:20},{name:"of Evasion",stat:"dodgeChance",value:.015,tier:1,weight:50},{name:"of the Cat",stat:"dodgeChance",value:.03,tier:2,weight:30},{name:"of the Shadow",stat:"dodgeChance",value:.05,tier:3,weight:15},{name:"of Speed",stat:"attackSpeed",value:.05,tier:1,weight:50},{name:"of Swiftness",stat:"attackSpeed",value:.1,tier:2,weight:30},{name:"of Lightning",stat:"attackSpeed",value:.18,tier:3,weight:15},{name:"of Wealth",stat:"goldFind",value:.1,tier:1,weight:40},{name:"of Greed",stat:"goldFind",value:.2,tier:2,weight:25},{name:"of Avarice",stat:"goldFind",value:.35,tier:3,weight:12},{name:"of Discovery",stat:"magicFind",value:.08,tier:1,weight:35},{name:"of Finding",stat:"magicFind",value:.15,tier:2,weight:20},{name:"of the Seeker",stat:"magicFind",value:.25,tier:3,weight:10},{name:"of Learning",stat:"experienceBonus",value:.08,tier:1,weight:30},{name:"of Wisdom",stat:"experienceBonus",value:.15,tier:2,weight:18},{name:"of the Scholar",stat:"experienceBonus",value:.25,tier:3,weight:8}];function ua(e){var t;return((t=wr[e])==null?void 0:t.color)||"#FFFFFF"}function er(e){return{ruby:"",sapphire:"",emerald:"",diamond:"",topaz:"",amethyst:"",onyx:"",opal:"",garnet:"",citrine:"",peridot:"",turquoise:""}[e]||""}function Jm(e){const t=e.reduce((a,s)=>a+s.weight,0);let n=Math.random()*t;for(const a of e)if(n-=a.weight,n<=0)return a;return e[e.length-1]}function pg(e,t=!1){const a=[{item:"Common",weight:60},{item:"Rare",weight:25},{item:"Mythical",weight:12},{item:"Divine",weight:3}].map(({item:s,weight:r})=>{let i=r;return s==="Rare"&&(i+=Math.floor(e/10)),s==="Mythical"&&(i+=Math.floor(e/20)),s==="Divine"&&(i+=Math.floor(e/40)),t&&(s==="Rare"&&(i+=10),s==="Mythical"&&(i+=8),s==="Divine"&&(i+=5)),{item:s,weight:Math.max(1,i)}});return Jm(a).item}function hg(e){const t=Object.keys(Qn);return t[Math.floor(Math.random()*t.length)]}function gg(e,t,n){const a=wr[t];if(!a)return[];const[s,r]=a.affixCount,i=Math.floor(Math.random()*(r-s+1))+s;if(i===0)return[];const c=Math.min(4,Math.floor(n/15)+1),d=fg.filter(h=>h.tier<=c),u=[],f=new Set,v=1+(n-1)*.03,x=a.statMultiplier;for(let h=0;h<i&&d.length>0;h++){const w=d.filter(g=>!f.has(g.stat));if(w.length===0)break;const N=Jm(w),y=N.value*v*x,b={Common:.1,Rare:.15,Mythical:.18,Divine:.2}[t]||.1,m=1+(Math.random()*2-1)*b,p=y*m;u.push({...N,value:Math.max(.01,Math.round(p*100)/100)}),f.add(N.stat)}return u}function xg(e,t,n,a){const s=Qn[e],r=t!=="Common"?t:"";let i="";return a.length>0&&t!=="Common"&&(i=` ${a[0].name}`),`${r} ${s.name}${i}`.trim()}function yg(e,t,n,a){var d;const s=((d=wr[n])==null?void 0:d.statMultiplier)||1;let r=0;e.damage&&(r+=e.damage*8),e.health&&(r+=e.health*.3),e.mana&&(r+=e.mana*.2),e.armor&&(r+=e.armor*4);const i=t.reduce((u,f)=>{const x={damage:8,armor:4,health:.3,mana:.2,critChance:150,dodgeChance:120,attackSpeed:30,strength:3,dexterity:3,intelligence:3,vitality:3,luck:5,goldFind:50,magicFind:80,experienceBonus:60}[f.stat]||1;return u+f.value*x},0),c=(r+i)*a*s*.5;return Math.max(1,Math.floor(c))}function e0(e,t=!1){const n=pg(e,t),a=hg(),s=Qn[a],r=wr[n],i=1+(e-1)*.05,c=r.statMultiplier,d={};Object.keys(s.baseStats).forEach(h=>{const w=s.baseStats[h];if(typeof w=="number"){const N={Common:.1,Rare:.15,Mythical:.22,Divine:.25}[n]||.1,y=1+(Math.random()*2-1)*N,b=w*i*c*y;d[h]=Math.round(b*100)/100}});const u=gg(a,n,e),f=xg(a,n,e,u),v=yg(d,u,n,e);return{id:tr(),name:f,type:a,rarity:n,level:e,baseStats:d,affixes:u,socketTypes:s.socketTypes,value:v}}function tr(){const e=Date.now().toString(36),t=Math.random().toString(36).substr(2,5);return`stone_${e}_${t}`}function vg(e){const t=new Set;return e.map(n=>{let a=n.id;if(t.has(a)||!a.includes("_")||!a.startsWith("stone_"))for(a=tr();t.has(a);)a=tr();return t.add(a),{...n,id:a}})}function bg(e){e.forEach(t=>{t.id=tr()})}function wg(e){return{Common:0,Magic:1,Rare:1,Legendary:2,Mythic:2,Divine:3,Unique:2}[e]||0}const Zr=new Map;function t0(e,t){let n;t&&Zr.has(t)?n=Zr.get(t):(n=e.reduce((s,r)=>s+r.weight,0),t&&Zr.set(t,n));let a=Math.random()*n;for(const s of e)if(a-=s.weight,a<=0)return s;return e[e.length-1]}const Jr=new Map;function Sg(e,t=!1){const n=`${e}-${t}`;let a;return Jr.has(n)?a=Jr.get(n):(a=[{item:"Common",weight:60},{item:"Magic",weight:25},{item:"Rare",weight:10},{item:"Legendary",weight:4},{item:"Mythic",weight:2},{item:"Divine",weight:1},{item:"Unique",weight:1}].map(({item:r,weight:i})=>{let c=i;return r==="Magic"&&(c+=Math.floor(e/5)),r==="Rare"&&(c+=Math.floor(e/10)),r==="Legendary"&&(c+=Math.floor(e/20)),r==="Mythic"&&(c+=Math.floor(e/40)),r==="Divine"&&(c+=Math.floor(e/60)),r==="Unique"&&(c+=Math.floor(e/50)),t&&(r==="Rare"&&(c+=5),r==="Legendary"&&(c+=4),r==="Mythic"&&(c+=3),r==="Divine"&&(c+=2),r==="Unique"&&(c+=3)),{item:r,weight:Math.max(1,c)}}),Jr.set(n,a)),t0(a,n).item}function kg(e){const t=Math.max(.3,.6-e*.01),n=Math.min(.5,.3+e*.008),a=Math.random();if(a<t){const s=Object.keys(_s);return{category:"weapon",type:s[Math.floor(Math.random()*s.length)]}}else if(a<t+n){const s=Object.keys(Zl);return{category:"armor",type:s[Math.floor(Math.random()*s.length)]}}else{const s=Object.keys(Jl);return{category:"accessory",type:s[Math.floor(Math.random()*s.length)]}}}function jg(e,t){const a=_s[e].damageTypes,s={Common:.1,Magic:.3,Rare:.5,Legendary:.7,Mythic:.8,Divine:.9,Unique:.85}[t]||.1;if(Math.random()<s&&a.length>1){const r=a.filter(i=>i!=="physical");return r[Math.floor(Math.random()*r.length)]}return"physical"}function Ng(e,t,n){const a=Ps[t];if(!a)return[];const[s,r]=a.affixCount,i=Math.floor(Math.random()*(r-s+1))+s;if(i===0)return[];let c;switch(e){case"weapon":c=cg;break;case"armor":c=dg;break;case"accessory":c=ug;break}const d=Math.min(3,Math.floor(n/10)+1),u=c.filter(w=>w.tier<=d),f=[],v=new Set,x=1+(n-1)*.05,h=a.statMultiplier;for(let w=0;w<i&&u.length>0;w++){const N=u.filter(S=>!v.has(S.stat));if(N.length===0)break;const y=t0(N),b=y.value*x*h,m={Common:.1,Magic:.15,Rare:.18,Legendary:.22,Mythic:.25,Divine:.3,Unique:.28}[t]||.1,p=1+(Math.random()*2-1)*m,g=b*p;f.push({...y,value:Math.max(1,Math.round(g*100)/100)}),v.add(y.stat)}return f}function Cg(e,t,n,a,s=[]){let r="";if(e in _s?r=_s[e].name:e in Zl?r=Zl[e].name:e in Jl?r=Jl[e].name:r="Unknown Item",a&&a!=="physical"){const u={fire:["Burning","Flaming","Infernal","Phoenix"],ice:["Frozen","Glacial","Frost","Winter"],lightning:["Shocking","Storm","Thunder","Volt"],poison:["Venomous","Toxic","Plague","Serpent"]}[a]||[];u.length>0&&(r=`${u[Math.floor(Math.random()*u.length)]} ${r}`)}if(s.length>0&&t!=="Common"){const d=s.reduce((u,f)=>f.tier>u.tier?f:u);r+=` ${d.name}`}const i=a&&a!=="physical"?` [${a.toUpperCase()}]`:"";return`${t} ${r}${i} (L${n})`}function Mg(e,t,n,a){var d;const s=((d=Ps[n])==null?void 0:d.statMultiplier)||1;let r=0;e.damage&&(r+=e.damage*5),e.armor&&(r+=e.armor*3),e.health&&(r+=e.health*.5);const i=t.reduce((u,f)=>{const x={damage:5,armor:3,health:.5,mana:.3,critChance:100,dodgeChance:80,attackSpeed:20,strength:2,dexterity:2,intelligence:2,vitality:2,luck:3}[f.stat]||1;return u+f.value*x},0),c=(r+i)*a*s;return Math.max(1,Math.floor(c))}function Sr(e,t=!1){var m;const n=Sg(e,t),{category:a,type:s}=kg(e);let r={},i,c={},d,u;if(a==="weapon"){const p=_s[s];r={...p.baseStats},i=p.slot,c={...p.requirements},u={...p.visual},d=jg(s,n)}else if(a==="armor"){const p=Zl[s];r={...p.baseStats},i=p.slot,c={...p.requirements},u={...p.visual}}else{const p=Jl[s];r={...p.baseStats},i=p.slot,c={...p.requirements}}const f=Ps[n];if(!f)return console.warn("Invalid rarity:",n,"defaulting to Common"),Sr(e,!1);const v=1+(e-1)*.1,x=f.statMultiplier;Object.keys(r).forEach(p=>{if(typeof r[p]=="number"){const g={Common:.15,Magic:.2,Rare:.25,Legendary:.3,Mythic:.35,Divine:.4,Unique:.38}[n]||.15,S=1+(Math.random()*2-1)*g,P=r[p]*v*x*S;r[p]=Math.round(P*100)/100}});const h=Ng(a,n,e),w=Cg(s,n,e,d,h),N=Mg(r,h,n,e),y=wg(n),b=y>0?{stones:new Array(y).fill(null),maxSockets:y}:void 0;if(u){const g=["Common","Magic","Rare","Legendary","Mythic","Divine","Unique"].indexOf(n);a==="weapon"&&s==="sword"?u.spriteId=g>=1?"steel_sword":"iron_sword":a==="armor"&&s==="chest"&&(u.spriteId=g>=1?"chain_chest":"leather_chest"),g>=2&&(u.color=(m=Ps[n])==null?void 0:m.color)}return{id:"eq_"+Math.random().toString(36).substr(2,9),name:w,type:s,slot:i,category:a,rarity:n,level:e,baseStats:r,affixes:h,damageType:d,requirements:c,value:N,sockets:b,visual:u}}function _g(e){var t;return((t=Ps[e])==null?void 0:t.color)||"#9CA3AF"}const Pg=[];function Eg(){return Pg.pop()||{}}function Rg(e){const t=Eg();let n=0;e.baseStats.damage&&(n+=e.baseStats.damage),e.affixes.forEach(s=>{(s.stat==="damage"||s.stat==="health"||s.stat==="armor")&&(n+=s.value*.5)}),n=Math.max(1,Math.floor(n));const a=e.affixes.map(s=>({key:s.stat==="health"?"hp":s.stat==="critChance"?"critChance":s.stat==="dodgeChance"?"dodgeChance":s.stat==="attackSpeed"?"projectileSpeed":s.stat==="lifeSteal"?"lifeSteal":s.stat==="damage"?"dps":s.stat,val:s.value}));return Object.assign(t,{...e,power:n,element:e.damageType||"physical",extras:a,rarityColor:_g(e.rarity),elementColor:Tg(e.damageType||"physical")}),t}const ei=new Map;function Tg(e){if(ei.has(e))return ei.get(e);let t;switch(e){case"fire":t="text-red-500";break;case"ice":t="text-cyan-400";break;case"lightning":t="text-yellow-300";break;case"poison":t="text-green-500";break;default:t="text-gray-300"}return ei.set(e,t),t}function Nn(e,t=!1){const n=t?Math.floor(Math.random()*3)+2:Math.floor(Math.random()*2)+1,a=[];for(let r=0;r<n;r++){const i=Sr(e,t),c=Rg(i);a.push(c)}const s=t?.35:.15;if(Math.random()<s){const r=e0(e,t);a.push(r)}return a}const n0="idle-poe-phase2-save-v1";function Ae(e){const t={...e,__meta:{lastSaved:Date.now()}};localStorage.setItem(n0,JSON.stringify(t))}function Lg(){try{const e=localStorage.getItem(n0);return e?JSON.parse(e):null}catch{return null}}function Dg(e,t){const n=e.skillGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Skill not found"};if(n.isUnlocked)return{success:!1,message:"Skill is already unlocked"};if(e.level<n.unlockLevel)return{success:!1,message:`Requires player level ${n.unlockLevel}`};const a=bn(n);if(e.skillPoints<a)return{success:!1,message:`Requires ${a} skill points (you have ${e.skillPoints})`};const s={...e};s.skillPoints-=a;const r=s.skillGems.findIndex(i=>i.id===t);return s.skillGems[r]={...n,isUnlocked:!0},{success:!0,message:`${n.name} unlocked!`,updatedPlayer:s}}function Ig(e,t){const n=e.supportGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Support gem not found"};if(n.isUnlocked)return{success:!1,message:"Support gem is already unlocked"};if(e.level<n.unlockLevel)return{success:!1,message:`Requires player level ${n.unlockLevel}`};const a=bn(n);if(e.skillPoints<a)return{success:!1,message:`Requires ${a} skill points (you have ${e.skillPoints})`};const s={...e};s.skillPoints-=a;const r=s.supportGems.findIndex(i=>i.id===t);return s.supportGems[r]={...n,isUnlocked:!0},{success:!0,message:`${n.name} unlocked!`,updatedPlayer:s}}function $g(e,t){const n=e.skillGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Skill not found"};if(!n.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};if(!Xl(n,e.skillPoints)){const i=la(n.level);return n.level>=n.maxLevel?{success:!1,message:"Skill is already at maximum level"}:{success:!1,message:`Requires ${i} skill points (you have ${e.skillPoints})`}}const a=la(n.level),s={...e};s.skillPoints-=a;const r=s.skillGems.findIndex(i=>i.id===t);return s.skillGems[r]={...n,level:n.level+1},{success:!0,message:`${n.name} leveled up to ${n.level+1}!`,updatedPlayer:s}}function Ag(e,t){const n=e.supportGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Support gem not found"};if(!n.isUnlocked)return{success:!1,message:"Support gem must be unlocked first"};if(!Xl(n,e.skillPoints)){const i=la(n.level);return n.level>=n.maxLevel?{success:!1,message:"Support gem is already at maximum level"}:{success:!1,message:`Requires ${i} skill points (you have ${e.skillPoints})`}}const a=la(n.level),s={...e};s.skillPoints-=a;const r=s.supportGems.findIndex(i=>i.id===t);return s.supportGems[r]={...n,level:n.level+1},{success:!0,message:`${n.name} leveled up to ${n.level+1}!`,updatedPlayer:s}}function zg(e,t,n){if(n<0||n>=e.skillBar.maxSlots)return{success:!1,message:`Invalid slot index. Must be between 0 and ${e.skillBar.maxSlots-1}`};const a=e.skillGems.find(i=>i.id===t);if(!a)return{success:!1,message:"Skill not found"};if(!a.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};const s={...e};s.skillBar.slots=s.skillBar.slots.map(i=>(i==null?void 0:i.id)===t?null:i),s.skillGems=s.skillGems.map(i=>i.id===t?{...i,isEquipped:!0}:i);const r=s.skillBar.slots[n];return r&&(s.skillGems=s.skillGems.map(i=>i.id===r.id?{...i,isEquipped:!1}:i)),s.skillBar.slots[n]={...a,isEquipped:!0},{success:!0,message:`${a.name} equipped to slot ${n+1}`,updatedPlayer:s}}function Fg(e,t){if(console.log(` unequipSkillFromBar called with slotIndex: ${t}`),t<0||t>=e.skillBar.maxSlots)return console.log(` Invalid slot index: ${t}`),{success:!1,message:`Invalid slot index. Must be between 0 and ${e.skillBar.maxSlots-1}`};const n=e.skillBar.slots[t];if(console.log(` Skill in slot ${t}:`,n),!n)return console.log(` No skill equipped in slot ${t}`),{success:!1,message:"No skill equipped in this slot"};const a={...e};return console.log(` Creating updated player for unequipping ${n.name}`),a.skillBar.slots[t]=null,console.log(` Removed skill from slot ${t}`),a.skillGems=a.skillGems.map(s=>s.id===n.id?{...s,isEquipped:!1}:s),console.log(` Updated skill equipped status for ${n.name}`),console.log(` Successfully unequipped ${n.name} from slot ${t+1}`),{success:!0,message:`${n.name} unequipped from slot ${t+1}`,updatedPlayer:a}}function qg(e,t,n){const a=e.skillGems.find(u=>u.id===t),s=e.supportGems.find(u=>u.id===n);if(!a)return{success:!1,message:"Skill not found"};if(!s)return{success:!1,message:"Support gem not found"};if(!a.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};if(!s.isUnlocked)return{success:!1,message:"Support gem must be unlocked first"};if(a.supportGems.length>=6)return{success:!1,message:"Skill already has maximum support gems (6)"};if(a.supportGems.some(u=>u.id===n))return{success:!1,message:"Support gem is already attached to this skill"};if(!s.tags.some(u=>a.tags.includes(u)))return{success:!1,message:`${s.name} is not compatible with ${a.name}. Support gem tags (${s.tags.join(", ")}) must match at least one skill tag (${a.tags.join(", ")}).`};const i={...e},c=i.skillGems.findIndex(u=>u.id===t);i.skillGems[c]={...a,supportGems:[...a.supportGems,s]};const d=i.skillBar.slots.findIndex(u=>(u==null?void 0:u.id)===t);return d!==-1&&(i.skillBar.slots[d]=i.skillGems[c]),{success:!0,message:`${s.name} attached to ${a.name}`,updatedPlayer:i}}function Bg(e,t,n){const a=e.skillGems.find(u=>u.id===t);if(!a)return{success:!1,message:"Skill not found"};const s=a.supportGems.findIndex(u=>u.id===n);if(s===-1)return{success:!1,message:"Support gem is not attached to this skill"};const r=a.supportGems[s],i={...e},c=i.skillGems.findIndex(u=>u.id===t);i.skillGems[c]={...a,supportGems:a.supportGems.filter(u=>u.id!==n)};const d=i.skillBar.slots.findIndex(u=>(u==null?void 0:u.id)===t);return d!==-1&&(i.skillBar.slots[d]=i.skillGems[c]),{success:!0,message:`${r.name} detached from ${a.name}`,updatedPlayer:i}}function Og(e){return e.skillGems.filter(t=>!t.isUnlocked&&e.level>=t.unlockLevel)}function Ug(e){return e.skillGems.filter(t=>t.isUnlocked)}function Gg(e){return e.supportGems.filter(t=>!t.isUnlocked&&e.level>=t.unlockLevel)}function Vg(e){return e.supportGems.filter(t=>t.isUnlocked)}const Xa=new Map,Wg=1e3;function Ze(e){var r,i,c;const t=JSON.stringify({level:e.level,equipment:e.equipment,skillGems:(r=e.skillGems)==null?void 0:r.map(d=>({id:d.id,level:d.level,isEquipped:d.isEquipped})),supportGems:(i=e.supportGems)==null?void 0:i.map(d=>({id:d.id,level:d.level})),passiveTreeState:e.passiveTreeState,stones:(c=e.stones)==null?void 0:c.map(d=>({id:d.id,type:d.type,level:d.level,rarity:d.rarity}))}),n=Date.now(),a=Xa.get(t);if(a&&n-a.timestamp<Wg)return a.player;const s=Wm(e);if(Xa.set(t,{player:s,timestamp:n}),Xa.size>10){const d=Array.from(Xa.keys())[0];Xa.delete(d)}return s}const Hg=[...Nn(5,!1),...Nn(10,!0),...Nn(15,!1),...Nn(20,!0)],a0={player:Ze(br()),enemies:[jl(1)],inventory:Hg,log:[],skills:{},activeCombinations:[],activeSynergies:[],lastStatsUpdate:Date.now(),autoCombat:!0};function Yg(e){const t={};return e.equipment&&Object.entries(e.equipment).forEach(([n,a])=>{a&&(t[n]={...a})}),t}function Kg(e,t){var n,a,s,r,i,c,d,u,f,v,x,h,w,N,y,b;switch(t.type){case"LOAD":{const m=t.payload||{};if(m.player&&typeof m.player=="object"){if(typeof m.player.gold!="number"&&(m.player.gold=0),(!m.player.equipment||typeof m.player.equipment!="object")&&(m.player.equipment={}),!m.player.skillBar)m.player.skillBar=kl();else if(!m.player.skillBar.slots)m.player.skillBar.slots=kl().slots;else if(!Array.isArray(m.player.skillBar.slots))m.player.skillBar.slots=kl().slots;else if(m.player.skillBar.slots.length!==6){const p=[...m.player.skillBar.slots.slice(0,6)];for(;p.length<6;)p.push(null);m.player.skillBar.slots=p}m.player.skillBar.maxSlots||(m.player.skillBar.maxSlots=6),m.player.skillGems&&Array.isArray(m.player.skillGems)&&(m.player.skillBar.slots=m.player.skillBar.slots.map(p=>{if(p&&p.id){const g=m.player.skillGems.find(S=>S.id===p.id);if(g&&g.isEquipped)return g}return p})),Array.isArray(m.player.skillGems)||(m.player.skillGems=$m.map(p=>Bm(p))),Array.isArray(m.player.supportGems)||(m.player.supportGems=Am.map(p=>Om(p))),Array.isArray(m.player.stones)?m.player.stones=vg(m.player.stones):m.player.stones=[],m.player=Ze(m.player)}return{...e,...m,lastStatsUpdate:Date.now()}}case"SPAWN":{const m=((n=t.payload)==null?void 0:n.level)??Math.max(1,e.player.level+(Math.random()>.5?1:0)),p=(a=t.payload)==null?void 0:a.kind,g=jl(m,p),S=[...e.enemies,g].slice(0,25),P=[`Spawned ${g.name}`,...e.log].slice(0,200);return Ae({player:e.player,inventory:e.inventory,enemies:S,skills:e.skills}),{...e,enemies:S,log:P}}case"SPAWN_TRAINING_DUMMY":{const m=((s=t.payload)==null?void 0:s.level)??e.player.level,p=Kh(m),g=[...e.enemies,p].slice(0,25),S=[`Spawned ${p.name} for training`,...e.log].slice(0,200);return Ae({player:e.player,inventory:e.inventory,enemies:g,skills:e.skills}),{...e,enemies:g,log:S}}case"TICK":{const m=(r=t.payload)==null?void 0:r.enemyId,p=[...e.enemies],g=p.findIndex(q=>q.id===m);if(g===-1)return e;const S={...p[g]};let P={...e.player},T=[];P.skillCooldowns||(P.skillCooldowns={}),P.skillBar.slots.find(q=>(q==null?void 0:q.id)==="whirlwind");const C=og(P,S),_={...P};let D=[...p];D[g]=C.enemy;let E=[...T,...e.log].slice(0,200);if(C.didPlayerHit){let q="melee",V="Common";if((i=_.equipped)!=null&&i.weapon){const me=_.equipped.weapon;if(me.category==="Weapon"){switch(me.subType){case"Sword":case"Axe":case"Mace":case"Dagger":q="melee";break;case"Bow":case"Crossbow":q="ranged";break;case"Staff":case"Wand":q="magic";break;default:q="melee"}V=me.rarity}}E.unshift(`ANIM_PLAYER|${S.id}|${q}|${V}|${C.crit?"crit":"hit"}|${C.damage}`)}if(C.crit&&C.didPlayerHit&&E.unshift(` Critical Hit! -${C.damage} to ${S.name}`),C.didPlayerHit&&C.damage>0){const q=[];if((d=(c=_.equipped)==null?void 0:c.weapon)!=null&&d.damageType)switch(_.equipped.weapon.damageType){case"Fire":q.push("");break;case"Ice":q.push("");break;case"Lightning":q.push("");break;case"Poison":q.push("");break}q.length>0&&E.unshift(`${q.join("")} Elemental damage dealt!`)}const ie=D.filter(q=>q.hp<=0);if(ie.length>0){let q=[],V=0;ie.forEach(G=>{const le=Nn(G.level,G.isBoss);q=[...q,...le];const k=G.isBoss?Math.floor(G.level*12):Math.max(1,Math.floor(G.level*4));V+=k});const me=Date.now();D=D.map(G=>G.hp<=0&&G.state!=="dying"?{...G,state:"dying",alpha:1,deathTime:me}:G),_.xp+=V;const xe=50*4;let oe=[...e.inventory],A=0,Q=0,X=0;q.forEach(G=>{A+=G.value,oe.length>=xe?(_.gold+=G.value,X++):(oe.push(G),Q++)});const L=ie.filter(G=>G.isBoss).length;for(L>0?E.unshift(` ${L} BOSS(ES) DEFEATED! ${q.length} Epic Items Found!`):E.unshift(`${ie.length} enemies defeated! ${q.length} items dropped`),Q>0&&E.unshift(` ${Q} items added to inventory`),X>0&&E.unshift(` Inventory full! ${X} items converted to ${X*Math.floor(A/q.length)} gold`);_.xp>=_.nextLevelXp;)_.xp-=_.nextLevelXp,_.level+=1,_.skillPoints+=1,_.passiveTreeState.availablePoints+=1,_.maxHp+=8,_.hp=_.maxHp,_.nextLevelXp=Math.floor(_.nextLevelXp*1.25),E.unshift(`Leveled up! Now level ${_.level}`);return Ae({player:_,inventory:oe,enemies:D,skills:e.skills}),{...e,player:_,enemies:D,inventory:oe,log:E,skills:e.skills}}return Ae({player:_,inventory:e.inventory,enemies:D,skills:e.skills}),{...e,player:_,enemies:D,log:E,skills:e.skills}}case"REMOVE":{const m=t.payload,p=e.enemies.filter(g=>g.id!==m);return Ae({player:e.player,inventory:e.inventory,enemies:p,skills:e.skills}),{...e,enemies:p}}case"EQUIP":{const m=t.payload,p=e.inventory.find(g=>g.id===m);if(!p)return e;if(p.slot&&p.category){if(!(!p.requirements||Object.entries(p.requirements).every(([C,_])=>{var E;return(((E=e.player.attributes)==null?void 0:E[C])??0)>=_})))return e;const S={...e.player.equipment};S[p.slot]=p;const P={...e.player,equipment:S},T=Ze(P);return Ae({player:T,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:T,lastStatsUpdate:Date.now()}}else{const g={...e.player,equipped:p},S=Ze(g);return Ae({player:S,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:S,lastStatsUpdate:Date.now()}}}case"UNEQUIP":{const m=t.payload;if(!m||!((u=e.player.equipment)!=null&&u[m]))return e;const p=e.player.equipment[m],g={...e.player.equipment};delete g[m];const S=[...e.inventory,p],P={...e.player,equipment:g},T=Ze(P);return Ae({player:T,inventory:S,enemies:e.enemies,skills:e.skills}),{...e,player:T,inventory:S,lastStatsUpdate:Date.now(),log:[...e.log,`Unequipped ${p.name} from ${m} slot`]}}case"DISCARD":{const m=t.payload,p=e.inventory.filter(g=>g.id!==m);return Ae({player:e.player,inventory:p,enemies:e.enemies,skills:e.skills}),{...e,inventory:p}}case"SELL_ALL":{const m=new Set(Object.values(e.player.equipment).filter(Boolean).map(D=>D.id)),p=e.inventory.filter(D=>!m.has(D.id)),g=e.inventory.filter(D=>m.has(D.id)),S=p.reduce((D,E)=>D+(E.value||0),0),P={...e.player,gold:(e.player.gold||0)+S},T=Ze(P),C=p.length,_=g.length;return Ae({player:T,inventory:g,enemies:e.enemies,skills:e.skills}),{...e,player:T,inventory:g,log:[`Sold ${C} items for ${S} gold${_>0?` (${_} equipped items protected)`:""}`,...e.log].slice(0,200),lastStatsUpdate:Date.now()}}case"TOGGLE_AUTO":return{...e,autoCombat:!e.autoCombat};case"RESET":{const m=Yg(e.player),p=br();p.equipment=m;const g=Ze(p);return Ae({player:g,inventory:[],enemies:[jl(1)],skills:{}}),{player:g,enemies:[jl(1)],inventory:[],log:["Progress reset! Equipped items preserved for testing.",...e.log].slice(0,200),skills:{},activeCombinations:[],activeSynergies:[],lastStatsUpdate:Date.now(),autoCombat:!0,playerPosition:void 0,enemyPositions:void 0}}case"LOG":return{...e,log:[t.payload,...e.log].slice(0,200)};case"UNLOCK_SKILL_GEM":{const m=Dg(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Ze(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"UNLOCK_SUPPORT_GEM":{const m=Ig(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Ze(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"LEVEL_UP_SKILL_GEM":{const m=$g(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Ze(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"LEVEL_UP_SUPPORT_GEM":{const m=Ag(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Ze(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"EQUIP_SKILL_TO_BAR":{const{skillId:m,slotIndex:p}=t.payload,g=zg(e.player,m,p);if(g.success&&g.updatedPlayer){const S=Ze(g.updatedPlayer);return Ae({player:S,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:S,log:[g.message,...e.log].slice(0,200)}}else return{...e,log:[g.message,...e.log].slice(0,200)}}case"UNEQUIP_SKILL_FROM_BAR":{const m=Fg(e.player,t.payload);if(m.success&&m.updatedPlayer){const p=Ze(m.updatedPlayer);return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[m.message,...e.log].slice(0,200)}}else return{...e,log:[m.message,...e.log].slice(0,200)}}case"ATTACH_SUPPORT_GEM":{const{skillId:m,supportId:p}=t.payload,g=qg(e.player,m,p);if(g.success&&g.updatedPlayer){const S=Ze(g.updatedPlayer);return Ae({player:S,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:S,log:[g.message,...e.log].slice(0,200)}}else return{...e,log:[g.message,...e.log].slice(0,200)}}case"DETACH_SUPPORT_GEM":{const{skillId:m,supportId:p}=t.payload,g=Bg(e.player,m,p);if(g.success&&g.updatedPlayer){const S=Ze(g.updatedPlayer);return Ae({player:S,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:S,log:[g.message,...e.log].slice(0,200)}}else return{...e,log:[g.message,...e.log].slice(0,200)}}case"USE_SKILL":{const m=t.payload,p=e.player.skillGems.find(C=>C.id===m&&C.isEquipped);if(!p)return{...e,log:["Skill not found or not equipped",...e.log].slice(0,200)};const g=0;if(e.player.mana<g)return{...e,log:[`Not enough mana to use ${p.name}! (${g} required, ${e.player.mana} available)`,...e.log].slice(0,200)};const S={...e.player,mana:Math.max(0,e.player.mana-g)};let P=[`Used ${p.name}!`,...e.log];if(p.id==="whirlwind"){P.unshift(`ANIM_SKILL|whirlwind|${Date.now()}|3000`);const C=jt(p,S);e.enemies.forEach(_=>{_.hp>0&&P.unshift(`ANIM_PLAYER|${_.id}|whirlwind|Unique|hit|${C}`)})}else if(p.id==="fireball"){const C=e.enemies.find(_=>_.hp>0);if(C){const _=jt(p,S);P.unshift(`ANIM_SKILL|fireball|${C.id}|${_}`)}}else if(p.id==="lightning_bolt"){const C=e.enemies.find(_=>_.hp>0);if(C){const _=jt(p,S);P.unshift(`ANIM_SKILL|lightning_bolt|${C.id}|${_}`)}}else if(p.id==="power_strike"){const C=e.enemies.find(_=>_.hp>0);if(C){const _=jt(p,S);P.unshift(`ANIM_PLAYER|${C.id}|melee|Unique|hit|${_}`)}}else if(p.id==="ice_shard"){const C=e.enemies.find(_=>_.hp>0);if(C){const _=jt(p,S);P.unshift(`ANIM_SKILL|ice_shard|${C.id}|${_}`)}}else if(p.id==="ground_slam"){P.unshift(`ANIM_SKILL|ground_slam|${Date.now()}|800`);const C=jt(p,S);e.enemies.forEach(_=>{_.hp>0&&P.unshift(`ANIM_PLAYER|${_.id}|melee|Rare|hit|${C}`)})}else if(p.id==="poison_arrow"){const C=e.enemies.find(_=>_.hp>0);if(C){const _=jt(p,S);P.unshift(`ANIM_SKILL|poison_arrow|${C.id}|${_}`)}}else if(p.id==="chain_lightning"){P.unshift(`ANIM_SKILL|chain_lightning|${Date.now()}|800`);const C=jt(p,S);e.enemies.filter(D=>D.hp>0).slice(0,3).forEach(D=>{P.unshift(`ANIM_PLAYER|${D.id}|magic|Rare|hit|${C}`)})}else if(p.id==="meteor"){P.unshift(`ANIM_SKILL|meteor|${Date.now()}|1200`);const C=jt(p,S);e.enemies.forEach(_=>{_.hp>0&&P.unshift(`ANIM_PLAYER|${_.id}|magic|Unique|hit|${C}`)})}else if(p.id==="blade_vortex"){P.unshift(`ANIM_SKILL|blade_vortex|${Date.now()}|5000`);const C=jt(p,S);e.enemies.forEach(_=>{_.hp>0&&P.unshift(`ANIM_PLAYER|${_.id}|magic|Rare|hit|${C}`)})}else if(p.id==="frost_nova"){P.unshift(`ANIM_SKILL|frost_nova|${Date.now()}|1000`);const C=jt(p,S);e.enemies.forEach(_=>{_.hp>0&&P.unshift(`ANIM_PLAYER|${_.id}|magic|Magic|hit|${C}`)})}else if(p.id==="cleave"){P.unshift(`ANIM_SKILL|cleave|${Date.now()}|600`);const C=jt(p,S);e.enemies.filter(D=>D.hp>0).slice(0,3).forEach(D=>{P.unshift(`ANIM_PLAYER|${D.id}|melee|Rare|hit|${C}`)})}else if(p.id==="summon_skeletons")P.unshift(`ANIM_SKILL|summon_skeletons|${Date.now()}|2000`),P.unshift("Summoned skeleton minions!");else if(p.id==="heal"){const C=Math.floor(p.scaling.baseDamage+(p.level-1)*p.scaling.damagePerLevel);S.hp=Math.min(S.maxHp,S.hp+C),P.unshift(`ANIM_SKILL|heal|player|${Date.now()}`),P.unshift(`Healed for ${C} HP!`)}const T=Ze(S);return Ae({player:T,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:T,log:P.slice(0,200)}}case"UPDATE_ENEMY_POSITIONS":return{...e,enemyPositions:t.payload};case"UPDATE_PLAYER_POSITION":return{...e,playerPosition:t.payload};case"UPDATE_CHARACTER_MODEL":{const m={...e.player,characterModel:t.payload};return{...e,player:Ze(m),lastStatsUpdate:Date.now()}}case"UPDATE_ENEMIES":return{...e,enemies:t.payload};case"CHANNEL_WHIRLWIND":{const m=e.player.skillBar.slots.find(C=>(C==null?void 0:C.id)==="whirlwind");if(!m||!m.isUnlocked)return e;let p={...e.player},g=[];p.skillCooldowns||(p.skillCooldowns={});const S=Date.now(),P=p.skillCooldowns.whirlwind||0,T=m.scaling.baseCooldown||m.cooldown;if(T===0||S-P>=T){p.skillCooldowns.whirlwind=S;const _=(m.scaling.baseArea+(m.level-1)*m.scaling.areaPerLevel)*30,D=Math.floor(m.scaling.baseDamage+(m.level-1)*m.scaling.damagePerLevel),E=e.playerPosition||{x:150,y:300};let ie=0,q=[...e.enemies];q.forEach(oe=>{oe.hp>0&&oe.position&&Math.hypot(oe.position.x-E.x,oe.position.y-E.y)<=_&&(oe.hp=Math.max(0,oe.hp-D),ie++)}),ie>0&&(g.push(`ANIM_SKILL|whirlwind|${S}|1000`),g.push(` Whirlwind channels continuously! (${ie} enemies hit, range: ${Math.round(_)})`));const V=q.filter(oe=>oe.hp<=0);q=q.map(oe=>oe.hp<=0&&oe.state!=="dying"?{...oe,state:"dying",alpha:1,deathTime:S}:oe);let me=[...e.inventory];if(V.length>0){let oe=[],A=0;V.forEach(k=>{const I=Nn(k.level,k.isBoss);oe=[...oe,...I];const ce=k.isBoss?Math.floor(k.level*12):Math.max(1,Math.floor(k.level*4));A+=ce}),p.xp+=A;const Q=50*4;let X=0,L=0,G=0;oe.forEach(k=>{X+=k.value,me.length>=Q?(p.gold+=k.value,G++):(me.push(k),L++)});const le=V.filter(k=>k.isBoss).length;for(le>0?g.push(` ${le} BOSS(ES) DEFEATED by Whirlwind! ${oe.length} Epic Items Found!`):g.push(`${V.length} enemies defeated by Whirlwind! ${oe.length} items dropped`),L>0&&g.push(` ${L} items added to inventory`),G>0&&g.push(` Inventory full! ${G} items converted to ${G*Math.floor(X/oe.length)} gold`);p.xp>=p.nextLevelXp;)p.xp-=p.nextLevelXp,p.level+=1,p.skillPoints+=1,p.passiveTreeState.availablePoints+=1,p.maxHp+=8,p.hp=p.maxHp,p.nextLevelXp=Math.floor(p.nextLevelXp*1.25),g.push(`Leveled up! Now level ${p.level}`)}const xe=Ze(p);return Ae({player:xe,inventory:me,enemies:q,skills:e.skills}),{...e,player:xe,enemies:q,inventory:me,log:[...g,...e.log].slice(0,200)}}return e}case"AUTO_SKILLS":{if(!e.autoCombat||e.enemies.length===0)return console.log(" AUTO_SKILLS skipped - autoCombat:",e.autoCombat,"enemies:",e.enemies.length),e;let m={...e.player},p=[],g=[...e.enemies];m.skillCooldowns||(m.skillCooldowns={});const S=Date.now(),P=g.filter(q=>q.hp>0);let T=null;if(P.length>0&&e.playerPosition){const q=e.playerPosition,V=P.map(me=>{var X;const xe=(X=e.enemyPositions)==null?void 0:X[me.id];if(!xe)return null;const oe=xe.x-q.x,A=xe.y-q.y,Q=Math.sqrt(oe*oe+A*A);return{enemy:me,distance:Q,position:xe}}).filter(Boolean);V.length>0&&(V.sort((me,xe)=>me.distance-xe.distance),T=V[0].enemy)}!T&&P.length>0&&(T=P[0]),console.log(" Nearest enemy for targeting:",T?`${T.name} (${T.id})`:"none");for(let q=0;q<m.skillBar.slots.length;q++){const V=m.skillBar.slots[q];if(console.log(` Slot ${q}:`,V?{id:V.id,isUnlocked:V.isUnlocked,isEquipped:V.isEquipped}:"empty"),V&&V.isEquipped&&V.id!=="whirlwind"){console.log(` Checking skill ${V.id} in slot ${q}:`,{isUnlocked:V.isUnlocked,currentMana:m.mana,manaCost:((f=V.scaling)==null?void 0:f.baseManaCost)||V.manaCost||0});const me=((v=m.skillCooldowns)==null?void 0:v[V.id])??0,xe=((x=V.scaling)==null?void 0:x.baseCooldown)??V.cooldown??0,oe=((h=V.scaling)==null?void 0:h.baseManaCost)||V.manaCost||0;if(console.log(` Skill ${V.id} check details:`,{lastUsed:me,currentTime:S,cooldownTime:xe,timeSinceLastUse:S-me,cooldownReady:S-me>=xe,manaReady:m.mana>=oe,hasTarget:!!T}),S-me>=xe&&m.mana>=oe){const A=["fireball","lightning_bolt","ice_shard","poison_arrow"],Q=A.includes(V.id);if(Q&&!T){console.log(` Skill ${V.id} needs a target but none available`);continue}if(Q&&T){const L=ds(V),G=(w=e.enemyPositions)==null?void 0:w[T.id],le=e.playerPosition;if(G&&le){const k=G.x-le.x,I=G.y-le.y,ce=Math.sqrt(k*k+I*I),ze=L*1.2;if(ce>ze){console.log(` Skill ${V.id} target too far: ${ce.toFixed(0)}px > ${ze.toFixed(0)}px effective range`);continue}console.log(` Skill ${V.id} target in range: ${ce.toFixed(0)}px <= ${ze.toFixed(0)}px`)}else console.log(` Position data missing for ${V.id}, allowing skill usage as fallback`)}console.log(` Triggering skill ${V.id}${T?` on ${T.name}`:""}!`),console.log(` SKILL TRIGGERED SUCCESSFULLY: ${V.id} - This confirms the AUTO_SKILLS bug fix is working!`),m.skillCooldowns=m.skillCooldowns||{},m.skillCooldowns[V.id]=S,m.mana=Math.max(0,m.mana-oe);const X=jt(V,m);if(A.includes(V.id)&&T){const L=`ANIM_SKILL|${V.id}|${T.id}|${X}`;console.log(` Adding projectile animation log: ${L}`),p.push(L),console.log(` Projectile ${V.id} created with ${X} damage for target ${T.name}`)}else{const L=`ANIM_SKILL|${V.id}|${S}|${((N=V.scaling)==null?void 0:N.baseDuration)??1e3}`;console.log(` Adding AOE animation log: ${L}`),p.push(L);let G=0;const le=ds(V),k=e.playerPosition||{x:150,y:300};g.forEach((I,ce)=>{var ze;if(I.hp>0){const St=(ze=e.enemyPositions)==null?void 0:ze[I.id];St?Math.hypot(St.x-k.x,St.y-k.y)<=le&&(g[ce].hp=Math.max(0,g[ce].hp-(X||0)),G++):console.log(` Skipping damage for ${I.name} - no position data`)}}),G>0&&p.push(` ${V.name} hits ${G} enemies for ${X||0} damage each!`)}console.log(` Current skillLog after adding ${V.id}:`,p)}else{const A=T?`cooldown: ${S-(((y=m.skillCooldowns)==null?void 0:y[V.id])||0)}/${(V==null?void 0:V.cooldown)||0}, mana: ${m.mana}/${oe}`:"no target";console.log(` Skill ${V.id} not ready - ${A}`)}}}const C=e.enemies.filter(q=>q.hp<=0);let _=[...e.inventory];if(C.length>0){let q=[],V=0;C.forEach(X=>{const L=Nn(X.level,X.isBoss);q=[...q,...L];const G=X.isBoss?Math.floor(X.level*12):Math.max(1,Math.floor(X.level*4));V+=G}),m.xp+=V;const me=10*4;let xe=0,oe=0,A=0;q.forEach(X=>{xe+=X.value,_.length>=me?(m.gold+=X.value,A++):(_.push(X),oe++)});const Q=C.filter(X=>X.isBoss).length;for(Q>0?p.unshift(` ${Q} BOSS(ES) DEFEATED! ${q.length} Epic Items Found!`):p.unshift(`${C.length} enemies defeated! ${q.length} items dropped`),oe>0&&p.unshift(` ${oe} items added to inventory`),A>0&&p.unshift(` Inventory full! ${A} items converted to ${A*Math.floor(xe/q.length)} gold`);m.xp>=m.nextLevelXp;)m.xp-=m.nextLevelXp,m.level+=1,m.skillPoints+=1,m.passiveTreeState.availablePoints+=1,m.maxHp+=8,m.hp=m.maxHp,m.nextLevelXp=Math.floor(m.nextLevelXp*1.25),p.unshift(`Leveled up! Now level ${m.level}`)}const D=Date.now(),ie=g.map(q=>q.hp<=0&&q.state!=="dying"?{...q,state:"dying",alpha:1,deathTime:D}:q).filter(q=>q.state==="dying"&&q.deathTime?D-q.deathTime<2e3:q.hp>0);return Ae({player:m,inventory:_,enemies:ie,skills:e.skills}),{...e,player:m,enemies:ie,inventory:_,log:[...p,...e.log].slice(0,200)}}case"MANA_REGEN":{const m={...e.player},g=(m.manaRegen||0)/10;return m.mana=Math.min(m.maxMana,m.mana+g),{...e,player:m}}case"ALLOCATE_PASSIVE_NODE":{const m=t.payload,p={...e.player};if(p.passiveTreeData&&p.passiveTreeState){const g=Dm(m,p.passiveTreeData,p.passiveTreeState);p.passiveTreeState=g;const S=Ze(p);return Ae({player:S,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:S,log:[`Allocated passive node: ${((b=p.passiveTreeData.nodes[m])==null?void 0:b.name)||m}`,...e.log].slice(0,200),lastStatsUpdate:Date.now()}}return e}case"ADD_STONE":{const m=t.payload,p={...e.player,stones:[...e.player.stones,m]};return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[`Generated stone: ${m.name}`,...e.log].slice(0,200)}}case"FORCE_MIGRATE_STONES":{const m=[...e.player.stones];bg(m);const p={...e.player,stones:m};return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:["Force migrated all stone IDs for uniqueness",...e.log].slice(0,200)}}case"REMOVE_STONE":{const m=t.payload,p={...e.player,stones:e.player.stones.filter(g=>g.id!==m)};return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:["Removed stone",...e.log].slice(0,200)}}case"SELL_ALL_STONES":{const m=e.player.stones.reduce((g,S)=>g+(S.value||0),0),p={...e.player,stones:[],gold:e.player.gold+m};return Ae({player:p,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:p,log:[`Sold all stones for ${m} gold`,...e.log].slice(0,200)}}case"UPDATE_EQUIPMENT":{const{slot:m,equipment:p}=t.payload,g={...e.player.equipment};g[m]=p;const S={...e.player,equipment:g},P=Ze(S);return Ae({player:P,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:P,lastStatsUpdate:Date.now()}}default:return e}}const s0=j.createContext({state:a0,actions:{},dispatch:()=>{}});function Xg({children:e}){const[t,n]=j.useReducer(Kg,a0),a=pn.useRef(!1);j.useEffect(()=>{if(a.current)return;const u=Lg();u?(a.current=!0,n({type:"LOAD",payload:u})):a.current=!0},[]);const s=j.useCallback(u=>{n({type:"UPDATE_ENEMY_POSITIONS",payload:u})},[]),r=j.useCallback(u=>{n({type:"UPDATE_PLAYER_POSITION",payload:u})},[]),i=j.useCallback(u=>{n({type:"UPDATE_CHARACTER_MODEL",payload:u})},[]);j.useEffect(()=>{const u=setInterval(()=>{const f=t.enemies.filter(v=>v.hp>0).length;if(f<25){const v=Math.min(3,25-f);for(let x=0;x<v;x++)n({type:"SPAWN"})}},1500);return()=>clearInterval(u)},[]),j.useEffect(()=>{const u=t.skills.quick??0,f=t.player.attackSpeed??0,v=1e3,w=u*.05+f,N=Math.max(200,Math.round(v/(1+w))),y=setInterval(()=>{n({type:"AUTO_SKILLS"}),t.enemies.filter(m=>m.hp>0).map(m=>m.id).forEach(m=>n({type:"TICK",payload:{enemyId:m}}))},N);return()=>clearInterval(y)},[t.skills,t.enemies,t.player.attackSpeed]),j.useEffect(()=>{const u=t.player.skillBar.slots.find(f=>(f==null?void 0:f.id)==="whirlwind");if(u&&u.isUnlocked){const v=setInterval(()=>{n({type:"CHANNEL_WHIRLWIND"})},100);return()=>clearInterval(v)}},[t.player.skillBar]),j.useEffect(()=>{const f=setInterval(()=>{n({type:"MANA_REGEN"})},100);return()=>clearInterval(f)},[]);const c=j.useMemo(()=>({spawnEnemy:(u,f)=>n({type:"SPAWN",payload:{level:u,kind:f}}),spawnTrainingDummy:u=>n({type:"SPAWN_TRAINING_DUMMY",payload:{level:u}}),simulateTick:u=>n({type:"TICK",payload:{enemyId:u}}),removeEnemy:u=>n({type:"REMOVE",payload:u}),equipItem:u=>n({type:"EQUIP",payload:u}),unequipItem:u=>n({type:"UNEQUIP",payload:u}),discardItem:u=>n({type:"DISCARD",payload:u}),sellItem:u=>n({type:"DISCARD",payload:u}),sellAll:()=>n({type:"SELL_ALL"}),embedStone:(u,f,v)=>{const x=t.player.equipment[u];if(!x){console.error("No equipment found in slot:",u);return}try{const h=Qm(x,f,v);n({type:"UPDATE_EQUIPMENT",payload:{slot:u,equipment:h}})}catch(h){console.error("Failed to embed stone:",h)}},resetAll:()=>n({type:"RESET"}),log:u=>n({type:"LOG",payload:u}),unlockSkillGem:u=>n({type:"UNLOCK_SKILL_GEM",payload:u}),unlockSupportGem:u=>n({type:"UNLOCK_SUPPORT_GEM",payload:u}),levelUpSkillGem:u=>n({type:"LEVEL_UP_SKILL_GEM",payload:u}),levelUpSupportGem:u=>n({type:"LEVEL_UP_SUPPORT_GEM",payload:u}),equipSkillToBar:(u,f)=>n({type:"EQUIP_SKILL_TO_BAR",payload:{skillId:u,slotIndex:f}}),unequipSkillFromBar:u=>n({type:"UNEQUIP_SKILL_FROM_BAR",payload:u}),attachSupportGem:(u,f)=>n({type:"ATTACH_SUPPORT_GEM",payload:{skillId:u,supportId:f}}),detachSupportGem:(u,f)=>n({type:"DETACH_SUPPORT_GEM",payload:{skillId:u,supportId:f}}),useSkill:u=>n({type:"USE_SKILL",payload:u}),updateEnemyPositions:s,updatePlayerPosition:r,allocatePassiveNode:u=>n({type:"ALLOCATE_PASSIVE_NODE",payload:u}),addStone:u=>n({type:"ADD_STONE",payload:u}),removeStone:u=>n({type:"REMOVE_STONE",payload:u}),removeStoneFromSocket:(u,f)=>{const v=t.player.equipment[u];if(v&&v.sockets){const{equipment:x}=Zm(v,f);n({type:"UPDATE_EQUIPMENT",payload:{slot:u,equipment:x}})}},sellAllStones:()=>n({type:"SELL_ALL_STONES"}),forceMigrateStones:()=>n({type:"FORCE_MIGRATE_STONES"}),updateCharacterModel:i}),[s,r,i]),d=j.useMemo(()=>({state:t,actions:c,dispatch:n}),[t,c]);return j.useEffect(()=>{typeof window<"u"&&(window.gameState=t,window.testStoneStatsNow=()=>Hm(t.player),window.forceMigrateStones=c.forceMigrateStones)},[t]),l.jsx(s0.Provider,{value:d,children:e})}function ut(){const e=j.useContext(s0);if(!e)throw new Error("useGame must be used within a GameProvider");return e}function Qg(){return l.jsxs("span",{className:`ml-2 inline-block bg-gradient-to-r from-purple-600 to-blue-500
                 text-xs text-white px-2 py-0.5 rounded-full shadow-md 
                 cursor-pointer hover:scale-105 transition-transform`,title:`Version: 0.2.0
Commit: 1477f0e
Built: 10/19/2025, 12:28:41 PM`,onClick:()=>navigator.clipboard.writeText("1477f0e"),children:["v","0.2.0","  ","1477f0e"]})}function Zg({onOpenModal:e}){var c;const{state:t}=ut(),n=t.player,a=t.skills||{},s=Math.pow(1.05,a.power||0),r=(n.attackSpeed||1)*(1+(a.quick||0)*.05),i=(n.baseDps+(((c=n.equipped)==null?void 0:c.power)||0))*s+(n.dps-n.baseDps);return l.jsx("div",{className:"sticky-header w-full bg-gray-900/95 backdrop-blur-md border-b border-gray-700 shadow-lg",children:l.jsx("div",{className:"w-full px-4 py-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h1",{className:"header-title text-2xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:"Auto battle is awesome"}),l.jsx(Qg,{})]}),l.jsxs("div",{className:"header-nav flex space-x-2",children:[l.jsx("button",{onClick:()=>e("skills"),className:"px-3 py-1.5 bg-blue-900/50 hover:bg-blue-800/60 border border-blue-600/50 text-blue-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-blue-500/20",children:" Bonuses"}),l.jsx("button",{onClick:()=>e("passiveTree"),className:"px-3 py-1.5 bg-green-900/50 hover:bg-green-800/60 border border-green-600/50 text-green-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-green-500/20",children:" Passive Tree"}),l.jsx("button",{onClick:()=>e("stones"),className:"px-3 py-1.5 bg-amber-900/50 hover:bg-amber-800/60 border border-amber-600/50 text-amber-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-amber-500/20",children:" Stones"}),l.jsx("button",{onClick:()=>e("maps"),className:"px-3 py-1.5 bg-indigo-900/50 hover:bg-indigo-800/60 border border-indigo-600/50 text-indigo-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-indigo-500/20",children:" Maps"})]}),l.jsxs("div",{className:"header-stats flex flex-wrap gap-2 mt-1",children:[l.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-600/40 text-yellow-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsx("span",{children:n.gold.toFixed(2)})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-600/40 text-red-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsx("span",{children:t.enemies.length})]}),l.jsxs("div",{className:"bg-orange-900/30 border border-orange-600/40 text-orange-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsx("span",{children:i.toFixed(2)})]}),l.jsxs("div",{className:"bg-cyan-900/30 border border-cyan-600/40 text-cyan-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:[r.toFixed(2),"/s"]})]}),l.jsxs("div",{className:"bg-purple-900/30 border border-purple-600/40 text-purple-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[l.jsx("span",{children:""}),l.jsxs("span",{children:["Lv.",n.level]})]}),l.jsxs("div",{className:"bg-blue-900/30 border border-blue-600/40 text-blue-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm min-w-[120px]",children:[l.jsx("span",{children:""}),l.jsx("div",{className:"flex-1",children:l.jsx("div",{className:"bg-blue-800/50 rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:"bg-blue-400 h-full transition-all duration-300",style:{width:`${n.xp/n.nextLevelXp*100}%`}})})})]})]})]})})})}const ti=1400,ni=700,Et=4e3,Rt=3e3;function Jg(e){return!e||e==="Common"?"#ffffff":e==="Magic"?"#06b6d4":e==="Rare"?"#8b5cf6":e==="Unique"?"#fbbf24":"#ffffff"}function qn(e){return e.isBoss?20+e.level*1.5:e.type==="melee"||e.type==="assassin"||e.type==="beast"?Math.max(1,12+e.level*.8-15):e.type==="ranged"||e.type==="swarm"?Math.max(1,10+e.level*.6-15):e.type==="tank"||e.type==="construct"||e.type==="crystal_guardian"?Math.max(1,16+e.level*1.2-15):e.type==="phase_beast"?Math.max(1,11+e.level*.7-15):Math.max(1,14+e.level*1-15)}const ex=pn.memo(function(){const t=j.useRef(null),{state:n,actions:a}=ut(),[s,r]=j.useState({x:Et/2,y:Rt/2}),[i,c]=j.useState({}),[d,u]=j.useState([]),[f,v]=j.useState([]),[x,h]=j.useState([]),[w,N]=j.useState({}),[y,b]=j.useState({x:0,y:0,zoom:1}),[m,p]=j.useState(0),[g,S]=j.useState(0),[P,T]=j.useState({active:!1,startTime:0,rotation:0}),[C,_]=j.useState(!1),D=j.useRef(0),ie=1e3/60,q=j.useMemo(()=>{const W=[];for(let J=0;J<1e3;J++)W.push({x:0,y:0});return W},[]);let V=0;const me=j.useCallback((W,J)=>{const o=q[V%q.length];return o.x=W,o.y=J,V++,o},[q]),xe=j.useCallback((W,J,o=0)=>{const U=(W-J)*Math.cos(Math.PI/6),K=(W+J)*Math.sin(Math.PI/6)-o*.5;return me(U,K)},[me]),oe=j.useCallback(W=>me((W.x-y.x)*y.zoom+ti/2,(W.y-y.y)*y.zoom+ni/2),[y.x,y.y,y.zoom,me]),A=j.useCallback((W,J,o=0)=>{const U=xe(W,J,o);return oe(U)},[xe,oe]);j.useCallback((W,J)=>W+J,[]),j.useEffect(()=>{c(W=>{const J={...W};let o=!1;const U=[{centerX:Et*.3,centerY:Rt*.3,radius:300},{centerX:Et*.7,centerY:Rt*.3,radius:300},{centerX:Et*.3,centerY:Rt*.7,radius:300},{centerX:Et*.7,centerY:Rt*.7,radius:300},{centerX:Et*.5,centerY:Rt*.1,radius:200},{centerX:Et*.5,centerY:Rt*.9,radius:200},{centerX:Et*.1,centerY:Rt*.5,radius:200},{centerX:Et*.9,centerY:Rt*.5,radius:200}];n.enemies.forEach((we,ve)=>{if(!J[we.id])if(o=!0,we.type==="training_dummy"){const Te=ds({level:1,scaling:{baseDamage:10,baseRange:50}}),de=s.x,je=s.y-Te;J[we.id]={x:Math.max(50,Math.min(Et-50,de)),y:Math.max(50,Math.min(Rt-50,je))}}else{const Te=U[ve%U.length],de=Math.random()*Math.PI*2,je=Math.random()*Te.radius,Me=Te.centerX+Math.cos(de)*je,Ne=Te.centerY+Math.sin(de)*je;J[we.id]={x:Math.max(50,Math.min(Et-50,Me)),y:Math.max(50,Math.min(Rt-50,Ne))}}});const K=new Set(n.enemies.map(we=>we.id));return Object.keys(J).forEach(we=>{K.has(we)||delete J[we]}),o||Object.keys(J).length!==Object.keys(W).length?J:W})},[n.enemies,s,n.player]),j.useEffect(()=>{a.updateEnemyPositions(i)},[i,a]);const[Q,X]=j.useState({});j.useEffect(()=>{const W=o=>{const U=o.key.toLowerCase();U==="f1"?_(K=>!K):["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright"].includes(U)&&X(K=>({...K,[U]:!0}))},J=o=>{const U=o.key.toLowerCase();["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright"].includes(U)&&X(K=>({...K,[U]:!1}))};return window.addEventListener("keydown",W),window.addEventListener("keyup",J),()=>{window.removeEventListener("keydown",W),window.removeEventListener("keyup",J)}},[]);const L=(W,J=0)=>W.x>=J&&W.x<=Et-J&&W.y>=J&&W.y<=Rt-J,G=(W,J)=>Math.hypot(W.x-J.x,W.y-J.y),le=j.useRef(0);j.useEffect(()=>{if(!n.log||n.log.length===0)return;n.log.length<le.current&&(le.current=0);const W=n.log.slice(0,n.log.length-le.current);W.length!==0&&(le.current=n.log.length,W.reverse().forEach(J=>{if(console.log(` GameCanvas processing log: ${J}`),J.startsWith("ANIM_PLAYER|")){const o=J.split("|"),U=o[1],K=o[2],we=o[3],ve=o[4],Te=Math.floor(Number(o[5]||0)),de=i[U],je=Jg(we);if(K==="melee"){const Me=g,M=20+20,R=s.x+Math.cos(Me)*M,Y=s.y+Math.sin(Me)*M,$=400,F=n.player.attackSpeed??0,O=Math.max(150,Math.round($/(1+F)));h(B=>[...B,{kind:"slash",x:R,y:Y,t:Date.now(),ttl:O,angle:Me,color:je,size:60}])}else if(K==="ranged"){if(de){const Me=de.x-s.x,Ne=de.y-s.y,Le=Math.hypot(Me,Ne)||1,M=n.player.attackSpeed??0,R=3*(n.player.projectileSpeed||1)*(1+(n.skills.arcane||0)*.1)*(1+M*.5),Y=Math.max(400,Math.round(800/(1+M*.3)));u($=>[...$,{x:s.x,y:s.y,vx:Me/Le*R,vy:Ne/Le*R,life:Y,color:je,radius:3,size:2}])}}else if(K==="magic"&&de){const Me=de.x-s.x,Ne=de.y-s.y,Le=Math.hypot(Me,Ne)||1,M=n.player.attackSpeed??0,R=2*(n.player.projectileSpeed||1)*(1+(n.skills.arcane||0)*.1)*(1+M*.5),Y=Math.max(600,Math.round(1200/(1+M*.3)));u($=>[...$,{x:s.x,y:s.y,vx:Me/Le*R,vy:Ne/Le*R,life:Y,color:je,radius:6,size:4,glow:!0}])}if(de){const Me=Te.toFixed(2),Ne=ve==="crit"?`-${Me} CRIT!`:`-${Me}`,Le=ve==="crit";h(M=>[...M,{kind:Le?"critical_damage":"damage",x:de.x+(Math.random()-.5)*10,y:de.y-10+(Math.random()-.5)*6,t:Date.now(),ttl:Le?2e3:1600,text:Ne,crit:Le,size:Math.min(Le?32:28,(Le?14:10)+Math.floor(Te/2)),color:Le?"#ff0066":"#ff6b6b"}]),Le&&h(M=>[...M,{kind:"critical_burst",x:de.x,y:de.y,t:Date.now(),ttl:1200,color:"#ff0066",size:30}])}}if(J.startsWith("Enemy defeated! Loot:")){const o=J.match(/Loot: (.+)$/);o&&h(U=>[...U,{kind:"pickup",x:220,y:60,t:Date.now(),ttl:1200,text:o[1],color:"#fff"}])}if(J.includes("dodged"))if(J.includes("Player dodged"))h(o=>[...o,{kind:"dodge",x:s.x+(Math.random()-.5)*20,y:s.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1500,text:"DODGE!",color:"#00ffff",size:18}]),h(o=>[...o,{kind:"dodge_burst",x:s.x,y:s.y,t:Date.now(),ttl:800,color:"#00ffff",size:20}]);else{const o=J.match(/(.+) dodged/);if(o){const U=o[1],K=n.enemies.find(we=>we.name===U);if(K){const we=i[K.id];we&&h(ve=>[...ve,{kind:"miss",x:we.x+(Math.random()-.5)*20,y:we.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1200,text:"MISS!",color:"#94a3b8",size:14}])}}}if(J.includes("hits back for")){const o=J.match(/hits back for (\d+)/);if(o){const U=parseInt(o[1]);h(K=>[...K,{kind:"player_damage",x:s.x+(Math.random()-.5)*15,y:s.y-15+(Math.random()-.5)*8,t:Date.now(),ttl:1400,text:`-${U}`,color:"#ef4444",size:Math.min(24,12+Math.floor(U/3))}])}}if(J.includes("blocked")&&J.includes("Player blocked")&&h(o=>[...o,{kind:"block",x:s.x+(Math.random()-.5)*20,y:s.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1200,text:"BLOCK!",color:"#fbbf24",size:16}]),J.startsWith(" Critical Hit!"),J.startsWith("ANIM_SKILL|")){const o=J.split("|"),U=o[1];if(console.log(` Processing ANIM_SKILL: ${U}, parts:`,o),U==="whirlwind"){const K=Number(o[2]),we=Number(o[3]);T({active:!0,startTime:Date.now(),rotation:0}),setTimeout(()=>{T(ve=>({...ve,active:!1}))},we),h(ve=>[...ve,{kind:"whirlwind",x:s.x,y:s.y,t:K,ttl:we,color:"#fbbf24",duration:we}])}else if(U==="heal")h(K=>[...K,{kind:"heal",x:s.x,y:s.y,t:Date.now(),ttl:2e3,color:"#10b981"}]);else if(U==="fireball"){const K=o[2],we=Number(o[3])||0,ve=i[K];if(console.log(` FIREBALL ANIM_SKILL received - targetId: ${K}, damage: ${we}, targetPos:`,ve),ve){const Te=ve.x-s.x,de=ve.y-s.y,je=4*(n.player.projectileSpeed||1),Me=n.player.skillBar.slots.find($=>($==null?void 0:$.name)==="Fireball"),Ne=Me?Me.supportGems.reduce(($,F)=>{var O,B;return F.id==="multiple_projectiles"?$+(((B=(O=F.modifiers)==null?void 0:O.find(ee=>ee.type==="projectiles"))==null?void 0:B.value)||0):$},1):1,Le=20,M=Math.atan2(de,Te),R=s.x+Math.cos(M)*Le,Y=s.y+Math.sin(M)*Le;for(let $=0;$<Ne;$++){const F=Ne>1?($-(Ne-1)/2)*.3:0,O=M+F,B=Math.cos(O)*je,ee=Math.sin(O)*je,te=Ne>1?($-(Ne-1)/2)*8:0,ae=R+Math.cos(O+Math.PI/2)*te,Z=Y+Math.sin(O+Math.PI/2)*te,fe={x:ae,y:Z,vx:B,vy:ee,life:8e3,color:"#ff4400",radius:10,size:8,glow:!0,type:"fireball",trail:!1,particles:!1,rotation:0,targetId:K,damage:we,skillId:"fireball",playerId:n.player.id||"player"};console.log(` Creating fireball projectile with life: ${fe.life}ms, target: ${K}`),u(_e=>[..._e,fe]),I.current.calculatedProjectiles||(I.current.calculatedProjectiles=[]),I.current.calculatedProjectiles.push(fe)}}}else if(U==="lightning_bolt"){const K=o[2],we=Number(o[3])||0,ve=i[K];if(ve){const Te=ve.x-s.x,de=ve.y-s.y,je=Math.hypot(Te,de)||1,Me=6*(n.player.projectileSpeed||1),Ne=20,Le=Math.atan2(de,Te),M=s.x+Math.cos(Le)*Ne,R=s.y+Math.sin(Le)*Ne;u(Y=>[...Y,{x:M,y:R,vx:Te/je*Me,vy:de/je*Me,life:800,color:"#00aaff",radius:6,size:4,glow:!0,type:"lightning_bolt",targetId:K,damage:we,skillId:"lightning_bolt",playerId:"player"}])}}else if(U==="power_strike")h(K=>[...K,{kind:"power_strike",x:s.x,y:s.y,t:Date.now(),ttl:700,color:"#ffaa00",size:18}]);else if(U==="ice_shard"){const K=o[2],we=Number(o[3])||0,ve=i[K];if(ve){const Te=ve.x-s.x,de=ve.y-s.y,je=Math.hypot(Te,de)||1,Me=5*(n.player.projectileSpeed||1),Ne=20,Le=Math.atan2(de,Te),M=s.x+Math.cos(Le)*Ne,R=s.y+Math.sin(Le)*Ne;u(Y=>[...Y,{x:M,y:R,vx:Te/je*Me,vy:de/je*Me,life:900,color:"#74c0fc",radius:5,size:3,glow:!0,type:"ice_shard",targetId:K,damage:we,skillId:"ice_shard",playerId:n.player.id||"player"}])}}else if(U==="ground_slam")h(K=>[...K,{kind:"ground_slam",x:s.x,y:s.y,t:Date.now(),ttl:800,color:"#8b5a2b",size:25}]);else if(U==="poison_arrow"){const K=o[2],we=Number(o[3])||0,ve=i[K];if(ve){const Te=ve.x-s.x,de=ve.y-s.y,je=Math.hypot(Te,de)||1,Me=4.5*(n.player.projectileSpeed||1);u(Ne=>[...Ne,{x:s.x,y:s.y,vx:Te/je*Me,vy:de/je*Me,life:1200,color:"#51cf66",radius:4,size:3,glow:!1,type:"poison_arrow",targetId:K,damage:we,skillId:"poison_arrow",playerId:n.player.id||"player"}])}}else U==="chain_lightning"?h(K=>[...K,{kind:"chain_lightning",x:s.x,y:s.y,t:Date.now(),ttl:800,color:"#ffd43b",size:16}]):U==="meteor"?h(K=>[...K,{kind:"meteor",x:s.x,y:s.y,t:Date.now(),ttl:1200,color:"#ff6b6b",size:35}]):U==="blade_vortex"?h(K=>[...K,{kind:"blade_vortex",x:s.x,y:s.y,t:Date.now(),ttl:5e3,color:"#c0c0c0",size:22}]):U==="frost_nova"?h(K=>[...K,{kind:"frost_nova",x:s.x,y:s.y,t:Date.now(),ttl:1e3,color:"#74c0fc",size:28}]):U==="cleave"?h(K=>[...K,{kind:"cleave",x:s.x,y:s.y,t:Date.now(),ttl:600,color:"#fbbf24",size:20}]):U==="summon_skeletons"&&h(K=>[...K,{kind:"summon_skeletons",x:s.x,y:s.y,t:Date.now(),ttl:2e3,color:"#9ca3af",size:15}])}}))},[n.log,i,s]);const k=(W,J,o,U)=>G(W,J)<o+U,I=j.useRef({idleAnimation:0,whirlwindRotation:0,lastUpdate:performance.now(),calculatedPlayerPos:null,calculatedEnemyPositions:null,calculatedProjectiles:null,calculatedEffects:null,calculatedDying:null,calculatedCamera:null});j.useEffect(()=>{let W=0,J=performance.now(),o=0,U=0,K=performance.now();function we(ve){const Te=Math.min(40,ve-J);if(J=ve,o++,U++,ve-K>2e3){const z=Math.round(U*1e3/(ve-K));z<45&&console.warn(` Performance Warning: FPS dropped to ${z}. Projectiles: ${d.length}, Effects: ${x.length}`),U=0,K=ve}if(I.current.idleAnimation=ve/1e3,P.active){const z=ve-P.startTime;I.current.whirlwindRotation=z*.01}I.current.lastUpdate=ve;let de=s,je=i,Me=d,Ne=x,Le=w,M=y;const R=P.active?3.5:2.2;let Y={x:0,y:0},$=!1;if((Q.w||Q.arrowup)&&(Y.y-=1,$=!0),(Q.s||Q.arrowdown)&&(Y.y+=1,$=!0),(Q.a||Q.arrowleft)&&(Y.x-=1,$=!0),(Q.d||Q.arrowright)&&(Y.x+=1,$=!0),$){const z=Math.sqrt(Y.x*Y.x+Y.y*Y.y);z>0&&(Y.x=Y.x/z*R,Y.y=Y.y/z*R)}if(n.enemies.length>0){let z=null,ne=null,he=9999;if(n.enemies.forEach(Se=>{const ue=i[Se.id];if(!ue||Se.hp<=0)return;const re=G(s,ue);re<he&&(he=re,z=Se,ne=ue)}),z&&ne){const Se=n.player.skillBar.slots.filter(Ge=>Ge&&Ge.isEquipped);let ue=!1,re=80;Se.forEach(Ge=>{if(Ge&&Ge.scaling&&["fireball","lightning_bolt","ice_shard","poison_arrow"].includes(Ge.id)){ue=!0;const Qe=ds(Ge);re=Math.max(re,Qe*.7)}});const ge=ne.x-s.x,ye=ne.y-s.y,ke=he;let Ee={...s},pe=!1;if(ue){const Ge=re*.8,et=re*1.15,Qe=80,lt=n.enemies.filter($e=>{const mt=i[$e.id];return!mt||$e.hp<=0?!1:G(s,mt)<Qe}).map($e=>({enemy:$e,pos:i[$e.id],distance:G(s,i[$e.id])}));let Ke=0,rt=0;if(lt.forEach(({pos:$e,distance:mt})=>{const kt=1/Math.max(mt,1),gn=$e.x-s.x,Fn=$e.y-s.y;Ke+=gn*kt,rt+=Fn*kt}),lt.length>1){const $e=Math.sqrt(Ke*Ke+rt*rt);if($e>0){const mt=-Ke/$e,kt=-rt/$e,gn=R*1;let Fn={x:s.x+mt*gn,y:s.y+kt*gn};if(!L(Fn,18)){const w0=[{x:kt,y:-mt},{x:-kt,y:mt},{x:mt*.7+kt*.7,y:kt*.7-mt*.7},{x:mt*.7-kt*.7,y:kt*.7+mt*.7}];for(const As of w0){const zs={x:s.x+As.x*gn,y:s.y+As.y*gn};if(L(zs,18)){Fn=zs;break}}if(!L(Fn,18)){const As=Et/2,zs=Rt/2,kr=As-s.x,jr=zs-s.y,Nr=Math.sqrt(kr*kr+jr*jr);Nr>0&&(Fn={x:s.x+kr/Nr*gn,y:s.y+jr/Nr*gn})}}Ee=Fn,pe=!0}}else if(ke<Ge){const $e=Math.min(Ge-ke+20,R*1),mt=ge/Math.max(ke,1),kt=ye/Math.max(ke,1);Ee={x:s.x-mt*$e,y:s.y-kt*$e},pe=!0}else if(ke>et){const $e=Math.min(ke-re,R),mt=ge/Math.max(ke,1),kt=ye/Math.max(ke,1);Ee={x:s.x+mt*$e,y:s.y+kt*$e},pe=!0}}else if(ke>60){const Ge=Math.min(ke-50,R),et=ge/Math.max(ke,1),Qe=ye/Math.max(ke,1);Ee={x:s.x+et*Ge,y:s.y+Qe*Ge},pe=!0}if(pe){let Ge=!0,et=!1;ue&&(et=n.enemies.filter(rt=>{const $e=i[rt.id];return $e&&rt.hp>0&&G(s,$e)<60}).length>1);const Qe=et?8:18,lt=et?0:2;n.enemies.forEach(Ke=>{const rt=i[Ke.id];if(rt&&Ke.hp>0){const $e=qn(Ke);k(Ee,rt,Qe,$e+lt)&&(Ge=!1)}}),(Ge&&L(Ee,18)||et&&L(Ee,18))&&(de=Ee)}const De=Math.atan2(ye,ge);S(De)}}else $||(de={x:s.x+Math.sin(ve/2e3)*.3,y:s.y+Math.cos(ve/3e3)*.2});if($){const z={x:s.x+Y.x,y:s.y+Y.y};let ne=!0;if(n.enemies.forEach(he=>{const Se=i[he.id];if(Se&&he.hp>0){const ue=qn(he);k(z,Se,18,ue+2)&&(ne=!1)}}),ne&&L(z,18)&&(de=z,n.enemies.length===0)){const he=Math.atan2(Y.y,Y.x);S(he)}}const F=18,O=40;n.enemies.forEach(z=>{const ne=i[z.id];if(ne&&z.hp>0){const he=qn(z),Se=G(de,ne),ue=F+he;if(Se<ue){const re=de.x-ne.x,ge=de.y-ne.y,ye=Math.hypot(re,ge)||1,ke=re/ye,Ee=ge/ye,pe=he+O,De={x:ne.x+ke*pe,y:ne.y+Ee*pe};L(De,F)&&(de=De)}}});const B=xe(de.x,de.y);M={x:y.x+(B.x-y.x)*.1,y:y.y+(B.y-y.y)*.1,zoom:y.zoom};const ee={...i},te={...w};n.enemies.forEach((z,ne)=>{const he=ee[z.id]||{x:ti-120,y:ni/2};if(z.hp<=0){te[z.id]||(te[z.id]=Date.now());return}const Se=de.x-he.x,ue=de.y-he.y,re=Math.hypot(Se,ue)||1,ge={x:he.x+Se/re*.3,y:he.y+ue/re*.3},ye=qn(z);let ke=!0;n.enemies.forEach(Ee=>{if(Ee.id!==z.id){const pe=ee[Ee.id];if(pe){const De=qn(Ee);k(ge,pe,ye+1,De+1)&&(ke=!1)}}}),ke&&k(ge,de,ye+2,18)&&(ke=!1),ke&&(ee[z.id]=ge)}),je=ee,Le=te;const ae=[...x],fe=d.map(z=>{let ne=z.vx,he=z.vy;if(z.type==="fireball"&&z.targetId){const ue=je[z.targetId];if(ue){const re=ue.x-z.x,ge=ue.y-z.y,ye=Math.hypot(re,ge);if(ye>0){const Ee=re/ye*Math.hypot(z.vx,z.vy),pe=ge/ye*Math.hypot(z.vx,z.vy);ne=z.vx+(Ee-z.vx)*.15,he=z.vy+(pe-z.vy)*.15}}}const Se={...z,x:z.x+ne,y:z.y+he,vx:ne,vy:he,life:z.life-Te,rotation:z.rotation!==void 0?z.rotation+.3:void 0};return z.type==="fireball"&&z.life>0&&Se.life<=0&&console.log(` Fireball expired - Original life: ${z.life}ms, dt: ${Te}ms, New life: ${Se.life}ms`),z.type==="fireball"&&Math.random()<.3&&ae.push({kind:"fire_particle",x:z.x+(Math.random()-.5)*10,y:z.y+(Math.random()-.5)*10,t:Date.now(),ttl:800+Math.random()*400,color:"#ff8800",size:2+Math.random()*2}),Se}).filter(z=>{if(z.life<=0)return!1;let ne=!1;return n.enemies.forEach(he=>{const Se=je[he.id];if(Se&&!ne){const ue=qn(he);if(k({x:z.x,y:z.y},Se,z.radius,ue)){if(z.damage&&z.damage>0){console.log(` Projectile ${z.skillId} hits ${he.name} for ${z.damage} damage!`),a.log(`ANIM_PLAYER|${he.id}|magic|Rare|hit|${z.damage}`),a.log(` ${z.skillId} hits ${he.name} for ${z.damage} damage!`);const re=n.enemies.findIndex(ge=>ge.id===he.id);if(re!==-1&&n.enemies[re].hp>0){const ge=[...n.enemies];ge[re]={...ge[re],hp:Math.max(0,ge[re].hp-z.damage)};const ye={};ge.forEach(ke=>{var Ee,pe;ye[ke.id]={x:((Ee=ke.position)==null?void 0:Ee.x)||0,y:((pe=ke.position)==null?void 0:pe.y)||0}}),a.updateEnemyPositions(ye)}}if(z.type==="fireball"){ae.push({kind:"fireball_explosion",x:z.x,y:z.y,t:Date.now(),ttl:3e3,color:z.color,size:z.size*3});for(let re=0;re<12;re++){const ge=re/12*Math.PI*2,ye=20+Math.random()*40;ae.push({kind:"fire_particle",x:z.x+Math.cos(ge)*ye,y:z.y+Math.sin(ge)*ye,t:Date.now(),ttl:1500+Math.random()*1e3,color:"#ff6600",size:3+Math.random()*3})}}else ae.push({kind:"impact",x:z.x,y:z.y,t:Date.now(),ttl:300,color:z.color,size:z.size*2});ne=!0}}}),!ne}),_e=250;if(fe.length>_e){const z=fe.filter(ue=>ue.type==="fireball"),ne=fe.filter(ue=>ue.type!=="fireball");ne.sort((ue,re)=>{if(ue.homing&&re.homing&&ue.targetX!==void 0&&ue.targetY!==void 0&&re.targetX!==void 0&&re.targetY!==void 0){const ge=Math.sqrt((ue.targetX-ue.x)**2+(ue.targetY-ue.y)**2);return Math.sqrt((re.targetX-re.x)**2+(re.targetY-re.y)**2)-ge}return(re.life||0)-(ue.life||0)});const he=Math.min(z.length,Math.floor(_e*.4)),Se=_e-he;Me=[...z.slice(0,he),...ne.slice(0,Se)]}else Me=fe;const be=ae.filter(z=>Date.now()-z.t<z.ttl),Pe=400;if(be.length>Pe){const z=be.filter(ue=>ue.kind==="fireball_explosion"||ue.kind==="fire_particle"),ne=be.filter(ue=>ue.kind!=="fireball_explosion"&&ue.kind!=="fire_particle");ne.sort((ue,re)=>re.t-ue.t);const he=Math.min(z.length,Math.floor(Pe*.3)),Se=Pe-he;Ne=[...z.slice(0,he),...ne.slice(0,Se)]}else Ne=be;if(o%300===0){const z=Ne.filter(he=>he.kind==="fireball_explosion"||he.kind==="fire_particle"),ne=Me.filter(he=>he.type==="fireball");console.log(` Fireball Status - Projectiles: ${ne.length}, Effects: ${z.length}, Total Effects: ${Ne.length}/${Pe}`),z.length===0&&ne.length>0&&console.warn(" Fireball effects missing despite active fireball projectiles"),Ne.length>=Pe&&console.log(` Effects limit reached (${Pe}), prioritization active`)}I.current.calculatedPlayerPos=de,I.current.calculatedEnemyPositions=je,I.current.calculatedProjectiles=Me,I.current.calculatedEffects=Ne,I.current.calculatedDying=Le,I.current.calculatedCamera=M,W=requestAnimationFrame(we)}return W=requestAnimationFrame(we),()=>cancelAnimationFrame(W)},[n.enemies,n.player,n.log,P,s,i,y,d,x,w]),j.useEffect(()=>{const J=setInterval(()=>{const o=I.current;o.calculatedPlayerPos&&(r(o.calculatedPlayerPos),a.updatePlayerPosition(o.calculatedPlayerPos)),o.calculatedEnemyPositions&&c(o.calculatedEnemyPositions),o.calculatedProjectiles&&u(o.calculatedProjectiles),o.calculatedEffects&&h(o.calculatedEffects),o.calculatedDying&&N(o.calculatedDying),o.calculatedCamera&&b(o.calculatedCamera)},16);return()=>clearInterval(J)},[]);const ce=j.useCallback(()=>{const W=performance.now();if(W-D.current<ie)return;D.current=W,V=0;const J=t.current;if(!J)return;const o=J.getContext("2d");if(!o)return;o.clearRect(0,0,J.width,J.height),o.fillStyle="#2a3441",o.fillRect(0,0,J.width,J.height),o.strokeStyle="#334155",o.lineWidth=2,o.strokeRect(10,10,J.width-20,J.height-20),n.enemies.forEach((M,R)=>{const Y=i[M.id]||{x:200+R*40,y:100+(R%5-2)*50},$=A(Y.x,Y.y),F=w[M.id],O=M.hp<=0&&F?Math.max(0,1-(Date.now()-F)/1500):1;o.save(),o.globalAlpha=O;let B=12;const ee=Yh(M.type),te={"text-red-400":"#f87171","text-green-400":"#4ade80","text-blue-400":"#60a5fa","text-gray-400":"#9ca3af","text-purple-400":"#c084fc","text-yellow-400":"#facc15","text-orange-400":"#fb923c","text-gray-300":"#d1d5db","text-cyan-400":"#22d3ee","text-red-600":"#dc2626","text-amber-400":"#fbbf24","text-pink-400":"#f472b6","text-yellow-300":"#fde047","text-indigo-400":"#818cf8","text-violet-400":"#a78bfa","text-green-600":"#16a34a","text-black":"#000000","text-emerald-400":"#34d399","text-white":"#ffffff"};if(o.fillStyle=te[ee]||"#a78bfa",B=qn(M),o.beginPath(),M.type==="tank"||M.type==="construct"||M.type==="crystal_guardian"){const Z=B*y.zoom;o.fillRect($.x-Z,$.y-Z,Z*2,Z*2)}else if(M.type==="assassin"||M.type==="phase_beast"){const Z=B*y.zoom;o.moveTo($.x,$.y-Z),o.lineTo($.x+Z,$.y),o.lineTo($.x,$.y+Z),o.lineTo($.x-Z,$.y),o.closePath(),o.fill()}else if(M.type==="caster"||M.type==="necromancer"){const Z=B*y.zoom;o.moveTo($.x,$.y-Z),o.lineTo($.x+Z*.866,$.y+Z*.5),o.lineTo($.x-Z*.866,$.y+Z*.5),o.closePath(),o.fill()}else if(M.type==="swarm"){const Z=B*.6*y.zoom;for(let fe=0;fe<3;fe++){const _e=fe*Math.PI*2/3,be=Math.cos(_e)*Z*.8,Pe=Math.sin(_e)*Z*.8;o.beginPath(),o.arc($.x+be,$.y+Pe,Z,0,Math.PI*2),o.fill()}}else if(M.type==="mimic"){const Z=B*y.zoom;o.fillRect($.x-Z,$.y-Z*.7,Z*2,Z*1.4),o.fillRect($.x-Z*1.1,$.y-Z*.9,Z*2.2,Z*.4)}else if(M.type==="void_spawn"){const Z=B*y.zoom,fe=8;o.moveTo($.x+Z,$.y);for(let _e=1;_e<=fe;_e++){const be=_e*Math.PI*2/fe,Pe=.7+Math.sin(Date.now()*.01+_e)*.3,z=Z*Pe;o.lineTo($.x+Math.cos(be)*z,$.y+Math.sin(be)*z)}o.closePath(),o.fill()}else o.arc($.x,$.y,B*y.zoom,0,Math.PI*2),o.fill();if(o.fillStyle="#ffffff",M.type==="melee")o.beginPath(),o.moveTo($.x-8*y.zoom,$.y-18*y.zoom),o.lineTo($.x-2*y.zoom,$.y-26*y.zoom),o.lineTo($.x+4*y.zoom,$.y-18*y.zoom),o.fill();else if(M.type==="ranged")o.beginPath(),o.arc($.x,$.y-6*y.zoom,6*y.zoom,Math.PI*.2,Math.PI*.8),o.lineWidth=2,o.strokeStyle="#ffffff",o.stroke();else if(M.type==="swarm")for(let Z=0;Z<3;Z++)o.beginPath(),o.arc($.x+(Z-1)*4*y.zoom,$.y-6*y.zoom,2*y.zoom,0,Math.PI*2),o.fill();else M.type==="mimic"?o.fillRect($.x-6*y.zoom,$.y-10*y.zoom,12*y.zoom,8*y.zoom):M.type==="phase_beast"?(o.globalAlpha=O*.6,o.beginPath(),o.arc($.x,$.y,(B+8)*y.zoom,0,Math.PI*2),o.strokeStyle="#a78bfa",o.lineWidth=3,o.stroke(),o.globalAlpha=O):M.type==="necromancer"?(o.beginPath(),o.arc($.x,$.y-8*y.zoom,5*y.zoom,0,Math.PI*2),o.fill(),o.fillRect($.x-2*y.zoom,$.y-4*y.zoom,4*y.zoom,3*y.zoom)):M.type==="void_spawn"?(o.fillStyle="#000000",o.beginPath(),o.arc($.x,$.y,(B-4)*y.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#ffffff"):M.type==="crystal_guardian"?(o.beginPath(),o.moveTo($.x,$.y-10*y.zoom),o.lineTo($.x+6*y.zoom,$.y-4*y.zoom),o.lineTo($.x,$.y+2*y.zoom),o.lineTo($.x-6*y.zoom,$.y-4*y.zoom),o.closePath(),o.fill()):(o.beginPath(),o.arc($.x,$.y,(B+6)*y.zoom,0,Math.PI*2),o.strokeStyle="rgba(255,255,255,0.06)",o.lineWidth=2,o.stroke());ze(o,$.x,$.y-(B+15)*y.zoom,40*y.zoom,6*y.zoom,M.hp,M.maxHp,O),St(o,`Lv.${M.level}`,$.x,$.y-(B+25)*y.zoom,O);const ae=M.name.replace(/L\d+$/,"").trim();St(o,ae,$.x,$.y-(B+35)*y.zoom,O,10),o.restore()});const U=A(s.x,s.y);40*y.zoom;let K=0;n.enemies.length===0&&(K=Math.sin(m*2)*2*y.zoom),o.save(),P.active&&(o.translate(U.x,U.y+K),o.rotate(P.rotation),o.translate(-U.x,-U.y-K),o.shadowColor="#ffffff",o.shadowBlur=8*y.zoom);const we=Date.now()*.003,ve=20*y.zoom,de=.08*(Math.sin(we*1.2)*.15+.85),je=o.createRadialGradient(U.x,U.y+8*y.zoom,0,U.x,U.y+8*y.zoom,ve);P.active?(je.addColorStop(0,`rgba(255, 255, 255, ${de*1.5})`),je.addColorStop(.8,`rgba(200, 200, 255, ${de*.5})`),je.addColorStop(1,"rgba(255, 255, 255, 0)")):(je.addColorStop(0,`rgba(100, 150, 255, ${de})`),je.addColorStop(.8,`rgba(50, 100, 200, ${de*.3})`),je.addColorStop(1,"rgba(100, 150, 255, 0)")),o.fillStyle=je,o.beginPath(),o.arc(U.x,U.y+8*y.zoom,ve,0,Math.PI*2),o.fill();const Me=16;if(o.fillStyle="#4A90E2",o.beginPath(),o.arc(U.x,U.y+K,Me*y.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#ffffff",o.beginPath(),o.arc(U.x,U.y+K,4*y.zoom,0,Math.PI*2),o.fill(),o.restore(),n.enemies.length>0){o.save();const Y=(20+20)*y.zoom,$=Math.PI/3,F=.7+Math.sin(we*2.5)*.2,O=U.x,B=U.y+K,ee=g-$/2,te=g+$/2,ae=o.createRadialGradient(O,B,Y*.8,O,B,Y*1.2);P.active?(ae.addColorStop(0,`rgba(255, 255, 255, ${F*.9})`),ae.addColorStop(.5,`rgba(200, 200, 255, ${F*.7})`),ae.addColorStop(1,`rgba(255, 255, 255, ${F*.3})`)):(ae.addColorStop(0,`rgba(100, 200, 255, ${F*.8})`),ae.addColorStop(.5,`rgba(150, 220, 255, ${F*.9})`),ae.addColorStop(1,`rgba(200, 240, 255, ${F*.4})`)),o.strokeStyle=ae,o.lineWidth=6*y.zoom,o.lineCap="round",o.beginPath(),o.arc(O,B,Y,ee,te),o.stroke(),o.strokeStyle=P.active?`rgba(255, 255, 255, ${F*.6})`:`rgba(180, 230, 255, ${F*.7})`,o.lineWidth=3*y.zoom,o.beginPath(),o.arc(O,B,Y,ee,te),o.stroke();const Z=8*y.zoom,fe=O+Math.cos(g)*Y,_e=B+Math.sin(g)*Y,be=fe+Math.cos(g)*Z,Pe=_e+Math.sin(g)*Z,z=Math.PI/6,ne=Z*.6,he=fe+Math.cos(g-z)*ne,Se=_e+Math.sin(g-z)*ne,ue=fe+Math.cos(g+z)*ne,re=_e+Math.sin(g+z)*ne;o.fillStyle=P.active?`rgba(255, 255, 255, ${F*.9})`:`rgba(255, 255, 255, ${F*.8})`,o.strokeStyle=P.active?`rgba(100, 100, 255, ${F*.8})`:`rgba(50, 100, 200, ${F*.9})`,o.lineWidth=2*y.zoom,o.beginPath(),o.moveTo(be,Pe),o.lineTo(he,Se),o.lineTo(ue,re),o.closePath(),o.fill(),o.stroke();const ge=5;for(let ye=0;ye<ge;ye++){const ke=ee+(te-ee)*(ye/(ge-1)),Ee=O+Math.cos(ke)*Y,pe=B+Math.sin(ke)*Y,De=(1.5+Math.sin(we*4+ye*.8))*y.zoom,Ge=F*(.6+Math.sin(we*3+ye*1.2)*.3);o.fillStyle=P.active?`rgba(255, 255, 255, ${Ge})`:`rgba(200, 230, 255, ${Ge})`,o.beginPath(),o.arc(Ee,pe,De,0,Math.PI*2),o.fill()}o.restore()}if(ze(o,U.x,U.y-35*y.zoom+K,50*y.zoom,8*y.zoom,n.player.hp,n.player.maxHp,1),St(o,`Lv.${n.player.level}`,U.x,U.y-50*y.zoom+K,1),C){o.save();const M=20,R=M*y.zoom;o.globalAlpha=.4,o.strokeStyle="#ff4444",o.lineWidth=2*y.zoom,o.setLineDash([4*y.zoom,2*y.zoom]),o.beginPath(),o.arc(U.x,U.y+K,R,0,Math.PI*2),o.stroke(),o.globalAlpha=.8,o.fillStyle="#ff4444",o.font=`${10*y.zoom}px Arial`,o.textAlign="center",o.fillText(`Player: ${M}px`,U.x,U.y+K-R-8*y.zoom);const Y=80,$=Y*y.zoom;o.globalAlpha=.35,o.strokeStyle="#ffaa00",o.lineWidth=3*y.zoom,o.setLineDash([6*y.zoom,3*y.zoom]),o.beginPath(),o.arc(U.x,U.y+K,$,0,Math.PI*2),o.stroke(),o.globalAlpha=.9,o.fillStyle="#ffaa00",o.font=`${11*y.zoom}px Arial`,o.textAlign="center",o.fillText(`Basic Attack: ${Y}px`,U.x,U.y+K+$+15*y.zoom),o.globalAlpha=.8,o.fillStyle="#ffffff",o.strokeStyle="#000000",o.lineWidth=2*y.zoom,o.font=`bold ${14*y.zoom}px Arial`,o.textAlign="center",o.textBaseline="middle";const F=U.x,O=U.y+K-$;o.strokeText("N",F,O),o.fillText("N",F,O);const B=U.x,ee=U.y+K+$;o.strokeText("S",B,ee),o.fillText("S",B,ee);const te=U.x+$,ae=U.y+K;o.strokeText("E",te,ae),o.fillText("E",te,ae);const Z=U.x-$,fe=U.y+K;o.strokeText("W",Z,fe),o.fillText("W",Z,fe);const _e=n.player.skillBar.slots.filter(ne=>ne!==null);let be=1;_e.forEach((ne,he)=>{if(ne&&ne.scaling){let Se=0,ue="#00ff00",re=ne.name||ne.id;if(ne.scaling.baseArea&&ne.scaling.areaPerLevel?(Se=(ne.scaling.baseArea+(ne.level-1)*ne.scaling.areaPerLevel)*30,ue="#00ff00"):ne.scaling.baseRange&&ne.scaling.rangePerLevel?(Se=ds(ne),ue="#ff8844",ne.id==="fireball"&&console.log("Fireball Debug:",{skillId:ne.id,skillName:ne.name,skillLevel:ne.level,baseRange:ne.scaling.baseRange,rangePerLevel:ne.scaling.rangePerLevel,calculatedRange:Se,cameraZoom:y.zoom,scaledRange:Se*y.zoom})):(ne.id==="lightning_bolt"||ne.id==="ice_shard")&&(Se=200,ue="#ff8844"),Se>0){const ge=Se*y.zoom;o.globalAlpha=.3,o.strokeStyle=ue,o.lineWidth=3*y.zoom,o.setLineDash([8*y.zoom,4*y.zoom]),o.beginPath(),o.arc(U.x,U.y+K,ge,0,Math.PI*2),o.stroke(),o.globalAlpha=.8,o.fillStyle=ue,o.font=`${11*y.zoom}px Arial`,o.textAlign="center";const ye=U.y+K+ge+(15+be*15)*y.zoom;ne.id==="fireball"?o.fillText(`${re}: ${Math.round(Se)}px (Lv.${ne.level}) [base:${ne.scaling.baseRange}, +${ne.scaling.rangePerLevel}/lv, zoom:${y.zoom.toFixed(2)}]`,U.x,ye):o.fillText(`${re}: ${Math.round(Se)}px (Lv.${ne.level})`,U.x,ye),be++}}}),o.globalAlpha=.9,o.fillStyle="#ffffff",o.font=`${12*y.zoom}px Arial`,o.textAlign="left",o.fillText(`Debug AOE (F1) | Skills: ${_e.length}`,10*y.zoom,30*y.zoom);const Pe=50*y.zoom,z=18*y.zoom;o.font=`${10*y.zoom}px Arial`,o.fillStyle="#ff4444",o.fillText(" Player Collision (16px)",10*y.zoom,Pe),o.fillStyle="#ffaa00",o.fillText(" Basic Attack Range (80px)",10*y.zoom,Pe+z),o.fillStyle="#00ff00",o.fillText(" AOE Skills",10*y.zoom,Pe+z*2),o.fillStyle="#4488ff",o.fillText(" Ranged Skills",10*y.zoom,Pe+z*3),o.fillStyle="#ff8844",o.fillText(" Projectile Skills",10*y.zoom,Pe+z*4),o.setLineDash([]),o.restore()}const Ne=I.current.calculatedProjectiles;(Ne&&Ne.length>0?Ne:d).forEach(M=>{const R=A(M.x,M.y);if(o.save(),M.type==="fireball"){o.translate(R.x,R.y),M.rotation!==void 0&&o.rotate(M.rotation*Math.PI/180);const Y=o.createRadialGradient(0,0,0,0,0,15*y.zoom);Y.addColorStop(0,"rgba(255, 100, 0, 0.8)"),Y.addColorStop(.5,"rgba(255, 50, 0, 0.4)"),Y.addColorStop(1,"rgba(255, 0, 0, 0)"),o.fillStyle=Y,o.beginPath(),o.arc(0,0,15*y.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#FFD700",o.beginPath(),o.arc(0,0,8*y.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#FFF",o.beginPath(),o.arc(0,0,4*y.zoom,0,Math.PI*2),o.fill()}else M.glow&&(o.shadowColor=M.color,o.shadowBlur=10*y.zoom),o.fillStyle=M.color,o.beginPath(),o.arc(R.x,R.y,M.radius*y.zoom,0,Math.PI*2),o.fill();o.restore()}),x.forEach(M=>{const R=A(M.x,M.y),Y=Date.now()-M.t,$=Math.min(1,Y/M.ttl);if(M.kind==="damage"||M.kind==="critical_damage"||M.kind==="player_damage"||M.kind==="dodge"||M.kind==="miss"||M.kind==="block"){if(o.save(),o.globalAlpha=1-$,o.fillStyle=M.color,M.kind==="dodge"||M.kind==="miss"||M.kind==="block")o.font=`bold ${(M.size||16)*y.zoom}px Arial`,o.strokeStyle="#000",o.lineWidth=2*y.zoom;else if(M.kind==="critical_damage"){o.font=`bold ${(M.size||20)*y.zoom}px Arial`,o.strokeStyle="#000",o.lineWidth=3*y.zoom;const O=1+Math.sin(Y*.01)*.2;o.globalAlpha=(1-$)*O}else o.font=`${(M.size||16)*y.zoom}px bold sans-serif`;o.textAlign="center";const F=R.y-$*20*y.zoom;(M.kind==="dodge"||M.kind==="miss"||M.kind==="block"||M.kind==="critical_damage")&&o.strokeText(M.text||"",R.x,F),o.fillText(M.text||"",R.x,F),o.restore()}else if(M.kind==="impact"){o.save(),o.globalAlpha=(1-$)*.8,o.fillStyle=M.color;const F=(M.size||8)*$*2;o.beginPath(),o.arc(R.x,R.y,F,0,Math.PI*2),o.fill(),o.globalAlpha=(1-$)*.4,o.fillStyle="#ffffff",o.beginPath(),o.arc(R.x,R.y,F*.5,0,Math.PI*2),o.fill(),o.restore()}else if(M.kind==="fireball_explosion"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.9;const O=(M.size||24)*F*1.5;o.fillStyle=M.color,o.beginPath(),o.arc(R.x,R.y,O,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.7,o.fillStyle="#ff8800",o.beginPath(),o.arc(R.x,R.y,O*.7,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.5,o.fillStyle="#ffff00",o.beginPath(),o.arc(R.x,R.y,O*.4,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.3,o.fillStyle="#ffffff",o.beginPath(),o.arc(R.x,R.y,O*.2,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.8,o.fillStyle="#ff6600";for(let B=0;B<12;B++){const ee=B/12*Math.PI*2+Y*.01,te=O*(1.2+Math.sin(Y*.005+B)*.3),ae=R.x+Math.cos(ee)*te,Z=R.y+Math.sin(ee)*te,fe=(4+Math.sin(Y*.008+B)*2)*y.zoom*(1-F);o.beginPath(),o.arc(ae,Z,fe,0,Math.PI*2),o.fill()}o.restore()}else if(M.kind==="fire_particle"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||3)*y.zoom*(1-F*.5),B=1+Math.sin(Y*.02)*.3;o.shadowColor=M.color,o.shadowBlur=8*y.zoom,o.fillStyle=M.color,o.beginPath(),o.arc(R.x,R.y,O*B,0,Math.PI*2),o.fill(),o.shadowBlur=0,o.globalAlpha=(1-F)*.6,o.fillStyle="#ffaa00",o.beginPath(),o.arc(R.x,R.y,O*.6*B,0,Math.PI*2),o.fill(),o.restore()}else if(M.kind==="slash"){o.save(),o.globalAlpha=(1-$)*.8;const F=M.angle||0,O=(M.size||40)*y.zoom,B=6*y.zoom,ee=Math.sin($*Math.PI),te=O*ee,ae=Math.PI/2,Z=F-ae/2,fe=F+ae/2;o.strokeStyle=M.color,o.lineWidth=B,o.lineCap="round",o.beginPath(),o.arc(R.x,R.y,te,Z,fe),o.stroke(),o.globalAlpha=(1-$)*.6,o.strokeStyle="#ffffff",o.lineWidth=B*.4,o.beginPath(),o.arc(R.x,R.y,te,Z,fe),o.stroke(),o.globalAlpha=(1-$)*.3,o.shadowBlur=10*y.zoom,o.shadowColor=M.color,o.strokeStyle=M.color,o.lineWidth=B*1.2,o.beginPath(),o.arc(R.x,R.y,te,Z,fe),o.stroke(),o.shadowBlur=0,o.restore()}else if(M.kind==="explosion"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||15)*F*1.5;o.fillStyle=M.color,o.beginPath(),o.arc(R.x,R.y,O,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.6,o.fillStyle="#ffff88",o.beginPath(),o.arc(R.x,R.y,O*.6,0,Math.PI*2),o.fill(),o.restore()}else if(M.kind==="lightning"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.9,o.strokeStyle=M.color,o.lineWidth=3*y.zoom,o.lineCap="round";const O=6,B=(M.size||12)*y.zoom;o.beginPath(),o.moveTo(R.x,R.y-B);for(let ee=1;ee<=O;ee++){const te=R.y-B+ee/O*B*2,ae=R.x+(Math.random()-.5)*20*y.zoom;o.lineTo(ae,te)}o.stroke(),o.globalAlpha=(1-F)*.7,o.strokeStyle="#ffffff",o.lineWidth=1*y.zoom,o.stroke(),o.restore()}else if(M.kind==="power_strike"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||16)*F*2;o.strokeStyle=M.color,o.lineWidth=4*y.zoom,o.beginPath(),o.arc(R.x,R.y,O,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-F)*.5,o.fillStyle="#ffff00",o.beginPath(),o.arc(R.x,R.y,O*.3,0,Math.PI*2),o.fill(),o.restore()}else if(M.kind==="critical_burst"){o.save();const F=Math.min(1,Y/M.ttl),B=(M.size||25)*y.zoom*F,ee=1+Math.sin(Y*.02)*.3;o.globalAlpha=(1-F)*.8*ee,o.strokeStyle=M.color,o.lineWidth=6*y.zoom,o.beginPath(),o.arc(R.x,R.y,B,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-F)*.6,o.fillStyle="#ffffff",o.beginPath(),o.arc(R.x,R.y,B*.4,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.7,o.strokeStyle=M.color,o.lineWidth=3*y.zoom;for(let te=0;te<8;te++){const ae=te*Math.PI/4+Y*.005,Z=B*1.5,fe=R.x+Math.cos(ae)*B*.3,_e=R.y+Math.sin(ae)*B*.3,be=R.x+Math.cos(ae)*Z,Pe=R.y+Math.sin(ae)*Z;o.beginPath(),o.moveTo(fe,_e),o.lineTo(be,Pe),o.stroke()}o.restore()}else if(M.kind==="dodge_burst"){o.save();const F=Math.min(1,Y/M.ttl),B=(M.size||20)*y.zoom*F;o.globalAlpha=(1-F)*.7,o.strokeStyle=M.color,o.lineWidth=3*y.zoom,o.setLineDash([8*y.zoom,4*y.zoom]),o.lineDashOffset=F*20,o.beginPath(),o.arc(R.x,R.y,B,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-F)*.5,o.fillStyle="#ffffff",o.beginPath(),o.arc(R.x,R.y,B*.3,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.6,o.strokeStyle=M.color,o.lineWidth=2*y.zoom,o.setLineDash([]);for(let ee=0;ee<6;ee++){const te=ee*Math.PI/3+Y*.01,ae=B*.5,Z=B*1.2,fe=R.x+Math.cos(te)*ae,_e=R.y+Math.sin(te)*ae,be=R.x+Math.cos(te)*Z,Pe=R.y+Math.sin(te)*Z;o.beginPath(),o.moveTo(fe,_e),o.lineTo(be,Pe),o.stroke()}o.restore()}else if(M.kind==="pickup")o.save(),o.globalAlpha=1-$,o.fillStyle=M.color,o.font=`${14*y.zoom}px sans-serif`,o.textAlign="center",o.fillText(M.text||"",R.x,R.y),o.restore();else if(M.kind==="impact")o.save(),o.globalAlpha=1-$,o.strokeStyle=M.color,o.lineWidth=2,o.beginPath(),o.arc(M.x,M.y,$*20,0,Math.PI*2),o.stroke(),o.restore();else if(M.kind==="whirlwind"){const O=A(s.x,s.y),ee=Date.now()-M.t,ae=ee*.008;o.save();const fe=Math.max(.7,1-$)+Math.sin(ee*.01)*.2;for(let be=0;be<4;be++){const Pe=(be+1)/4,z=(30+be*12)*y.zoom,ne=ae*(1+be*.3);o.globalAlpha=fe*(1-Pe*.2),o.strokeStyle=be===0?"#FFFFFF":"#F0F0F0",o.lineWidth=(4-be)*y.zoom,o.beginPath(),o.setLineDash([15*y.zoom,8*y.zoom]),o.lineDashOffset=ne*30,o.arc(O.x,O.y,z,0,Math.PI*2),o.stroke()}o.globalAlpha=fe*.9,o.fillStyle="#FFFFFF",o.beginPath(),o.arc(O.x,O.y,8*y.zoom,0,Math.PI*2),o.fill(),o.globalAlpha=fe*.8,o.strokeStyle="#FFFFFF",o.lineWidth=2*y.zoom;for(let be=0;be<6;be++){const Pe=ae*2+be*Math.PI/3,z=25*y.zoom,ne=O.x+Math.cos(Pe)*z,he=O.y+Math.sin(Pe)*z,Se=O.x+Math.cos(Pe+.5)*(z+15*y.zoom),ue=O.y+Math.sin(Pe+.5)*(z+15*y.zoom);o.beginPath(),o.moveTo(ne,he),o.lineTo(Se,ue),o.stroke()}o.globalAlpha=fe*.7,o.fillStyle="#FFD54F";for(let be=0;be<8;be++){const Pe=ae*3+be*Math.PI/4,z=(35+Math.sin(ee*.005+be)*10)*y.zoom,ne=O.x+Math.cos(Pe)*z,he=O.y+Math.sin(Pe)*z,Se=(2+Math.sin(ee*.01+be)*1)*y.zoom;o.beginPath(),o.arc(ne,he,Se,0,Math.PI*2),o.fill()}o.globalAlpha=.3+Math.sin(ee*.008)*.1,o.strokeStyle="#ff6b6b",o.lineWidth=3*y.zoom,o.setLineDash([10*y.zoom,5*y.zoom]),o.lineDashOffset=ee*.01;const _e=n.player.skillBar.slots.find(be=>(be==null?void 0:be.name)==="Whirlwind");if(_e){const z=(_e.scaling.baseArea+(_e.level-1)*_e.scaling.areaPerLevel)*30*y.zoom;o.beginPath(),o.arc(O.x,O.y,z,0,Math.PI*2),o.stroke()}o.setLineDash([]),o.restore()}else if(M.kind==="heal"){const F=A(s.x,s.y);o.save(),o.globalAlpha=1-$,o.fillStyle=M.color;for(let O=0;O<8;O++){const B=O/8*Math.PI*2+$*Math.PI*2,ee=30*y.zoom*(1-$*.5),te=F.x+Math.cos(B)*ee,ae=F.y+Math.sin(B)*ee;o.beginPath(),o.arc(te,ae,3*y.zoom,0,Math.PI*2),o.fill()}o.restore()}else if(M.kind==="ice_shard"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||12)*y.zoom;o.fillStyle=M.color,o.beginPath();for(let B=0;B<6;B++){const ee=B*Math.PI/3+Y*.002,te=R.x+Math.cos(ee)*O,ae=R.y+Math.sin(ee)*O;B===0?o.moveTo(te,ae):o.lineTo(te,ae)}o.closePath(),o.fill(),o.globalAlpha=(1-F)*.6,o.fillStyle="#ffffff";for(let B=0;B<8;B++){const ee=B*Math.PI/4+Y*.005,te=O*1.5,ae=R.x+Math.cos(ee)*te,Z=R.y+Math.sin(ee)*te;o.beginPath(),o.arc(ae,Z,2*y.zoom,0,Math.PI*2),o.fill()}o.restore()}else if(M.kind==="ground_slam"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||25)*F*2;o.strokeStyle=M.color,o.lineWidth=6*y.zoom,o.beginPath(),o.arc(R.x,R.y,O,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-F)*.5,o.fillStyle="#8b7355",o.beginPath(),o.arc(R.x,R.y,O*.6,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.7,o.fillStyle=M.color;for(let B=0;B<6;B++){const ee=B*Math.PI/3+Y*.003,te=O*.8,ae=R.x+Math.cos(ee)*te,Z=R.y+Math.sin(ee)*te;o.fillRect(ae-2,Z-2,4*y.zoom,4*y.zoom)}o.restore()}else if(M.kind==="poison_arrow"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.7;const O=(M.size||20)*y.zoom;o.fillStyle=M.color,o.beginPath(),o.arc(R.x,R.y,O,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.5,o.fillStyle="#40c057";for(let B=0;B<12;B++){const ee=B*Math.PI/6+Y*.004,te=O*(.5+Math.sin(Y*.01+B)*.3),ae=R.x+Math.cos(ee)*te,Z=R.y+Math.sin(ee)*te,fe=(2+Math.sin(Y*.008+B)*1)*y.zoom;o.beginPath(),o.arc(ae,Z,fe,0,Math.PI*2),o.fill()}o.restore()}else if(M.kind==="chain_lightning"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.9,o.strokeStyle=M.color,o.lineWidth=4*y.zoom,o.lineCap="round";for(let O=0;O<3;O++){const B=O*Math.PI*2/3+Y*.01,ee=(M.size||16)*y.zoom;o.beginPath(),o.moveTo(R.x,R.y);for(let te=1;te<=5;te++){const ae=te/5,Z=R.x+Math.cos(B)*ee*ae+(Math.random()-.5)*15*y.zoom,fe=R.y+Math.sin(B)*ee*ae+(Math.random()-.5)*15*y.zoom;o.lineTo(Z,fe)}o.stroke()}o.globalAlpha=(1-F)*.8,o.fillStyle="#ffffff",o.beginPath(),o.arc(R.x,R.y,4*y.zoom,0,Math.PI*2),o.fill(),o.restore()}else if(M.kind==="meteor"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||35)*F*1.5;o.fillStyle=M.color,o.beginPath(),o.arc(R.x,R.y,O,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.6,o.fillStyle="#ff8800",o.beginPath(),o.arc(R.x,R.y,O*.7,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.4,o.fillStyle="#ffffff",o.beginPath(),o.arc(R.x,R.y,O*.3,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.7,o.fillStyle="#ff4400";for(let B=0;B<10;B++){const ee=B*Math.PI/5+Y*.005,te=O*(1.2+Math.sin(Y*.01+B)*.3),ae=R.x+Math.cos(ee)*te,Z=R.y+Math.sin(ee)*te,fe=(3+Math.sin(Y*.008+B)*2)*y.zoom;o.beginPath(),o.arc(ae,Z,fe,0,Math.PI*2),o.fill()}o.restore()}else if(M.kind==="blade_vortex"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||22)*y.zoom,B=Y*.02;o.strokeStyle=M.color,o.lineWidth=3*y.zoom,o.lineCap="round";for(let ee=0;ee<4;ee++){const te=B+ee*Math.PI/2,ae=O,Z=R.x+Math.cos(te)*(O*.3),fe=R.y+Math.sin(te)*(O*.3),_e=R.x+Math.cos(te)*ae,be=R.y+Math.sin(te)*ae;o.beginPath(),o.moveTo(Z,fe),o.lineTo(_e,be),o.stroke()}o.globalAlpha=(1-F)*.6,o.fillStyle="#ffffff",o.beginPath(),o.arc(R.x,R.y,4*y.zoom,0,Math.PI*2),o.fill(),o.restore()}else if(M.kind==="frost_nova"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||28)*F*2;o.strokeStyle=M.color,o.lineWidth=5*y.zoom,o.setLineDash([8*y.zoom,4*y.zoom]),o.lineDashOffset=Y*.01,o.beginPath(),o.arc(R.x,R.y,O,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-F)*.6,o.fillStyle="#a5f3fc",o.beginPath(),o.arc(R.x,R.y,O*.6,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.7,o.fillStyle=M.color;for(let B=0;B<8;B++){const ee=B*Math.PI/4+Y*.003,te=O*.8,ae=R.x+Math.cos(ee)*te,Z=R.y+Math.sin(ee)*te;o.beginPath(),o.moveTo(ae,Z-4*y.zoom),o.lineTo(ae+3*y.zoom,Z),o.lineTo(ae,Z+4*y.zoom),o.lineTo(ae-3*y.zoom,Z),o.closePath(),o.fill()}o.setLineDash([]),o.restore()}else if(M.kind==="cleave"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.9;const O=(M.size||20)*y.zoom,B=Math.PI;o.strokeStyle=M.color,o.lineWidth=6*y.zoom,o.lineCap="round",o.beginPath(),o.arc(R.x,R.y,O,-B/2,B/2),o.stroke(),o.globalAlpha=(1-F)*.7,o.lineWidth=3*y.zoom;for(let ee=0;ee<3;ee++){const te=-B/2+ee*B/2,ae=R.x+Math.cos(te)*(O*.5),Z=R.y+Math.sin(te)*(O*.5),fe=R.x+Math.cos(te)*O,_e=R.y+Math.sin(te)*O;o.beginPath(),o.moveTo(ae,Z),o.lineTo(fe,_e),o.stroke()}o.restore()}else if(M.kind==="summon_skeletons"){o.save();const F=Math.min(1,Y/M.ttl);o.globalAlpha=(1-F)*.8;const O=(M.size||15)*y.zoom;o.strokeStyle=M.color,o.lineWidth=3*y.zoom,o.setLineDash([6*y.zoom,3*y.zoom]),o.lineDashOffset=Y*.01,o.beginPath(),o.arc(R.x,R.y,O,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-F)*.6,o.fillStyle="#6b7280",o.beginPath(),o.arc(R.x,R.y,O*.5,0,Math.PI*2),o.fill(),o.globalAlpha=(1-F)*.7,o.fillStyle="#f3f4f6";for(let B=0;B<6;B++){const ee=B*Math.PI/3+Y*.004,te=O*.7,ae=R.x+Math.cos(ee)*te,Z=R.y+Math.sin(ee)*te;o.fillRect(ae-1,Z-3,2*y.zoom,6*y.zoom),o.fillRect(ae-3,Z-1,6*y.zoom,2*y.zoom)}o.setLineDash([]),o.restore()}})},[n.enemies,i,s,d,x,w,y,m,P,A]);function ze(W,J,o,U,K,we,ve,Te){const de=Math.max(0,Math.min(1,we/ve));W.fillStyle=`rgba(31,41,55,${Te})`,W.fillRect(J-U/2,o-K/2,U,K);const je=W.createLinearGradient(J-U/2,o,J+U/2,o);je.addColorStop(0,"#16a34a"),je.addColorStop(1,"#dc2626"),W.fillStyle=je,W.globalAlpha=Te,W.fillRect(J-U/2,o-K/2,U*de,K),W.globalAlpha=1,W.strokeStyle=`rgba(0,0,0,${.6*Te})`,W.lineWidth=1,W.strokeRect(J-U/2,o-K/2,U,K)}function St(W,J,o,U,K,we=12){W.fillStyle=`rgba(255,255,255,${K})`,W.font=`${we}px sans-serif`,W.textAlign="center",W.fillText(J,o,U)}return j.useEffect(()=>{let W;const J=()=>{ce(),W=requestAnimationFrame(J)};return W=requestAnimationFrame(J),()=>cancelAnimationFrame(W)},[ce]),l.jsx("div",{className:"game-canvas-container",children:l.jsx("canvas",{ref:t,width:ti,height:ni,className:"game-canvas",tabIndex:0,style:{outline:"none"},onClick:()=>{var W;return(W=t.current)==null?void 0:W.focus()}})})}),tx={health:"Maximum health points. Increased by Vitality (+3 per point) and Strength (+2 per point).",mana:"Maximum mana points. Increased by Intelligence (+1 per point).",damage:"Base damage per second. Increased by Strength (+1 per point) and equipment.",armor:"Reduces incoming damage. Increased by equipment and Resilience skill.",critChance:"Chance to deal critical damage. Increased by Dexterity (+0.5% per point), Luck (+0.5% per point), and Precision skill.",dodgeChance:"Chance to avoid incoming damage. Increased by Dexterity (+0.3% per point) and Agility skill.",blockChance:"Chance to block incoming damage. Increased by equipment.",lifeSteal:"Percentage of damage dealt returned as health. Increased by equipment.",attackSpeed:"Multiplier for attack frequency. Increased by equipment.",healthRegen:"Health points regenerated per second. Increased by Vitality (+0.1 per point) and equipment.",manaRegen:"Mana points regenerated per second. Increased by Intelligence (+0.2 per point) and equipment.",strength:"Increases damage (+1) and health (+2). Base 10, increased by equipment.",dexterity:"Increases critical chance (+0.5%) and dodge (+0.3%). Base 10, increased by equipment.",intelligence:"Increases mana (+1) and mana regeneration (+0.2). Base 10, increased by equipment.",vitality:"Increases health (+3) and health regeneration (+0.1). Base 10, increased by equipment.",luck:"Increases critical chance (+0.5%). Base 5, increased by equipment.",fireDamage:"Additional fire damage added to attacks. Effective against ice-resistant enemies.",iceDamage:"Additional ice damage added to attacks. Can slow enemies and is effective against fire-resistant foes.",lightningDamage:"Additional lightning damage added to attacks. Fast and effective against armored enemies.",poisonDamage:"Additional poison damage that deals damage over time. Effective against high-health enemies.",fireResistance:"Reduces fire damage taken. Essential for surviving fire-based attacks.",iceResistance:"Reduces ice damage taken and slowing effects. Helps maintain mobility.",lightningResistance:"Reduces lightning damage taken. Important against fast, shocking attacks.",poisonResistance:"Reduces poison damage and duration. Crucial for surviving toxic environments.",armorPenetration:"Percentage of enemy armor ignored when dealing damage. Effective against heavily armored foes.",damageMultiplier:"Multiplies all damage dealt. A powerful stat that scales with all damage sources.",stunChance:"Chance to stun enemies on hit, preventing them from acting temporarily.",damageReduction:"Reduces all incoming damage by a percentage. Stacks multiplicatively with armor.",movementSpeed:"Increases movement and positioning speed. Helps with kiting and positioning.",reflectDamage:"Returns a percentage of received damage back to the attacker.",doubleDropChance:"Chance for enemies to drop twice the normal loot. Excellent for farming.",cleaveChance:"Chance for attacks to hit multiple nearby enemies simultaneously.",spellResistance:"Reduces damage from magical attacks and spell effects.",stunResistance:"Reduces the duration and chance of being stunned by enemies.",cooldownReduction:"Reduces the cooldown time of all abilities and skills.",manaSteal:"Percentage of damage dealt returned as mana. Helps sustain mana-intensive builds.",thorns:"Deals damage to attackers when you take damage. Passive retaliation effect."};function nx(e,t){const n=e.skills||{},a=e.attributes||{};let s=0,r=0,i=0,c=0,d=0,u={},f={};switch(e.equipment&&Object.values(e.equipment).forEach(x=>{if(x&&(Object.entries(x.baseStats).forEach(([h,w])=>{typeof w=="number"&&(u[h]=(u[h]||0)+w)}),x.affixes.forEach(h=>{u[h.stat]=(u[h.stat]||0)+h.value}),e.stones)){const h=$s(x,e.stones);Object.entries(h).forEach(([w,N])=>{typeof N=="number"&&(f[w]=(f[w]||0)+N)})}}),t){case"health":s=120;const x=Math.max(0,(a.strength||10)-10)*2,h=Math.max(0,(a.vitality||10)-10)*3;r=x+h,i=(u.health||0)+(u.strength||0)*2+(u.vitality||0)*3,c=(f.health||0)+(f.strength||0)*2+(f.vitality||0)*3,d=(n.endurance||0)*10;break;case"mana":s=50,r=Math.max(0,(a.intelligence||10)-10),i=(u.mana||0)+(u.intelligence||0),c=(f.mana||0)+(f.intelligence||0),d=0;break;case"damage":s=2,r=Math.max(0,(a.strength||10)-10),i=(u.damage||0)+(u.strength||0),c=(f.damage||0)+(f.strength||0),d=n.strength||0;break;case"armor":s=0,r=0,i=u.armor||0,c=f.armor||0,d=n.resilience||0;break;case"critChance":s=0;const w=Math.max(0,(a.dexterity||10)-10)*.5,N=Math.max(0,(a.luck||5)-5)*.5;r=w+N,i=(u.critChance||0)*100+(u.dexterity||0)*.5+(u.luck||0)*.5,c=(f.critChance||0)*100+(f.dexterity||0)*.5+(f.luck||0)*.5,d=(n.precision||0)*1;break;case"dodgeChance":s=0,r=Math.max(0,(a.dexterity||10)-10)*.3,i=(u.dodgeChance||0)*100+(u.dexterity||0)*.3,c=(f.dodgeChance||0)*100+(f.dexterity||0)*.3,d=(n.agility||0)*1;break;case"blockChance":s=0,r=0,i=(u.blockChance||0)*100,c=(f.blockChance||0)*100,d=0;break;case"lifeSteal":s=0,r=0,i=(u.lifeSteal||0)*100,c=(f.lifeSteal||0)*100,d=0;break;case"attackSpeed":s=1,r=0,i=u.attackSpeed||0,c=f.attackSpeed||0,d=0;break;case"healthRegen":s=0,r=Math.max(0,(a.vitality||10)-10)*.1,i=(u.healthRegen||0)+(u.vitality||0)*.1,c=(f.healthRegen||0)+(f.vitality||0)*.1,d=0;break;case"manaRegen":s=0,r=Math.max(0,(a.intelligence||10)-10)*.2,i=(u.manaRegen||0)+(u.intelligence||0)*.2,c=(f.manaRegen||0)+(f.intelligence||0)*.2,d=0;break;case"strength":s=10,r=Math.max(0,(a.strength||10)-10),i=u.strength||0,c=f.strength||0,d=0;break;case"dexterity":s=10,r=Math.max(0,(a.dexterity||10)-10),i=u.dexterity||0,c=f.dexterity||0,d=0;break;case"intelligence":s=10,r=Math.max(0,(a.intelligence||10)-10),i=u.intelligence||0,c=f.intelligence||0,d=0;break;case"vitality":s=10,r=Math.max(0,(a.vitality||10)-10),i=u.vitality||0,c=f.vitality||0,d=0;break;case"luck":s=5,r=Math.max(0,(a.luck||5)-5),i=u.luck||0,c=f.luck||0,d=0;break;case"fireDamage":s=0,r=0,i=u.fireDamage||0,c=f.fireDamage||0,d=0;break;case"iceDamage":s=0,r=0,i=u.iceDamage||0,c=f.iceDamage||0,d=0;break;case"lightningDamage":s=0,r=0,i=u.lightningDamage||0,c=f.lightningDamage||0,d=0;break;case"poisonDamage":s=0,r=0,i=u.poisonDamage||0,c=f.poisonDamage||0,d=0;break;case"fireResistance":s=0,r=0,i=(u.fireResistance||0)*100,c=(f.fireResistance||0)*100,d=0;break;case"iceResistance":s=0,r=0,i=(u.iceResistance||0)*100,c=(f.iceResistance||0)*100,d=0;break;case"lightningResistance":s=0,r=0,i=(u.lightningResistance||0)*100,c=(f.lightningResistance||0)*100,d=0;break;case"poisonResistance":s=0,r=0,i=(u.poisonResistance||0)*100,c=(f.poisonResistance||0)*100,d=0;break;case"armorPenetration":s=0,r=0,i=(u.armorPenetration||0)*100,c=(f.armorPenetration||0)*100,d=0;break;case"damageMultiplier":s=0,r=0,i=(u.damageMultiplier||0)*100,c=(f.damageMultiplier||0)*100,d=0;break;case"stunChance":s=0,r=0,i=(u.stunChance||0)*100,c=(f.stunChance||0)*100,d=0;break;case"damageReduction":s=0,r=0,i=(u.damageReduction||0)*100,c=(f.damageReduction||0)*100,d=0;break;case"reflectDamage":s=0,r=0,i=(u.reflectDamage||0)*100,c=(f.reflectDamage||0)*100,d=0;break;case"movementSpeed":s=0,r=0,i=(u.movementSpeed||0)*100,c=(f.movementSpeed||0)*100,d=0;break;case"doubleDropChance":s=0,r=0,i=(u.doubleDropChance||0)*100,c=(f.doubleDropChance||0)*100,d=0;break;case"cleaveChance":s=0,r=0,i=(u.cleaveChance||0)*100,c=(f.cleaveChance||0)*100,d=0;break;case"cooldownReduction":s=0,r=0,i=(u.cooldownReduction||0)*100,c=(f.cooldownReduction||0)*100,d=0;break;case"spellResistance":s=0,r=0,i=(u.spellResistance||0)*100,c=(f.spellResistance||0)*100,d=0;break;case"stunResistance":s=0,r=0,i=(u.stunResistance||0)*100,c=(f.stunResistance||0)*100,d=0;break;case"manaSteal":s=0,r=0,i=(u.manaSteal||0)*100,c=(f.manaSteal||0)*100,d=0;break;case"thorns":s=0,r=0,i=u.thorns||0,c=f.thorns||0,d=0;break;default:s=0,r=0,i=0,c=0,d=0}const v=s+r+i+c+d;return{base:s,attributeBonus:r,equipmentBonus:i,stoneBonus:c,skillTreeBonus:d,total:v}}function ma(e,t=""){return`${e.toFixed(2)}${t}`}function ll(e){return e>0?"text-green-400":e<0?"text-red-400":"text-gray-300"}const ax=({statName:e,breakdown:t,description:n,position:a,visible:s})=>{if(!s)return null;const r={position:"fixed",left:Math.min(a.x-150,window.innerWidth-320),top:Math.max(a.y-10,10),zIndex:1e3,pointerEvents:"none"};return l.jsxs("div",{style:r,className:"bg-gray-900 border border-gray-600 rounded-lg p-3 shadow-xl text-xs max-w-xs",children:[l.jsxs("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[l.jsx("h4",{className:"font-semibold text-white",children:e}),l.jsx("p",{className:"text-gray-400 text-xs mt-1",children:n})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-300",children:"Base:"}),l.jsx("span",{className:"text-white",children:ma(t.base)})]}),t.attributeBonus!==0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-purple-300",children:"Attributes:"}),l.jsxs("span",{className:ll(t.attributeBonus),children:["+",ma(t.attributeBonus)]})]}),t.equipmentBonus!==0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-blue-300",children:"Equipment:"}),l.jsxs("span",{className:ll(t.equipmentBonus),children:["+",ma(t.equipmentBonus)]})]}),t.stoneBonus!==0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-orange-300",children:"Stones:"}),l.jsxs("span",{className:ll(t.stoneBonus),children:["+",ma(t.stoneBonus)]})]}),t.skillTreeBonus!==0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-yellow-300",children:"Skill Tree:"}),l.jsxs("span",{className:ll(t.skillTreeBonus),children:["+",ma(t.skillTreeBonus)]})]}),l.jsx("div",{className:"border-t border-gray-700 pt-1 mt-2",children:l.jsxs("div",{className:"flex justify-between font-semibold",children:[l.jsx("span",{className:"text-white",children:"Total:"}),l.jsx("span",{className:"text-green-400",children:ma(t.total)})]})})]})]})};function sx(e){return{Common:"text-gray-400",Uncommon:"text-green-400",Rare:"text-blue-400",Epic:"text-purple-400",Legendary:"text-yellow-400"}[e||"Common"]||"text-gray-400"}function lx(e){return{Common:.05,Uncommon:.08,Rare:.12,Epic:.18,Legendary:.25}[e||"Common"]||.05}const fd=pn.memo(function(){var N,y,b,m,p,g,S,P,T,C,_,D,E,ie,q,V,me,xe,oe,A,Q,X,L,G,le,k,I,ce,ze,St,W,J,o,U,K,we,ve,Te,de,je,Me,Ne,Le,M,R,Y,$,F,O,B,ee,te,ae,Z,fe,_e,be,Pe,z,ne,he,Se,ue;const{state:t,actions:n}=ut(),a=t.player,s=t.skills||{},[r,i]=j.useState({visible:!1,statName:"",statType:"",position:{x:0,y:0}}),c=j.useCallback((re,ge,ye)=>{const ke=re.currentTarget.getBoundingClientRect();i({visible:!0,statName:ge,statType:ye,position:{x:ke.left+ke.width/2,y:ke.top}})},[]),d=j.useCallback(()=>{i(re=>({...re,visible:!1}))},[]),u=j.useCallback(({label:re,value:ge,color:ye,statType:ke,suffix:Ee=""})=>l.jsxs("div",{className:"flex justify-between cursor-help hover:bg-gray-700/30 px-1 py-0.5 rounded transition-colors",onMouseEnter:pe=>c(pe,re,ke),onMouseLeave:d,children:[l.jsxs("span",{children:[re,":"]}),l.jsxs("span",{className:ye,children:[typeof ge=="number"?ge.toFixed(2):ge,Ee]})]}),[c,d]),f=j.useMemo(()=>{const re=Math.pow(1.05,s.power||0),ge=(a.attackSpeed||1)*(1+(s.quick||0)*.05),ye=(a.projectileSpeed||1)*(1+(s.arcane||0)*.1),ke=(a.dps||0)*re,Ee=(ke*ge).toFixed(2);return{powerMultiplier:re,attackSpeed:ge,projectileSpeed:ye,totalDps:ke,estimatedDps:Ee}},[a.attackSpeed,a.baseDps,a.dps,a.projectileSpeed,s]),v=j.useMemo(()=>{var ge;let re=0;return a.equipment&&Object.values(a.equipment).forEach(ye=>{var ke,Ee;(ke=ye==null?void 0:ye.baseStats)!=null&&ke.damage&&(re+=ye.baseStats.damage),(Ee=ye==null?void 0:ye.affixes)==null||Ee.forEach(pe=>{pe.stat==="damage"&&(re+=pe.value)})}),(ge=a.equipped)!=null&&ge.power&&(re+=a.equipped.power),re},[a.equipment,(N=a.equipped)==null?void 0:N.power]);j.useMemo(()=>{const re=a.baseDps||0,ge=(s.power||0)*5;return Math.floor((re+v+ge)*f.powerMultiplier)},[a.baseDps,s,v,f.powerMultiplier]);const x=j.useMemo(()=>{var re;return{totalCritChance:((a.critChance||0)+lx((re=a.equipped)==null?void 0:re.rarity))*100,dodgeChance:(a.dodgeChance||0)*100,blockChance:(a.blockChance||0)*100,lifeSteal:(a.lifeSteal||0)*100,armor:a.armor||0,healthRegen:a.healthRegen||0,manaRegen:a.manaRegen||0}},[a.critChance,(y=a.equipped)==null?void 0:y.rarity,a.dodgeChance,a.blockChance,a.lifeSteal,a.armor,a.healthRegen,a.manaRegen]),h=j.useMemo(()=>!a.passiveTreeData||!a.passiveTreeState?null:Is(a.passiveTreeData,a.passiveTreeState),[a.passiveTreeData,a.passiveTreeState]),w=j.useCallback(()=>{n.resetAll()},[n]);return l.jsxs("div",{className:"h-full flex flex-col bg-gray-900/95 text-white",children:[l.jsx("div",{className:"p-3 border-b border-gray-600",children:l.jsx("h2",{className:"text-lg font-bold text-center",children:" Character Stats"})}),l.jsxs("div",{className:"flex-1 p-3 space-y-2 overflow-y-auto text-xs",children:[l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-blue-300 mb-1",children:" Basic Info"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Level:"}),l.jsx("strong",{className:"text-blue-400",children:a.level})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"XP:"}),l.jsxs("span",{className:"text-green-400",children:[a.xp,"/",a.nextLevelXp]})]}),l.jsx(u,{label:"HP",value:`${a.hp.toFixed(2)}/${a.maxHp.toFixed(2)}`,color:"text-red-400",statType:"health"}),l.jsx(u,{label:"Mana",value:`${(a.mana||0).toFixed(2)}/${(a.maxMana||50).toFixed(2)}`,color:"text-blue-400",statType:"mana"})]})]}),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-purple-300 mb-1",children:" Attributes"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsx(u,{label:"Strength",value:(((b=a.attributes)==null?void 0:b.strength)||10)+(((m=a.calculatedStats)==null?void 0:m.strength)||0),color:"text-red-400",statType:"strength"}),l.jsx(u,{label:"Dexterity",value:(((p=a.attributes)==null?void 0:p.dexterity)||10)+(((g=a.calculatedStats)==null?void 0:g.dexterity)||0),color:"text-green-400",statType:"dexterity"}),l.jsx(u,{label:"Intelligence",value:(((S=a.attributes)==null?void 0:S.intelligence)||10)+(((P=a.calculatedStats)==null?void 0:P.intelligence)||0),color:"text-blue-400",statType:"intelligence"}),l.jsx(u,{label:"Vitality",value:(((T=a.attributes)==null?void 0:T.vitality)||10)+(((C=a.calculatedStats)==null?void 0:C.vitality)||0),color:"text-orange-400",statType:"vitality"}),l.jsx(u,{label:"Luck",value:(((_=a.attributes)==null?void 0:_.luck)||5)+(((D=a.calculatedStats)==null?void 0:D.luck)||0),color:"text-yellow-400",statType:"luck"}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Attr Points:"}),l.jsx("span",{className:"text-purple-400",children:a.attributePoints||0})]})]})]}),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-red-300 mb-1",children:" Offensive"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsx(u,{label:"Base DPS",value:a.baseDps||0,color:"text-orange-400",statType:"damage"}),l.jsx(u,{label:"Total DPS",value:a.dps||0,color:"text-orange-300",statType:"damage"}),l.jsx(u,{label:"Attack Speed",value:f.attackSpeed,color:"text-yellow-300",statType:"attackSpeed",suffix:"x"}),l.jsx(u,{label:"Crit Chance",value:x.totalCritChance,color:"text-red-400",statType:"critChance",suffix:"%"}),l.jsx(u,{label:"Life Steal",value:x.lifeSteal,color:"text-pink-400",statType:"lifeSteal",suffix:"%"})]})]}),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-blue-300 mb-1",children:" Defensive"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsx(u,{label:"Armor",value:x.armor,color:"text-gray-300",statType:"armor"}),l.jsx(u,{label:"Dodge",value:x.dodgeChance,color:"text-green-400",statType:"dodgeChance",suffix:"%"}),l.jsx(u,{label:"Block",value:x.blockChance,color:"text-blue-400",statType:"blockChance",suffix:"%"}),l.jsx(u,{label:"HP Regen",value:x.healthRegen,color:"text-red-300",statType:"healthRegen",suffix:"/s"}),l.jsx(u,{label:"MP Regen",value:x.manaRegen,color:"text-blue-300",statType:"manaRegen",suffix:"/s"}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Proj Speed:"}),l.jsxs("span",{className:"text-cyan-400",children:[f.projectileSpeed.toFixed(2),"x"]})]})]})]}),(((E=a.calculatedStats)==null?void 0:E.fireDamage)||((ie=a.calculatedStats)==null?void 0:ie.iceDamage)||((q=a.calculatedStats)==null?void 0:q.lightningDamage)||((V=a.calculatedStats)==null?void 0:V.poisonDamage))&&l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-orange-300 mb-1",children:" Elemental Damage"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(((me=a.calculatedStats)==null?void 0:me.fireDamage)||0)>0&&l.jsx(u,{label:" Fire",value:((xe=a.calculatedStats)==null?void 0:xe.fireDamage)||0,color:"text-red-400",statType:"fireDamage"}),(((oe=a.calculatedStats)==null?void 0:oe.iceDamage)||0)>0&&l.jsx(u,{label:" Ice",value:((A=a.calculatedStats)==null?void 0:A.iceDamage)||0,color:"text-blue-300",statType:"iceDamage"}),(((Q=a.calculatedStats)==null?void 0:Q.lightningDamage)||0)>0&&l.jsx(u,{label:" Lightning",value:((X=a.calculatedStats)==null?void 0:X.lightningDamage)||0,color:"text-yellow-300",statType:"lightningDamage"}),(((L=a.calculatedStats)==null?void 0:L.poisonDamage)||0)>0&&l.jsx(u,{label:" Poison",value:((G=a.calculatedStats)==null?void 0:G.poisonDamage)||0,color:"text-green-300",statType:"poisonDamage"})]})]}),(((le=a.calculatedStats)==null?void 0:le.fireResistance)||((k=a.calculatedStats)==null?void 0:k.iceResistance)||((I=a.calculatedStats)==null?void 0:I.lightningResistance)||((ce=a.calculatedStats)==null?void 0:ce.poisonResistance))&&l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-cyan-300 mb-1",children:" Resistances"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(((ze=a.calculatedStats)==null?void 0:ze.fireResistance)||0)>0&&l.jsx(u,{label:" Fire Res",value:((St=a.calculatedStats)==null?void 0:St.fireResistance)||0,color:"text-red-400",statType:"fireResistance",suffix:"%"}),(((W=a.calculatedStats)==null?void 0:W.iceResistance)||0)>0&&l.jsx(u,{label:" Ice Res",value:((J=a.calculatedStats)==null?void 0:J.iceResistance)||0,color:"text-blue-300",statType:"iceResistance",suffix:"%"}),(((o=a.calculatedStats)==null?void 0:o.lightningResistance)||0)>0&&l.jsx(u,{label:" Lightning Res",value:((U=a.calculatedStats)==null?void 0:U.lightningResistance)||0,color:"text-yellow-300",statType:"lightningResistance",suffix:"%"}),(((K=a.calculatedStats)==null?void 0:K.poisonResistance)||0)>0&&l.jsx(u,{label:" Poison Res",value:((we=a.calculatedStats)==null?void 0:we.poisonResistance)||0,color:"text-green-300",statType:"poisonResistance",suffix:"%"})]})]}),(((ve=a.calculatedStats)==null?void 0:ve.armorPenetration)||((Te=a.calculatedStats)==null?void 0:Te.damageMultiplier)||((de=a.calculatedStats)==null?void 0:de.stunChance)||((je=a.calculatedStats)==null?void 0:je.damageReduction)||((Me=a.calculatedStats)==null?void 0:Me.reflectDamage))&&l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-purple-300 mb-1",children:" Advanced Combat"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(((Ne=a.calculatedStats)==null?void 0:Ne.armorPenetration)||0)>0&&l.jsx(u,{label:" Armor Pen",value:((Le=a.calculatedStats)==null?void 0:Le.armorPenetration)||0,color:"text-orange-400",statType:"armorPenetration",suffix:"%"}),(((M=a.calculatedStats)==null?void 0:M.damageMultiplier)||0)>0&&l.jsx(u,{label:" Damage Multi",value:((R=a.calculatedStats)==null?void 0:R.damageMultiplier)||0,color:"text-red-500",statType:"damageMultiplier",suffix:"%"}),(((Y=a.calculatedStats)==null?void 0:Y.stunChance)||0)>0&&l.jsx(u,{label:" Stun Chance",value:(($=a.calculatedStats)==null?void 0:$.stunChance)||0,color:"text-yellow-400",statType:"stunChance",suffix:"%"}),(((F=a.calculatedStats)==null?void 0:F.damageReduction)||0)>0&&l.jsx(u,{label:" Damage Red",value:((O=a.calculatedStats)==null?void 0:O.damageReduction)||0,color:"text-blue-400",statType:"damageReduction",suffix:"%"}),(((B=a.calculatedStats)==null?void 0:B.reflectDamage)||0)>0&&l.jsx(u,{label:" Reflect",value:((ee=a.calculatedStats)==null?void 0:ee.reflectDamage)||0,color:"text-purple-400",statType:"reflectDamage",suffix:"%"})]})]}),(((te=a.calculatedStats)==null?void 0:te.doubleDropChance)||((ae=a.calculatedStats)==null?void 0:ae.cleaveChance)||((Z=a.calculatedStats)==null?void 0:Z.cooldownReduction)||((fe=a.calculatedStats)==null?void 0:fe.movementSpeed))&&l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-pink-300 mb-1",children:" Special Effects"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(((_e=a.calculatedStats)==null?void 0:_e.doubleDropChance)||0)>0&&l.jsx(u,{label:" Double Drop",value:((be=a.calculatedStats)==null?void 0:be.doubleDropChance)||0,color:"text-yellow-400",statType:"doubleDropChance",suffix:"%"}),(((Pe=a.calculatedStats)==null?void 0:Pe.cleaveChance)||0)>0&&l.jsx(u,{label:" Cleave",value:((z=a.calculatedStats)==null?void 0:z.cleaveChance)||0,color:"text-orange-400",statType:"cleaveChance",suffix:"%"}),(((ne=a.calculatedStats)==null?void 0:ne.cooldownReduction)||0)>0&&l.jsx(u,{label:" CDR",value:((he=a.calculatedStats)==null?void 0:he.cooldownReduction)||0,color:"text-cyan-400",statType:"cooldownReduction",suffix:"%"}),(((Se=a.calculatedStats)==null?void 0:Se.movementSpeed)||0)>0&&l.jsx(u,{label:" Move Speed",value:((ue=a.calculatedStats)==null?void 0:ue.movementSpeed)||0,color:"text-green-400",statType:"movementSpeed",suffix:"%"})]})]}),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:" Passive Tree Bonuses"}),h?l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(h.damage||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Damage:"}),l.jsxs("span",{className:"text-red-400",children:["+",h.damage]})]}),(h.health||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Health:"}),l.jsxs("span",{className:"text-red-300",children:["+",h.health]})]}),(h.mana||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Mana:"}),l.jsxs("span",{className:"text-blue-400",children:["+",h.mana]})]}),(h.armor||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Armor:"}),l.jsxs("span",{className:"text-gray-300",children:["+",h.armor]})]}),(h.critChance||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Crit Chance:"}),l.jsxs("span",{className:"text-red-400",children:["+",((h.critChance||0)*100).toFixed(1),"%"]})]}),(h.critMultiplier||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Crit Multi:"}),l.jsxs("span",{className:"text-red-500",children:["+",((h.critMultiplier||0)*100).toFixed(1),"%"]})]}),(h.attackSpeed||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Attack Speed:"}),l.jsxs("span",{className:"text-yellow-300",children:["+",((h.attackSpeed||0)*100).toFixed(1),"%"]})]}),(h.dodgeChance||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Dodge:"}),l.jsxs("span",{className:"text-green-400",children:["+",((h.dodgeChance||0)*100).toFixed(1),"%"]})]}),(h.goldFind||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Gold Find:"}),l.jsxs("span",{className:"text-yellow-300",children:["+",((h.goldFind||0)*100).toFixed(1),"%"]})]}),(h.magicFind||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Magic Find:"}),l.jsxs("span",{className:"text-purple-400",children:["+",((h.magicFind||0)*100).toFixed(1),"%"]})]}),(h.experienceBonus||0)>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Exp Bonus:"}),l.jsxs("span",{className:"text-cyan-400",children:["+",((h.experienceBonus||0)*100).toFixed(1),"%"]})]})]}):l.jsx("div",{className:"text-xs text-gray-400",children:"No passive tree bonuses allocated"})]}),(()=>{const re=()=>{var Ge;const pe={},De=[];return a.equipment&&Object.entries(a.equipment).forEach(([et,Qe])=>{Qe&&typeof Qe=="object"&&De.push({slot:et,item:Qe})}),a.equipped&&!((Ge=a.equipment)!=null&&Ge.weapon)&&De.push({slot:"weapon",item:a.equipped}),De.forEach(({item:et})=>{et.baseStats&&Object.entries(et.baseStats).forEach(([Qe,lt])=>{typeof lt=="number"&&lt>0&&(pe[Qe]=(pe[Qe]||0)+lt)}),et.affixes&&et.affixes.forEach(Qe=>{const lt=Qe.stat,Ke=Qe.value;typeof Ke=="number"&&Ke>0&&(pe[lt]=(pe[lt]||0)+Ke)}),et.sockets&&et.sockets.stones&&et.sockets.stones.forEach(Qe=>{if(Qe&&a.stones){const lt=a.stones.find(Ke=>Ke.id===Qe);lt&&(lt.baseStats&&Object.entries(lt.baseStats).forEach(([Ke,rt])=>{typeof rt=="number"&&rt>0&&(pe[Ke]=(pe[Ke]||0)+rt)}),lt.affixes&&lt.affixes.forEach(Ke=>{const rt=Ke.stat,$e=Ke.value;typeof $e=="number"&&$e>0&&(pe[rt]=(pe[rt]||0)+$e)}))}})}),{consolidatedStats:pe,equippedItems:De}},ge=(pe,De)=>["critChance","dodgeChance","blockChance","lifeSteal","manaSteal","fireResistance","coldResistance","lightningResistance","chaosResistance","iceResistance","poisonResistance","spellResistance","stunResistance","increasedDamage","increasedAttackSpeed","increasedCastSpeed","increasedMovementSpeed","increasedCritMultiplier","attackSpeed","castSpeed","movementSpeed","damageReduction","reflectDamage","armorPenetration","damageMultiplier","stunChance","doubleDropChance","cleaveChance","cooldownReduction","goldFind","magicFind","experienceBonus","healthRegen","manaRegen"].includes(pe)?`${(De*100).toFixed(1)}%`:De.toFixed(1),ye=pe=>({damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",luck:"Luck",critChance:"Crit Chance",critMultiplier:"Crit Multiplier",attackSpeed:"Attack Speed",dodgeChance:"Dodge Chance",blockChance:"Block Chance",lifeSteal:"Life Steal",manaSteal:"Mana Steal",fireDamage:"Fire Damage",iceDamage:"Ice Damage",lightningDamage:"Lightning Damage",poisonDamage:"Poison Damage",fireResistance:"Fire Resistance",iceResistance:"Ice Resistance",lightningResistance:"Lightning Resistance",poisonResistance:"Poison Resistance",armorPenetration:"Armor Penetration",damageMultiplier:"Damage Multiplier",stunChance:"Stun Chance",damageReduction:"Damage Reduction",reflectDamage:"Reflect Damage",goldFind:"Gold Find",magicFind:"Magic Find",experienceBonus:"Experience Bonus",healthRegen:"Health Regen",manaRegen:"Mana Regen"})[pe]||pe.charAt(0).toUpperCase()+pe.slice(1),{consolidatedStats:ke,equippedItems:Ee}=re();return l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:" All Equipment Bonuses"}),l.jsxs("div",{className:"text-xs space-y-1",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsx("span",{className:"text-gray-400",children:"Equipped Items:"}),l.jsx("span",{className:"text-blue-400",children:Ee.length})]}),Object.keys(ke).length>0?l.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Object.entries(ke).filter(([pe,De])=>typeof De=="number"&&De>0).sort(([pe],[De])=>ye(pe).localeCompare(ye(De))).map(([pe,De])=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-gray-300",children:[ye(pe),":"]}),l.jsxs("span",{className:"text-green-400",children:["+",ge(pe,De)]})]},pe))}):l.jsx("div",{className:"text-gray-500 text-center py-2",children:Ee.length===0?"No equipment equipped":"No stat bonuses from equipment"}),Ee.length>0&&l.jsxs("div",{className:"border-t border-gray-600 pt-1 mt-2",children:[l.jsx("div",{className:"text-blue-300 font-medium mb-1",children:"Equipped Slots:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:Ee.map(({slot:pe,item:De})=>l.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${sx(De.rarity)} bg-gray-700/50`,title:`${De.name||De.type||"Unknown"} (${De.rarity||"Common"})`,children:pe.charAt(0).toUpperCase()+pe.slice(1)},pe))})]})]})]})})(),l.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[l.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:" Resources"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Gold:"}),l.jsx("span",{className:"text-yellow-400",children:a.gold})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:" Skill Points:"}),l.jsx("span",{className:"text-purple-400",children:a.skillPoints})]})]})]}),l.jsx("button",{onClick:w,className:"w-full bg-red-600 hover:bg-red-700 text-white py-1.5 px-3 rounded text-xs font-medium transition-colors",children:" Reset Character"})]}),r.visible&&l.jsx(ax,{statName:r.statName,breakdown:nx(a,r.statType),description:tx[r.statType],position:r.position,visible:r.visible})]})}),rx={Common:"#9ca3af",Magic:"#06b6d4",Rare:"#8b5cf6",Unique:"#fbbf24",Legendary:"#ff6b6b",Mythic:"#ff1493",Divine:"#ffd700"};function ix(e){return e&&rx[e]||"#9ca3af"}const ox=pn.memo(function(){const{state:t,dispatch:n}=ut(),a=t.player,s=j.useMemo(()=>{const c=[];return Fe.forEach(d=>{let u=null;if(a.equipment&&a.equipment[d.id])u=a.equipment[d.id];else if(a.equipped&&d.id==="weapon"){const f=a.equipped.type;(f==="melee"||f==="ranged")&&(u=a.equipped)}u&&c.push({slot:d.id,item:u,slotInfo:d})}),c},[a.equipment,a.equipped]),r=j.useCallback(c=>{n({type:"UNEQUIP",payload:c})},[n]),i=j.useMemo(()=>s.reduce((c,{item:d})=>{let u=0;return d.power&&typeof d.power=="number"&&!isNaN(d.power)&&(u+=d.power),d.baseStats&&Object.values(d.baseStats).forEach(f=>{typeof f=="number"&&!isNaN(f)&&(u+=f)}),c+u},0),[s]);return l.jsxs("div",{className:"h-full flex flex-col bg-gray-800 text-white",children:[l.jsx("div",{className:"p-3 border-b border-gray-600 bg-gray-700",children:l.jsx("h2",{className:"text-lg font-bold text-center text-amber-400",children:" Equipment"})}),l.jsx("div",{className:"p-3 border-b border-gray-600 bg-gray-750",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Equipped: "}),l.jsxs("span",{className:"text-amber-400 font-medium",children:[s.length,"/",Fe.length]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Power: "}),l.jsxs("span",{className:"text-orange-400 font-bold",children:["+",i.toFixed(0)]})]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:s.length>0?l.jsx("div",{className:"p-2 space-y-2",children:s.map(({slot:c,item:d,slotInfo:u})=>l.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-3 hover:bg-gray-650 transition-colors cursor-pointer",onContextMenu:f=>{f.preventDefault(),r(c)},title:"Right-click to unequip",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"text-xl",children:u.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400",children:u.name}),l.jsx("div",{className:"font-medium",style:{color:ix(d.rarity)},children:d.name||d.type||"Unknown Item"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-400",children:d.rarity||"Common"}),l.jsx("div",{className:"text-green-400 font-medium",children:(()=>{let f=0;return d.power&&typeof d.power=="number"&&!isNaN(d.power)&&(f+=d.power),d.baseStats&&Object.values(d.baseStats).forEach(v=>{typeof v=="number"&&!isNaN(v)&&(f+=v)}),`+${f.toFixed(0)}`})()})]})]}),d.sockets&&d.sockets.maxSockets>0&&l.jsxs("div",{className:"mt-2 flex items-center space-x-1",children:[l.jsx("span",{className:"text-xs text-gray-400",children:"Sockets:"}),l.jsx("div",{className:"flex gap-1",children:Array.from({length:d.sockets.maxSockets},(f,v)=>l.jsx("div",{className:`w-2 h-2 rounded-full ${d.sockets.stones[v]?"bg-amber-400":"bg-gray-600"}`,title:d.sockets.stones[v]?"Socket filled":"Empty socket"},v))})]})]},c))}):l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-gray-500",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("div",{children:"No equipment equipped"}),l.jsx("div",{className:"text-sm mt-1",children:"Equip items from your inventory"})]})})}),l.jsx("div",{className:"p-2 border-t border-gray-600 bg-gray-750",children:l.jsx("div",{className:"text-xs text-gray-400 text-center",children:"Right-click equipped items to unequip"})})]})});function cx(){const{state:e}=ut(),{player:t}=e,n=Is(t.passiveTreeData,t.passiveTreeState),a=wh(t.passiveTreeData,t.passiveTreeState),s=Object.values(t.passiveTreeState.allocatedNodes).reduce((c,d)=>c+d,0),r=Object.keys(t.passiveTreeData.nodes).length,i=[{title:"Combat Stats",stats:[{key:"damage",label:"Damage",value:n.damage||0,suffix:""},{key:"critChance",label:"Critical Chance",value:n.critChance||0,suffix:"%"},{key:"attackSpeed",label:"Attack Speed",value:n.attackSpeed||0,suffix:"%"},{key:"lifeSteal",label:"Life Steal",value:n.lifeSteal||0,suffix:"%"}]},{title:"Defensive Stats",stats:[{key:"health",label:"Health",value:n.health||0,suffix:""},{key:"armor",label:"Armor",value:n.armor||0,suffix:""},{key:"dodgeChance",label:"Dodge Chance",value:n.dodgeChance||0,suffix:"%"},{key:"blockChance",label:"Block Chance",value:n.blockChance||0,suffix:"%"}]},{title:"Resource Stats",stats:[{key:"mana",label:"Mana",value:n.mana||0,suffix:""},{key:"healthRegen",label:"Health Regen",value:n.healthRegen||0,suffix:"/s"},{key:"manaRegen",label:"Mana Regen",value:n.manaRegen||0,suffix:"/s"}]},{title:"Attributes",stats:[{key:"strength",label:"Strength",value:n.strength||0,suffix:""},{key:"dexterity",label:"Dexterity",value:n.dexterity||0,suffix:""},{key:"intelligence",label:"Intelligence",value:n.intelligence||0,suffix:""},{key:"vitality",label:"Vitality",value:n.vitality||0,suffix:""},{key:"luck",label:"Luck",value:n.luck||0,suffix:""}]}];return l.jsxs("div",{className:"panel p-4 h-full flex flex-col",children:[l.jsx("h2",{className:"text-lg font-bold mb-3 text-green-400",children:"Passive Tree Bonuses"}),l.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded border border-gray-600",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-white font-medium",children:"Allocated Nodes"}),l.jsxs("span",{className:"text-green-400 font-bold",children:[s," / ",r]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white font-medium",children:"Available Points"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:t.passiveTreeState.availablePoints})]})]}),l.jsxs("div",{className:"space-y-4 flex-1 scrollable-panel",children:[i.map(c=>(c.stats.some(d=>d.value>0),l.jsxs("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[l.jsx("h3",{className:"font-bold text-white mb-2",children:c.title}),l.jsx("div",{className:"space-y-1",children:c.stats.map(d=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsx("span",{className:d.value>0?"text-white":"text-gray-400",children:d.label}),l.jsxs("span",{className:d.value>0?"text-green-400 font-medium":"text-gray-500",children:[d.value>0?"+":"",d.value,d.suffix]})]},d.key))})]},c.title))),a.length>0&&l.jsxs("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[l.jsx("h3",{className:"font-bold text-white mb-2",children:"Skill Modifiers"}),l.jsx("div",{className:"space-y-1",children:a.map((c,d)=>l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"text-blue-400 font-medium",children:c.skillId}),l.jsxs("div",{className:"text-gray-300 ml-2",children:[c.property,": ",c.type==="multiplicative"?"":"+",c.value,c.type==="multiplicative"&&"%"]})]},d))})]}),s<=1&&l.jsxs("div",{className:"text-center text-gray-400 py-8",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("div",{className:"text-lg font-medium mb-1",children:"No Passive Bonuses"}),l.jsx("div",{className:"text-sm",children:"Allocate nodes in the Passive Tree to gain bonuses"})]})]})]})}const dx={colors:{rarity:{common:"#9CA3AF",magic:"#06B6D4",rare:"#8B5CF6",epic:"#F59E0B",legendary:"#EF4444",mythic:"#EC4899"},elements:{fire:"#EF4444",ice:"#06B6D4",lightning:"#EAB308",poison:"#22C55E",physical:"#6B7280"},ui:{primary:"#3B82F6",secondary:"#8B5CF6",success:"#10B981",warning:"#F59E0B",danger:"#EF4444",info:"#06B6D4"},surfaces:{primary:"#111827",secondary:"#1F2937",tertiary:"#374151",overlay:"rgba(0, 0, 0, 0.8)"},text:{primary:"#F9FAFB",secondary:"#D1D5DB",tertiary:"#9CA3AF",muted:"#6B7280"},borders:{primary:"#374151",secondary:"#4B5563",accent:"#6B7280"}}},ot=(e,t)=>{const n=dx.colors[e];return(n==null?void 0:n[t])||"#FFFFFF"},ux=(e,t,n=400,a=300,s=10)=>{const r=window.innerWidth,i=window.innerHeight;let c=e+s,d=t+s;return c+n>r&&(c=e-n-s),d+a>i&&(d=t-a-s),c<0&&(c=s),d<0&&(d=s),{x:c,y:d}},mx=()=>({isVisible:!1,position:{x:0,y:0},content:null,type:"generic",level:"quick",isPersistent:!1}),Vn=class Vn{constructor(){Fs(this,"activeTooltip",null);Fs(this,"callbacks",new Map)}static getInstance(){return Vn.instance||(Vn.instance=new Vn),Vn.instance}registerTooltip(t,n){this.callbacks.set(t,n)}unregisterTooltip(t){this.callbacks.delete(t),this.activeTooltip===t&&(this.activeTooltip=null)}showTooltip(t){if(this.activeTooltip&&this.activeTooltip!==t){const n=this.callbacks.get(this.activeTooltip);n&&n()}this.activeTooltip=t}hideTooltip(t){this.activeTooltip===t&&(this.activeTooltip=null)}};Fs(Vn,"instance");let Ji=Vn;const l0=j.memo(function({children:t,content:n,type:a,delay:s=200,disabled:r=!1,className:i="",maxWidth:c=450,renderContent:d,position:u,onClose:f}){const[v,x]=j.useState(mx()),[h,w]=j.useState("detailed"),N=j.useRef(null),y=j.useRef(),b=j.useRef(),m=j.useRef(`tooltip-${Math.random().toString(36).substr(2,9)}`),p=Ji.getInstance();j.useEffect(()=>{const _=m.current;return p.registerTooltip(_,()=>{x(D=>({...D,isVisible:!1}))}),()=>{p.unregisterTooltip(_),y.current&&clearTimeout(y.current),b.current&&clearTimeout(b.current)}},[p]);const g=j.useCallback((_,D="detailed")=>{r||!n||(y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{const E=_.currentTarget.getBoundingClientRect(),ie=ux(E.right+10,E.top,c,200);x({isVisible:!0,position:ie,content:n,type:"generic",level:D,isPersistent:!1}),w(D),p.showTooltip(m.current)},s))},[r,n,s,c,p]),S=j.useCallback(()=>{y.current&&clearTimeout(y.current),b.current&&clearTimeout(b.current),x(_=>({..._,isVisible:!1})),p.hideTooltip(m.current),f&&f()},[p,f]),P=j.useCallback(_=>{g(_,"detailed")},[g]),T=j.useCallback(()=>{S()},[S]);j.useEffect(()=>{u&&n&&(x({isVisible:!0,position:u,content:n,type:"generic",level:"detailed",isPersistent:!1}),w("detailed"),p.showTooltip(m.current))},[u,n,p]);const C=()=>{if(!v.content)return null;if(d)return d(v.content,h);switch(h){case"quick":return l.jsx(px,{content:v.content,type:a});case"detailed":return l.jsx(nr,{content:v.content,type:a});case"comparison":return l.jsx(hx,{content:v.content,type:a});case"advanced":return l.jsx(gx,{content:v.content,type:a});default:return l.jsx(nr,{content:v.content,type:a})}};return t?l.jsxs(l.Fragment,{children:[l.jsx("div",{onMouseEnter:P,onMouseLeave:T,className:"inline-block",children:t}),v.isVisible&&l.jsx("div",{ref:N,className:`fixed z-50 pointer-events-none ${i}`,style:{left:v.position.x,top:v.position.y,maxWidth:`${c}px`},children:l.jsx("div",{className:"bg-gray-900 border border-gray-600 rounded-lg shadow-2xl p-4 text-white",children:C()})})]}):v.isVisible?l.jsx("div",{ref:N,className:`fixed z-50 pointer-events-none ${i}`,style:{left:v.position.x,top:v.position.y,maxWidth:`${c}px`},children:l.jsx("div",{className:"bg-gray-900 border border-gray-600 rounded-lg shadow-2xl p-4 text-white",children:C()})}):null});function fx(e){return{sword:"",axe:"",bow:"",staff:"",dagger:"",mace:"",wand:"",helm:"",chest:"",legs:"",boots:"",gloves:"",shield:"",ring:"",amulet:"",belt:""}[e]||""}function rl(e){return{damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",critChance:"Critical Chance",critMultiplier:"Critical Multiplier",dodgeChance:"Dodge Chance",attackSpeed:"Attack Speed",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",luck:"Luck",fireResistance:"Fire Resistance",iceResistance:"Ice Resistance",lightningResistance:"Lightning Resistance",poisonResistance:"Poison Resistance",armorPenetration:"Armor Penetration",damageMultiplier:"Damage Multiplier",stunChance:"Stun Chance",damageReduction:"Damage Reduction",movementSpeed:"Movement Speed",reflectDamage:"Reflect Damage",doubleDropChance:"Double Drop Chance",cleaveChance:"Cleave Chance",spellResistance:"Spell Resistance",stunResistance:"Stun Resistance",cooldownReduction:"Cooldown Reduction",goldFind:"Gold Find",magicFind:"Magic Find"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}function pd(e,t){return["critChance","critMultiplier","dodgeChance","attackSpeed","fireResistance","iceResistance","lightningResistance","poisonResistance","armorPenetration","damageMultiplier","stunChance","damageReduction","movementSpeed","reflectDamage","doubleDropChance","cleaveChance","spellResistance","stunResistance","cooldownReduction","goldFind","magicFind"].includes(e)?`${(t*100).toFixed(1)}%`:t.toString()}const px=j.memo(({content:e,type:t})=>l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"font-bold text-lg",style:{color:ot("rarity",e.rarity||"common")},children:e.name||"Unknown Item"}),l.jsx("div",{className:"text-sm text-gray-400",children:e.type||e.category||t}),e.level&&l.jsxs("div",{className:"text-sm text-blue-400",children:["Level ",e.level]})]})),nr=j.memo(({content:e,type:t})=>l.jsxs("div",{className:"space-y-3 min-w-[300px]",children:[l.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-700 pb-2",children:[l.jsx("div",{className:"text-3xl",children:fx(e.type)}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-lg",style:{color:ot("rarity",e.rarity||"common")},children:e.name||"Unknown Item"}),l.jsx("div",{className:"text-sm text-gray-400",children:rl(e.type||e.category||t)}),e.level&&l.jsxs("div",{className:"text-sm text-blue-400",children:["Level ",e.level]}),e.equipped&&l.jsx("div",{className:"text-xs bg-green-600 text-white px-2 py-0.5 rounded mt-1 inline-block",children:"Equipped"})]})]}),e.baseStats&&Object.keys(e.baseStats).length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-blue-400 font-semibold text-sm mb-2",children:"Base Stats:"}),l.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(e.baseStats).map(([n,a])=>typeof a=="number"&&a>0&&l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{className:"text-gray-300",children:[rl(n),":"]}),l.jsxs("span",{className:"text-green-400",children:["+",pd(n,a)]})]},n))})]}),e.affixes&&e.affixes.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-purple-400 font-semibold text-sm mb-2",children:"Affixes:"}),l.jsx("div",{className:"space-y-1",children:e.affixes.map((n,a)=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{className:"text-gray-300",children:[rl(n.stat),":"]}),l.jsxs("span",{className:"text-purple-400",children:["+",pd(n.stat,n.value)]})]},a))})]}),e.requirements&&Object.keys(e.requirements).length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-red-400 font-semibold text-sm mb-2",children:"Requirements:"}),l.jsx("div",{className:"space-y-1",children:Object.entries(e.requirements).map(([n,a])=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{className:"text-gray-300",children:[rl(n),":"]}),l.jsx("span",{className:"text-red-400",children:String(a)})]},n))})]}),e.damageType&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-orange-400 font-semibold text-sm mb-2",children:"Damage Type:"}),l.jsx("div",{className:"text-sm text-orange-400 capitalize",children:e.damageType})]}),e.sockets&&e.sockets.maxSockets>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-cyan-400 font-semibold text-sm mb-2",children:"Sockets:"}),l.jsx("div",{className:"flex gap-1",children:Array.from({length:e.sockets.maxSockets}).map((n,a)=>l.jsx("div",{className:`w-6 h-6 border-2 rounded ${e.sockets.stones[a]?"border-cyan-400 bg-cyan-400/20":"border-gray-600 bg-gray-800"}`,title:e.sockets.stones[a]?"Socket filled":"Empty socket",children:e.sockets.stones[a]&&l.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs",children:""})},a))})]}),e.value&&l.jsx("div",{className:"border-t border-gray-700 pt-2",children:l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-400",children:"Value:"}),l.jsxs("span",{className:"text-yellow-400",children:[e.value.toFixed(2)," "]})]})}),e.description&&l.jsx("div",{className:"text-sm text-gray-300 italic border-t border-gray-700 pt-2",children:e.description})]})),hx=j.memo(({content:e,type:t})=>l.jsxs("div",{className:"space-y-3",children:[l.jsx(nr,{content:e,type:t}),l.jsxs("div",{className:"border-t border-gray-600 pt-2",children:[l.jsx("div",{className:"text-yellow-400 text-sm font-semibold",children:"Comparison vs Equipped"}),l.jsx("div",{className:"text-xs text-gray-400",children:"Comparison functionality would be implemented here"})]})]})),gx=j.memo(({content:e,type:t})=>l.jsxs("div",{className:"space-y-3",children:[l.jsx(nr,{content:e,type:t}),l.jsxs("div",{className:"border-t border-gray-600 pt-2",children:[l.jsx("div",{className:"text-purple-400 text-sm font-semibold",children:"Advanced Information"}),l.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[l.jsxs("div",{children:["Item ID: ",e.id||"N/A"]}),l.jsxs("div",{children:["Generated: ",e.timestamp||"Unknown"]}),e.seed&&l.jsxs("div",{children:["Seed: ",e.seed]})]})]})]}));function xx(){const{state:e,actions:t}=ut(),[n,a]=j.useState("grid"),[s,r]=j.useState("all"),[i,c]=j.useState({visible:!1,item:null,position:{x:0,y:0}}),d=j.useMemo(()=>e.inventory||[],[e.inventory]),u=j.useMemo(()=>s==="all"?d:d.filter(g=>{switch(s){case"weapons":return["sword","axe","bow","staff","dagger","mace","wand"].includes(g.type);case"helm":return g.type==="helm";case"chest":return g.type==="chest";case"legs":return g.type==="legs";case"boots":return g.type==="boots";case"gloves":return g.type==="gloves";case"shield":return g.type==="shield";case"accessories":return["ring","amulet","belt"].includes(g.type);default:return!0}}),[d,s]),f=j.useMemo(()=>u.filter(g=>!g.equipped).reduce((g,S)=>g+(S.value||0),0),[u]),v=[{id:"all",label:"All",icon:""},{id:"weapons",label:"Weapons",icon:""},{id:"helm",label:"Helms",icon:""},{id:"chest",label:"Chest",icon:""},{id:"legs",label:"Legs",icon:""},{id:"boots",label:"Boots",icon:""},{id:"gloves",label:"Gloves",icon:""},{id:"shield",label:"Shields",icon:""},{id:"accessories",label:"Accessories",icon:""}],x=[{id:"grid",label:"Grid",icon:""},{id:"list",label:"List",icon:""}],h=j.useCallback(g=>{t.equipItem(g)},[t]),w=j.useCallback(g=>{t.unequipItem(g)},[t]),N=j.useCallback(g=>{t.sellItem(g)},[t]),y=j.useCallback(()=>{const g=u.filter(S=>!S.equipped);if(g.length===0){alert("No items to sell!");return}window.confirm(`Sell ${g.length} items for ${f.toFixed(2)} gold?`)&&g.forEach(S=>t.sellItem(S.id))},[u,f,t]),b=j.useCallback((g,S)=>{const P=g.currentTarget.getBoundingClientRect();c({visible:!0,item:S,position:{x:P.right+10,y:P.top}})},[]),m=j.useCallback(()=>{c({visible:!1,item:null,position:{x:0,y:0}})},[]),p=g=>{const S=ot("rarity",(g.rarity||"common").toLowerCase());return n==="grid"?l.jsxs("div",{className:"relative p-3 bg-gray-800 rounded-lg border-2 hover:bg-gray-700 transition-all cursor-pointer group",style:{borderColor:g.equipped?"#10B981":S+"40"},onMouseEnter:P=>b(P,g),onMouseLeave:m,children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-2 bg-gray-700 rounded-lg flex items-center justify-center text-2xl",children:hd(g.type)}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"font-medium text-sm truncate mb-1",style:{color:S},children:g.name}),l.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Level ",g.level||1]})]}),g.equipped&&l.jsx("div",{className:"absolute top-1 right-1 bg-green-600 text-white text-xs px-1 py-0.5 rounded",children:"E"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:P=>{P.stopPropagation(),g.equipped?w(g.id):h(g.id)},className:`flex-1 px-2 py-1 rounded text-xs transition-colors ${g.equipped?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:g.equipped?"Unequip":"Equip"}),!g.equipped&&l.jsx("button",{onClick:P=>{P.stopPropagation(),N(g.id)},className:"px-2 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-xs transition-colors",title:"Sell",children:""})]})]},g.id):l.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors border-l-4",style:{borderLeftColor:g.equipped?"#10B981":S},onMouseEnter:P=>b(P,g),onMouseLeave:m,children:[l.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center text-xl",children:hd(g.type)}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",style:{color:S},children:g.name}),g.equipped&&l.jsx("span",{className:"bg-green-600 text-white text-xs px-2 py-0.5 rounded",children:"Equipped"})]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[g.type,"  Level ",g.level||1]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:P=>{P.stopPropagation(),g.equipped?w(g.id):h(g.id)},className:`px-3 py-1 rounded text-sm transition-colors ${g.equipped?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:g.equipped?"Unequip":"Equip"}),!g.equipped&&l.jsx("button",{onClick:P=>{P.stopPropagation(),N(g.id)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-sm transition-colors",children:"Sell"})]})]},g.id)};return l.jsxs("div",{className:"h-full flex flex-col bg-gray-900 text-white",children:[l.jsxs("div",{className:"p-4 border-b border-gray-700",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Inventory"}),l.jsx("div",{className:"flex gap-1 mb-4",children:v.map(g=>l.jsxs("button",{onClick:()=>r(g.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${s===g.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[l.jsx("span",{children:g.icon}),g.label]},g.id))}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:"flex bg-gray-800 rounded-lg p-1",children:x.map(g=>l.jsxs("button",{onClick:()=>a(g.id),className:`px-3 py-1 rounded text-sm font-medium transition-colors flex items-center gap-1 ${n===g.id?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[l.jsx("span",{children:g.icon}),g.label]},g.id))}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"text-sm text-gray-400",children:["Total Value: ",f.toFixed(2)," "]}),l.jsxs("button",{onClick:y,disabled:f===0,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg text-sm font-medium transition-colors",children:[" Sell All (",u.filter(g=>!g.equipped).length,")"]})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u.length===0?l.jsxs("div",{className:"text-center text-gray-400 py-8",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("div",{children:"No items in this category"})]}):l.jsx("div",{className:n==="grid"?"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3":"space-y-2",children:u.map(p)})}),i.visible&&i.item&&l.jsx(l0,{content:i.item,type:"equipment",position:i.position,onClose:m})]})}function hd(e){return{sword:"",axe:"",bow:"",staff:"",dagger:"",mace:"",wand:"",helm:"",chest:"",legs:"",boots:"",gloves:"",shield:"",ring:"",amulet:"",belt:""}[e]||""}function gd(){const{state:e}=ut(),t=j.useRef(null),[n,a]=j.useState("All");j.useEffect(()=>{t.current&&(t.current.scrollTop=0)},[e.log]);const s=c=>c.includes("BOSS DEFEATED")?l.jsx("span",{className:"text-yellow-400 font-bold",children:c}):c.includes("defeated")?l.jsx("span",{className:"text-green-400",children:c}):c.includes("critical")?l.jsx("span",{className:"text-red-400",children:c}):c.includes("dodged")?l.jsx("span",{className:"text-blue-400",children:c}):c.includes("Level up")?l.jsx("span",{className:"text-purple-400 font-bold",children:c}):c.includes("died")?l.jsx("span",{className:"text-red-500 font-bold",children:c}):c.includes("EXP")||c.includes("exp")?l.jsx("span",{className:"text-green-300",children:c}):c.includes("Gold")||c.includes("gold")?l.jsx("span",{className:"text-yellow-300",children:c}):c.includes("found")||c.includes("dropped")||c.includes("item")?l.jsx("span",{className:"text-blue-300",children:c}):l.jsx("span",{className:"text-gray-300",children:c}),i=(()=>{let c=[...e.log];return n!=="All"&&(c=c.filter(d=>{switch(n){case"EXP":return d.includes("EXP")||d.includes("exp")||d.includes("Level up");case"Gold":return d.includes("Gold")||d.includes("gold");case"Items":return d.includes("found")||d.includes("dropped")||d.includes("item");default:return!0}})),c.slice(-50)})();return l.jsxs("div",{className:"bg-gray-900/95 border border-gray-600 rounded-lg p-4 h-full flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:"Combat Log"}),l.jsx("div",{className:"flex space-x-1",children:["All","EXP","Gold","Items"].map(c=>l.jsx("button",{onClick:()=>a(c),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${n===c?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:c},c))})]}),l.jsxs("div",{ref:t,className:"space-y-1 flex-1 overflow-y-auto text-sm bg-gray-800/50 rounded p-3 border border-gray-700",style:{maxHeight:"200px"},children:[i.length===0&&l.jsx("div",{className:"text-gray-500",children:n==="All"?"No combat yet...":`No ${n.toLowerCase()} entries...`}),i.map((c,d)=>l.jsx("div",{className:"font-mono text-xs",children:s(c)},d))]})]})}function yx(){const{state:e,dispatch:t}=ut(),{player:n,enemies:a,log:s}=e,r=a[0],i=d=>!d||d==="physical"?"":{fire:"",ice:"",lightning:"",poison:""}[d]||"",c=d=>d?{berserker:" Berserker",precise:" Precise",regeneration:" Regeneration",shield:" Shield",poison:" Poison",freeze:" Freeze",lightning:" Lightning",summon:" Summon"}[d]||d:"";return l.jsxs("div",{className:"panel p-4 h-full flex flex-col",children:[l.jsx("h2",{className:"text-lg font-bold mb-3",children:"Combat"}),a.length>0?l.jsxs("div",{className:"mb-4 space-y-2 max-h-48 overflow-y-auto",children:[l.jsxs("h3",{className:"font-bold text-red-200",children:["Enemies (",a.length,")"]}),a.map((d,u)=>l.jsxs("div",{className:"p-3 bg-red-900 rounded",children:[l.jsxs("h4",{className:"font-bold text-red-200",children:[d.isBoss&&" ",d.name," (Level ",d.level,")",d.isBoss&&" - BOSS",u===0&&" - TARGET"]}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{children:["HP: ",d.hp,"/",d.maxHp]}),l.jsxs("div",{children:["Type: ",d.type]}),d.armor&&l.jsxs("div",{children:["Armor: ",d.armor]}),d.specialAbility&&l.jsx("div",{className:"text-yellow-300",children:c(d.specialAbility)})]})]},d.id))]}):l.jsx("div",{className:"mb-4 p-3 bg-gray-700 rounded",children:l.jsx("h3",{className:"font-bold text-gray-300",children:"No enemies present"})}),l.jsxs("div",{className:"mb-4 p-3 bg-blue-900 rounded",children:[l.jsxs("h3",{className:"font-bold text-blue-200",children:["Player (Level ",n.level,")"]}),l.jsxs("div",{className:"text-sm grid grid-cols-2 gap-1",children:[l.jsxs("div",{children:["HP: ",n.hp,"/",n.maxHp]}),l.jsxs("div",{children:["DPS: ",n.dps]}),l.jsxs("div",{children:["XP: ",n.xp,"/",n.nextLevelXp]}),l.jsxs("div",{children:["Gold: ",n.gold]}),n.armor&&n.armor>0&&l.jsxs("div",{children:["Armor: ",n.armor]}),n.critChance&&n.critChance>0&&l.jsxs("div",{children:["Crit: ",(n.critChance*100).toFixed(2),"%"]}),n.dodgeChance&&n.dodgeChance>0&&l.jsxs("div",{children:["Dodge: ",(n.dodgeChance*100).toFixed(2),"%"]}),n.lifeSteal&&n.lifeSteal>0&&l.jsxs("div",{children:["Life Steal: ",(n.lifeSteal*100).toFixed(2),"%"]}),n.equipped&&n.equipped.damageType&&n.equipped.damageType!=="physical"&&l.jsxs("div",{children:["Element: ",i(n.equipped.damageType)]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("button",{onClick:()=>t({type:"SPAWN"}),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Spawn Enemy"}),l.jsx("button",{onClick:()=>t({type:"SPAWN_TRAINING_DUMMY"}),className:"px-3 py-1 bg-pink-600 hover:bg-pink-700 rounded text-sm",children:" Training Dummy"}),r&&l.jsx("button",{onClick:()=>t({type:"TICK",payload:{enemyId:r.id}}),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Combat Tick"}),l.jsxs("button",{onClick:()=>t({type:"TOGGLE_AUTO"}),className:`px-3 py-1 rounded text-sm ${e.autoCombat?"bg-yellow-600 hover:bg-yellow-700":"bg-gray-600 hover:bg-gray-700"}`,children:["Auto: ",e.autoCombat?"ON":"OFF"]})]}),l.jsxs("div",{className:"bg-gray-900 p-3 rounded h-32 overflow-y-auto",children:[l.jsx("h4",{className:"font-bold mb-2",children:"Combat Log"}),l.jsx("div",{className:"text-sm space-y-1",children:s.slice(0,10).map((d,u)=>l.jsx("div",{className:"text-gray-300",children:d},u))})]})]})}function vx({isOpen:e,onClose:t,title:n,children:a,maxWidth:s="max-w-4xl"}){return j.useEffect(()=>{const r=i=>{i.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[e,t]),e?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 animate-fade-in",onClick:t}),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-zoom-in",children:l.jsxs("div",{className:`bg-gray-900 rounded-xl shadow-2xl border border-gray-700 ${s} w-full max-h-[90vh] overflow-hidden`,onClick:r=>r.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700 bg-gray-800",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-100",children:n}),l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors duration-200 group","aria-label":"Close modal",children:l.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-gray-200 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] bg-gray-900",children:a})]})})]}):null}const bx=({skill:e,position:t,showCharacterStats:n=!0,onClose:a})=>{const{state:s}=ut(),r=s.player,i=Xn(e),c=Zo(e),d=n?jt(e,r):i.damage,u=zm(e),f=Fm(e),v=Math.max(100,i.cooldown),x=Math.round(d*1e3/v),h={projectileCount:i.projectileCount||1,area:i.area||0,duration:i.duration||0},w=Qi[e.rarity],y=(()=>{if(!n)return null;const C=[];r.dps||r.baseDps;const _=Math.round((d-c)*100)/100;_>0&&C.push({name:"Character DPS Bonus",value:`+${_}`,color:"text-green-400"});const D=r.attributes||{};if(e.tags.includes("Physical")&&D.strength>10){const E=Math.round((D.strength-10)*.02*100);C.push({name:"Strength Bonus",value:`+${E}%`,color:"text-red-400"})}if(e.tags.includes("Spell")&&D.intelligence>10){const E=Math.round((D.intelligence-10)*.02*100);C.push({name:"Intelligence Bonus",value:`+${E}%`,color:"text-blue-400"})}if(e.tags.includes("Projectile")&&D.dexterity>10){const E=Math.round((D.dexterity-10)*.015*100);C.push({name:"Dexterity Bonus",value:`+${E}%`,color:"text-green-400"})}if(D.luck>5){const E=Math.round((D.luck-5)*.5*10)/10;C.push({name:"Critical Chance",value:`+${E}%`,color:"text-yellow-400"})}if(r.equipment){let E=0,ie=0;Object.values(r.equipment).forEach(q=>{var V;q&&(E+=((V=q.baseStats)==null?void 0:V.damage)||0,q.affixes.forEach(me=>{me.stat==="damage"&&(E+=me.value)}),q.sockets&&r.stones&&q.sockets.stones.filter(xe=>xe!==null).map(xe=>r.stones.find(oe=>oe.id===xe)).filter(xe=>xe!==void 0).forEach(xe=>{xe.baseStats.damage&&(ie+=xe.baseStats.damage),xe.affixes.forEach(oe=>{oe.stat==="damage"&&(ie+=oe.value)})}))}),E>0&&C.push({name:"Equipment Damage",value:`+${E}`,color:"text-orange-400"}),ie>0&&C.push({name:"Stone Damage",value:`+${ie}`,color:"text-purple-400"})}return C})(),m=(()=>{const C=[];return e.supportGems.forEach(_=>{_.modifiers.forEach(D=>{let E=D.value,ie="";D.isPercentage&&(ie="%"),D.type==="damage_multiplier"&&(E=Math.round((D.value-1)*100),ie="% more"),C.push({name:D.description||`${D.type} modifier`,value:`${E>0?"+":""}${E}${ie}`,color:D.value>0?"text-green-400":"text-red-400",source:_.name})})}),C})(),g=(()=>{const C=[];return e.tags.includes("AoE")&&w.areaOfEffectBonus&&C.push({name:"Area of Effect",value:`+${w.areaOfEffectBonus}%`,color:"text-purple-400"}),e.tags.includes("Projectile")&&w.projectileDamageBonus&&C.push({name:"Projectile Damage",value:`+${w.projectileDamageBonus}%`,color:"text-cyan-400"}),e.tags.includes("Physical")&&w.physicalDamageBonus&&C.push({name:"Physical Damage",value:`+${w.physicalDamageBonus}%`,color:"text-gray-400"}),(e.tags.includes("Fire")||e.tags.includes("Cold")||e.tags.includes("Lightning"))&&w.elementalDamageBonus&&C.push({name:"Elemental Damage",value:`+${w.elementalDamageBonus}%`,color:"text-yellow-400"}),C})(),T={x:Math.max(10,Math.min(t.x,window.innerWidth-384-10)),y:Math.max(10,Math.min(t.y,window.innerHeight-600-10))};return l.jsxs("div",{className:"fixed z-50 rounded-lg shadow-2xl p-4 max-w-sm",style:{left:T.x,top:T.y,maxHeight:"80vh",overflow:"auto",background:"var(--bg-secondary)",border:`2px solid ${w.colorVariant}`,boxShadow:"0 20px 40px var(--shadow-color)"},children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-2xl",children:e.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-lg",style:{color:w.colorVariant},children:e.name}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsxs("span",{style:{color:"var(--text-secondary)"},children:["Level ",e.level]}),l.jsx("span",{style:{color:"var(--text-secondary)"},children:""}),l.jsx("span",{style:{color:w.colorVariant},children:e.rarity}),e.quality>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:""}),l.jsxs("span",{style:{color:"var(--accent-primary)"},children:["Q",e.quality,"%"]})]})]})]}),a&&l.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded ml-2",style:{color:"var(--text-secondary)"},title:"Close tooltip",children:""})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.tags.map(C=>l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:wx(C),color:"white"},children:C},C))})]}),l.jsx("p",{className:"text-sm mb-3 leading-relaxed",style:{color:"var(--text-secondary)"},children:e.description}),l.jsxs("div",{className:"space-y-2 mb-3",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Damage:"}),l.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{style:{color:"var(--accent-secondary)"},children:Math.round(d)}),d!==c&&l.jsxs("span",{className:"text-sm ml-1",style:{color:"var(--text-muted)"},children:["(",Math.round(c)," base)"]})]}):Math.round(c)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"DPS:"}),l.jsx("span",{style:{color:"var(--accent-secondary)"},children:x})]}),u>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Mana Cost:"}),l.jsx("span",{style:{color:"var(--accent-primary)"},children:Math.round(u)})]}),f>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Cooldown:"}),l.jsxs("span",{style:{color:"var(--accent-tertiary)"},children:[(f/1e3).toFixed(1),"s"]})]})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Active Skill Properties:"}),l.jsxs("div",{className:"p-3 rounded space-y-1",style:{background:"var(--bg-tertiary)"},children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Damage Type: "}),l.jsx("span",{className:"font-medium",style:{color:e.tags.includes("Fire")?"#ef4444":e.tags.includes("Lightning")?"#fbbf24":e.tags.includes("Cold")?"#06b6d4":e.tags.includes("Chaos")?"#10b981":"var(--text-primary)"},children:e.tags.includes("Fire")?"Fire":e.tags.includes("Lightning")?"Lightning":e.tags.includes("Cold")?"Cold":e.tags.includes("Chaos")?"Chaos":"Physical"})]}),h.projectileCount>1&&l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Projectiles: "}),l.jsx("span",{className:"font-medium",style:{color:"#06b6d4"},children:h.projectileCount})]}),h.area>0&&l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Area: "}),l.jsx("span",{className:"font-medium",style:{color:"#10b981"},children:h.area.toFixed(1)})]}),h.duration>0&&l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Duration: "}),l.jsxs("span",{className:"font-medium",style:{color:"#a855f7"},children:[(h.duration/1e3).toFixed(1),"s"]})]}),e.tags.includes("Projectile")&&l.jsx("div",{className:"text-xs",style:{color:"#06b6d4"},children:" Projectile skill - travels to target location"}),e.tags.includes("AoE")&&l.jsx("div",{className:"text-xs",style:{color:"#10b981"},children:" Area of Effect - damages multiple enemies"}),e.tags.includes("Channeling")&&l.jsx("div",{className:"text-xs",style:{color:"#a855f7"},children:" Channeling skill - continuous effect"}),e.tags.includes("Minion")&&l.jsx("div",{className:"text-xs",style:{color:"var(--accent-primary)"},children:" Summons minions to fight for you"}),e.supportGems.some(C=>C.id==="multiple_projectiles")&&l.jsx("div",{className:"text-xs",style:{color:"#06b6d4"},children:" Fires multiple projectiles simultaneously"}),e.supportGems.some(C=>C.id==="pierce")&&l.jsx("div",{className:"text-xs",style:{color:"#fbbf24"},children:" Projectiles pierce through enemies"}),e.supportGems.some(C=>C.id==="faster_casting")&&l.jsx("div",{className:"text-xs",style:{color:"var(--accent-secondary)"},children:" Enhanced casting speed"})]})]}),y&&y.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Character Bonuses:"}),l.jsx("div",{className:"space-y-1",children:y.map((C,_)=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{style:{color:"var(--text-secondary)"},children:[C.name,":"]}),l.jsx("span",{className:C.color,children:C.value})]},_))})]}),g.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Rarity Bonuses:"}),l.jsx("div",{className:"space-y-1",children:g.map((C,_)=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{style:{color:"var(--text-secondary)"},children:[C.name,":"]}),l.jsx("span",{className:C.color,children:C.value})]},_))})]}),m.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Active Modifiers:"}),l.jsx("div",{className:"space-y-1",children:m.map((C,_)=>l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{style:{color:"var(--text-secondary)"},children:[C.name,":"]}),l.jsx("span",{className:C.color,children:C.value})]}),l.jsxs("div",{className:"text-xs text-right",style:{color:"var(--text-muted)"},children:["from ",C.source]})]},_))})]}),e.supportGems.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:"var(--text-primary)"},children:"Support Gems:"}),l.jsx("div",{className:"space-y-1",children:e.supportGems.map((C,_)=>l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"text-lg",children:C.icon}),l.jsx("span",{style:{color:"var(--text-secondary)"},children:C.name}),l.jsxs("span",{style:{color:"var(--text-muted)"},children:["Lv.",C.level]})]},_))})]})]})};function wx(e){return{Attack:"#dc2626",Spell:"#2563eb",Aura:"#7c3aed",Support:"#059669",Physical:"#6b7280",Fire:"#dc2626",Cold:"#06b6d4",Lightning:"#fbbf24",Chaos:"#7c2d12",Elemental:"#f59e0b",Projectile:"#10b981",AoE:"#8b5cf6",Melee:"#ef4444",Channeling:"#3b82f6",Duration:"#06b6d4",Movement:"#22c55e",Minion:"#a855f7",Critical:"#fbbf24"}[e]||"#6b7280"}const Sx=pn.memo(function({isOpen:t,onClose:n}){const{state:a,actions:s}=ut(),[r,i]=j.useState("skills"),[c,d]=j.useState("list"),[u,f]=j.useState(null),[v,x]=j.useState(null),[h,w]=j.useState(""),[N,y]=j.useState("All"),[b,m]=j.useState(!1),[p,g]=j.useState(null),S=j.useMemo(()=>({unlockedSkills:Ug(a.player),availableSkills:Og(a.player),unlockedSupports:Vg(a.player),availableSupports:Gg(a.player)}),[a.player,a.player.skillBar]),P=j.useMemo(()=>{const k=new Set;return[...S.unlockedSkills,...S.availableSkills].forEach(I=>{I.tags.forEach(ce=>k.add(ce))}),Array.from(k).sort()},[S]),T=j.useMemo(()=>{let k=[...S.unlockedSkills,...S.availableSkills];return h&&(k=k.filter(I=>I.name.toLowerCase().includes(h.toLowerCase())||I.description.toLowerCase().includes(h.toLowerCase()))),N!=="All"&&(k=k.filter(I=>I.tags.includes(N))),k},[S,h,N]),C=j.useMemo(()=>{let k=[...S.unlockedSupports,...S.availableSupports];return h&&(k=k.filter(I=>I.name.toLowerCase().includes(h.toLowerCase())||I.description.toLowerCase().includes(h.toLowerCase()))),N!=="All"&&(k=k.filter(I=>I.tags.includes(N))),k},[S,h,N]),_=j.useCallback(k=>{s.unlockSkillGem(k),f(null)},[s]),D=j.useCallback(k=>{s.levelUpSkillGem(k);const I=a.player.skillGems.find(ce=>ce.id===k);I&&(u==null?void 0:u.id)===k&&f(I)},[s,a.player.skillGems,u]),E=j.useCallback(k=>{s.unlockSupportGem(k),x(null)},[s]),ie=j.useCallback(k=>{s.levelUpSupportGem(k);const I=a.player.supportGems.find(ce=>ce.id===k);I&&(v==null?void 0:v.id)===k&&x(I)},[s,a.player.supportGems,v]),q=j.useCallback((k,I)=>{s.equipSkillToBar(k,I),f(null)},[s]),V=j.useCallback(k=>{s.unequipSkillFromBar(k),f(null)},[s]),me=j.useCallback((k,I)=>{s.attachSupportGem(k,I),m(!1),x(null)},[s]),xe=j.useCallback((k,I)=>{s.detachSupportGem(k,I)},[s]),oe=k=>({Normal:"#ffffff",Magic:"#8888ff",Rare:"#ffff88",Unique:"#ff8800"})[k]||"#ffffff",A=k=>({Spell:"#4f46e5",Attack:"#dc2626",Projectile:"#059669",AoE:"#d97706",Physical:"#6b7280",Fire:"#ef4444",Cold:"#3b82f6",Lightning:"#eab308",Chaos:"#8b5cf6",Melee:"#991b1b",Duration:"#7c3aed",Channeling:"#be185d",Movement:"#0891b2",Travel:"#0d9488",Minion:"#7c2d12",Totem:"#a16207",Trap:"#374151",Mine:"#1f2937",Critical:"#fbbf24",Bow:"#92400e",Weapon:"#6b7280",Unarmed:"#78716c",Brand:"#c2410c",Slam:"#7f1d1d",Strike:"#b91c1c",Guard:"#1e40af",Vaal:"#581c87",Trigger:"#be123c",Aura:"#06b6d4",Curse:"#f59e0b",Warcry:"#dc2626",Support:"#10b981",Elemental:"#f59e0b"})[k]||"#6b7280",Q=k=>k.toFixed(2),X=()=>a.player.skillBar.slots.map((k,I)=>({index:I,skill:k,isEmpty:!k})),L=k=>{var ze,St;const I=Xn(k),ce=X();return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-3xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold",style:{color:oe(k.rarity)},children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Level ",k.level,"/",k.maxLevel,"  ",k.rarity,"  Quality: ",k.quality,"%"]})]})]}),l.jsx("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-white text-xl",children:""})]}),l.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:k.description}),l.jsx("div",{className:"flex flex-wrap gap-1",children:k.tags.map(W=>l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:A(W)},children:W},W))}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Damage:"}),l.jsx("span",{className:"text-red-400",children:Q(I.damage)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Mana Cost:"}),l.jsx("span",{className:"text-blue-400",children:Q(I.manaCost)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Cooldown:"}),l.jsxs("span",{className:"text-yellow-400",children:[Q(I.cooldown/1e3),"s"]})]})]}),l.jsxs("div",{className:"space-y-2",children:[((ze=k.scaling)==null?void 0:ze.baseArea)&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Area:"}),l.jsx("span",{className:"text-green-400",children:Q(I.area)})]}),((St=k.scaling)==null?void 0:St.baseDuration)&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Duration:"}),l.jsxs("span",{className:"text-purple-400",children:[Q(I.duration/1e3),"s"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Unlock Cost:"}),l.jsxs("span",{className:"text-yellow-300",children:[k.skillPointCost," SP"]})]})]})]}),k.supportGems.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-white font-medium",children:"Active Support Modifiers:"}),l.jsx("div",{className:"space-y-1 bg-gray-700 p-3 rounded",children:k.supportGems.map(W=>{const J=qm(W);return l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-sm font-medium text-blue-300",children:[W.name," (Lv.",W.level,")"]}),J.map((o,U)=>l.jsxs("div",{className:"text-xs text-green-300 ml-2",children:[" ",o.description||`${o.type}: ${o.isPercentage?"+":""}${o.value}${o.isPercentage?"%":""}`]},U))]},W.id)})})]}),k.isUnlocked&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h4",{className:"text-white font-medium",children:["Support Gems (",k.supportGems.length,"/6)"]}),l.jsx("button",{onClick:()=>{x(null),m(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs",disabled:k.supportGems.length>=6,children:"Attach Support"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.supportGems.map(W=>l.jsxs("div",{className:"bg-gray-700 p-2 rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{children:W.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-medium",children:W.name}),l.jsxs("div",{className:"text-xs text-gray-400",children:["Lv.",W.level]})]})]}),l.jsx("button",{onClick:()=>xe(k.id,W.id),className:"text-red-400 hover:text-red-300 text-xs",children:""})]},W.id))})]}),l.jsx("div",{className:"flex space-x-2",children:k.isUnlocked?l.jsxs(l.Fragment,{children:[k.level<k.maxLevel&&l.jsxs("button",{onClick:()=>D(k.id),disabled:!Xl(k,a.player.skillPoints),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Level Up (",la(k.level)," SP)"]}),ce.filter(W=>W.isEmpty).length>0&&l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("span",{className:"text-gray-400 text-sm py-2",children:"Equip to:"}),ce.filter(W=>W.isEmpty).map(W=>l.jsxs("button",{onClick:()=>q(k.id,W.index),className:"bg-purple-600 hover:bg-purple-700 text-white px-2 py-1 rounded text-sm",children:["Slot ",W.index+1]},W.index))]})]}):l.jsxs("button",{onClick:()=>_(k.id),disabled:a.player.skillPoints<bn(k)||a.player.level<k.unlockLevel,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Unlock (",bn(k)," SP)"]})})]})},G=k=>l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-3xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold",style:{color:oe(k.rarity)},children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Level ",k.level,"/",k.maxLevel,"  ",k.rarity,"  Quality: ",k.quality,"%"]})]})]}),l.jsx("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-white text-xl",children:""})]}),l.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:k.description}),l.jsx("div",{className:"flex flex-wrap gap-1",children:k.tags.map(I=>l.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:A(I)},children:I},I))}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-white font-medium",children:"Modifiers:"}),l.jsx("div",{className:"space-y-1",children:k.modifiers.map((I,ce)=>l.jsxs("div",{className:"text-sm text-gray-300",children:[" ",I.description||`${I.type}: ${I.isPercentage?"+":""}${I.value}${I.isPercentage?"%":""}`]},ce))})]}),l.jsx("div",{className:"flex space-x-2",children:k.isUnlocked?l.jsx(l.Fragment,{children:k.level<k.maxLevel&&l.jsxs("button",{onClick:()=>ie(k.id),disabled:!Xl(k,a.player.skillPoints),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Level Up (",la(k.level)," SP)"]})}):l.jsxs("button",{onClick:()=>E(k.id),disabled:a.player.skillPoints<bn(k)||a.player.level<k.unlockLevel,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Unlock (",bn(k)," SP)"]})})]}),le=()=>{if(!u||!b)return null;const k=S.unlockedSupports.filter(I=>jh(u,I)&&!u.supportGems.some(ce=>ce.id===I.id));return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-white font-bold",children:["Attach Support to ",u.name]}),l.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white text-xl",children:""})]}),l.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:k.length>0?k.map(I=>l.jsxs("div",{className:"bg-gray-700 p-3 rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-lg",children:I.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:I.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",I.level]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:I.tags.map(ce=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:A(ce),color:"white"},children:ce},ce))})]})]}),l.jsx("button",{onClick:()=>me(u.id,I.id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"Attach"})]},I.id)):l.jsx("div",{className:"text-gray-400 text-center py-4",children:"No compatible support gems available"})})]})};return t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg shadow-xl w-[90vw] h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-700",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:" Skill Gem Management"}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-xl leading-none",children:""})]}),l.jsx("div",{className:"px-4 py-2 border-b border-gray-700 text-sm text-gray-300",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Skill Points: ",a.player.skillPoints]}),l.jsxs("span",{children:["Level: ",a.player.level]})]})}),l.jsxs("div",{className:"flex border-b border-gray-700",children:[l.jsxs("button",{className:`px-4 py-2 font-medium ${r==="skills"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("skills"),children:["Skills (",S.unlockedSkills.length,")"]}),l.jsxs("button",{className:`px-4 py-2 font-medium ${r==="supports"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("supports"),children:["Support Gems (",S.unlockedSupports.length,")"]}),l.jsx("button",{className:`px-4 py-2 font-medium ${r==="skillbar"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("skillbar"),children:"Skill Bar"})]}),(r==="skills"||r==="supports")&&l.jsx("div",{className:"p-4 border-b border-gray-700 space-y-2",children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("input",{type:"text",placeholder:"Search skills...",value:h,onChange:k=>w(k.target.value),className:"flex-1 bg-gray-800 border border-gray-600 rounded px-3 py-1 text-white text-sm"}),l.jsxs("select",{value:N,onChange:k=>y(k.target.value),className:"bg-gray-800 border border-gray-600 rounded px-3 py-1 text-white text-sm",children:[l.jsx("option",{value:"All",children:"All Tags"}),P.map(k=>l.jsx("option",{value:k,children:k},k))]}),l.jsx("button",{onClick:()=>d(c==="list"?"detailed":"list"),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm",children:c==="list"?"":""})]})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:b?l.jsx("div",{className:"p-4 h-full overflow-y-auto",children:le()}):u?l.jsx("div",{className:"p-4 h-full overflow-y-auto",children:L(u)}):v?l.jsx("div",{className:"p-4 h-full overflow-y-auto",children:G(v)}):l.jsxs("div",{className:"p-4 h-full overflow-y-auto",children:[r==="skills"&&l.jsxs("div",{className:"space-y-4",children:[S.unlockedSkills.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Unlocked Skills"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.filter(k=>k.isUnlocked).map(k=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between hover:bg-gray-750 cursor-pointer",onClick:()=>f(k),onMouseEnter:I=>{const ce=I.currentTarget.getBoundingClientRect();g({skill:k,position:{x:ce.right+10,y:ce.top}})},onMouseLeave:()=>g(null),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.level,"  Dmg: ",Q(Zo(k)),k.isEquipped&&l.jsx("span",{className:"text-yellow-400 ml-2",children:" Equipped"})]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(I=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:A(I),color:"white"},children:I},I))})]})]}),l.jsx("div",{className:"text-gray-400",children:""})]},k.id))})]}),S.availableSkills.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Available Skills"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.filter(k=>!k.isUnlocked).map(k=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between opacity-75 hover:opacity-100 cursor-pointer",onClick:()=>f(k),onMouseEnter:I=>{const ce=I.currentTarget.getBoundingClientRect();g({skill:k,position:{x:ce.right+10,y:ce.top}})},onMouseLeave:()=>g(null),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-300 font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Cost: ",bn(k)," SP  Req: Lv.",k.unlockLevel]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(I=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:A(I),color:"white"},children:I},I))})]})]}),l.jsx("div",{className:"text-gray-400",children:""})]},k.id))})]})]}),r==="supports"&&l.jsxs("div",{className:"space-y-4",children:[S.unlockedSupports.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Unlocked Support Gems"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:C.filter(k=>k.isUnlocked).map(k=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between hover:bg-gray-750 cursor-pointer",onClick:()=>x(k),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.level]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(I=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:A(I),color:"white"},children:I},I))})]})]}),l.jsx("div",{className:"text-gray-400",children:""})]},k.id))})]}),S.availableSupports.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-semibold mb-2",children:"Available Support Gems"}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:C.filter(k=>!k.isUnlocked).map(k=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between opacity-75 hover:opacity-100 cursor-pointer",onClick:()=>x(k),children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-xl",children:k.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-300 font-medium",children:k.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Cost: ",bn(k)," SP  Req: Lv.",k.unlockLevel]}),l.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(I=>l.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:A(I),color:"white"},children:I},I))})]})]}),l.jsx("div",{className:"text-gray-400",children:""})]},k.id))})]})]}),r==="skillbar"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"text-white font-semibold",children:"Skill Bar Management"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:X().map(k=>l.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[l.jsxs("div",{className:"text-white font-medium mb-2",children:["Slot ",k.index+1]}),k.skill?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-lg",children:k.skill.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-medium",children:k.skill.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.skill.level]})]})]}),l.jsx("button",{onClick:()=>V(k.index),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm w-full",children:"Unequip"})]}):l.jsx("div",{className:"text-gray-400 text-center py-4",children:"Empty Slot"})]},k.index))})]})]})}),p&&l.jsx(bx,{skill:p.skill,position:p.position,onClose:()=>g(null)})]})}):null});function kx({className:e=""}){const{state:t,actions:n}=ut(),[a,s]=j.useState(null),[r,i]=j.useState({}),[c,d]=j.useState(null),u=t.player.skillBar,f=(u==null?void 0:u.maxSlots)||6,v=b=>u!=null&&u.slots&&u.slots[b]||null,x=(b,m)=>{a===b?(s(null),d(null)):(s(b),m&&d({x:m.clientX+10,y:m.clientY+10}))},h=(b,m)=>{m.stopPropagation(),console.log(` Attempting to unequip skill from slot ${b}`);const p=v(b);console.log(" Skill to unequip:",p),n.unequipSkillFromBar(b),s(null)},w=b=>{i(m=>({...m,[b]:!m[b]}))},N=b=>{const m=v(b),p=a===b,g=!m;return l.jsxs("div",{className:`skill-slot ${g?"empty":"filled"} ${p?"selected":""}`,onClick:S=>x(b,S),children:[l.jsx("div",{className:"slot-number",children:b+1}),m?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"skill-icon",title:m.name,children:m.icon}),l.jsx("div",{className:"skill-level",children:m.level}),m.supportGems.length>0&&l.jsx("div",{className:"support-indicator",children:l.jsx("span",{className:"support-count",children:m.supportGems.length})}),l.jsx("div",{className:"skill-mana-cost",children:Xn(m).manaCost}),l.jsx("button",{className:"unequip-skill-btn",onClick:S=>h(b,S),title:"Unequip skill",children:""}),p&&c&&l.jsxs("div",{className:"skill-tooltip",style:{left:Math.max(10,Math.min(c.x,window.innerWidth-420)),top:Math.max(10,Math.min(c.y,window.innerHeight-350)),maxWidth:"400px",maxHeight:"340px",overflow:"auto"},onClick:S=>S.stopPropagation(),children:[l.jsxs("div",{className:"tooltip-header",children:[l.jsxs("div",{children:[l.jsx("h4",{children:m.name}),l.jsx("span",{className:"skill-type",children:m.type})]}),l.jsx("button",{onClick:S=>{S.stopPropagation(),s(null),d(null)},className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded",title:"Close tooltip",children:""})]}),l.jsxs("div",{className:"skill-tags",children:[l.jsx("span",{className:"tags-label",children:"Tags: "}),l.jsx("span",{className:"tags-list",children:Nh(m)})]}),l.jsx("p",{className:"skill-description",children:m.description}),l.jsxs("div",{className:"skill-stats",children:[l.jsxs("div",{children:["Level: ",m.level,"/",m.maxLevel]}),(()=>{const S=Xn(m);return l.jsxs(l.Fragment,{children:[S.damage>0&&l.jsxs("div",{children:["Damage: ",S.damage]}),l.jsxs("div",{children:["Mana: ",S.manaCost]}),l.jsxs("div",{children:["Cooldown: ",S.cooldown,"ms"]}),S.projectileCount>1&&l.jsxs("div",{children:["Projectiles: ",S.projectileCount]})]})})()]}),m.supportGems.length>0&&l.jsxs("div",{className:"support-gems",children:[l.jsxs("div",{className:"support-header",onClick:()=>w(m.id),children:[l.jsxs("span",{children:["Support Gems (",m.supportGems.length,"/6)"]}),l.jsx("span",{className:`expand-icon ${r[m.id]?"expanded":""}`,children:""})]}),r[m.id]&&l.jsx("div",{className:"support-list",children:m.supportGems.map(S=>l.jsxs("div",{className:"support-item",children:[l.jsx("span",{className:"support-icon",children:S.icon}),l.jsx("span",{className:"support-name",children:S.name}),l.jsxs("span",{className:"support-level",children:["Lv.",S.level]}),l.jsx("button",{className:"detach-support-btn",onClick:P=>{P.stopPropagation(),n.detachSupportGem(m.id,S.id)},title:"Detach support gem",children:""})]},S.id))})]}),l.jsxs("div",{className:"tooltip-actions",children:[l.jsxs("div",{className:"auto-skill-status",children:[l.jsx("span",{className:"auto-indicator",children:" Auto-Active"}),l.jsx("span",{className:"skill-status",children:m.id==="whirlwind"?"Channeling in Combat":"Ready"})]}),l.jsx("button",{className:"unequip-btn-large",onClick:S=>h(b,S),title:"Unequip this skill",children:"Unequip Skill"})]})]})]}):l.jsxs("div",{className:"empty-slot-content",children:[l.jsx("div",{className:"empty-icon",children:"+"}),l.jsx("div",{className:"empty-text",children:"Empty"})]})]},b)},y=()=>{var m;const b=(m=u==null?void 0:u.slots)==null?void 0:m.find(p=>(p==null?void 0:p.id)==="whirlwind");return l.jsxs("div",{className:"combat-status",children:[l.jsxs("div",{className:"auto-combat-info",children:[l.jsx("span",{className:"status-label",children:"Combat Mode:"}),l.jsx("span",{className:"status-value",children:"Automatic Whirlwind"})]}),b&&l.jsxs("div",{className:"whirlwind-stats",children:[l.jsxs("span",{children:["Mana Cost: ",Xn(b).manaCost,"/sec"]}),l.jsxs("span",{children:["Area Damage: ",Xn(b).damage]})]})]})};return l.jsxs("div",{className:`skill-bar-container ${e}`,onClick:b=>{a!==null&&!b.defaultPrevented&&(s(null),d(null))},children:[l.jsxs("div",{className:"skill-bar-header",children:[l.jsx("h3",{children:"Combat Skills"}),l.jsx("div",{className:"skill-bar-info",children:l.jsxs("span",{children:["Active Skills: ",u!=null&&u.slots?u.slots.filter(b=>b!==null).length:0,"/",f]})})]}),l.jsx("div",{className:"skill-bar",children:Array.from({length:f},(b,m)=>N(m))}),y(),l.jsx("div",{className:"skill-bar-help",children:l.jsx("p",{children:"Skills activate automatically during combat  Click slots to view details and support gems"})})]})}const jx={common:[{k:"str",min:1,max:3},{k:"vit",min:2,max:4}],magic:[{k:"str",min:2,max:5},{k:"dex",min:2,max:5},{k:"vit",min:3,max:7}],rare:[{k:"str",min:3,max:8},{k:"dex",min:3,max:8},{k:"vit",min:5,max:10},{k:"crit",min:1,max:5}],unique:[{k:"str",min:6,max:12},{k:"dex",min:6,max:12},{k:"vit",min:8,max:15},{k:"crit",min:3,max:8},{k:"lifesteal",min:1,max:4}]},il=new Map,Nx=1e3,Cx={Common:2,Magic:3,Rare:4,Unique:5};function xd(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Mx(e){const t=`${e}`;if(il.has(t)&&Math.random()>.8)return il.get(t).map(c=>({...c,value:xd(Math.floor(c.value*.8),Math.ceil(c.value*1.2))}));const n=jx[e.toLowerCase()],a=Cx[e],s=[],r=[...n];for(let i=0;i<a&&r.length;i++){const c=Math.floor(Math.random()*r.length),d=r.splice(c,1)[0];s.push({key:d.k,value:xd(d.min,d.max)})}return il.size<Nx&&il.set(t,[...s]),s}function r0(e=1e3){const t=performance.now();for(let s=0;s<e;s++)Sr(Math.floor(Math.random()*100)+1,Math.random()>.9);const a=performance.now()-t;return{operation:"Equipment Generation",iterations:e,totalTime:a,averageTime:a/e,itemsPerSecond:e/a*1e3}}function i0(e=1e3){const t=performance.now();for(let s=0;s<e;s++)Nn(Math.floor(Math.random()*100)+1,Math.random()>.9);const a=performance.now()-t;return{operation:"Loot Generation",iterations:e,totalTime:a,averageTime:a/e,itemsPerSecond:e/a*1e3}}function o0(e=1e3){const t=["Common","Magic","Rare","Unique"],n=performance.now();for(let r=0;r<e;r++){const i=t[Math.floor(Math.random()*t.length)];Mx(i)}const s=performance.now()-n;return{operation:"Affix Generation",iterations:e,totalTime:s,averageTime:s/e,itemsPerSecond:e/s*1e3}}function c0(e=100){const t=br(),n=["weapon","helm","chest","legs","boots","gloves"];for(let i=0;i<n.length;i++){const c=Sr(50,!1);t.equipment[n[i]]=c}const a=performance.now();for(let i=0;i<e;i++)Wm(t);const r=performance.now()-a;return{operation:"Player Stat Calculation",iterations:e,totalTime:r,averageTime:r/e,itemsPerSecond:e/r*1e3}}function d0(e=10){const t=performance.now();for(let s=0;s<e;s++)vr();const a=performance.now()-t;return{operation:"Passive Tree Generation (1000 nodes)",iterations:e,totalTime:a,averageTime:a/e,itemsPerSecond:e/a*1e3}}function u0(e=1e3){const t=vr(),n={allocatedNodes:{},availablePoints:100},a=Object.keys(t.nodes);for(let c=0;c<50&&c<a.length;c++){const d=a[c];if(Kn(d,t,n)){const u=Dm(d,t,n);n.allocatedNodes=u.allocatedNodes,n.availablePoints=u.availablePoints}}const s=performance.now();for(let c=0;c<e;c++)Is(t,n);const i=performance.now()-s;return{operation:"Passive Tree Stat Calculation",iterations:e,totalTime:i,averageTime:i/e,itemsPerSecond:e/i*1e3}}function m0(e=1e3){const t=vr(),n=Object.keys(t.nodes),a=performance.now();for(let i=0;i<e;i++){const c={allocatedNodes:{},availablePoints:1e3},d=n[Math.floor(Math.random()*n.length)];Kn(d,t,c)}const r=performance.now()-a;return{operation:"Passive Tree Node Allocation Check",iterations:e,totalTime:r,averageTime:r/e,itemsPerSecond:e/r*1e3}}function f0(){console.log(" Starting Performance Test Suite...");const e=[];return console.log("Testing equipment generation..."),e.push(r0(1e3)),console.log("Testing loot generation..."),e.push(i0(1e3)),console.log("Testing affix generation..."),e.push(o0(1e3)),console.log("Testing stat calculation..."),e.push(c0(100)),console.log("Testing passive tree generation..."),e.push(d0(10)),console.log("Testing passive tree stat calculation..."),e.push(u0(1e3)),console.log("Testing passive tree node allocation..."),e.push(m0(1e3)),console.log(" Performance Test Suite Complete!"),e.forEach(t=>{console.log(`
 ${t.operation}:`),console.log(`  Iterations: ${t.iterations}`),console.log(`  Total Time: ${t.totalTime.toFixed(2)}ms`),console.log(`  Average Time: ${t.averageTime.toFixed(4)}ms`),console.log(`  Items/Second: ${t.itemsPerSecond.toFixed(0)}`),t.operation.includes("Passive Tree")&&(t.averageTime>10&&console.warn(` ${t.operation} is slow (${t.averageTime.toFixed(2)}ms avg)`),t.itemsPerSecond<100&&console.warn(` ${t.operation} has low throughput (${t.itemsPerSecond.toFixed(0)} items/sec)`))}),e}function _x(){if("memory"in performance){const e=performance.memory;console.log(`
 Memory Usage:`),console.log(`  Used JS Heap: ${(e.usedJSHeapSize/1024/1024).toFixed(2)} MB`),console.log(`  Total JS Heap: ${(e.totalJSHeapSize/1024/1024).toFixed(2)} MB`),console.log(`  Heap Limit: ${(e.jsHeapSizeLimit/1024/1024).toFixed(2)} MB`)}else console.log("Memory API not available in this browser")}typeof window<"u"&&(window.performanceTest={runSuite:f0,testMemory:_x,testEquipment:r0,testLoot:i0,testAffixes:o0,testStats:c0,testPassiveTreeGeneration:d0,testPassiveTreeStats:u0,testPassiveTreeAllocation:m0});function Px(){const[e,t]=j.useState(!1),[n,a]=j.useState([]),[s,r]=j.useState(!1),[i,c]=j.useState(""),d=async()=>{r(!0);try{const u=f0();if(a(u),"memory"in performance){const f=performance.memory;c(`Used: ${(f.usedJSHeapSize/1024/1024).toFixed(2)} MB | Total: ${(f.totalJSHeapSize/1024/1024).toFixed(2)} MB`)}}catch(u){console.error("Performance test failed:",u)}finally{r(!1)}};return e?l.jsxs("div",{className:"fixed bottom-4 right-4 bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-md w-80 shadow-xl z-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"text-white font-bold text-sm",children:"Performance Monitor"}),l.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white text-lg leading-none",children:""})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:d,disabled:s,className:`w-full px-3 py-2 rounded text-sm font-medium ${s?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:s?"Running Tests...":"Run Performance Tests"}),i&&l.jsxs("div",{className:"text-xs text-gray-300 bg-gray-800 p-2 rounded",children:[l.jsx("strong",{children:"Memory:"})," ",i]}),n.length>0&&l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[l.jsx("h4",{className:"text-white text-xs font-semibold",children:"Test Results:"}),n.map((u,f)=>l.jsxs("div",{className:"bg-gray-800 p-2 rounded text-xs",children:[l.jsx("div",{className:"text-blue-400 font-medium",children:u.operation}),l.jsxs("div",{className:"text-gray-300 space-y-1",children:[l.jsxs("div",{children:["Iterations: ",u.iterations]}),l.jsxs("div",{children:["Avg Time: ",u.averageTime.toFixed(4),"ms"]}),l.jsxs("div",{className:"text-green-400",children:["Speed: ",u.itemsPerSecond.toFixed(0)," items/sec"]})]})]},f))]}),l.jsxs("div",{className:"text-xs text-gray-400 border-t border-gray-700 pt-2",children:[l.jsx("div",{children:" Tips:"}),l.jsx("div",{children:" Higher items/sec = better performance"}),l.jsx("div",{children:" Lower avg time = faster operations"}),l.jsx("div",{children:" Check console for detailed logs"})]})]})]}):l.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-4 right-4 bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50",children:" Performance"})}function Ex({isOpen:e,onClose:t}){var h;const{state:n,actions:a}=ut(),[s,r]=j.useState(null),[i,c]=j.useState("available");if(!e)return null;const d=n.player.mapDevice,u=n.player.level;if(!d)return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Map Device Error"}),l.jsx("p",{className:"text-gray-300",children:"Map device not initialized. Please restart the game."}),l.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})]})});const f=w=>{a.log(`Starting map: ${w.name} (Tier ${w.tier})`),t()},v=w=>w.map(N=>l.jsxs("div",{className:`text-xs p-1 rounded ${N.type==="prefix"?"bg-red-900/30 text-red-300":"bg-blue-900/30 text-blue-300"}`,children:[l.jsx("span",{className:"font-semibold",children:N.name}),l.jsx("div",{className:"text-xs opacity-80",children:N.description})]},N.id)),x=(w,N=!0)=>{const y=$h(w),b=Ah(w),m=Gm(w,u,d.completedMaps),p=d.completedMaps.includes(w.id);return l.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${(s==null?void 0:s.id)===w.id?"border-yellow-400 bg-yellow-900/20":m?"border-gray-600 hover:border-gray-400 bg-gray-800/50":"border-gray-700 bg-gray-900/50 opacity-50"}`,onClick:()=>r(w),children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold text-lg ${w.rarity==="Unique"?"text-orange-400":w.rarity==="Rare"?"text-yellow-400":w.rarity==="Magic"?"text-blue-400":"text-white"}`,children:w.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Tier ",w.tier,"  Level ",w.baseLevel,"  ",w.layout," layout"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`text-sm font-semibold ${y<100?"text-green-400":y<200?"text-yellow-400":y<300?"text-orange-400":"text-red-400"}`,children:["Difficulty: ",y]}),p&&l.jsxs("div",{className:"text-xs text-green-400",children:[" Completed (",w.timesCompleted,"x)"]})]})]}),l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:w.description}),w.modifiers.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-1",children:"Map Modifiers:"}),l.jsx("div",{className:"space-y-1",children:v(w.modifiers)})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-1",children:"Rewards:"}),l.jsx("div",{className:"text-xs text-gray-300 space-y-1",children:b.map((g,S)=>l.jsxs("div",{children:[g.type==="equipment"&&`${g.quantity}x Equipment (Level ${g.minLevel}-${g.maxLevel})`,g.type==="skillGem"&&`${g.quantity}x ${g.rarity} Skill Gem`,g.type==="supportGem"&&`${g.quantity}x ${g.rarity} Support Gem`,g.type==="experience"&&`${g.quantity} Experience`,g.guaranteed&&" (Guaranteed)"]},S))})]}),!m&&w.unlockRequirement&&l.jsxs("div",{className:"text-xs text-red-400 mb-2",children:[l.jsx("div",{className:"font-semibold",children:"Requirements:"}),w.unlockRequirement.playerLevel&&l.jsxs("div",{children:[" Level ",w.unlockRequirement.playerLevel," (Current: ",u,")"]}),w.unlockRequirement.completedMaps&&l.jsxs("div",{children:[" Complete: ",w.unlockRequirement.completedMaps.join(", ")]})]}),N&&m&&l.jsxs("button",{onClick:g=>{g.stopPropagation(),f(w)},className:"w-full mt-2 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded transition-colors",children:["Run Map (",Math.floor(w.completionTime/60),":",(w.completionTime%60).toString().padStart(2,"0"),")"]})]},w.id)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-900 border border-gray-600 rounded-lg p-6 max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Map Device"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:""})]}),l.jsxs("div",{className:"flex space-x-4 mb-4",children:[l.jsx("button",{onClick:()=>c("available"),className:`px-4 py-2 rounded ${i==="available"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Available Maps"}),l.jsxs("button",{onClick:()=>c("stash"),className:`px-4 py-2 rounded ${i==="stash"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["Map Stash (",((h=d.mapStash)==null?void 0:h.length)||0,")"]}),l.jsx("button",{onClick:()=>c("atlas"),className:`px-4 py-2 rounded ${i==="atlas"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Atlas Progress"})]}),i==="atlas"&&l.jsxs("div",{className:"mb-4 p-4 bg-gray-800 rounded-lg",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Atlas of Worlds"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400",children:"Current Tier:"}),l.jsxs("div",{className:"text-white font-semibold",children:["Tier ",d.atlasProgress.tier]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400",children:"Maps Completed:"}),l.jsxs("div",{className:"text-white font-semibold",children:[d.atlasProgress.completedCount," / ",d.atlasProgress.totalCount]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400",children:"Bonus Objectives:"}),l.jsx("div",{className:"text-white font-semibold",children:d.atlasProgress.bonusObjectives})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-400",children:"Completion Rate:"}),l.jsxs("div",{className:"text-white font-semibold",children:[Math.floor(d.atlasProgress.completedCount/d.atlasProgress.totalCount*100),"%"]})]})]})]}),l.jsxs("div",{className:"overflow-y-auto max-h-[60vh]",children:[i==="available"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.availableMaps.map(w=>x(w))}),i==="stash"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:!d.mapStash||d.mapStash.length===0?l.jsx("div",{className:"col-span-full text-center text-gray-400 py-8",children:"No maps in stash. Maps can be found as drops from enemies or purchased from vendors."}):d.mapStash.map(w=>x(w))}),i==="atlas"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.availableMaps.map(w=>x(w,!1))})]}),d.currentMap&&l.jsxs("div",{className:"mt-4 p-4 bg-green-900/30 border border-green-600 rounded-lg",children:[l.jsx("div",{className:"text-green-400 font-semibold",children:"Currently Running:"}),l.jsxs("div",{className:"text-white",children:[d.currentMap.name," (Tier ",d.currentMap.tier,")"]})]})]})})}const Rx=()=>{const e=j.useRef(null),{state:t,dispatch:n}=ut(),[a,s]=j.useState([]),[r,i]=j.useState({id:"dummy-enemy",x:400,y:200,health:100,maxHealth:100,size:30}),c=800,d=400,u=100,f=200,v=()=>{const x={id:`fireball-${Date.now()}`,x:u,y:f,targetX:r.x,targetY:r.y,speed:300,damage:25,skill:"fireball",startTime:Date.now(),trail:[],rotation:0,particles:[]};console.log(" Creating fireball projectile:",x),s(h=>[...h,x])};return j.useEffect(()=>{const x=setInterval(()=>{const h=Date.now();s(w=>w.map(N=>{(h-N.startTime)/1e3;const y=N.targetX-N.x,b=N.targetY-N.y,m=Math.sqrt(y*y+b*b);if(m<10)return console.log(" Fireball explosion at target!"),null;const p=y/m*N.speed*(1/60),g=b/m*N.speed*(1/60),S=N.x+p,P=N.y+g,T=[{x:N.x,y:N.y,opacity:1},...N.trail.map(_=>({..._,opacity:_.opacity*.95}))].slice(0,10),C=[...N.particles.map(_=>({..._,x:_.x+_.vx,y:_.y+_.vy,life:_.life-1})).filter(_=>_.life>0),...Array.from({length:2},()=>({x:S+(Math.random()-.5)*10,y:P+(Math.random()-.5)*10,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,life:30,maxLife:30}))];return{...N,x:S,y:P,trail:T,rotation:N.rotation+5,particles:C}}).filter(Boolean))},16.666666666666668);return()=>clearInterval(x)},[r]),j.useEffect(()=>{const x=e.current;if(!x)return;const h=x.getContext("2d");if(!h)return;h.fillStyle="#1a1a2e",h.fillRect(0,0,c,d),h.fillStyle="#4CAF50",h.beginPath(),h.arc(u,f,15,0,Math.PI*2),h.fill(),h.fillStyle="#f44336",h.beginPath(),h.arc(r.x,r.y,r.size,0,Math.PI*2),h.fill();const w=60,N=8;h.fillStyle="#333",h.fillRect(r.x-w/2,r.y-r.size-15,w,N),h.fillStyle="#4CAF50";const y=r.health/r.maxHealth;h.fillRect(r.x-w/2,r.y-r.size-15,w*y,N),a.forEach(b=>{b.trail.forEach((p,g)=>{const S=p.opacity*(1-g/b.trail.length);h.fillStyle=`rgba(255, 100, 0, ${S})`,h.beginPath(),h.arc(p.x,p.y,3*S,0,Math.PI*2),h.fill()}),b.particles.forEach(p=>{const g=p.life/p.maxLife;h.fillStyle=`rgba(255, 150, 0, ${g})`,h.beginPath(),h.arc(p.x,p.y,2*g,0,Math.PI*2),h.fill()}),h.save(),h.translate(b.x,b.y),h.rotate(b.rotation*Math.PI/180);const m=h.createRadialGradient(0,0,0,0,0,15);m.addColorStop(0,"rgba(255, 100, 0, 0.8)"),m.addColorStop(.5,"rgba(255, 50, 0, 0.4)"),m.addColorStop(1,"rgba(255, 0, 0, 0)"),h.fillStyle=m,h.beginPath(),h.arc(0,0,15,0,Math.PI*2),h.fill(),h.fillStyle="#FFD700",h.beginPath(),h.arc(0,0,8,0,Math.PI*2),h.fill(),h.fillStyle="#FFF",h.beginPath(),h.arc(0,0,4,0,Math.PI*2),h.fill(),h.restore()}),h.fillStyle="#fff",h.font="16px Arial",h.fillText("Fireball Test Canvas",10,30),h.fillText(`Projectiles: ${a.length}`,10,50),h.fillText('Click "Cast Fireball" to test',10,70)},[a,r]),l.jsxs("div",{style:{padding:"20px",backgroundColor:"#0f0f23",color:"#fff"},children:[l.jsx("h2",{children:" Fireball Test Canvas"}),l.jsx("p",{children:"This is a dedicated testing environment for fireball effects."}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("button",{onClick:v,style:{padding:"10px 20px",backgroundColor:"#ff6b35",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",marginRight:"10px"},children:" Cast Fireball"}),l.jsx("button",{onClick:()=>s([]),style:{padding:"10px 20px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px"},children:"Clear Projectiles"})]}),l.jsx("canvas",{ref:e,width:c,height:d,style:{border:"2px solid #333",borderRadius:"8px",backgroundColor:"#1a1a2e"}}),l.jsxs("div",{style:{marginTop:"20px",fontSize:"14px",color:"#ccc"},children:[l.jsx("p",{children:l.jsx("strong",{children:"Legend:"})}),l.jsx("p",{children:" Green Circle = Player"}),l.jsx("p",{children:" Red Circle = Dummy Enemy"}),l.jsx("p",{children:" Fireball = Projectile with trail and particles"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Expected Effects:"})," Glowing projectile, particle trail, rotation, explosion on impact"]})]})]})},Tx=({isOpen:e,onClose:t,treeData:n,treeState:a,onAllocateNode:s,availablePoints:r})=>{const[i,c]=j.useState({zoom:1,offsetX:0,offsetY:0}),[d,u]=j.useState(!1),[f,v]=j.useState({x:0,y:0}),[x,h]=j.useState(null),w=j.useRef(null),N=j.useCallback(E=>{E.button===0&&(u(!0),v({x:E.clientX,y:E.clientY}),E.preventDefault())},[]),y=j.useCallback(E=>{if(d){const ie=E.clientX-f.x,q=E.clientY-f.y;c(V=>({...V,offsetX:V.offsetX+ie,offsetY:V.offsetY+q})),v({x:E.clientX,y:E.clientY})}},[d,f]),b=j.useCallback(()=>{u(!1)},[]),m=j.useCallback(E=>{E.preventDefault();const ie=E.deltaY>0?.9:1.1,q=Math.max(.3,Math.min(3,i.zoom*ie));c(V=>({...V,zoom:q}))},[i.zoom]),p=j.useCallback(E=>{Kn(E,n,a)&&s(E)},[n,a,s]),g=E=>{const ie=(a.allocatedNodes[E.id]||0)>0,q=Kn(E.id,n,a),V={combat:{allocated:"#dc2626",available:"#b91c1c"},defensive:{allocated:"#2563eb",available:"#1d4ed8"},utility:{allocated:"#16a34a",available:"#15803d"},magic:{allocated:"#7c3aed",available:"#6d28d9"},mastery:{allocated:"#f59e0b",available:"#d97706"}};if(E.archetype&&V[E.archetype]){const me=V[E.archetype];return ie?me.allocated:q?me.available:"#374151"}if(ie)switch(E.type){case"travel":return"#4ade80";case"small":return"#60a5fa";case"notable":return"#f59e0b";default:return"#6b7280"}else if(q)switch(E.type){case"travel":return"#22c55e";case"small":return"#3b82f6";case"notable":return"#d97706";default:return"#4b5563"}else return"#374151"},S=E=>{switch(E.type){case"travel":return 8;case"small":return 12;case"notable":return 18;default:return 10}},P=()=>n.archetypes?n.archetypes.map(E=>l.jsx("circle",{cx:E.position.x,cy:E.position.y,r:E.radius,fill:E.color,opacity:"0.1",stroke:E.color,strokeWidth:"2",strokeOpacity:"0.3",pointerEvents:"none"},E.id)):null,T=()=>n.archetypes?n.archetypes.map(E=>l.jsxs("g",{children:[l.jsx("text",{x:E.position.x,y:E.position.y-E.radius+20,textAnchor:"middle",fill:E.color,fontSize:"14",fontWeight:"bold",pointerEvents:"none",children:E.name}),l.jsx("text",{x:E.position.x,y:E.position.y-E.radius+35,textAnchor:"middle",fill:"#9ca3af",fontSize:"10",pointerEvents:"none",children:E.description})]},`label-${E.id}`)):null,C=()=>Object.values(n.nodes).map(E=>E.connections.map(ie=>{const q=n.nodes[ie];if(!q)return null;const V=(a.allocatedNodes[E.id]||0)>0,me=(a.allocatedNodes[ie]||0)>0,xe=V&&me?"#4ade80":"#6b7280";return l.jsx("line",{x1:E.position.x,y1:E.position.y,x2:q.position.x,y2:q.position.y,stroke:xe,strokeWidth:"2",opacity:"0.6"},`${E.id}-${ie}`)})).flat().filter(Boolean),_=()=>Object.values(n.nodes).map(E=>{const ie=(a.allocatedNodes[E.id]||0)>0,q=Kn(E.id,n,a),V=S(E);return l.jsxs("g",{children:[l.jsx("circle",{cx:E.position.x,cy:E.position.y,r:V,fill:g(E),stroke:x===E.id?"#ffffff":"#000000",strokeWidth:x===E.id?"3":"1",style:{cursor:q?"pointer":"default",filter:ie?"brightness(1.2)":"none"},onClick:()=>p(E.id),onMouseEnter:()=>h(E.id),onMouseLeave:()=>h(null)}),E.type==="notable"&&l.jsx("circle",{cx:E.position.x,cy:E.position.y,r:V-4,fill:"none",stroke:"#ffffff",strokeWidth:"2",opacity:"0.8",pointerEvents:"none"})]},E.id)}),D=()=>{if(!x)return null;const E=n.nodes[x];if(!E)return null;const ie=(a.allocatedNodes[E.id]||0)>0,q=Kn(E.id,n,a);return l.jsx("div",{className:"absolute top-4 left-4 bg-gray-900 border border-gray-600 rounded-lg p-4 max-w-sm z-50",children:l.jsxs("div",{className:"text-white",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"font-bold text-lg",children:E.name}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.type==="travel"?"bg-green-600":E.type==="small"?"bg-blue-600":"bg-amber-600"}`,children:E.type}),E.archetype&&l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.archetype==="combat"?"bg-red-600":E.archetype==="defensive"?"bg-blue-600":E.archetype==="utility"?"bg-green-600":E.archetype==="magic"?"bg-purple-600":"bg-amber-600"}`,children:E.archetype})]}),l.jsx("p",{className:"text-gray-300 mb-2",children:E.description}),E.skillModifiers&&E.skillModifiers.length>0&&l.jsxs("div",{className:"mb-2",children:[l.jsx("h4",{className:"text-sm font-semibold text-cyan-400 mb-1",children:"Special Effects:"}),E.skillModifiers.map((V,me)=>l.jsxs("div",{className:"text-xs text-cyan-300",children:[" ",V.skillId,": ",V.property," ",V.type==="additive"?"+":"",V.value]},me))]}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"text-yellow-400",children:["Cost: ",E.cost," points"]}),ie&&l.jsx("div",{className:"text-green-400",children:" Allocated"}),!ie&&q&&l.jsx("div",{className:"text-blue-400",children:"Available"}),!ie&&!q&&l.jsx("div",{className:"text-red-400",children:"Requirements not met"})]})]})})};return e?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg w-[90vw] h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-600",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Passive Skill Tree"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"text-white",children:["Available Points: ",r]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:""})]})]}),l.jsxs("div",{className:"flex-1 relative overflow-hidden bg-gray-900",children:[l.jsx("svg",{ref:w,className:"w-full h-full cursor-grab active:cursor-grabbing",onMouseDown:N,onMouseMove:y,onMouseUp:b,onMouseLeave:b,onWheel:m,style:{userSelect:"none"},children:l.jsxs("g",{transform:`translate(${i.offsetX+400}, ${i.offsetY+300}) scale(${i.zoom})`,children:[P(),T(),C(),_()]})}),D(),l.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2",children:[l.jsx("button",{onClick:()=>c(E=>({...E,zoom:Math.min(3,E.zoom*1.2)})),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded",children:"+"}),l.jsx("button",{onClick:()=>c(E=>({...E,zoom:Math.max(.3,E.zoom*.8)})),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded",children:"-"}),l.jsx("button",{onClick:()=>c({zoom:1,offsetX:0,offsetY:0}),className:"bg-gray-700 hover:bg-gray-600 text-white px-2 py-2 rounded text-sm",children:"Reset"})]})]}),l.jsx("div",{className:"p-4 border-t border-gray-600 bg-gray-800",children:l.jsxs("div",{className:"flex gap-6 text-sm text-white",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),l.jsx("span",{children:"Travel Node"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),l.jsx("span",{children:"Small Node"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-amber-500 border-2 border-white"}),l.jsx("span",{children:"Notable Node"})]}),l.jsx("div",{className:"text-gray-400 ml-4",children:"Left click and drag to pan  Mouse wheel to zoom  Click nodes to allocate"})]})})]})}):null},Lx=({equipment:e,stones:t,className:n=""})=>{var u,f,v,x;console.log("EquipmentTooltip rendering:",e.name,"Stones:",t.length);const a=$s(e,t),s=Vh(e,t),i=(((x=(v=(f=(u=e.sockets)==null?void 0:u.stones)==null?void 0:f.filter(h=>h!==null))==null?void 0:v.map(h=>t.find(w=>w.id===h)))==null?void 0:x.filter(h=>h!==void 0))||[]).filter((h,w,N)=>N.findIndex(y=>y.id===h.id)===w),c=h=>({Common:"#FFFFFF",Magic:"#8888FF",Rare:"#FFFF88",Epic:"#FF88FF",Legendary:"#FF8800",Mythic:"#FF0000"})[h]||"#FFFFFF",d=h=>({Common:"#9CA3AF",Rare:"#3B82F6",Mythical:"#8B5CF6",Divine:"#F59E0B"})[h]||"#FFFFFF";return l.jsxs("div",{className:`bg-gray-900 border-2 border-yellow-400 rounded-lg p-4 shadow-xl w-[900px] max-h-[90vh] overflow-y-auto ${n}`,style:{zIndex:9999},children:[l.jsxs("div",{className:"mb-3 text-center",children:[l.jsx("h3",{className:"font-bold text-lg mb-1",style:{color:c(e.rarity)},children:e.name}),l.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-400",children:[l.jsxs("span",{children:[e.category,"  Level ",e.level]}),l.jsxs("span",{children:[e.rarity," ",e.type]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-3",children:[Object.keys(e.baseStats).length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-blue-400 font-semibold text-xs mb-1",children:"Base Stats:"}),l.jsx("div",{className:"space-y-0.5 bg-blue-900/10 rounded p-2",children:Object.entries(e.baseStats).map(([h,w])=>typeof w=="number"&&w>0&&l.jsxs("div",{className:"text-white text-xs",children:["+",ca(h,w)," ",da(h)]},h))})]}),e.affixes.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-green-400 font-semibold text-xs mb-1",children:"Affixes:"}),l.jsx("div",{className:"space-y-1 bg-green-900/10 rounded p-2",children:e.affixes.map((h,w)=>l.jsxs("div",{children:[l.jsx("div",{className:"text-green-300 text-xs font-medium",children:h.name}),l.jsxs("div",{className:"text-green-200 text-xs ml-2",children:["+",ca(h.stat,h.value)," ",da(h.stat)]})]},w))})]}),e.sockets&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-yellow-400 font-semibold text-xs mb-1",children:"Sockets:"}),l.jsxs("div",{className:"bg-yellow-900/10 rounded p-2",children:[l.jsx("div",{className:"flex space-x-1 mb-1",children:e.sockets.stones.map((h,w)=>l.jsx("div",{className:`w-5 h-5 border-2 rounded ${h?"border-purple-400 bg-purple-900":"border-gray-500 bg-gray-800"}`,title:h?"Socketed":"Empty Socket",children:h&&l.jsx("div",{className:"w-full h-full bg-purple-500 rounded opacity-60"})},w))}),l.jsxs("p",{className:"text-gray-400 text-xs",children:[i.length,"/",e.sockets.stones.length," sockets used"]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[i.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-purple-400 font-semibold text-xs mb-1",children:"Socketed Stones:"}),l.jsx("div",{className:"space-y-2",children:i.map((h,w)=>l.jsxs("div",{className:"border-l-2 border-purple-500 pl-2 bg-gray-800/30 rounded-r p-1.5",children:[l.jsx("div",{className:"text-xs font-medium mb-0.5",style:{color:d(h.rarity)},children:h.name}),Object.entries(h.baseStats).map(([N,y])=>typeof y=="number"&&y>0&&l.jsxs("div",{className:"text-purple-200 text-xs ml-1",children:["+",ca(N,y)," ",da(N)]},N)),h.affixes.map((N,y)=>l.jsxs("div",{children:[l.jsx("div",{className:"text-purple-300 text-xs ml-1",children:N.name}),l.jsxs("div",{className:"text-purple-200 text-xs ml-2",children:["+",ca(N.stat,N.value)," ",da(N.stat)]})]},y))]},h.id))})]}),Object.keys(a).length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-purple-400 font-semibold text-xs mb-1",children:"Stone Bonus Total:"}),l.jsx("div",{className:"space-y-0.5 bg-purple-900/20 rounded p-2",children:Object.entries(a).map(([h,w])=>typeof w=="number"&&w>0&&l.jsxs("div",{className:"text-purple-300 text-xs",children:["+",ca(h,w)," ",da(h)]},h))})]})]})]}),l.jsx("div",{className:"border-t border-gray-600 pt-3 mt-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-yellow-400 font-semibold text-xs mb-1",children:"Total Equipment Stats:"}),l.jsx("div",{className:"space-y-0.5 bg-yellow-900/20 rounded p-2 max-h-32 overflow-y-auto",children:Object.entries(s).map(([h,w])=>typeof w=="number"&&w>0&&l.jsxs("div",{className:"text-yellow-300 text-xs",children:["+",ca(h,w)," ",da(h)]},h))})]}),l.jsx("div",{className:"flex flex-col justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Equipment Value"}),l.jsxs("p",{className:"text-yellow-400 text-sm font-bold",children:[e.value," gold"]})]})})]})})]})},Dx={Common:"#9ca3af",Magic:"#06b6d4",Rare:"#8b5cf6",Unique:"#fbbf24",Legendary:"#ff6b6b",Mythic:"#ff1493",Divine:"#ffd700"};function ol(e){return e&&Dx[e]||"#9ca3af"}const Ix=pn.memo(({slot:e,equippedItem:t,onUnequip:n,stones:a})=>{const[s,r]=j.useState(!1),[i,c]=j.useState({x:0,y:0}),d=j.useCallback(v=>{t&&(v.preventDefault(),n(e.id))},[n,e.id,t]),u=j.useCallback(v=>{if(t){const x=window.innerWidth,h=window.innerHeight,w=900,N=Math.min(h*.9,700),y=(x-w)/2,b=(h-N)/2,m={x:y,y:b};console.log("Centered tooltip position:",m,"Equipment:",t.name,"Viewport:",{viewportWidth:x,viewportHeight:h}),c(m),r(!0)}},[t]),f=j.useCallback(()=>{r(!1)},[]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-800/60 to-gray-900/80 border-2 rounded-lg flex flex-col items-center justify-center hover:from-gray-700/60 hover:to-gray-800/80 transition-all duration-300 cursor-pointer relative group shadow-lg",style:{borderColor:t?ol(t.rarity):"#6b7280",boxShadow:t?`0 0 12px ${ol(t.rarity)}60, inset 0 0 8px ${ol(t.rarity)}20`:"0 2px 8px rgba(0,0,0,0.3), inset 0 0 4px rgba(107, 114, 128, 0.1)"},onContextMenu:d,onMouseEnter:u,onMouseLeave:f,children:[l.jsx("div",{className:"text-xl mb-1",children:e.icon}),t?l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 border border-gray-800"}):l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-gray-600 border border-gray-800"}),(t==null?void 0:t.sockets)&&t.sockets.maxSockets>0&&l.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 flex gap-0.5",children:Array.from({length:Math.min(t.sockets.maxSockets,3)},(v,x)=>l.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t.sockets.stones[x]?"bg-amber-400":"bg-gray-600"}`},x))}),l.jsxs("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-900/95 border border-amber-600/30 text-xs px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300 whitespace-nowrap z-20 shadow-xl",children:[l.jsx("div",{className:"text-amber-400 font-medium",children:e.name}),t?l.jsx("div",{className:"text-center font-bold",style:{color:ol(t.rarity)},children:t.name}):l.jsx("div",{className:"text-gray-500 text-center",children:"Empty Slot"}),l.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900/95"})]})]}),s&&t&&l.jsx("div",{className:"fixed pointer-events-none",style:{left:i.x,top:i.y,zIndex:9999},children:l.jsx(Lx,{equipment:t,stones:a})})]})}),$x=({isOpen:e,onClose:t})=>{const{state:n,dispatch:a}=ut(),s=n.player,r=j.useMemo(()=>{const f={};return Fe.forEach(v=>{if(s.equipment&&s.equipment[v.id])f[v.id]=s.equipment[v.id];else if(s.equipped&&v.id==="weapon"){const x=s.equipped.type;(x==="melee"||x==="ranged")&&(f[v.id]=s.equipped)}}),f},[s.equipment,s.equipped]),i=j.useCallback(f=>f==="ring2"?null:r[f]||null,[r]),c=j.useMemo(()=>{var v;let f=0;return s.equipment&&(f+=Object.keys(s.equipment).length),s.equipped&&!((v=s.equipment)!=null&&v.weapon)&&(f+=1),f},[s.equipment,s.equipped]),d=j.useCallback(f=>{a({type:"UNEQUIP",payload:f})},[a]),u=j.useCallback(f=>{const v=i(f.id);return l.jsx(Ix,{slot:f,equippedItem:v,onUnequip:d,stones:s.stones||[]},f.id)},[i,d,s.stones]);return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,children:l.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg shadow-2xl w-[95vw] h-[95vh] overflow-hidden flex flex-col",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-amber-600/50 bg-gray-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-amber-400",children:" CHARACTER EQUIPMENT"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors text-xl px-2 py-1 hover:bg-gray-700 rounded",children:""})]}),l.jsxs("div",{className:"flex-1 p-6 relative overflow-hidden bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900",children:[l.jsxs("div",{className:"absolute inset-0 opacity-5",children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 border border-amber-600/20 rounded-full"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-24 h-24 border border-amber-600/20 rounded-full"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 border border-amber-600/10 rounded-full"})]}),l.jsxs("div",{className:"grid grid-cols-5 grid-rows-4 gap-4 h-full max-w-4xl mx-auto relative z-10",children:[l.jsx("div",{className:"col-start-3 row-start-1 flex justify-center",children:u(Fe.find(f=>f.id==="helm")||Fe[2])}),l.jsx("div",{className:"col-start-1 row-start-2 flex justify-center",children:u(Fe.find(f=>f.id==="chest")||Fe[3])}),l.jsx("div",{className:"col-start-3 row-start-2 flex justify-center",children:u(Fe.find(f=>f.id==="amulet")||Fe[9])}),l.jsx("div",{className:"col-start-5 row-start-2 flex justify-center",children:u(Fe.find(f=>f.id==="legs")||Fe[5])}),l.jsx("div",{className:"col-start-1 row-start-3 flex justify-center",children:u(Fe.find(f=>f.id==="weapon")||Fe[0])}),l.jsx("div",{className:"col-start-2 col-span-3 row-start-3 flex items-center justify-center",children:l.jsxs("div",{className:"w-40 h-48 bg-gradient-to-b from-gray-800/60 via-gray-700/40 to-gray-900/60 border-2 border-amber-600/50 rounded-lg flex items-center justify-center relative overflow-hidden shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-900/10 via-transparent to-amber-800/10"}),l.jsx("div",{className:"text-7xl text-amber-400/60 relative z-10 drop-shadow-lg",children:""}),l.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-gray-900/80 rounded px-2 py-1 text-xs",children:l.jsxs("div",{className:"flex justify-between text-amber-400",children:[l.jsxs("span",{children:["Level ",s.level||1]}),l.jsxs("span",{children:["Power: ",Object.values(r).reduce((f,v)=>{if(!v)return f;let x=0;return v.power&&typeof v.power=="number"&&!isNaN(v.power)&&(x+=v.power),v.baseStats&&Object.values(v.baseStats).forEach(h=>{typeof h=="number"&&!isNaN(h)&&(x+=h)}),f+x},0).toFixed(0)]})]})}),l.jsx("div",{className:"absolute inset-0 border-2 border-amber-500/30 rounded-lg"}),l.jsx("div",{className:"absolute inset-1 border border-amber-400/20 rounded-md"}),l.jsx("div",{className:"absolute top-2 left-2 w-3 h-3 border-l-2 border-t-2 border-amber-500/60"}),l.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 border-r-2 border-t-2 border-amber-500/60"}),l.jsx("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-l-2 border-b-2 border-amber-500/60"}),l.jsx("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-r-2 border-b-2 border-amber-500/60"}),l.jsx("div",{className:"absolute inset-0 rounded-lg shadow-inner",style:{boxShadow:"inset 0 0 20px rgba(251, 191, 36, 0.1)"}})]})}),l.jsx("div",{className:"col-start-5 row-start-3 flex justify-center",children:u(Fe.find(f=>f.id==="offhand")||Fe[1])}),l.jsx("div",{className:"col-start-1 row-start-4 flex justify-center",children:u(Fe.find(f=>f.id==="gloves")||Fe[4])}),l.jsx("div",{className:"col-start-3 row-start-4 flex justify-center",children:u(Fe.find(f=>f.id==="belt")||Fe[7])}),l.jsx("div",{className:"col-start-5 row-start-4 flex justify-center",children:u(Fe.find(f=>f.id==="boots")||Fe[6])}),l.jsx("div",{className:"col-start-2 row-start-4 flex justify-center",children:u(Fe.find(f=>f.id==="ring")||Fe[8])}),l.jsx("div",{className:"col-start-4 row-start-4 flex justify-center",children:u({...Fe.find(f=>f.id==="ring")||Fe[8],id:"ring2",name:"Ring 2"})})]})]}),l.jsx("div",{className:"border-t border-amber-600/50 p-4 bg-gray-800/50",children:l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Equipped: "}),l.jsxs("span",{className:"text-amber-400 font-medium",children:[c,"/",Fe.length]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Total Power: "}),l.jsxs("span",{className:"text-orange-400 font-bold",children:["+",Object.values(r).reduce((f,v)=>{if(!v)return f;let x=0;return v.power&&typeof v.power=="number"&&!isNaN(v.power)&&(x+=v.power),v.baseStats&&Object.values(v.baseStats).forEach(h=>{typeof h=="number"&&!isNaN(h)&&(x+=h)}),f+x},0).toFixed(0)]})]})]})})]})}):null},Ax=({onClose:e})=>{const{state:t,actions:n}=ut(),a=r=>{n.updateCharacterModel(r),e()},s=[{id:"human_male",name:"Human Male",class:"Human Class"},{id:"human_female",name:"Human Female",class:"Human Class"},{id:"knight_1",name:"Knight Warrior",class:"Knight Class"},{id:"knight_2",name:"Knight Guardian",class:"Knight Class"},{id:"knight_3",name:"Knight Paladin",class:"Knight Class"},{id:"knight_4",name:"Knight Champion",class:"Knight Class"}];return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Choose Your Character"}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl",children:""})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(r=>l.jsxs("div",{className:`
                relative bg-gray-700 rounded-lg p-4 cursor-pointer transition-all duration-200
                hover:bg-gray-600 hover:scale-105
                ${t.player.characterModel===r.id?"ring-2 ring-blue-500 bg-gray-600":""}
              `,onClick:()=>a(r.id),children:[l.jsx("div",{className:"aspect-square bg-gray-600 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"w-16 h-20 bg-gradient-to-b from-gray-400 to-gray-500 rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-gray-200 text-center",children:r.name.split(" ").map(i=>i[0]).join("")})})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-white font-semibold text-sm mb-1",children:r.name}),l.jsx("p",{className:"text-gray-400 text-xs",children:r.class})]}),t.player.characterModel===r.id&&l.jsx("div",{className:"absolute top-2 right-2",children:l.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs",children:""})})})]},r.id))}),l.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:l.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors",children:"Cancel"})})]})})},p0=pn.createContext(null),h0=()=>{const e=pn.useContext(p0);if(!e)throw new Error("useDragDrop must be used within a DragDropProvider");return e},g0=({children:e,onDrop:t,validateDrop:n})=>{const[a,s]=j.useState(null),[r,i]=j.useState(null),[c,d]=j.useState(!1),u=j.useCallback((h,w)=>{s(h),i(w),d(!0)},[]),f=j.useCallback(()=>{s(null),i(null),d(!1)},[]),v=j.useCallback((h,w)=>!a||!n?!1:n(a,h,w),[a,n]);j.useCallback((h,w)=>{a&&t&&v(h,w)&&t(a,h,w),f()},[a,t,v,f]);const x={draggedItem:a,draggedType:r,isDragging:c,startDrag:u,endDrag:f,isValidDropTarget:v};return l.jsx(p0.Provider,{value:x,children:l.jsx("div",{onDragEnd:f,children:e})})},x0=({item:e,type:t,children:n,className:a="",disabled:s=!1})=>{const{startDrag:r,isDragging:i,draggedItem:c}=h0(),[d,u]=j.useState(!1),f=j.useRef(null);j.useEffect(()=>{u(i&&(c==null?void 0:c.id)===e.id)},[i,c,e.id]);const v=j.useCallback(h=>{if(s){h.preventDefault();return}if(r(e,t),f.current){const w=f.current.cloneNode(!0);w.style.transform="rotate(5deg)",w.style.opacity="0.8",h.dataTransfer.setDragImage(w,20,20)}h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("text/plain",JSON.stringify({item:e,type:t}))},[s,r,e,t]),x=j.useCallback(()=>{u(!1)},[]);return l.jsxs("div",{ref:f,draggable:!s,onDragStart:v,onDragEnd:x,className:`
        ${a}
        ${s?"cursor-not-allowed":"cursor-grab active:cursor-grabbing"}
        ${d?"opacity-50 scale-95":""}
        transition-all duration-200
      `,style:{transform:d?"rotate(5deg)":"none"},children:[n,!s&&l.jsx("div",{className:"absolute top-1 right-1 opacity-60",children:l.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M9 3h2v2H9V3zm4 0h2v2h-2V3zM9 7h2v2H9V7zm4 0h2v2h-2V7zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2z"})})})]})},zx=({targetType:e,targetId:t,children:n,className:a="",onDrop:s,disabled:r=!1})=>{const{isDragging:i,isValidDropTarget:c,endDrag:d,draggedItem:u}=h0(),[f,v]=j.useState(!1),[x,h]=j.useState(!1);j.useEffect(()=>{h(i&&!r?c(e,t):!1)},[i,r,c,e,t]);const w=j.useCallback(m=>{r||!x||(m.preventDefault(),m.dataTransfer.dropEffect="move",v(!0))},[r,x]),N=j.useCallback(m=>{m.currentTarget.contains(m.relatedTarget)||v(!1)},[]),y=j.useCallback(m=>{if(m.preventDefault(),v(!1),!(r||!x)){try{const p=JSON.parse(m.dataTransfer.getData("text/plain"));s&&s(p.item)}catch(p){console.error("Failed to parse drop data:",p)}d()}},[r,x,s,d]),b=()=>r||!i?"":x&&f?"border-green-400 bg-green-400/10 shadow-lg shadow-green-400/20":x?"border-blue-400 bg-blue-400/5":i?"border-red-400 bg-red-400/5":"";return l.jsxs("div",{onDragOver:w,onDragLeave:N,onDrop:y,className:`
        ${a}
        ${b()}
        transition-all duration-200
        ${i?"border-2 border-dashed":""}
      `,children:[n,i&&x&&f&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-green-400/20 rounded",children:l.jsx("div",{className:"bg-green-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Drop Here"})}),i&&!x&&f&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-400/20 rounded",children:l.jsx("div",{className:"bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Invalid Drop"})})]})},Gn=({socketIndex:e,equipmentId:t,stone:n,isEmpty:a=!0,className:s="",size:r="md",onStoneEmbed:i,onStoneRemove:c})=>{var v;const d={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},u=j.useCallback(x=>{i&&x.id&&i(x.id,e)},[i,e]),f=j.useCallback(x=>{x.stopPropagation(),c&&c(e)},[c,e]);return l.jsx(zx,{targetType:"socket",targetId:`${t}-${e}`,onDrop:u,className:`
        relative ${d[r]} ${s}
        border-2 rounded-full
        ${a?"border-gray-600 border-dashed bg-gray-800/50":"border-gray-400 bg-gray-700"}
        flex items-center justify-center
        transition-all duration-200
        hover:border-blue-400
      `,children:n?l.jsxs("div",{className:"relative w-full h-full",children:[l.jsx("div",{className:"w-full h-full rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:ot("rarity",n.rarity||"common"),color:"#000"},children:((v=n.type)==null?void 0:v.charAt(0).toUpperCase())||"S"}),l.jsx("button",{onClick:f,className:"absolute -top-1 -right-1 w-4 h-4 bg-red-600 text-white rounded-full text-xs hover:bg-red-700 transition-colors",title:"Remove stone",children:""})]}):l.jsx("div",{className:"text-gray-500 text-xs",children:a?"+":""})})},yd=({stone:e,className:t="",size:n="md",disabled:a=!1})=>{var r;const s={sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"};return l.jsx(x0,{item:e,type:"stone",disabled:a,children:l.jsx("div",{className:`
          ${s[n]} ${t}
          rounded-lg border-2 flex items-center justify-center font-bold
          transition-all duration-200
          hover:scale-105 hover:shadow-lg
          ${a?"opacity-50":""}
        `,style:{backgroundColor:ot("rarity",e.rarity||"common"),borderColor:ot("rarity",e.rarity||"common"),color:"#000"},title:e.name,children:((r=e.type)==null?void 0:r.charAt(0).toUpperCase())||"S"})})},vd=({filter:e,onRemove:t,className:n=""})=>l.jsxs("div",{className:`
        inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm
        border transition-all duration-200
        hover:shadow-md ${n}
      `,style:{backgroundColor:e.color?`${e.color}20`:"#374151",borderColor:e.color||"#6B7280",color:e.color||"#E5E7EB"},children:[l.jsx("span",{children:e.label}),l.jsx("button",{onClick:t,className:"w-4 h-4 rounded-full bg-black/30 hover:bg-black/50 flex items-center justify-center text-xs",title:"Remove filter",children:""})]}),Fx=({group:e,activeFilters:t,onFilterToggle:n,className:a=""})=>{const[s,r]=j.useState(!1),i=t.filter(c=>c.groupId===e.id).length;return l.jsxs("div",{className:`border border-gray-600 rounded-lg ${a}`,children:[l.jsxs("button",{onClick:()=>r(!s),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-gray-700/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:e.label}),i>0&&l.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-0.5 rounded-full",children:i})]}),l.jsx("svg",{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&l.jsx("div",{className:"px-4 pb-4 space-y-2",children:e.options.map(c=>{const d=t.some(u=>u.groupId===e.id&&u.optionId===c.id);return l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-700/30 p-2 rounded",children:[l.jsx("input",{type:e.type==="single"?"radio":"checkbox",name:e.type==="single"?e.id:void 0,checked:d,onChange:()=>n(e.id,c.id,c.value),className:"w-4 h-4"}),l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[c.icon&&l.jsx("span",{children:c.icon}),l.jsx("span",{className:"flex-1",style:{color:c.color||"inherit"},children:c.label}),c.count!==void 0&&l.jsxs("span",{className:"text-gray-400 text-sm",children:["(",c.count,")"]})]})]},c.id)})})]})},qx=({value:e,onChange:t,placeholder:n="Search items...",className:a=""})=>l.jsxs("div",{className:`relative ${a}`,children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),l.jsx("input",{type:"text",value:e,onChange:s=>t(s.target.value),placeholder:n,className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-colors"}),e&&l.jsx("button",{onClick:()=>t(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Bx=({options:e,activeSort:t,onSortChange:n,className:a=""})=>l.jsx("select",{value:t,onChange:s=>n(s.target.value),className:`px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 ${a}`,children:e.map(s=>l.jsx("option",{value:s.id,children:s.label},s.id))}),y0=({items:e,filterGroups:t,onFilterChange:n,className:a="",showSearch:s=!0,showSort:r=!0,savedFilters:i=[],onSaveFilter:c})=>{const[d,u]=j.useState([]),[f,v]=j.useState(""),[x,h]=j.useState("name-asc"),[w,N]=j.useState(!1),y=[{id:"name-asc",label:"Name (A-Z)",field:"name",direction:"asc"},{id:"name-desc",label:"Name (Z-A)",field:"name",direction:"desc"},{id:"rarity-desc",label:"Rarity (High-Low)",field:"rarity",direction:"desc"},{id:"rarity-asc",label:"Rarity (Low-High)",field:"rarity",direction:"asc"},{id:"level-desc",label:"Level (High-Low)",field:"level",direction:"desc"},{id:"level-asc",label:"Level (Low-High)",field:"level",direction:"asc"},{id:"type-asc",label:"Type (A-Z)",field:"type",direction:"asc"}],b=j.useMemo(()=>{let S=[...e];if(f){const T=f.toLowerCase();S=S.filter(C=>{var _,D,E;return((_=C.name)==null?void 0:_.toLowerCase().includes(T))||((D=C.type)==null?void 0:D.toLowerCase().includes(T))||((E=C.description)==null?void 0:E.toLowerCase().includes(T))})}d.forEach(T=>{const C=t.find(_=>_.id===T.groupId);if(C)switch(C.id){case"rarity":S=S.filter(_=>_.rarity===T.value);break;case"type":S=S.filter(_=>_.type===T.value);break;case"level":typeof T.value=="object"&&T.value.min!==void 0&&(S=S.filter(_=>_.level>=T.value.min&&_.level<=T.value.max));break;case"equipped":S=S.filter(_=>_.equipped===T.value);break;case"sockets":S=S.filter(_=>T.value==="any"?_.sockets>0:T.value==="none"?!_.sockets||_.sockets===0:_.sockets===T.value);break;default:S=S.filter(_=>_[C.id]===T.value)}});const P=y.find(T=>T.id===x);return P&&S.sort((T,C)=>{let _=T[P.field],D=C[P.field];if(P.field==="rarity"){const E=["common","uncommon","rare","epic","legendary","mythic"];_=E.indexOf(_)||0,D=E.indexOf(D)||0}return typeof _=="string"&&(_=_.toLowerCase(),D=D.toLowerCase()),_<D?P.direction==="asc"?-1:1:_>D?P.direction==="asc"?1:-1:0}),S},[e,d,f,x,t]);j.useEffect(()=>{n(b)},[b,n]);const m=j.useCallback((S,P,T)=>{const C=t.find(D=>D.id===S);if(!C)return;const _=C.options.find(D=>D.id===P);_&&u(D=>{if(C.type==="single"){const E=D.filter(q=>q.groupId!==S);return D.some(q=>q.groupId===S&&q.optionId===P)||E.push({groupId:S,optionId:P,value:T,label:_.label,color:_.color}),E}else{const E=D.findIndex(ie=>ie.groupId===S&&ie.optionId===P);return E>=0?D.filter((ie,q)=>q!==E):[...D,{groupId:S,optionId:P,value:T,label:_.label,color:_.color}]}})},[t]),p=j.useCallback(S=>{u(P=>P.filter(T=>!(T.groupId===S.groupId&&T.optionId===S.optionId)))},[]),g=j.useCallback(()=>{u([]),v("")},[]);return l.jsxs("div",{className:`space-y-4 ${a}`,children:[l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s&&l.jsx(qx,{value:f,onChange:v,className:"flex-1"}),l.jsxs("div",{className:"flex gap-2",children:[r&&l.jsx(Bx,{options:y,activeSort:x,onSortChange:h}),l.jsxs("button",{onClick:()=>N(!w),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]})]})]}),(d.length>0||f)&&l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Active filters:"}),f&&l.jsx(vd,{filter:{groupId:"search",optionId:"search",value:f,label:`Search: "${f}"`,color:"#3B82F6"},onRemove:()=>v("")}),d.map((S,P)=>l.jsx(vd,{filter:S,onRemove:()=>p(S)},`${S.groupId}-${S.optionId}-${P}`)),l.jsx("button",{onClick:g,className:"text-sm text-red-400 hover:text-red-300 underline",children:"Clear all"})]}),w&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 bg-gray-800/50 rounded-lg",children:t.map(S=>l.jsx(Fx,{group:S,activeFilters:d,onFilterToggle:m},S.id))}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-400",children:[l.jsxs("span",{children:["Showing ",b.length," of ",e.length," items"]}),c&&d.length>0&&l.jsx("button",{onClick:()=>{const S=prompt("Enter filter preset name:");S&&c(S,d)},className:"text-blue-400 hover:text-blue-300 underline",children:"Save filter preset"})]})]})};j.memo(({stone:e,position:t,onClose:n,isPersistent:a})=>{const s=(c,d)=>["critChance","dodgeChance","attackSpeed","goldFind","magicFind","experienceBonus","lifeSteal","healthRegen","manaRegen"].includes(c)?`${(d*100).toFixed(1)}%`:d.toFixed(1),r=c=>({damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",critChance:"Critical Chance",dodgeChance:"Dodge Chance",attackSpeed:"Attack Speed",goldFind:"Gold Find",magicFind:"Magic Find",experienceBonus:"Experience Bonus",lifeSteal:"Life Steal",healthRegen:"Health Regen",manaRegen:"Mana Regen",luck:"Luck"})[c]||c,i=c=>({Common:"#9CA3AF",Rare:"#3B82F6",Mythical:"#8B5CF6",Divine:"#F59E0B"})[c]||"#FFFFFF";return l.jsxs("div",{className:"fixed z-50 bg-gray-900 border-2 border-gray-600 rounded-lg p-4 shadow-2xl max-w-sm",style:{left:Math.min(t.x,window.innerWidth-400),top:Math.min(t.y,window.innerHeight-300)},onMouseLeave:a?void 0:n,onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"font-bold text-lg flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",style:{color:i(e.rarity)},children:[l.jsx("span",{className:"text-2xl",children:er(e.type)}),l.jsx("span",{children:e.name})]}),a&&l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded",title:"Close tooltip",children:""})]}),l.jsxs("div",{className:"text-gray-400 text-sm",children:[l.jsx("span",{className:"capitalize",children:e.type}),"  ",l.jsx("span",{children:e.rarity}),"  Level ",e.level]})]}),Object.keys(e.baseStats).length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-blue-400 font-semibold text-sm mb-2",children:"Base Stats:"}),l.jsx("div",{className:"space-y-1",children:Object.entries(e.baseStats).map(([c,d])=>typeof d=="number"&&d>0&&l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("span",{className:"text-gray-300",children:[r(c),":"]}),l.jsxs("span",{className:"text-green-400 font-medium",children:["+",s(c,d)]})]},c))})]}),e.affixes&&e.affixes.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-purple-400 font-semibold text-sm mb-2",children:"Affixes:"}),l.jsx("div",{className:"space-y-2",children:e.affixes.map((c,d)=>l.jsxs("div",{className:"border-l-2 border-purple-500 pl-2",children:[l.jsx("div",{className:"text-purple-300 text-sm font-medium",children:c.name}),l.jsxs("div",{className:"text-green-400 text-sm",children:["+",s(c.stat,c.value)," ",r(c.stat)]})]},d))})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"text-amber-400 font-semibold text-sm mb-2",children:"Compatible Sockets:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:e.socketTypes.map(c=>l.jsx("span",{className:"bg-amber-900/30 text-amber-300 px-2 py-1 rounded text-xs",children:c},c))})]}),l.jsxs("div",{className:"text-yellow-400 text-sm font-medium",children:[" Value: ",e.value," gold"]})]})});const Ox=j.memo(({stone:e,viewMode:t,onEmbed:n,onRemove:a,onHover:s,onLeave:r,onClick:i,isSelected:c})=>{const d=(f,v)=>["critChance","dodgeChance","attackSpeed","goldFind","magicFind","experienceBonus","lifeSteal","healthRegen","manaRegen"].includes(f)?`${(v*100).toFixed(1)}%`:v.toFixed(1),u=f=>({damage:"Damage",armor:"Armor",health:"Health",mana:"Mana",strength:"Strength",dexterity:"Dexterity",intelligence:"Intelligence",vitality:"Vitality",critChance:"Critical Chance",dodgeChance:"Dodge Chance",attackSpeed:"Attack Speed",goldFind:"Gold Find",magicFind:"Magic Find",experienceBonus:"Experience Bonus",lifeSteal:"Life Steal",healthRegen:"Health Regen",manaRegen:"Mana Regen",luck:"Luck"})[f]||f;return t==="grid"?l.jsxs("div",{className:`relative bg-gradient-to-br from-gray-800 to-gray-900 border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-blue-500/20 ${c?"border-blue-400 bg-gradient-to-br from-blue-900/40 to-blue-800/40 shadow-lg shadow-blue-500/30":"border-gray-600 hover:border-gray-500"}`,onMouseEnter:s?f=>s(f,e):void 0,onMouseLeave:r,onClick:i?f=>i(f,e):void 0,children:[l.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 rounded-full shadow-lg",style:{backgroundColor:ua(e.rarity)}}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",style:{backgroundColor:ua(e.rarity)},children:er(e.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-bold text-sm truncate mb-1",style:{color:ua(e.rarity)},children:e.name}),l.jsxs("div",{className:"text-xs text-gray-400 bg-gray-700/50 px-2 py-1 rounded-lg inline-block",children:["Lv.",e.level,"  ",e.rarity]})]})]}),l.jsxs("div",{className:"text-xs space-y-1.5 mb-3 bg-gray-700/30 rounded-lg p-2",children:[Object.entries(e.baseStats).slice(0,2).map(([f,v])=>typeof v=="number"&&v>0&&l.jsxs("div",{className:"flex justify-between items-center text-green-400",children:[l.jsx("span",{className:"text-gray-300",children:u(f)}),l.jsxs("span",{className:"font-medium",children:["+",d(f,v)]})]},f)),Object.entries(e.baseStats).length>2&&l.jsxs("div",{className:"text-gray-500 text-center pt-1 border-t border-gray-600",children:["+",Object.entries(e.baseStats).length-2," more stats"]})]}),l.jsxs("div",{className:"text-yellow-400 text-xs font-medium mb-3 text-center bg-yellow-900/20 py-1 rounded-lg",children:[" ",e.value.toLocaleString()]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:f=>{f.stopPropagation(),n(e.id)},className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white text-xs py-2 px-3 rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-blue-500/30",children:" Embed"}),l.jsx("button",{onClick:f=>{f.stopPropagation(),a(e.id)},className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white text-xs py-2 px-3 rounded-lg transition-all duration-200 shadow-lg hover:shadow-red-500/30",children:""})]})]}):l.jsxs("div",{className:`relative bg-gradient-to-r from-gray-800 to-gray-900 border-2 rounded-xl p-4 cursor-pointer transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/10 ${c?"border-blue-400 bg-gradient-to-r from-blue-900/40 to-blue-800/40 shadow-lg shadow-blue-500/20":"border-gray-600 hover:border-gray-500"}`,onMouseEnter:s?f=>s(f,e):void 0,onMouseLeave:r,onClick:i?f=>i(f,e):void 0,children:[l.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 rounded-full shadow-lg",style:{backgroundColor:ua(e.rarity)}}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg",style:{backgroundColor:ua(e.rarity)},children:er(e.type)}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"font-bold text-lg",style:{color:ua(e.rarity)},children:e.name}),l.jsxs("div",{className:"text-xs text-gray-400 bg-gray-700/50 px-2 py-1 rounded-lg",children:["Level ",e.level,"  ",e.rarity]})]}),l.jsxs("div",{className:"text-sm space-y-1 mb-2",children:[l.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(e.baseStats).map(([f,v])=>typeof v=="number"&&v>0&&l.jsxs("span",{className:"text-green-400 bg-green-900/20 px-2 py-1 rounded-lg text-xs",children:["+",d(f,v)," ",u(f)]},f))}),e.affixes&&e.affixes.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.affixes.map((f,v)=>l.jsxs("span",{className:"text-purple-300 bg-purple-900/20 px-2 py-1 rounded-lg text-xs",children:[f.name,": +",d(f.stat,f.value)," ",u(f.stat)]},v))})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.socketTypes.map(f=>l.jsxs("span",{className:"bg-amber-900/30 text-amber-300 px-2 py-1 rounded-lg text-xs border border-amber-700/50",children:[" ",f]},f))})]}),l.jsxs("div",{className:"flex flex-col gap-3 items-end",children:[l.jsxs("div",{className:"text-yellow-400 text-sm font-medium bg-yellow-900/20 px-3 py-1 rounded-lg",children:[" ",e.value.toLocaleString()]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:f=>{f.stopPropagation(),n(e.id)},className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white text-xs py-2 px-4 rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-blue-500/30",children:" Embed"}),l.jsx("button",{onClick:f=>{f.stopPropagation(),a(e.id)},className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white text-xs py-2 px-3 rounded-lg transition-all duration-200 shadow-lg hover:shadow-red-500/30",children:""})]})]})]})]})}),v0=j.memo(function(){var A,Q,X;const{state:t,actions:n,dispatch:a}=ut(),[s,r]=j.useState(0),[i,c]=j.useState("list"),[d,u]=j.useState("all"),[f,v]=j.useState(null),[x,h]=j.useState(null),[w,N]=j.useState(null),y=10,b=10,m=j.useMemo(()=>{let L=[...t.player.stones||[]];const G=new Set;return L=L.filter(le=>G.has(le.id)?!1:(G.add(le.id),!0)),d!=="all"&&(L=L.filter(le=>le.type===d)),L.sort((le,k)=>{const I=["Divine","Mythical","Rare","Common"],ce=I.indexOf(le.rarity)-I.indexOf(k.rarity);return ce!==0?ce:k.level-le.level})},[t.player.stones,d]),p=j.useMemo(()=>{var G,le;const L={all:((G=t.player.stones)==null?void 0:G.length)||0,ruby:0,sapphire:0,emerald:0,diamond:0,topaz:0,amethyst:0,onyx:0,opal:0,garnet:0,citrine:0,peridot:0,turquoise:0};return(le=t.player.stones)==null||le.forEach(k=>{L.hasOwnProperty(k.type)&&L[k.type]++}),L},[t.player.stones,d]),g=j.useMemo(()=>{const L=Math.min(b,Math.ceil(m.length/y)),G=b*y,le=m.slice(0,G),k=s*y,I=le.slice(k,k+y),ce=m.length-G;return{totalPages:L,displayStones:le,currentItems:I,excessItems:ce}},[m,s,y,b]),S=j.useMemo(()=>(t.player.stones||[]).reduce((L,G)=>L+(G.value||0),0),[t.player.stones]),P=j.useCallback(()=>{const L=e0(t.player.level,!1);n.addStone(L)},[t.player.level,n]),T=j.useCallback(()=>{n.sellAllStones()},[n]),C=j.useCallback((L,G,le)=>{const k=t.player.equipment[L];if(!(!k||!md(k)))try{const I=Qm(k,G,le);a({type:"UPDATE_EQUIPMENT",payload:{slot:L,equipment:I}}),v(null)}catch(I){console.error("Failed to embed stone:",I)}},[t.player.equipment,a]),_=j.useCallback((L,G)=>{const le=t.player.equipment[L];if(!(!le||!le.sockets))try{const{equipment:k,removedStoneId:I}=Zm(le,G);a({type:"UPDATE_EQUIPMENT",payload:{slot:L,equipment:k}})}catch(k){console.error("Failed to remove stone:",k)}},[a]),D=j.useCallback(L=>{c(L),r(0)},[]),E=j.useCallback(L=>{L!==d&&(u(L),r(0))},[d]),ie=j.useCallback(L=>{v(L)},[]),q=j.useCallback(L=>{n.removeStone(L)},[n]),V=j.useCallback((L,G)=>{if(!(w!=null&&w.isPersistent)){const le=L.currentTarget.getBoundingClientRect(),k=400;N({stone:G,position:{x:le.right+10>window.innerWidth-k?le.left-k-10:le.right+10,y:Math.max(10,le.top)}})}},[w]),me=j.useCallback(()=>{w!=null&&w.isPersistent||N(null)},[w]),xe=j.useCallback((L,G)=>{const le=L.currentTarget.getBoundingClientRect(),k=400;N({stone:G,position:{x:le.right+10>window.innerWidth-k?le.left-k-10:le.right+10,y:Math.max(10,le.top)},isPersistent:!0})},[]);j.useCallback(()=>{N(null)},[]);const oe=()=>Object.entries(t.player.equipment).map(([L,G])=>{var le,k,I;return!G||!G.sockets||G.sockets.maxSockets===0?null:l.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-5 mb-4 border border-gray-600/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center shadow-lg",children:l.jsx("span",{className:"text-white font-bold text-lg",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-bold text-lg capitalize",children:L}),l.jsx("p",{className:"text-gray-300 text-sm",children:G.name})]})]}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:Array.from({length:((le=G.sockets)==null?void 0:le.maxSockets)||0},(ce,ze)=>{var J;const W=((J=G.sockets)==null?void 0:J.stones[ze])===null;return l.jsxs("div",{className:`relative w-14 h-14 border-2 rounded-xl flex items-center justify-center cursor-pointer transition-all duration-300 group ${W?"border-gray-500 bg-gray-700/50 hover:border-gray-400 hover:bg-gray-600/50 hover:scale-105":"border-amber-400 bg-gradient-to-br from-amber-900/50 to-orange-900/50 hover:border-amber-300 hover:scale-105 shadow-lg shadow-amber-500/20"}`,onClick:()=>{W&&f?C(L,f,ze):W||_(L,ze)},children:[l.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gray-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-gray-300",children:ze+1})}),W?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-gray-400 text-2xl group-hover:text-gray-300 transition-colors",children:"+"}),l.jsx("span",{className:"text-xs text-gray-500 group-hover:text-gray-400 transition-colors",children:"Empty"})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-amber-300 text-2xl group-hover:text-amber-200 transition-colors",children:""}),l.jsx("span",{className:"text-xs text-amber-400 group-hover:text-amber-300 transition-colors",children:"Filled"})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/0 to-purple-500/0 group-hover:from-blue-500/10 group-hover:to-purple-500/10 rounded-xl transition-all duration-300"})]},ze)})}),l.jsx("div",{className:"mt-3 pt-3 border-t border-gray-600/50",children:l.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[l.jsxs("span",{children:["Sockets: ",((k=G.sockets)==null?void 0:k.stones.filter(ce=>ce!==null).length)||0,"/",((I=G.sockets)==null?void 0:I.maxSockets)||0]}),l.jsx("span",{className:"text-amber-400",children:"Click to embed/remove"})]})})]},L)}).filter(Boolean);return l.jsx(g0,{onDrop:(L,G,le)=>{if(L.type==="stone"&&G==="socket"){const[k,I]=le.split("-");C(k,L.id,parseInt(I))}},validateDrop:(L,G,le)=>{if(L.type==="stone"&&G==="socket"){const[k,I]=le.split("-"),ce=t.player.equipment[k];return ce?md(ce):!1}return!1},children:l.jsx("div",{className:"flex flex-col h-full bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:l.jsxs("div",{className:"relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-900/20 via-blue-900/20 to-indigo-900/20"}),l.jsxs("div",{className:"relative flex justify-between items-center p-6 bg-gray-800/80 backdrop-blur-sm border-b border-gray-600/50 shadow-lg",children:[l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Stone Management"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Enhance your equipment with magical stones"})]})]})}),l.jsxs("div",{className:"flex gap-3 items-center",children:[l.jsx("div",{className:"bg-gray-700/50 backdrop-blur-sm rounded-lg px-4 py-2 border border-gray-600/50",children:l.jsxs("div",{className:"text-yellow-400 text-lg font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-xl",children:""}),t.player.gold&&typeof t.player.gold=="number"&&!isNaN(t.player.gold)?t.player.gold.toFixed(2):"0.00"]})}),l.jsx(y0,{items:m,onFilterChange:L=>{},filterGroups:[{id:"type",label:"Stone Type",type:"single",options:Object.keys(Qn).map(L=>({id:L,label:L,value:L}))},{id:"rarity",label:"Rarity",type:"single",options:[{id:"common",label:"Common",value:"common"},{id:"uncommon",label:"Uncommon",value:"uncommon"},{id:"rare",label:"Rare",value:"rare"},{id:"epic",label:"Epic",value:"epic"},{id:"legendary",label:"Legendary",value:"legendary"}]}]}),l.jsx("button",{onClick:()=>D("list"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i==="list"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:" List View"}),l.jsx("button",{onClick:()=>D("grid"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i==="grid"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:" Grid View"}),l.jsx("button",{onClick:P,className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors text-white font-medium",children:" Generate Stone"}),l.jsx("button",{onClick:T,className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors text-white font-medium",disabled:t.player.stones.length===0,children:" Sell All Stones"})]})]}),l.jsx("div",{className:"p-3 bg-gray-800/50 border-b border-gray-600",children:l.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[l.jsxs("button",{onClick:()=>E("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap cursor-pointer ${d==="all"?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[" All Stones ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",p.all,")"]})]}),Object.entries(Qn).map(([L,G])=>l.jsxs("button",{onClick:()=>E(L),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap cursor-pointer ${d===L?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:[er(L)," ",G.name," ",l.jsxs("span",{className:"text-xs opacity-75",children:["(",p[L]||0,")"]})]},L))]})}),l.jsx("div",{className:"px-6 py-4 bg-gray-700/30 backdrop-blur-sm border-b border-gray-600/30",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-gray-800/50 rounded-lg px-4 py-2 border border-gray-600/50",children:[l.jsx("span",{className:"text-blue-400 text-lg",children:""}),l.jsxs("div",{className:"text-gray-300 text-sm",children:[l.jsxs("span",{className:"font-medium text-white",children:[d==="all"?"Total Stones":`${((A=Qn[d])==null?void 0:A.name)||d}`,":"]}),l.jsx("span",{className:"ml-2 text-blue-400 font-bold",children:m.length}),d!=="all"&&l.jsxs("span",{className:"text-gray-400 ml-1",children:["/ ",((Q=t.player.stones)==null?void 0:Q.length)||0," total"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-gray-800/50 rounded-lg px-4 py-2 border border-gray-600/50",children:[l.jsx("span",{className:"text-yellow-400 text-lg",children:""}),l.jsxs("div",{className:"text-gray-300 text-sm",children:[l.jsx("span",{className:"font-medium text-white",children:"Total Value:"}),l.jsx("span",{className:"ml-2 text-yellow-400 font-bold",children:S.toFixed(2)})]})]})]}),f&&l.jsxs("div",{className:"flex items-center gap-2 bg-blue-900/30 border border-blue-500/50 rounded-lg px-4 py-2",children:[l.jsx("span",{className:"text-blue-400 text-lg",children:""}),l.jsx("span",{className:"text-blue-300 text-sm font-medium",children:"Stone selected - click equipment socket to embed"})]})]})}),g.excessItems>0&&l.jsxs("div",{className:"mx-4 mt-4 p-3 bg-orange-900/30 border border-orange-600/40 rounded-lg text-orange-300 text-sm",children:[" ",g.excessItems," excess stones converted to gold automatically"]}),l.jsxs("div",{className:"flex-1 flex gap-4 p-4 overflow-hidden",children:[l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-200",children:["Stones (",m.length,")"]}),g.totalPages>1&&l.jsxs("div",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:["Page ",s+1," of ",g.totalPages]})]}),l.jsxs("div",{className:`flex-1 overflow-y-auto ${i==="grid"?"grid grid-cols-2 gap-3 p-3":"space-y-3 p-2"}`,children:[g.currentItems.length===0&&l.jsxs("div",{className:"text-gray-400 text-sm col-span-2 text-center py-8",children:[d==="all"?"No stones yet.":`No ${((X=Qn[d])==null?void 0:X.name)||d} stones yet.`,l.jsx("br",{}),l.jsx("span",{className:"text-xs",children:'Click "Generate Stone" to create stones'})]}),g.currentItems.map(L=>l.jsx(x0,{item:L,type:"stone",className:`transition-all ${f===L.id?"ring-2 ring-blue-500":""}`,children:l.jsx(Ox,{stone:L,viewMode:i,onEmbed:ie,onRemove:q,onHover:V,onLeave:me,onClick:xe,isSelected:f===L.id})},L.id))]}),g.totalPages>1&&l.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-600 bg-gray-700/30 rounded-lg p-3",children:[l.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",onClick:()=>r(L=>Math.max(0,L-1)),disabled:s===0,children:" Previous"}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-300",children:[l.jsxs("span",{className:"bg-gray-600 px-3 py-1 rounded-lg font-medium",children:["Page ",s+1," of ",g.totalPages]}),g.totalPages>=b&&l.jsxs("span",{className:"text-orange-400 text-xs bg-orange-900/30 px-2 py-1 rounded",children:["(Max ",b," pages)"]})]}),l.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",onClick:()=>r(L=>Math.min(g.totalPages-1,L+1)),disabled:s===g.totalPages-1,children:"Next "})]})]}),l.jsxs("div",{className:"w-80 flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center shadow-lg",children:l.jsx("span",{className:"text-white font-bold text-lg",children:""})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent",children:"Equipment Sockets"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Embed stones to enhance gear"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[oe(),oe().length===0&&l.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 text-center border border-gray-600/50 shadow-lg",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-700/50 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-gray-400 text-2xl",children:""})}),l.jsx("p",{className:"text-gray-400 font-medium mb-2",children:"No equipment with sockets found"}),l.jsx("p",{className:"text-gray-500 text-sm",children:"Equip items with sockets to embed stones"})]})]}),l.jsxs("div",{className:"mt-4 bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-4 border border-gray-600/50 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("span",{className:"text-blue-400 text-lg",children:""}),l.jsx("h4",{className:"text-lg font-bold text-white",children:"How to Use"})]}),l.jsxs("ul",{className:"text-gray-300 text-sm space-y-2",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsxs("span",{children:["Select a stone by clicking ",l.jsx("span",{className:"text-blue-400 font-medium",children:'" Embed"'})]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsxs("span",{children:["Click an empty socket ",l.jsx("span",{className:"text-gray-400 font-medium",children:"(+)"})," to embed the stone"]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsxs("span",{children:["Click a filled socket ",l.jsx("span",{className:"text-amber-400 font-medium",children:"()"})," to remove the stone"]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsxs("span",{children:["Stones provide ",l.jsx("span",{className:"text-purple-400 font-medium",children:"stat bonuses"})," when embedded"]})]})]})]})]})]}),w&&l.jsx("div",{style:{position:"fixed",left:w.position.x,top:w.position.y,zIndex:1e3},children:l.jsx(l0,{type:"stone",item:w.stone,children:l.jsx("div",{})})})]})})})});v0.displayName="StonePanel";const b0=({equipment:e,stones:t=[],className:n="",showSockets:a=!0,interactive:s=!0,onStoneEmbed:r,onStoneRemove:i,onEquipmentClick:c})=>{const[d,u]=j.useState(!1),f=j.useMemo(()=>{const h=e.sockets||0,w=[];switch(e.type){case"weapon":for(let N=0;N<h;N++)w.push({x:20+N*25,y:60+N%2*20});break;case"armor":for(let N=0;N<h;N++){const y=Math.floor(N/2),b=N%2;w.push({x:30+b*40,y:30+y*30})}break;case"accessory":for(let N=0;N<h;N++){const y=N/h*2*Math.PI;w.push({x:50+Math.cos(y)*25,y:50+Math.sin(y)*25})}break;default:for(let N=0;N<h;N++)w.push({x:20+N*30,y:70})}return w},[e.type,e.sockets]),v=()=>({weapon:"",armor:"",helmet:"",boots:"",gloves:"",ring:"",amulet:"",belt:""})[e.type]||"",x=()=>{const h=e.rarity||"common",w=ot("rarity",h);return{boxShadow:`0 0 20px ${w}40, inset 0 0 20px ${w}20`,borderColor:w}};return l.jsxs("div",{className:`
        relative w-32 h-32 ${n}
        border-2 rounded-lg
        bg-gradient-to-br from-gray-800 to-gray-900
        transition-all duration-300
        ${s?"cursor-pointer hover:scale-105":""}
        ${d?"z-10":""}
      `,style:x(),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onClick:c,children:[l.jsx("div",{className:"absolute inset-0 opacity-10",children:l.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",children:[l.jsx("defs",{children:l.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:l.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})})}),l.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),l.jsx("div",{className:"absolute top-2 left-2 text-2xl",children:v()}),e.level&&l.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-1 rounded",children:["Lv.",e.level]}),l.jsx("div",{className:"absolute bottom-2 left-2 right-2 text-xs font-medium truncate",style:{color:ot("rarity",(e.rarity||"common").toLowerCase())},children:e.name}),a&&f.map((h,w)=>{const N=t.find(y=>y.socketIndex===w);return l.jsx("div",{className:"absolute",style:{left:`${h.x}%`,top:`${h.y}%`,transform:"translate(-50%, -50%)"},children:l.jsx(Gn,{socketIndex:w,equipmentId:e.id,stone:N,isEmpty:!N,size:"sm",onStoneEmbed:r,onStoneRemove:i})},w)}),e.sockets>0&&l.jsxs("div",{className:"absolute bottom-2 right-2 bg-blue-600/80 text-white text-xs px-1 rounded",children:[t.length,"/",e.sockets]}),d&&s&&l.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-lg flex items-center justify-center",children:l.jsx("div",{className:"bg-black/80 text-white px-2 py-1 rounded text-xs",children:"Click for details"})}),e.enhancement>0&&l.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:l.jsxs("div",{className:"bg-yellow-500 text-black text-xs font-bold px-1 rounded",children:["+",e.enhancement]})})]})},Ux=({equipment:e,stones:t,className:n="",onEquipmentClick:a,onStoneEmbed:s,onStoneRemove:r,onEquipmentHover:i,onEquipmentLeave:c})=>{const d=f=>(v,x)=>{s&&s(f,v,x)},u=f=>v=>{r&&r(f,v)};return l.jsx("div",{className:`grid grid-cols-4 gap-4 ${n}`,children:e.map(f=>{const v=t.filter(x=>x.equipmentId===f.id);return l.jsx("div",{onMouseEnter:x=>i==null?void 0:i(x,f),onMouseLeave:c,children:l.jsx(b0,{equipment:f,stones:v,onEquipmentClick:()=>a==null?void 0:a(f),onStoneEmbed:d(f.id),onStoneRemove:u(f.id),interactive:!0})},f.id)})})},cl=({slotType:e,equipment:t,stones:n=[],className:a="",onEquipmentChange:s,onStoneEmbed:r,onStoneRemove:i})=>{const c=()=>({weapon:"",helmet:"",armor:"",gloves:"",boots:"",ring1:"",ring2:"",amulet:"",belt:""})[e]||"";return t?l.jsx(b0,{equipment:t,stones:n,className:a,onEquipmentClick:()=>s==null?void 0:s(null),onStoneEmbed:r,onStoneRemove:i}):l.jsxs("div",{className:`
        w-32 h-32 ${a}
        border-2 border-dashed border-gray-600
        rounded-lg bg-gray-800/50
        flex flex-col items-center justify-center
        text-gray-500 text-sm
        transition-all duration-200
        hover:border-blue-400 hover:bg-blue-400/10
      `,children:[l.jsx("div",{className:"text-2xl mb-1",children:c()}),l.jsx("div",{className:"capitalize",children:e})]})},Gx=({item:e,position:t,level:n,onClose:a,onLevelChange:s})=>{const r=()=>{switch(n){case"quick":return l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"font-bold text-lg",style:{color:ot("rarity",(e.rarity||"common").toLowerCase())},children:e.name||"Unknown Item"}),l.jsx("div",{className:"text-sm text-gray-400",children:e.type||"Unknown Type"}),e.level&&l.jsxs("div",{className:"text-sm text-blue-400",children:["Level ",e.level]})]});case"detailed":return l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"font-bold text-lg",style:{color:ot("rarity",(e.rarity||"common").toLowerCase())},children:e.name||"Unknown Item"}),l.jsx("div",{className:"text-sm text-gray-400",children:e.type||"Unknown Type"}),e.level&&l.jsxs("div",{className:"text-sm text-blue-400",children:["Level ",e.level]})]}),e.baseStats&&Object.keys(e.baseStats).length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-blue-400 font-semibold text-sm mb-2",children:"Stats:"}),l.jsx("div",{className:"space-y-1",children:Object.entries(e.baseStats).map(([i,c])=>typeof c=="number"&&c>0&&l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{className:"text-gray-300",children:[i,":"]}),l.jsxs("span",{className:"text-green-400",children:["+",c]})]},i))})]})]});default:return l.jsxs("div",{className:"text-sm text-gray-400",children:[n," view not implemented in showcase"]})}};return l.jsxs("div",{className:"fixed z-50 bg-gray-900 border border-gray-600 rounded-lg p-3 shadow-lg max-w-sm",style:{left:t.x,top:t.y,transform:"translate(-50%, -100%)"},children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("div",{className:"flex space-x-2",children:["quick","detailed","comparison","advanced"].map(i=>l.jsx("button",{onClick:()=>s(i),className:`px-2 py-1 text-xs rounded ${n===i?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:i},i))}),l.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white ml-2",children:""})]}),r()]})},Bn=[{id:"sword1",name:"Flaming Sword of Power",type:"weapon",rarity:"legendary",level:15,enhancement:3,sockets:2,equipped:!0,baseStats:{damage:150,critChance:15},affixes:[{name:"Fire Damage",value:"+25-40"},{name:"Critical Strike Chance",value:"+15%"}]},{id:"armor1",name:"Dragon Scale Armor",type:"armor",rarity:"epic",level:12,sockets:3,equipped:!1,baseStats:{armor:200,health:100},affixes:[{name:"Fire Resistance",value:"+30%"},{name:"Health",value:"+100"}]},{id:"helmet1",name:"Crown of Wisdom",type:"helmet",rarity:"rare",level:10,sockets:1,equipped:!1,baseStats:{armor:80,mana:50},affixes:[{name:"Mana",value:"+50"},{name:"Spell Damage",value:"+20%"}]},{id:"boots1",name:"Swift Boots",type:"boots",rarity:"uncommon",level:8,sockets:0,equipped:!0,baseStats:{armor:40,speed:25},affixes:[{name:"Movement Speed",value:"+25%"}]}],fa=[{id:"stone1",name:"Ruby of Strength",type:"strength",rarity:"rare",level:5,baseStats:{damage:15,strength:10},equipmentId:"sword1",socketIndex:0},{id:"stone2",name:"Sapphire of Wisdom",type:"intelligence",rarity:"epic",level:7,baseStats:{mana:30,intelligence:15}},{id:"stone3",name:"Emerald of Vitality",type:"vitality",rarity:"uncommon",level:3,baseStats:{health:50,vitality:8}}],Vx=()=>{const[e,t]=j.useState(Bn),[n,a]=j.useState("inventory"),[s,r]=j.useState({item:null,position:null,level:"quick"}),i=[{id:"rarity",label:"Rarity",type:"multiple",options:[{id:"uncommon",label:"Uncommon",value:"uncommon",color:ot("rarity","uncommon")},{id:"rare",label:"Rare",value:"rare",color:ot("rarity","rare")},{id:"epic",label:"Epic",value:"epic",color:ot("rarity","epic")},{id:"legendary",label:"Legendary",value:"legendary",color:ot("rarity","legendary")}]},{id:"type",label:"Equipment Type",type:"multiple",options:[{id:"weapon",label:"Weapons",value:"weapon",icon:""},{id:"armor",label:"Armor",value:"armor",icon:""},{id:"helmet",label:"Helmets",value:"helmet",icon:""},{id:"boots",label:"Boots",value:"boots",icon:""}]},{id:"equipped",label:"Equipment Status",type:"single",options:[{id:"all",label:"All Items",value:null},{id:"equipped",label:"Equipped",value:!0},{id:"unequipped",label:"Not Equipped",value:!1}]}],c=(x,h,w="quick")=>{const N=x.currentTarget.getBoundingClientRect();r({item:h,position:{x:N.right+10,y:N.top},level:w})},d=()=>{r({item:null,position:null,level:"quick"})},u=(x,h,w)=>x.type&&h==="socket",f=(x,h,w)=>{console.log("Drop:",x,"to",h,w)},v=({id:x,label:h,icon:w})=>l.jsxs("button",{onClick:()=>a(x),className:`
        flex items-center gap-2 px-4 py-2 rounded-lg transition-colors
        ${n===x?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}
      `,children:[l.jsx("span",{children:w}),h]});return l.jsx(g0,{onDrop:f,validateDrop:u,children:l.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"UI Enhancement Showcase"}),l.jsx("p",{className:"text-gray-400",children:"Demonstrating enhanced tooltips, drag-and-drop, smart filtering, and visual improvements"})]}),l.jsxs("div",{className:"flex justify-center gap-4",children:[l.jsx(v,{id:"inventory",label:"Enhanced Inventory",icon:""}),l.jsx(v,{id:"character",label:"Character Equipment",icon:""}),l.jsx(v,{id:"stones",label:"Stone Management",icon:""})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[n==="inventory"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Enhanced Inventory System"}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Smart Filtering & Search"}),l.jsx(y0,{items:Bn,filterGroups:i,onFilterChange:t,showSearch:!0,showSort:!0})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Enhanced Equipment Display"}),l.jsx(Ux,{equipment:e,stones:fa,onEquipmentClick:x=>c({currentTarget:{getBoundingClientRect:()=>({right:400,top:200})}},x,"detailed"),onStoneEmbed:(x,h,w)=>console.log("Embed stone:",h,"in",x,"socket",w),onStoneRemove:(x,h)=>console.log("Remove stone from",x,"socket",h)})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Progressive Tooltip System"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Bn.slice(0,4).map(x=>l.jsxs("div",{className:"p-3 bg-gray-600 rounded cursor-pointer hover:bg-gray-500 transition-colors text-center",onMouseEnter:h=>c(h,x,"quick"),onMouseLeave:d,onClick:h=>c(h,x,"detailed"),children:[l.jsx("div",{className:"text-2xl mb-2",children:x.type==="weapon"?"":x.type==="armor"?"":x.type==="helmet"?"":""}),l.jsx("div",{className:"text-sm",style:{color:ot("rarity",(x.rarity||"common").toLowerCase())},children:x.name}),l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Hover: Quick | Click: Detailed"})]},x.id))})]})]}),n==="character"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Character Equipment Slots"}),l.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Equipment Slots"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsx("div",{}),l.jsx(cl,{slotType:"helmet",equipment:Bn.find(x=>x.type==="helmet")}),l.jsx("div",{}),l.jsx(cl,{slotType:"weapon",equipment:Bn.find(x=>x.type==="weapon"),stones:fa.filter(x=>x.equipmentId==="sword1")}),l.jsx(cl,{slotType:"armor",equipment:Bn.find(x=>x.type==="armor")}),l.jsx("div",{}),l.jsx("div",{}),l.jsx(cl,{slotType:"boots",equipment:Bn.find(x=>x.type==="boots")}),l.jsx("div",{})]})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Character Stats"}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total Damage:"}),l.jsx("span",{className:"font-medium text-red-400",children:"165"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total Armor:"}),l.jsx("span",{className:"font-medium text-blue-400",children:"320"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Total Health:"}),l.jsx("span",{className:"font-medium text-green-400",children:"150"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Crit Chance:"}),l.jsx("span",{className:"font-medium text-yellow-400",children:"15%"})]})]})]})]})]}),n==="stones"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Stone Management & Embedding"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Available Stones (Drag to Embed)"}),l.jsx("div",{className:"grid grid-cols-4 gap-3",children:fa.filter(x=>!x.equipmentId).map(x=>l.jsxs("div",{className:"text-center",children:[l.jsx(yd,{stone:x,size:"lg"}),l.jsx("div",{className:"text-xs mt-1",style:{color:ot("rarity",x.rarity)},children:x.name})]},x.id))})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Socket System Demo"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"text-sm font-medium",children:"Empty Sockets:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Gn,{socketIndex:0,equipmentId:"demo1",isEmpty:!0}),l.jsx(Gn,{socketIndex:1,equipmentId:"demo1",isEmpty:!0}),l.jsx(Gn,{socketIndex:2,equipmentId:"demo1",isEmpty:!0})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"text-sm font-medium",children:"Filled Sockets:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Gn,{socketIndex:0,equipmentId:"demo2",stone:fa[0],isEmpty:!1,onStoneRemove:()=>console.log("Remove stone")}),l.jsx(Gn,{socketIndex:1,equipmentId:"demo2",stone:fa[1],isEmpty:!1,onStoneRemove:()=>console.log("Remove stone")}),l.jsx(Gn,{socketIndex:2,equipmentId:"demo2",isEmpty:!0})]})]})]})]})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-4",children:"Stone Details"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:fa.map(x=>l.jsx("div",{className:"p-3 bg-gray-600 rounded cursor-pointer hover:bg-gray-500 transition-colors",onMouseEnter:h=>c(h,x,"detailed"),onMouseLeave:d,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(yd,{stone:x,disabled:!0}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",style:{color:ot("rarity",x.rarity)},children:x.name}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Level ",x.level,"  ",x.type]})]})]})},x.id))})]})]})]}),s.item&&s.position&&l.jsx(Gx,{item:s.item,position:s.position,level:s.level,onClose:d,onLevelChange:x=>r(h=>({...h,level:x}))}),l.jsxs("div",{className:"bg-blue-900/30 border border-blue-600 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium mb-2 text-blue-300",children:"How to Test Features:"}),l.jsxs("ul",{className:"space-y-1 text-sm text-blue-200",children:[l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Tooltips:"})," Hover for quick info, click for detailed view, Ctrl+click for comparison"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Filtering:"})," Use the filter system to search and sort items by various criteria"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Drag & Drop:"})," Drag stones to empty sockets in the Stone Management tab"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Visual Sockets:"})," See socket positions and embedded stones on equipment"]}),l.jsxs("li",{children:[" ",l.jsx("strong",{children:"Progressive Disclosure:"})," Information is revealed progressively based on interaction level"]})]})]})]})})})};function Wx(){const{state:e,actions:t}=ut(),[n,a]=j.useState(null),[s,r]=j.useState(!1),[i,c]=j.useState(!1),d=h=>{a(h)},u=()=>{a(null)},f=()=>{switch(n){case"combat":return l.jsx(yx,{});case"character":return l.jsx(fd,{});case"skills":return l.jsx(cx,{});case"passiveTree":return l.jsx(Tx,{isOpen:!0,onClose:u,treeData:e.player.passiveTreeData,treeState:e.player.passiveTreeState,onAllocateNode:t.allocatePassiveNode,availablePoints:e.player.passiveTreeState.availablePoints});case"equipment":return l.jsx($x,{isOpen:!0,onClose:u});case"characterSelection":return l.jsx(Ax,{onClose:u});case"stones":return l.jsx(v0,{});case"ui-showcase":return l.jsx(Vx,{});case"log":return l.jsx(gd,{});case"maps":return l.jsx(Ex,{isOpen:!0,onClose:u});case"fireball-test":return l.jsx(Rx,{});default:return null}},v=()=>{switch(n){case"combat":return"Combat";case"character":return"Character Status";case"skills":return"Passive Tree Bonuses";case"passiveTree":return"Passive Skill Tree";case"equipment":return"Character Equipment";case"characterSelection":return"Character Selection";case"stones":return"Stone Management";case"ui-showcase":return"UI Enhancement Showcase";case"log":return"Combat Log";case"maps":return"Map Device";case"fireball-test":return"Fireball Test Canvas";default:return""}},x=()=>{switch(n){case"stones":return"max-w-7xl";case"passiveTree":return"max-w-6xl";case"equipment":return"max-w-5xl";default:return"max-w-4xl"}};return l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(Zg,{onOpenModal:d}),l.jsxs("main",{className:"flex-1 flex",children:[l.jsx("div",{className:"w-80 min-w-80 bg-gray-900/95 border-r border-gray-600 flex flex-col",children:l.jsx(fd,{})}),l.jsxs("div",{className:"flex-1 flex flex-col p-2",children:[l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx(ex,{})}),l.jsx("div",{className:"mt-2",children:l.jsx(kx,{})}),l.jsx("div",{className:"h-64 mt-2",children:l.jsx(gd,{})})]}),l.jsx("div",{className:"w-80 min-w-80 bg-gray-900/95 border-l border-gray-600 flex flex-col",children:l.jsx(ox,{})})]}),l.jsx(vx,{isOpen:n!==null,onClose:u,title:v(),maxWidth:x(),children:f()}),l.jsx("button",{onClick:()=>t.spawnTrainingDummy(),className:"fixed bottom-64 right-4 px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",style:{background:"linear-gradient(135deg, #ec4899, #f472b6)",color:"white",border:"none"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 8px 25px rgba(236, 72, 153, 0.4)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 4px 14px rgba(236, 72, 153, 0.3)"},children:" Training Dummy"}),l.jsx("button",{onClick:()=>d("equipment"),className:"fixed bottom-48 right-4 px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",style:{background:"linear-gradient(135deg, #8b5cf6, #a855f7)",color:"white",border:"none"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 8px 25px rgba(139, 92, 246, 0.4)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 4px 14px rgba(139, 92, 246, 0.3)"},children:" Equipment"}),!i&&l.jsx("button",{onClick:()=>c(!0),className:"fixed bottom-32 right-4 px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",style:{background:"linear-gradient(135deg, var(--accent-tertiary), #22c55e)",color:"white",border:"none"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 8px 25px rgba(52, 211, 153, 0.4)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 4px 14px rgba(52, 211, 153, 0.3)"},children:" Inventory"}),!s&&l.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-16 right-4 px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",style:{background:"linear-gradient(135deg, var(--accent-primary), var(--accent-secondary))",color:"white",border:"none"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-2px)",h.currentTarget.style.boxShadow="0 8px 25px rgba(96, 165, 250, 0.4)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateY(0)",h.currentTarget.style.boxShadow="0 4px 14px rgba(96, 165, 250, 0.3)"},children:" Skills"}),l.jsx("button",{onClick:()=>d("ui-showcase"),className:"fixed bottom-8 right-20 bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",children:" UI Showcase"}),l.jsx("button",{onClick:()=>d("fireball-test"),className:"fixed bottom-8 right-4 bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",children:" Fireball Test"}),i&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>c(!1),children:l.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg shadow-2xl w-[90vw] h-[90vh] overflow-hidden flex flex-col",onClick:h=>h.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-600",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:" Inventory"}),l.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white transition-colors text-xl px-2 py-1 hover:bg-gray-700 rounded",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto",children:l.jsx(xx,{})})]})}),s&&l.jsx(Sx,{isOpen:!0,onClose:()=>r(!1)}),l.jsx(Px,{})]})}Tm(document.getElementById("root")).render(l.jsx(pn.StrictMode,{children:l.jsx(Xg,{children:l.jsx(Wx,{})})}));
