(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function pf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rc={exports:{}},Pa={},zc={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gr=Symbol.for("react.element"),hf=Symbol.for("react.portal"),gf=Symbol.for("react.fragment"),yf=Symbol.for("react.strict_mode"),xf=Symbol.for("react.profiler"),vf=Symbol.for("react.provider"),wf=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Sf=Symbol.for("react.suspense"),bf=Symbol.for("react.memo"),jf=Symbol.for("react.lazy"),xo=Symbol.iterator;function Nf(e){return e===null||typeof e!="object"?null:(e=xo&&e[xo]||e["@@iterator"],typeof e=="function"?e:null)}var Dc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$c=Object.assign,Fc={};function kl(e,t,n){this.props=e,this.context=t,this.refs=Fc,this.updater=n||Dc}kl.prototype.isReactComponent={};kl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bc(){}Bc.prototype=kl.prototype;function vi(e,t,n){this.props=e,this.context=t,this.refs=Fc,this.updater=n||Dc}var wi=vi.prototype=new Bc;wi.constructor=vi;$c(wi,kl.prototype);wi.isPureReactComponent=!0;var vo=Array.isArray,Oc=Object.prototype.hasOwnProperty,ki={current:null},Uc={key:!0,ref:!0,__self:!0,__source:!0};function qc(e,t,n){var l,r={},a=null,i=null;if(t!=null)for(l in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Oc.call(t,l)&&!Uc.hasOwnProperty(l)&&(r[l]=t[l]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var d=Array(c),f=0;f<c;f++)d[f]=arguments[f+2];r.children=d}if(e&&e.defaultProps)for(l in c=e.defaultProps,c)r[l]===void 0&&(r[l]=c[l]);return{$$typeof:gr,type:e,key:a,ref:i,props:r,_owner:ki.current}}function Cf(e,t){return{$$typeof:gr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Si(e){return typeof e=="object"&&e!==null&&e.$$typeof===gr}function Pf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wo=/\/+/g;function Wa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pf(""+e.key):t.toString(36)}function Br(e,t,n,l,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case gr:case hf:i=!0}}if(i)return i=e,r=r(i),e=l===""?"."+Wa(i,0):l,vo(r)?(n="",e!=null&&(n=e.replace(wo,"$&/")+"/"),Br(r,t,n,"",function(f){return f})):r!=null&&(Si(r)&&(r=Cf(r,n+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(wo,"$&/")+"/")+e)),t.push(r)),1;if(i=0,l=l===""?".":l+":",vo(e))for(var c=0;c<e.length;c++){a=e[c];var d=l+Wa(a,c);i+=Br(a,t,n,d,r)}else if(d=Nf(e),typeof d=="function")for(e=d.call(e),c=0;!(a=e.next()).done;)a=a.value,d=l+Wa(a,c++),i+=Br(a,t,n,d,r);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function kr(e,t,n){if(e==null)return e;var l=[],r=0;return Br(e,l,"","",function(a){return t.call(n,a,r++)}),l}function Mf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},Or={transition:null},_f={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:Or,ReactCurrentOwner:ki};function Gc(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:kr,forEach:function(e,t,n){kr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return kr(e,function(){t++}),t},toArray:function(e){return kr(e,function(t){return t})||[]},only:function(e){if(!Si(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=kl;ce.Fragment=gf;ce.Profiler=xf;ce.PureComponent=vi;ce.StrictMode=yf;ce.Suspense=Sf;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_f;ce.act=Gc;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=$c({},e.props),r=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=ki.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Oc.call(t,d)&&!Uc.hasOwnProperty(d)&&(l[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)l.children=n;else if(1<d){c=Array(d);for(var f=0;f<d;f++)c[f]=arguments[f+2];l.children=c}return{$$typeof:gr,type:e.type,key:r,ref:a,props:l,_owner:i}};ce.createContext=function(e){return e={$$typeof:wf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vf,_context:e},e.Consumer=e};ce.createElement=qc;ce.createFactory=function(e){var t=qc.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:kf,render:e}};ce.isValidElement=Si;ce.lazy=function(e){return{$$typeof:jf,_payload:{_status:-1,_result:e},_init:Mf}};ce.memo=function(e,t){return{$$typeof:bf,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Or.transition;Or.transition={};try{e()}finally{Or.transition=t}};ce.unstable_act=Gc;ce.useCallback=function(e,t){return ot.current.useCallback(e,t)};ce.useContext=function(e){return ot.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};ce.useEffect=function(e,t){return ot.current.useEffect(e,t)};ce.useId=function(){return ot.current.useId()};ce.useImperativeHandle=function(e,t,n){return ot.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return ot.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return ot.current.useReducer(e,t,n)};ce.useRef=function(e){return ot.current.useRef(e)};ce.useState=function(e){return ot.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return ot.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return ot.current.useTransition()};ce.version="18.3.1";zc.exports=ce;var M=zc.exports;const Gn=pf(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=M,Lf=Symbol.for("react.element"),Tf=Symbol.for("react.fragment"),Af=Object.prototype.hasOwnProperty,If=Ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rf={key:!0,ref:!0,__self:!0,__source:!0};function Vc(e,t,n){var l,r={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(l in t)Af.call(t,l)&&!Rf.hasOwnProperty(l)&&(r[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)r[l]===void 0&&(r[l]=t[l]);return{$$typeof:Lf,type:e,key:a,ref:i,props:r,_owner:If.current}}Pa.Fragment=Tf;Pa.jsx=Vc;Pa.jsxs=Vc;Rc.exports=Pa;var s=Rc.exports,Wc={exports:{}},bt={},Hc={exports:{}},Yc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,$){var H=L.length;L.push($);e:for(;0<H;){var re=H-1>>>1,k=L[re];if(0<r(k,$))L[re]=$,L[H]=k,H=re;else break e}}function n(L){return L.length===0?null:L[0]}function l(L){if(L.length===0)return null;var $=L[0],H=L.pop();if(H!==$){L[0]=H;e:for(var re=0,k=L.length,D=k>>>1;re<D;){var ye=2*(re+1)-1,Xt=L[ye],xt=ye+1,B=L[xt];if(0>r(Xt,H))xt<k&&0>r(B,Xt)?(L[re]=B,L[xt]=H,re=xt):(L[re]=Xt,L[ye]=H,re=ye);else if(xt<k&&0>r(B,H))L[re]=B,L[xt]=H,re=xt;else break e}}return $}function r(L,$){var H=L.sortIndex-$.sortIndex;return H!==0?H:L.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var d=[],f=[],y=1,w=null,x=3,v=!1,j=!1,h=!1,u=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(L){for(var $=n(f);$!==null;){if($.callback===null)l(f);else if($.startTime<=L)l(f),$.sortIndex=$.expirationTime,t(d,$);else break;$=n(f)}}function S(L){if(h=!1,g(L),!j)if(n(d)!==null)j=!0,le(b);else{var $=n(f);$!==null&&X(S,$.startTime-L)}}function b(L,$){j=!1,h&&(h=!1,p(G),G=-1),v=!0;var H=x;try{for(g($),w=n(d);w!==null&&(!(w.expirationTime>$)||L&&!U());){var re=w.callback;if(typeof re=="function"){w.callback=null,x=w.priorityLevel;var k=re(w.expirationTime<=$);$=e.unstable_now(),typeof k=="function"?w.callback=k:w===n(d)&&l(d),g($)}else l(d);w=n(d)}if(w!==null)var D=!0;else{var ye=n(f);ye!==null&&X(S,ye.startTime-$),D=!1}return D}finally{w=null,x=H,v=!1}}var P=!1,F=null,G=-1,E=5,_=-1;function U(){return!(e.unstable_now()-_<E)}function se(){if(F!==null){var L=e.unstable_now();_=L;var $=!0;try{$=F(!0,L)}finally{$?A():(P=!1,F=null)}}else P=!1}var A;if(typeof m=="function")A=function(){m(se)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,K=R.port2;R.port1.onmessage=se,A=function(){K.postMessage(null)}}else A=function(){u(se,0)};function le(L){F=L,P||(P=!0,A())}function X(L,$){G=u(function(){L(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,le(b))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(L){switch(x){case 1:case 2:case 3:var $=3;break;default:$=x}var H=x;x=$;try{return L()}finally{x=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=x;x=L;try{return $()}finally{x=H}},e.unstable_scheduleCallback=function(L,$,H){var re=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?re+H:re):H=re,L){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=H+k,L={id:y++,callback:$,priorityLevel:L,startTime:H,expirationTime:k,sortIndex:-1},H>re?(L.sortIndex=H,t(f,L),n(d)===null&&L===n(f)&&(h?(p(G),G=-1):h=!0,X(S,H-re))):(L.sortIndex=k,t(d,L),j||v||(j=!0,le(b))),L},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(L){var $=x;return function(){var H=x;x=$;try{return L.apply(this,arguments)}finally{x=H}}}})(Yc);Hc.exports=Yc;var zf=Hc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df=M,St=zf;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xc=new Set,Ql={};function Vn(e,t){pl(e,t),pl(e+"Capture",t)}function pl(e,t){for(Ql[e]=t,e=0;e<t.length;e++)Xc.add(t[e])}var nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cs=Object.prototype.hasOwnProperty,$f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ko={},So={};function Ff(e){return Cs.call(So,e)?!0:Cs.call(ko,e)?!1:$f.test(e)?So[e]=!0:(ko[e]=!0,!1)}function Bf(e,t,n,l){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Of(e,t,n,l){if(t===null||typeof t>"u"||Bf(e,t,n,l))return!0;if(l)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,n,l,r,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var bi=/[\-:]([a-z])/g;function ji(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bi,ji);Je[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bi,ji);Je[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bi,ji);Je[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ni(e,t,n,l){var r=Je.hasOwnProperty(t)?Je[t]:null;(r!==null?r.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Of(t,n,r,l)&&(n=null),l||r===null?Ff(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,l=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,l?e.setAttributeNS(l,t,n):e.setAttribute(t,n))))}var sn=Df.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sr=Symbol.for("react.element"),Xn=Symbol.for("react.portal"),Qn=Symbol.for("react.fragment"),Ci=Symbol.for("react.strict_mode"),Ps=Symbol.for("react.profiler"),Qc=Symbol.for("react.provider"),Kc=Symbol.for("react.context"),Pi=Symbol.for("react.forward_ref"),Ms=Symbol.for("react.suspense"),_s=Symbol.for("react.suspense_list"),Mi=Symbol.for("react.memo"),un=Symbol.for("react.lazy"),Zc=Symbol.for("react.offscreen"),bo=Symbol.iterator;function Cl(e){return e===null||typeof e!="object"?null:(e=bo&&e[bo]||e["@@iterator"],typeof e=="function"?e:null)}var Ae=Object.assign,Ha;function Rl(e){if(Ha===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ha=t&&t[1]||""}return`
`+Ha+e}var Ya=!1;function Xa(e,t){if(!e||Ya)return"";Ya=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var l=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){l=f}e.call(t.prototype)}else{try{throw Error()}catch(f){l=f}e()}}catch(f){if(f&&l&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),a=l.stack.split(`
`),i=r.length-1,c=a.length-1;1<=i&&0<=c&&r[i]!==a[c];)c--;for(;1<=i&&0<=c;i--,c--)if(r[i]!==a[c]){if(i!==1||c!==1)do if(i--,c--,0>c||r[i]!==a[c]){var d=`
`+r[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=c);break}}}finally{Ya=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Rl(e):""}function Uf(e){switch(e.tag){case 5:return Rl(e.type);case 16:return Rl("Lazy");case 13:return Rl("Suspense");case 19:return Rl("SuspenseList");case 0:case 2:case 15:return e=Xa(e.type,!1),e;case 11:return e=Xa(e.type.render,!1),e;case 1:return e=Xa(e.type,!0),e;default:return""}}function Es(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qn:return"Fragment";case Xn:return"Portal";case Ps:return"Profiler";case Ci:return"StrictMode";case Ms:return"Suspense";case _s:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kc:return(e.displayName||"Context")+".Consumer";case Qc:return(e._context.displayName||"Context")+".Provider";case Pi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mi:return t=e.displayName||null,t!==null?t:Es(e.type)||"Memo";case un:t=e._payload,e=e._init;try{return Es(e(t))}catch{}}return null}function qf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Es(t);case 8:return t===Ci?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Nn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gf(e){var t=Jc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(i){l=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(i){l=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function br(e){e._valueTracker||(e._valueTracker=Gf(e))}function eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Jc(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function ea(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ls(e,t){var n=t.checked;return Ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jo(e,t){var n=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;n=Nn(t.value!=null?t.value:n),e._wrapperState={initialChecked:l,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tu(e,t){t=t.checked,t!=null&&Ni(e,"checked",t,!1)}function Ts(e,t){tu(e,t);var n=Nn(t.value),l=t.type;if(n!=null)l==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?As(e,t.type,n):t.hasOwnProperty("defaultValue")&&As(e,t.type,Nn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function No(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function As(e,t,n){(t!=="number"||ea(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zl=Array.isArray;function il(e,t,n,l){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&l&&(e[n].defaultSelected=!0)}else{for(n=""+Nn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Is(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return Ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Co(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(zl(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Nn(n)}}function nu(e,t){var n=Nn(t.value),l=Nn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),l!=null&&(e.defaultValue=""+l)}function Po(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rs(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jr,ru=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,l,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,l,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jr=jr||document.createElement("div"),jr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vf=["Webkit","ms","Moz","O"];Object.keys(Ol).forEach(function(e){Vf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ol[t]=Ol[e]})});function au(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ol.hasOwnProperty(e)&&Ol[e]?(""+t).trim():t+"px"}function su(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var l=n.indexOf("--")===0,r=au(n,t[n],l);n==="float"&&(n="cssFloat"),l?e.setProperty(n,r):e[n]=r}}var Wf=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zs(e,t){if(t){if(Wf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Ds(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $s=null;function _i(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fs=null,ol=null,cl=null;function Mo(e){if(e=vr(e)){if(typeof Fs!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Ta(t),Fs(e.stateNode,e.type,t))}}function iu(e){ol?cl?cl.push(e):cl=[e]:ol=e}function ou(){if(ol){var e=ol,t=cl;if(cl=ol=null,Mo(e),t)for(e=0;e<t.length;e++)Mo(t[e])}}function cu(e,t){return e(t)}function uu(){}var Qa=!1;function du(e,t,n){if(Qa)return e(t,n);Qa=!0;try{return cu(e,t,n)}finally{Qa=!1,(ol!==null||cl!==null)&&(uu(),ou())}}function Zl(e,t){var n=e.stateNode;if(n===null)return null;var l=Ta(n);if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var Bs=!1;if(nn)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{Bs=!1}function Hf(e,t,n,l,r,a,i,c,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(y){this.onError(y)}}var Ul=!1,ta=null,na=!1,Os=null,Yf={onError:function(e){Ul=!0,ta=e}};function Xf(e,t,n,l,r,a,i,c,d){Ul=!1,ta=null,Hf.apply(Yf,arguments)}function Qf(e,t,n,l,r,a,i,c,d){if(Xf.apply(this,arguments),Ul){if(Ul){var f=ta;Ul=!1,ta=null}else throw Error(O(198));na||(na=!0,Os=f)}}function Wn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function fu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _o(e){if(Wn(e)!==e)throw Error(O(188))}function Kf(e){var t=e.alternate;if(!t){if(t=Wn(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,l=t;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(l=r.return,l!==null){n=l;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return _o(r),e;if(a===l)return _o(r),t;a=a.sibling}throw Error(O(188))}if(n.return!==l.return)n=r,l=a;else{for(var i=!1,c=r.child;c;){if(c===n){i=!0,n=r,l=a;break}if(c===l){i=!0,l=r,n=a;break}c=c.sibling}if(!i){for(c=a.child;c;){if(c===n){i=!0,n=a,l=r;break}if(c===l){i=!0,l=a,n=r;break}c=c.sibling}if(!i)throw Error(O(189))}}if(n.alternate!==l)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function mu(e){return e=Kf(e),e!==null?pu(e):null}function pu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pu(e);if(t!==null)return t;e=e.sibling}return null}var hu=St.unstable_scheduleCallback,Eo=St.unstable_cancelCallback,Zf=St.unstable_shouldYield,Jf=St.unstable_requestPaint,ze=St.unstable_now,em=St.unstable_getCurrentPriorityLevel,Ei=St.unstable_ImmediatePriority,gu=St.unstable_UserBlockingPriority,la=St.unstable_NormalPriority,tm=St.unstable_LowPriority,yu=St.unstable_IdlePriority,Ma=null,Ht=null;function nm(e){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Ma,e,void 0,(e.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:am,lm=Math.log,rm=Math.LN2;function am(e){return e>>>=0,e===0?32:31-(lm(e)/rm|0)|0}var Nr=64,Cr=4194304;function Dl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ra(e,t){var n=e.pendingLanes;if(n===0)return 0;var l=0,r=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var c=i&~r;c!==0?l=Dl(c):(a&=i,a!==0&&(l=Dl(a)))}else i=n&~r,i!==0?l=Dl(i):a!==0&&(l=Dl(a));if(l===0)return 0;if(t!==0&&t!==l&&!(t&r)&&(r=l&-l,a=t&-t,r>=a||r===16&&(a&4194240)!==0))return t;if(l&4&&(l|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)n=31-Bt(t),r=1<<n,l|=e[n],t&=~r;return l}function sm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function im(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Bt(a),c=1<<i,d=r[i];d===-1?(!(c&n)||c&l)&&(r[i]=sm(c,t)):d<=t&&(e.expiredLanes|=c),a&=~c}}function Us(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xu(){var e=Nr;return Nr<<=1,!(Nr&4194240)&&(Nr=64),e}function Ka(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bt(t),e[t]=n}function om(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Bt(n),a=1<<r;t[r]=0,l[r]=-1,e[r]=-1,n&=~a}}function Li(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Bt(n),r=1<<l;r&t|e[l]&t&&(e[l]|=t),n&=~r}}var ve=0;function vu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wu,Ti,ku,Su,bu,qs=!1,Pr=[],yn=null,xn=null,vn=null,Jl=new Map,er=new Map,mn=[],cm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lo(e,t){switch(e){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":Jl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(t.pointerId)}}function Ml(e,t,n,l,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:a,targetContainers:[r]},t!==null&&(t=vr(t),t!==null&&Ti(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function um(e,t,n,l,r){switch(t){case"focusin":return yn=Ml(yn,e,t,n,l,r),!0;case"dragenter":return xn=Ml(xn,e,t,n,l,r),!0;case"mouseover":return vn=Ml(vn,e,t,n,l,r),!0;case"pointerover":var a=r.pointerId;return Jl.set(a,Ml(Jl.get(a)||null,e,t,n,l,r)),!0;case"gotpointercapture":return a=r.pointerId,er.set(a,Ml(er.get(a)||null,e,t,n,l,r)),!0}return!1}function ju(e){var t=An(e.target);if(t!==null){var n=Wn(t);if(n!==null){if(t=n.tag,t===13){if(t=fu(n),t!==null){e.blockedOn=t,bu(e.priority,function(){ku(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ur(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);$s=l,n.target.dispatchEvent(l),$s=null}else return t=vr(n),t!==null&&Ti(t),e.blockedOn=n,!1;t.shift()}return!0}function To(e,t,n){Ur(e)&&n.delete(t)}function dm(){qs=!1,yn!==null&&Ur(yn)&&(yn=null),xn!==null&&Ur(xn)&&(xn=null),vn!==null&&Ur(vn)&&(vn=null),Jl.forEach(To),er.forEach(To)}function _l(e,t){e.blockedOn===t&&(e.blockedOn=null,qs||(qs=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,dm)))}function tr(e){function t(r){return _l(r,e)}if(0<Pr.length){_l(Pr[0],e);for(var n=1;n<Pr.length;n++){var l=Pr[n];l.blockedOn===e&&(l.blockedOn=null)}}for(yn!==null&&_l(yn,e),xn!==null&&_l(xn,e),vn!==null&&_l(vn,e),Jl.forEach(t),er.forEach(t),n=0;n<mn.length;n++)l=mn[n],l.blockedOn===e&&(l.blockedOn=null);for(;0<mn.length&&(n=mn[0],n.blockedOn===null);)ju(n),n.blockedOn===null&&mn.shift()}var ul=sn.ReactCurrentBatchConfig,aa=!0;function fm(e,t,n,l){var r=ve,a=ul.transition;ul.transition=null;try{ve=1,Ai(e,t,n,l)}finally{ve=r,ul.transition=a}}function mm(e,t,n,l){var r=ve,a=ul.transition;ul.transition=null;try{ve=4,Ai(e,t,n,l)}finally{ve=r,ul.transition=a}}function Ai(e,t,n,l){if(aa){var r=Gs(e,t,n,l);if(r===null)is(e,t,l,sa,n),Lo(e,l);else if(um(r,e,t,n,l))l.stopPropagation();else if(Lo(e,l),t&4&&-1<cm.indexOf(e)){for(;r!==null;){var a=vr(r);if(a!==null&&wu(a),a=Gs(e,t,n,l),a===null&&is(e,t,l,sa,n),a===r)break;r=a}r!==null&&l.stopPropagation()}else is(e,t,l,null,n)}}var sa=null;function Gs(e,t,n,l){if(sa=null,e=_i(l),e=An(e),e!==null)if(t=Wn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=fu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sa=e,null}function Nu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(em()){case Ei:return 1;case gu:return 4;case la:case tm:return 16;case yu:return 536870912;default:return 16}default:return 16}}var hn=null,Ii=null,qr=null;function Cu(){if(qr)return qr;var e,t=Ii,n=t.length,l,r="value"in hn?hn.value:hn.textContent,a=r.length;for(e=0;e<n&&t[e]===r[e];e++);var i=n-e;for(l=1;l<=i&&t[n-l]===r[a-l];l++);return qr=r.slice(e,1<l?1-l:void 0)}function Gr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mr(){return!0}function Ao(){return!1}function jt(e){function t(n,l,r,a,i){this._reactName=n,this._targetInst=r,this.type=l,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mr:Ao,this.isPropagationStopped=Ao,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),t}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ri=jt(Sl),xr=Ae({},Sl,{view:0,detail:0}),pm=jt(xr),Za,Ja,El,_a=Ae({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==El&&(El&&e.type==="mousemove"?(Za=e.screenX-El.screenX,Ja=e.screenY-El.screenY):Ja=Za=0,El=e),Za)},movementY:function(e){return"movementY"in e?e.movementY:Ja}}),Io=jt(_a),hm=Ae({},_a,{dataTransfer:0}),gm=jt(hm),ym=Ae({},xr,{relatedTarget:0}),es=jt(ym),xm=Ae({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),vm=jt(xm),wm=Ae({},Sl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),km=jt(wm),Sm=Ae({},Sl,{data:0}),Ro=jt(Sm),bm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nm[e])?!!t[e]:!1}function zi(){return Cm}var Pm=Ae({},xr,{key:function(e){if(e.key){var t=bm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zi,charCode:function(e){return e.type==="keypress"?Gr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mm=jt(Pm),_m=Ae({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zo=jt(_m),Em=Ae({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zi}),Lm=jt(Em),Tm=Ae({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Am=jt(Tm),Im=Ae({},_a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rm=jt(Im),zm=[9,13,27,32],Di=nn&&"CompositionEvent"in window,ql=null;nn&&"documentMode"in document&&(ql=document.documentMode);var Dm=nn&&"TextEvent"in window&&!ql,Pu=nn&&(!Di||ql&&8<ql&&11>=ql),Do=" ",$o=!1;function Mu(e,t){switch(e){case"keyup":return zm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function $m(e,t){switch(e){case"compositionend":return _u(t);case"keypress":return t.which!==32?null:($o=!0,Do);case"textInput":return e=t.data,e===Do&&$o?null:e;default:return null}}function Fm(e,t){if(Kn)return e==="compositionend"||!Di&&Mu(e,t)?(e=Cu(),qr=Ii=hn=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pu&&t.locale!=="ko"?null:t.data;default:return null}}var Bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bm[e.type]:t==="textarea"}function Eu(e,t,n,l){iu(l),t=ia(t,"onChange"),0<t.length&&(n=new Ri("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Gl=null,nr=null;function Om(e){Ou(e,0)}function Ea(e){var t=el(e);if(eu(t))return e}function Um(e,t){if(e==="change")return t}var Lu=!1;if(nn){var ts;if(nn){var ns="oninput"in document;if(!ns){var Bo=document.createElement("div");Bo.setAttribute("oninput","return;"),ns=typeof Bo.oninput=="function"}ts=ns}else ts=!1;Lu=ts&&(!document.documentMode||9<document.documentMode)}function Oo(){Gl&&(Gl.detachEvent("onpropertychange",Tu),nr=Gl=null)}function Tu(e){if(e.propertyName==="value"&&Ea(nr)){var t=[];Eu(t,nr,e,_i(e)),du(Om,t)}}function qm(e,t,n){e==="focusin"?(Oo(),Gl=t,nr=n,Gl.attachEvent("onpropertychange",Tu)):e==="focusout"&&Oo()}function Gm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ea(nr)}function Vm(e,t){if(e==="click")return Ea(t)}function Wm(e,t){if(e==="input"||e==="change")return Ea(t)}function Hm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:Hm;function lr(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var r=n[l];if(!Cs.call(t,r)||!Ut(e[r],t[r]))return!1}return!0}function Uo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qo(e,t){var n=Uo(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uo(n)}}function Au(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Au(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Iu(){for(var e=window,t=ea();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ea(e.document)}return t}function $i(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ym(e){var t=Iu(),n=e.focusedElem,l=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Au(n.ownerDocument.documentElement,n)){if(l!==null&&$i(n)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(l.start,r);l=l.end===void 0?a:Math.min(l.end,r),!e.extend&&a>l&&(r=l,l=a,a=r),r=qo(n,a);var i=qo(n,l);r&&i&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),a>l?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xm=nn&&"documentMode"in document&&11>=document.documentMode,Zn=null,Vs=null,Vl=null,Ws=!1;function Go(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ws||Zn==null||Zn!==ea(l)||(l=Zn,"selectionStart"in l&&$i(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Vl&&lr(Vl,l)||(Vl=l,l=ia(Vs,"onSelect"),0<l.length&&(t=new Ri("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=Zn)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Jn={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},ls={},Ru={};nn&&(Ru=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);function La(e){if(ls[e])return ls[e];if(!Jn[e])return e;var t=Jn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ru)return ls[e]=t[n];return e}var zu=La("animationend"),Du=La("animationiteration"),$u=La("animationstart"),Fu=La("transitionend"),Bu=new Map,Vo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pn(e,t){Bu.set(e,t),Vn(t,[e])}for(var rs=0;rs<Vo.length;rs++){var as=Vo[rs],Qm=as.toLowerCase(),Km=as[0].toUpperCase()+as.slice(1);Pn(Qm,"on"+Km)}Pn(zu,"onAnimationEnd");Pn(Du,"onAnimationIteration");Pn($u,"onAnimationStart");Pn("dblclick","onDoubleClick");Pn("focusin","onFocus");Pn("focusout","onBlur");Pn(Fu,"onTransitionEnd");pl("onMouseEnter",["mouseout","mouseover"]);pl("onMouseLeave",["mouseout","mouseover"]);pl("onPointerEnter",["pointerout","pointerover"]);pl("onPointerLeave",["pointerout","pointerover"]);Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zm=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function Wo(e,t,n){var l=e.type||"unknown-event";e.currentTarget=n,Qf(l,t,void 0,e),e.currentTarget=null}function Ou(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],r=l.event;l=l.listeners;e:{var a=void 0;if(t)for(var i=l.length-1;0<=i;i--){var c=l[i],d=c.instance,f=c.currentTarget;if(c=c.listener,d!==a&&r.isPropagationStopped())break e;Wo(r,c,f),a=d}else for(i=0;i<l.length;i++){if(c=l[i],d=c.instance,f=c.currentTarget,c=c.listener,d!==a&&r.isPropagationStopped())break e;Wo(r,c,f),a=d}}}if(na)throw e=Os,na=!1,Os=null,e}function Ce(e,t){var n=t[Ks];n===void 0&&(n=t[Ks]=new Set);var l=e+"__bubble";n.has(l)||(Uu(t,e,2,!1),n.add(l))}function ss(e,t,n){var l=0;t&&(l|=4),Uu(n,e,l,t)}var Er="_reactListening"+Math.random().toString(36).slice(2);function rr(e){if(!e[Er]){e[Er]=!0,Xc.forEach(function(n){n!=="selectionchange"&&(Zm.has(n)||ss(n,!1,e),ss(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Er]||(t[Er]=!0,ss("selectionchange",!1,t))}}function Uu(e,t,n,l){switch(Nu(t)){case 1:var r=fm;break;case 4:r=mm;break;default:r=Ai}n=r.bind(null,t,n,e),r=void 0,!Bs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function is(e,t,n,l,r){var a=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var i=l.tag;if(i===3||i===4){var c=l.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(i===4)for(i=l.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;i=i.return}for(;c!==null;){if(i=An(c),i===null)return;if(d=i.tag,d===5||d===6){l=a=i;continue e}c=c.parentNode}}l=l.return}du(function(){var f=a,y=_i(n),w=[];e:{var x=Bu.get(e);if(x!==void 0){var v=Ri,j=e;switch(e){case"keypress":if(Gr(n)===0)break e;case"keydown":case"keyup":v=Mm;break;case"focusin":j="focus",v=es;break;case"focusout":j="blur",v=es;break;case"beforeblur":case"afterblur":v=es;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=gm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Lm;break;case zu:case Du:case $u:v=vm;break;case Fu:v=Am;break;case"scroll":v=pm;break;case"wheel":v=Rm;break;case"copy":case"cut":case"paste":v=km;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=zo}var h=(t&4)!==0,u=!h&&e==="scroll",p=h?x!==null?x+"Capture":null:x;h=[];for(var m=f,g;m!==null;){g=m;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,p!==null&&(S=Zl(m,p),S!=null&&h.push(ar(m,S,g)))),u)break;m=m.return}0<h.length&&(x=new v(x,j,null,n,y),w.push({event:x,listeners:h}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",x&&n!==$s&&(j=n.relatedTarget||n.fromElement)&&(An(j)||j[ln]))break e;if((v||x)&&(x=y.window===y?y:(x=y.ownerDocument)?x.defaultView||x.parentWindow:window,v?(j=n.relatedTarget||n.toElement,v=f,j=j?An(j):null,j!==null&&(u=Wn(j),j!==u||j.tag!==5&&j.tag!==6)&&(j=null)):(v=null,j=f),v!==j)){if(h=Io,S="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(h=zo,S="onPointerLeave",p="onPointerEnter",m="pointer"),u=v==null?x:el(v),g=j==null?x:el(j),x=new h(S,m+"leave",v,n,y),x.target=u,x.relatedTarget=g,S=null,An(y)===f&&(h=new h(p,m+"enter",j,n,y),h.target=g,h.relatedTarget=u,S=h),u=S,v&&j)t:{for(h=v,p=j,m=0,g=h;g;g=Yn(g))m++;for(g=0,S=p;S;S=Yn(S))g++;for(;0<m-g;)h=Yn(h),m--;for(;0<g-m;)p=Yn(p),g--;for(;m--;){if(h===p||p!==null&&h===p.alternate)break t;h=Yn(h),p=Yn(p)}h=null}else h=null;v!==null&&Ho(w,x,v,h,!1),j!==null&&u!==null&&Ho(w,u,j,h,!0)}}e:{if(x=f?el(f):window,v=x.nodeName&&x.nodeName.toLowerCase(),v==="select"||v==="input"&&x.type==="file")var b=Um;else if(Fo(x))if(Lu)b=Wm;else{b=Gm;var P=qm}else(v=x.nodeName)&&v.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(b=Vm);if(b&&(b=b(e,f))){Eu(w,b,n,y);break e}P&&P(e,x,f),e==="focusout"&&(P=x._wrapperState)&&P.controlled&&x.type==="number"&&As(x,"number",x.value)}switch(P=f?el(f):window,e){case"focusin":(Fo(P)||P.contentEditable==="true")&&(Zn=P,Vs=f,Vl=null);break;case"focusout":Vl=Vs=Zn=null;break;case"mousedown":Ws=!0;break;case"contextmenu":case"mouseup":case"dragend":Ws=!1,Go(w,n,y);break;case"selectionchange":if(Xm)break;case"keydown":case"keyup":Go(w,n,y)}var F;if(Di)e:{switch(e){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else Kn?Mu(e,n)&&(G="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(Pu&&n.locale!=="ko"&&(Kn||G!=="onCompositionStart"?G==="onCompositionEnd"&&Kn&&(F=Cu()):(hn=y,Ii="value"in hn?hn.value:hn.textContent,Kn=!0)),P=ia(f,G),0<P.length&&(G=new Ro(G,e,null,n,y),w.push({event:G,listeners:P}),F?G.data=F:(F=_u(n),F!==null&&(G.data=F)))),(F=Dm?$m(e,n):Fm(e,n))&&(f=ia(f,"onBeforeInput"),0<f.length&&(y=new Ro("onBeforeInput","beforeinput",null,n,y),w.push({event:y,listeners:f}),y.data=F))}Ou(w,t)})}function ar(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ia(e,t){for(var n=t+"Capture",l=[];e!==null;){var r=e,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=Zl(e,n),a!=null&&l.unshift(ar(e,a,r)),a=Zl(e,t),a!=null&&l.push(ar(e,a,r))),e=e.return}return l}function Yn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ho(e,t,n,l,r){for(var a=t._reactName,i=[];n!==null&&n!==l;){var c=n,d=c.alternate,f=c.stateNode;if(d!==null&&d===l)break;c.tag===5&&f!==null&&(c=f,r?(d=Zl(n,a),d!=null&&i.unshift(ar(n,d,c))):r||(d=Zl(n,a),d!=null&&i.push(ar(n,d,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Jm=/\r\n?/g,ep=/\u0000|\uFFFD/g;function Yo(e){return(typeof e=="string"?e:""+e).replace(Jm,`
`).replace(ep,"")}function Lr(e,t,n){if(t=Yo(t),Yo(e)!==t&&n)throw Error(O(425))}function oa(){}var Hs=null,Ys=null;function Xs(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qs=typeof setTimeout=="function"?setTimeout:void 0,tp=typeof clearTimeout=="function"?clearTimeout:void 0,Xo=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof Xo<"u"?function(e){return Xo.resolve(null).then(e).catch(lp)}:Qs;function lp(e){setTimeout(function(){throw e})}function os(e,t){var n=t,l=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(l===0){e.removeChild(r),tr(t);return}l--}else n!=="$"&&n!=="$?"&&n!=="$!"||l++;n=r}while(n);tr(t)}function wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var bl=Math.random().toString(36).slice(2),Wt="__reactFiber$"+bl,sr="__reactProps$"+bl,ln="__reactContainer$"+bl,Ks="__reactEvents$"+bl,rp="__reactListeners$"+bl,ap="__reactHandles$"+bl;function An(e){var t=e[Wt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ln]||n[Wt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qo(e);e!==null;){if(n=e[Wt])return n;e=Qo(e)}return t}e=n,n=e.parentNode}return null}function vr(e){return e=e[Wt]||e[ln],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function el(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Ta(e){return e[sr]||null}var Zs=[],tl=-1;function Mn(e){return{current:e}}function Pe(e){0>tl||(e.current=Zs[tl],Zs[tl]=null,tl--)}function Se(e,t){tl++,Zs[tl]=e.current,e.current=t}var Cn={},at=Mn(Cn),ht=Mn(!1),$n=Cn;function hl(e,t){var n=e.type.contextTypes;if(!n)return Cn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in n)r[a]=t[a];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function gt(e){return e=e.childContextTypes,e!=null}function ca(){Pe(ht),Pe(at)}function Ko(e,t,n){if(at.current!==Cn)throw Error(O(168));Se(at,t),Se(ht,n)}function qu(e,t,n){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return n;l=l.getChildContext();for(var r in l)if(!(r in t))throw Error(O(108,qf(e)||"Unknown",r));return Ae({},n,l)}function ua(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,$n=at.current,Se(at,e),Se(ht,ht.current),!0}function Zo(e,t,n){var l=e.stateNode;if(!l)throw Error(O(169));n?(e=qu(e,t,$n),l.__reactInternalMemoizedMergedChildContext=e,Pe(ht),Pe(at),Se(at,e)):Pe(ht),Se(ht,n)}var Zt=null,Aa=!1,cs=!1;function Gu(e){Zt===null?Zt=[e]:Zt.push(e)}function sp(e){Aa=!0,Gu(e)}function _n(){if(!cs&&Zt!==null){cs=!0;var e=0,t=ve;try{var n=Zt;for(ve=1;e<n.length;e++){var l=n[e];do l=l(!0);while(l!==null)}Zt=null,Aa=!1}catch(r){throw Zt!==null&&(Zt=Zt.slice(e+1)),hu(Ei,_n),r}finally{ve=t,cs=!1}}return null}var nl=[],ll=0,da=null,fa=0,Mt=[],_t=0,Fn=null,Jt=1,en="";function Ln(e,t){nl[ll++]=fa,nl[ll++]=da,da=e,fa=t}function Vu(e,t,n){Mt[_t++]=Jt,Mt[_t++]=en,Mt[_t++]=Fn,Fn=e;var l=Jt;e=en;var r=32-Bt(l)-1;l&=~(1<<r),n+=1;var a=32-Bt(t)+r;if(30<a){var i=r-r%5;a=(l&(1<<i)-1).toString(32),l>>=i,r-=i,Jt=1<<32-Bt(t)+r|n<<r|l,en=a+e}else Jt=1<<a|n<<r|l,en=e}function Fi(e){e.return!==null&&(Ln(e,1),Vu(e,1,0))}function Bi(e){for(;e===da;)da=nl[--ll],nl[ll]=null,fa=nl[--ll],nl[ll]=null;for(;e===Fn;)Fn=Mt[--_t],Mt[_t]=null,en=Mt[--_t],Mt[_t]=null,Jt=Mt[--_t],Mt[_t]=null}var kt=null,wt=null,_e=!1,Ft=null;function Wu(e,t){var n=Et(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Jo(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,wt=wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fn!==null?{id:Jt,overflow:en}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Et(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kt=e,wt=null,!0):!1;default:return!1}}function Js(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ei(e){if(_e){var t=wt;if(t){var n=t;if(!Jo(e,t)){if(Js(e))throw Error(O(418));t=wn(n.nextSibling);var l=kt;t&&Jo(e,t)?Wu(l,n):(e.flags=e.flags&-4097|2,_e=!1,kt=e)}}else{if(Js(e))throw Error(O(418));e.flags=e.flags&-4097|2,_e=!1,kt=e}}}function ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function Tr(e){if(e!==kt)return!1;if(!_e)return ec(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xs(e.type,e.memoizedProps)),t&&(t=wt)){if(Js(e))throw Hu(),Error(O(418));for(;t;)Wu(e,t),t=wn(t.nextSibling)}if(ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wt=wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wt=null}}else wt=kt?wn(e.stateNode.nextSibling):null;return!0}function Hu(){for(var e=wt;e;)e=wn(e.nextSibling)}function gl(){wt=kt=null,_e=!1}function Oi(e){Ft===null?Ft=[e]:Ft.push(e)}var ip=sn.ReactCurrentBatchConfig;function Ll(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var l=n.stateNode}if(!l)throw Error(O(147,e));var r=l,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var c=r.refs;i===null?delete c[a]:c[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function Ar(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tc(e){var t=e._init;return t(e._payload)}function Yu(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function l(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function r(p,m){return p=jn(p,m),p.index=0,p.sibling=null,p}function a(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function c(p,m,g,S){return m===null||m.tag!==6?(m=gs(g,p.mode,S),m.return=p,m):(m=r(m,g),m.return=p,m)}function d(p,m,g,S){var b=g.type;return b===Qn?y(p,m,g.props.children,S,g.key):m!==null&&(m.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===un&&tc(b)===m.type)?(S=r(m,g.props),S.ref=Ll(p,m,g),S.return=p,S):(S=Kr(g.type,g.key,g.props,null,p.mode,S),S.ref=Ll(p,m,g),S.return=p,S)}function f(p,m,g,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=ys(g,p.mode,S),m.return=p,m):(m=r(m,g.children||[]),m.return=p,m)}function y(p,m,g,S,b){return m===null||m.tag!==7?(m=Dn(g,p.mode,S,b),m.return=p,m):(m=r(m,g),m.return=p,m)}function w(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=gs(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Sr:return g=Kr(m.type,m.key,m.props,null,p.mode,g),g.ref=Ll(p,null,m),g.return=p,g;case Xn:return m=ys(m,p.mode,g),m.return=p,m;case un:var S=m._init;return w(p,S(m._payload),g)}if(zl(m)||Cl(m))return m=Dn(m,p.mode,g,null),m.return=p,m;Ar(p,m)}return null}function x(p,m,g,S){var b=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return b!==null?null:c(p,m,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Sr:return g.key===b?d(p,m,g,S):null;case Xn:return g.key===b?f(p,m,g,S):null;case un:return b=g._init,x(p,m,b(g._payload),S)}if(zl(g)||Cl(g))return b!==null?null:y(p,m,g,S,null);Ar(p,g)}return null}function v(p,m,g,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(g)||null,c(m,p,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sr:return p=p.get(S.key===null?g:S.key)||null,d(m,p,S,b);case Xn:return p=p.get(S.key===null?g:S.key)||null,f(m,p,S,b);case un:var P=S._init;return v(p,m,g,P(S._payload),b)}if(zl(S)||Cl(S))return p=p.get(g)||null,y(m,p,S,b,null);Ar(m,S)}return null}function j(p,m,g,S){for(var b=null,P=null,F=m,G=m=0,E=null;F!==null&&G<g.length;G++){F.index>G?(E=F,F=null):E=F.sibling;var _=x(p,F,g[G],S);if(_===null){F===null&&(F=E);break}e&&F&&_.alternate===null&&t(p,F),m=a(_,m,G),P===null?b=_:P.sibling=_,P=_,F=E}if(G===g.length)return n(p,F),_e&&Ln(p,G),b;if(F===null){for(;G<g.length;G++)F=w(p,g[G],S),F!==null&&(m=a(F,m,G),P===null?b=F:P.sibling=F,P=F);return _e&&Ln(p,G),b}for(F=l(p,F);G<g.length;G++)E=v(F,p,G,g[G],S),E!==null&&(e&&E.alternate!==null&&F.delete(E.key===null?G:E.key),m=a(E,m,G),P===null?b=E:P.sibling=E,P=E);return e&&F.forEach(function(U){return t(p,U)}),_e&&Ln(p,G),b}function h(p,m,g,S){var b=Cl(g);if(typeof b!="function")throw Error(O(150));if(g=b.call(g),g==null)throw Error(O(151));for(var P=b=null,F=m,G=m=0,E=null,_=g.next();F!==null&&!_.done;G++,_=g.next()){F.index>G?(E=F,F=null):E=F.sibling;var U=x(p,F,_.value,S);if(U===null){F===null&&(F=E);break}e&&F&&U.alternate===null&&t(p,F),m=a(U,m,G),P===null?b=U:P.sibling=U,P=U,F=E}if(_.done)return n(p,F),_e&&Ln(p,G),b;if(F===null){for(;!_.done;G++,_=g.next())_=w(p,_.value,S),_!==null&&(m=a(_,m,G),P===null?b=_:P.sibling=_,P=_);return _e&&Ln(p,G),b}for(F=l(p,F);!_.done;G++,_=g.next())_=v(F,p,G,_.value,S),_!==null&&(e&&_.alternate!==null&&F.delete(_.key===null?G:_.key),m=a(_,m,G),P===null?b=_:P.sibling=_,P=_);return e&&F.forEach(function(se){return t(p,se)}),_e&&Ln(p,G),b}function u(p,m,g,S){if(typeof g=="object"&&g!==null&&g.type===Qn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Sr:e:{for(var b=g.key,P=m;P!==null;){if(P.key===b){if(b=g.type,b===Qn){if(P.tag===7){n(p,P.sibling),m=r(P,g.props.children),m.return=p,p=m;break e}}else if(P.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===un&&tc(b)===P.type){n(p,P.sibling),m=r(P,g.props),m.ref=Ll(p,P,g),m.return=p,p=m;break e}n(p,P);break}else t(p,P);P=P.sibling}g.type===Qn?(m=Dn(g.props.children,p.mode,S,g.key),m.return=p,p=m):(S=Kr(g.type,g.key,g.props,null,p.mode,S),S.ref=Ll(p,m,g),S.return=p,p=S)}return i(p);case Xn:e:{for(P=g.key;m!==null;){if(m.key===P)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=r(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=ys(g,p.mode,S),m.return=p,p=m}return i(p);case un:return P=g._init,u(p,m,P(g._payload),S)}if(zl(g))return j(p,m,g,S);if(Cl(g))return h(p,m,g,S);Ar(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=r(m,g),m.return=p,p=m):(n(p,m),m=gs(g,p.mode,S),m.return=p,p=m),i(p)):n(p,m)}return u}var yl=Yu(!0),Xu=Yu(!1),ma=Mn(null),pa=null,rl=null,Ui=null;function qi(){Ui=rl=pa=null}function Gi(e){var t=ma.current;Pe(ma),e._currentValue=t}function ti(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function dl(e,t){pa=e,Ui=rl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pt=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(Ui!==e)if(e={context:e,memoizedValue:t,next:null},rl===null){if(pa===null)throw Error(O(308));rl=e,pa.dependencies={lanes:0,firstContext:e}}else rl=rl.next=e;return t}var In=null;function Vi(e){In===null?In=[e]:In.push(e)}function Qu(e,t,n,l){var r=t.interleaved;return r===null?(n.next=n,Vi(t)):(n.next=r.next,r.next=n),t.interleaved=n,rn(e,l)}function rn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var dn=!1;function Wi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ku(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kn(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,pe&2){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,rn(e,n)}return r=l.interleaved,r===null?(t.next=t,Vi(l)):(t.next=r.next,r.next=t),l.interleaved=t,rn(e,n)}function Vr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Li(e,n)}}function nc(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?r=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?r=a=t:a=a.next=t}else r=a=t;n={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:l.shared,effects:l.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,l){var r=e.updateQueue;dn=!1;var a=r.firstBaseUpdate,i=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var d=c,f=d.next;d.next=null,i===null?a=f:i.next=f,i=d;var y=e.alternate;y!==null&&(y=y.updateQueue,c=y.lastBaseUpdate,c!==i&&(c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=d))}if(a!==null){var w=r.baseState;i=0,y=f=d=null,c=a;do{var x=c.lane,v=c.eventTime;if((l&x)===x){y!==null&&(y=y.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=e,h=c;switch(x=t,v=n,h.tag){case 1:if(j=h.payload,typeof j=="function"){w=j.call(v,w,x);break e}w=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=h.payload,x=typeof j=="function"?j.call(v,w,x):j,x==null)break e;w=Ae({},w,x);break e;case 2:dn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,x=r.effects,x===null?r.effects=[c]:x.push(c))}else v={eventTime:v,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},y===null?(f=y=v,d=w):y=y.next=v,i|=x;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;x=c,c=x.next,x.next=null,r.lastBaseUpdate=x,r.shared.pending=null}}while(!0);if(y===null&&(d=w),r.baseState=d,r.firstBaseUpdate=f,r.lastBaseUpdate=y,t=r.shared.interleaved,t!==null){r=t;do i|=r.lane,r=r.next;while(r!==t)}else a===null&&(r.shared.lanes=0);On|=i,e.lanes=i,e.memoizedState=w}}function lc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],r=l.callback;if(r!==null){if(l.callback=null,l=n,typeof r!="function")throw Error(O(191,r));r.call(l)}}}var wr={},Yt=Mn(wr),ir=Mn(wr),or=Mn(wr);function Rn(e){if(e===wr)throw Error(O(174));return e}function Hi(e,t){switch(Se(or,t),Se(ir,e),Se(Yt,wr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Rs(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Rs(t,e)}Pe(Yt),Se(Yt,t)}function xl(){Pe(Yt),Pe(ir),Pe(or)}function Zu(e){Rn(or.current);var t=Rn(Yt.current),n=Rs(t,e.type);t!==n&&(Se(ir,e),Se(Yt,n))}function Yi(e){ir.current===e&&(Pe(Yt),Pe(ir))}var Le=Mn(0);function ga(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function Xi(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var Wr=sn.ReactCurrentDispatcher,ds=sn.ReactCurrentBatchConfig,Bn=0,Te=null,Ve=null,Xe=null,ya=!1,Wl=!1,cr=0,op=0;function nt(){throw Error(O(321))}function Qi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ut(e[n],t[n]))return!1;return!0}function Ki(e,t,n,l,r,a){if(Bn=a,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wr.current=e===null||e.memoizedState===null?fp:mp,e=n(l,r),Wl){a=0;do{if(Wl=!1,cr=0,25<=a)throw Error(O(301));a+=1,Xe=Ve=null,t.updateQueue=null,Wr.current=pp,e=n(l,r)}while(Wl)}if(Wr.current=xa,t=Ve!==null&&Ve.next!==null,Bn=0,Xe=Ve=Te=null,ya=!1,t)throw Error(O(300));return e}function Zi(){var e=cr!==0;return cr=0,e}function Vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Te.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function At(){if(Ve===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Xe===null?Te.memoizedState:Xe.next;if(t!==null)Xe=t,Ve=e;else{if(e===null)throw Error(O(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Xe===null?Te.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function ur(e,t){return typeof t=="function"?t(e):t}function fs(e){var t=At(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var l=Ve,r=l.baseQueue,a=n.pending;if(a!==null){if(r!==null){var i=r.next;r.next=a.next,a.next=i}l.baseQueue=r=a,n.pending=null}if(r!==null){a=r.next,l=l.baseState;var c=i=null,d=null,f=a;do{var y=f.lane;if((Bn&y)===y)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),l=f.hasEagerState?f.eagerState:e(l,f.action);else{var w={lane:y,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(c=d=w,i=l):d=d.next=w,Te.lanes|=y,On|=y}f=f.next}while(f!==null&&f!==a);d===null?i=l:d.next=c,Ut(l,t.memoizedState)||(pt=!0),t.memoizedState=l,t.baseState=i,t.baseQueue=d,n.lastRenderedState=l}if(e=n.interleaved,e!==null){r=e;do a=r.lane,Te.lanes|=a,On|=a,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ms(e){var t=At(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var l=n.dispatch,r=n.pending,a=t.memoizedState;if(r!==null){n.pending=null;var i=r=r.next;do a=e(a,i.action),i=i.next;while(i!==r);Ut(a,t.memoizedState)||(pt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,l]}function Ju(){}function ed(e,t){var n=Te,l=At(),r=t(),a=!Ut(l.memoizedState,r);if(a&&(l.memoizedState=r,pt=!0),l=l.queue,Ji(ld.bind(null,n,l,e),[e]),l.getSnapshot!==t||a||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,dr(9,nd.bind(null,n,l,r,t),void 0,null),Qe===null)throw Error(O(349));Bn&30||td(n,t,r)}return r}function td(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nd(e,t,n,l){t.value=n,t.getSnapshot=l,rd(t)&&ad(e)}function ld(e,t,n){return n(function(){rd(t)&&ad(e)})}function rd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ut(e,n)}catch{return!0}}function ad(e){var t=rn(e,1);t!==null&&Ot(t,e,1,-1)}function rc(e){var t=Vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:e},t.queue=e,e=e.dispatch=dp.bind(null,Te,e),[t.memoizedState,e]}function dr(e,t,n,l){return e={tag:e,create:t,destroy:n,deps:l,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e)),e}function sd(){return At().memoizedState}function Hr(e,t,n,l){var r=Vt();Te.flags|=e,r.memoizedState=dr(1|t,n,void 0,l===void 0?null:l)}function Ia(e,t,n,l){var r=At();l=l===void 0?null:l;var a=void 0;if(Ve!==null){var i=Ve.memoizedState;if(a=i.destroy,l!==null&&Qi(l,i.deps)){r.memoizedState=dr(t,n,a,l);return}}Te.flags|=e,r.memoizedState=dr(1|t,n,a,l)}function ac(e,t){return Hr(8390656,8,e,t)}function Ji(e,t){return Ia(2048,8,e,t)}function id(e,t){return Ia(4,2,e,t)}function od(e,t){return Ia(4,4,e,t)}function cd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ud(e,t,n){return n=n!=null?n.concat([e]):null,Ia(4,4,cd.bind(null,t,e),n)}function eo(){}function dd(e,t){var n=At();t=t===void 0?null:t;var l=n.memoizedState;return l!==null&&t!==null&&Qi(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function fd(e,t){var n=At();t=t===void 0?null:t;var l=n.memoizedState;return l!==null&&t!==null&&Qi(t,l[1])?l[0]:(e=e(),n.memoizedState=[e,t],e)}function md(e,t,n){return Bn&21?(Ut(n,t)||(n=xu(),Te.lanes|=n,On|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pt=!0),e.memoizedState=n)}function cp(e,t){var n=ve;ve=n!==0&&4>n?n:4,e(!0);var l=ds.transition;ds.transition={};try{e(!1),t()}finally{ve=n,ds.transition=l}}function pd(){return At().memoizedState}function up(e,t,n){var l=bn(e);if(n={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null},hd(e))gd(t,n);else if(n=Qu(e,t,n,l),n!==null){var r=it();Ot(n,e,l,r),yd(n,t,l)}}function dp(e,t,n){var l=bn(e),r={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null};if(hd(e))gd(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,c=a(i,n);if(r.hasEagerState=!0,r.eagerState=c,Ut(c,i)){var d=t.interleaved;d===null?(r.next=r,Vi(t)):(r.next=d.next,d.next=r),t.interleaved=r;return}}catch{}finally{}n=Qu(e,t,r,l),n!==null&&(r=it(),Ot(n,e,l,r),yd(n,t,l))}}function hd(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function gd(e,t){Wl=ya=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yd(e,t,n){if(n&4194240){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Li(e,n)}}var xa={readContext:Tt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},fp={readContext:Tt,useCallback:function(e,t){return Vt().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:ac,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hr(4194308,4,cd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hr(4,2,e,t)},useMemo:function(e,t){var n=Vt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var l=Vt();return t=n!==void 0?n(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=up.bind(null,Te,e),[l.memoizedState,e]},useRef:function(e){var t=Vt();return e={current:e},t.memoizedState=e},useState:rc,useDebugValue:eo,useDeferredValue:function(e){return Vt().memoizedState=e},useTransition:function(){var e=rc(!1),t=e[0];return e=cp.bind(null,e[1]),Vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var l=Te,r=Vt();if(_e){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),Qe===null)throw Error(O(349));Bn&30||td(l,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,ac(ld.bind(null,l,a,e),[e]),l.flags|=2048,dr(9,nd.bind(null,l,a,n,t),void 0,null),n},useId:function(){var e=Vt(),t=Qe.identifierPrefix;if(_e){var n=en,l=Jt;n=(l&~(1<<32-Bt(l)-1)).toString(32)+n,t=":"+t+"R"+n,n=cr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=op++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mp={readContext:Tt,useCallback:dd,useContext:Tt,useEffect:Ji,useImperativeHandle:ud,useInsertionEffect:id,useLayoutEffect:od,useMemo:fd,useReducer:fs,useRef:sd,useState:function(){return fs(ur)},useDebugValue:eo,useDeferredValue:function(e){var t=At();return md(t,Ve.memoizedState,e)},useTransition:function(){var e=fs(ur)[0],t=At().memoizedState;return[e,t]},useMutableSource:Ju,useSyncExternalStore:ed,useId:pd,unstable_isNewReconciler:!1},pp={readContext:Tt,useCallback:dd,useContext:Tt,useEffect:Ji,useImperativeHandle:ud,useInsertionEffect:id,useLayoutEffect:od,useMemo:fd,useReducer:ms,useRef:sd,useState:function(){return ms(ur)},useDebugValue:eo,useDeferredValue:function(e){var t=At();return Ve===null?t.memoizedState=e:md(t,Ve.memoizedState,e)},useTransition:function(){var e=ms(ur)[0],t=At().memoizedState;return[e,t]},useMutableSource:Ju,useSyncExternalStore:ed,useId:pd,unstable_isNewReconciler:!1};function Dt(e,t){if(e&&e.defaultProps){t=Ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ni(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:Ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ra={isMounted:function(e){return(e=e._reactInternals)?Wn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var l=it(),r=bn(e),a=tn(l,r);a.payload=t,n!=null&&(a.callback=n),t=kn(e,a,r),t!==null&&(Ot(t,e,r,l),Vr(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=it(),r=bn(e),a=tn(l,r);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=kn(e,a,r),t!==null&&(Ot(t,e,r,l),Vr(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),l=bn(e),r=tn(n,l);r.tag=2,t!=null&&(r.callback=t),t=kn(e,r,l),t!==null&&(Ot(t,e,l,n),Vr(t,e,l))}};function sc(e,t,n,l,r,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,a,i):t.prototype&&t.prototype.isPureReactComponent?!lr(n,l)||!lr(r,a):!0}function xd(e,t,n){var l=!1,r=Cn,a=t.contextType;return typeof a=="object"&&a!==null?a=Tt(a):(r=gt(t)?$n:at.current,l=t.contextTypes,a=(l=l!=null)?hl(e,r):Cn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ra,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function ic(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Ra.enqueueReplaceState(t,t.state,null)}function li(e,t,n,l){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Wi(e);var a=t.contextType;typeof a=="object"&&a!==null?r.context=Tt(a):(a=gt(t)?$n:at.current,r.context=hl(e,a)),r.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ni(e,t,a,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Ra.enqueueReplaceState(r,r.state,null),ha(e,n,r,l),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function vl(e,t){try{var n="",l=t;do n+=Uf(l),l=l.return;while(l);var r=n}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:r,digest:null}}function ps(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ri(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hp=typeof WeakMap=="function"?WeakMap:Map;function vd(e,t,n){n=tn(-1,n),n.tag=3,n.payload={element:null};var l=t.value;return n.callback=function(){wa||(wa=!0,pi=l),ri(e,t)},n}function wd(e,t,n){n=tn(-1,n),n.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var r=t.value;n.payload=function(){return l(r)},n.callback=function(){ri(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){ri(e,t),typeof l!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function oc(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new hp;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(n)||(r.add(n),e=_p.bind(null,e,t,n),t.then(e,e))}function cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uc(e,t,n,l,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tn(-1,1),t.tag=2,kn(n,t,1))),n.lanes|=1),e)}var gp=sn.ReactCurrentOwner,pt=!1;function st(e,t,n,l){t.child=e===null?Xu(t,null,n,l):yl(t,e.child,n,l)}function dc(e,t,n,l,r){n=n.render;var a=t.ref;return dl(t,r),l=Ki(e,t,n,l,a,r),n=Zi(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,an(e,t,r)):(_e&&n&&Fi(t),t.flags|=1,st(e,t,l,r),t.child)}function fc(e,t,n,l,r){if(e===null){var a=n.type;return typeof a=="function"&&!oo(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,kd(e,t,a,l,r)):(e=Kr(n.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&r)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:lr,n(i,l)&&e.ref===t.ref)return an(e,t,r)}return t.flags|=1,e=jn(a,l),e.ref=t.ref,e.return=t,t.child=e}function kd(e,t,n,l,r){if(e!==null){var a=e.memoizedProps;if(lr(a,l)&&e.ref===t.ref)if(pt=!1,t.pendingProps=l=a,(e.lanes&r)!==0)e.flags&131072&&(pt=!0);else return t.lanes=e.lanes,an(e,t,r)}return ai(e,t,n,l,r)}function Sd(e,t,n){var l=t.pendingProps,r=l.children,a=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(sl,vt),vt|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(sl,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=a!==null?a.baseLanes:n,Se(sl,vt),vt|=l}else a!==null?(l=a.baseLanes|n,t.memoizedState=null):l=n,Se(sl,vt),vt|=l;return st(e,t,r,n),t.child}function bd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ai(e,t,n,l,r){var a=gt(n)?$n:at.current;return a=hl(t,a),dl(t,r),n=Ki(e,t,n,l,a,r),l=Zi(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,an(e,t,r)):(_e&&l&&Fi(t),t.flags|=1,st(e,t,n,r),t.child)}function mc(e,t,n,l,r){if(gt(n)){var a=!0;ua(t)}else a=!1;if(dl(t,r),t.stateNode===null)Yr(e,t),xd(t,n,l),li(t,n,l,r),l=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var d=i.context,f=n.contextType;typeof f=="object"&&f!==null?f=Tt(f):(f=gt(n)?$n:at.current,f=hl(t,f));var y=n.getDerivedStateFromProps,w=typeof y=="function"||typeof i.getSnapshotBeforeUpdate=="function";w||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==l||d!==f)&&ic(t,i,l,f),dn=!1;var x=t.memoizedState;i.state=x,ha(t,l,i,r),d=t.memoizedState,c!==l||x!==d||ht.current||dn?(typeof y=="function"&&(ni(t,n,y,l),d=t.memoizedState),(c=dn||sc(t,n,c,l,x,d,f))?(w||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=d),i.props=l,i.state=d,i.context=f,l=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,Ku(e,t),c=t.memoizedProps,f=t.type===t.elementType?c:Dt(t.type,c),i.props=f,w=t.pendingProps,x=i.context,d=n.contextType,typeof d=="object"&&d!==null?d=Tt(d):(d=gt(n)?$n:at.current,d=hl(t,d));var v=n.getDerivedStateFromProps;(y=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==w||x!==d)&&ic(t,i,l,d),dn=!1,x=t.memoizedState,i.state=x,ha(t,l,i,r);var j=t.memoizedState;c!==w||x!==j||ht.current||dn?(typeof v=="function"&&(ni(t,n,v,l),j=t.memoizedState),(f=dn||sc(t,n,f,l,x,j,d)||!1)?(y||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,j,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,j,d)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=j),i.props=l,i.state=j,i.context=d,l=f):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),l=!1)}return si(e,t,n,l,a,r)}function si(e,t,n,l,r,a){bd(e,t);var i=(t.flags&128)!==0;if(!l&&!i)return r&&Zo(t,n,!1),an(e,t,a);l=t.stateNode,gp.current=t;var c=i&&typeof n.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&i?(t.child=yl(t,e.child,null,a),t.child=yl(t,null,c,a)):st(e,t,c,a),t.memoizedState=l.state,r&&Zo(t,n,!0),t.child}function jd(e){var t=e.stateNode;t.pendingContext?Ko(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ko(e,t.context,!1),Hi(e,t.containerInfo)}function pc(e,t,n,l,r){return gl(),Oi(r),t.flags|=256,st(e,t,n,l),t.child}var ii={dehydrated:null,treeContext:null,retryLane:0};function oi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nd(e,t,n){var l=t.pendingProps,r=Le.current,a=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(r&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Se(Le,r&1),e===null)return ei(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=l.children,e=l.fallback,a?(l=t.mode,a=t.child,i={mode:"hidden",children:i},!(l&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=$a(i,l,0,null),e=Dn(e,l,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=oi(n),t.memoizedState=ii,e):to(t,i));if(r=e.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return yp(e,t,i,l,c,r,n);if(a){a=l.fallback,i=t.mode,r=e.child,c=r.sibling;var d={mode:"hidden",children:l.children};return!(i&1)&&t.child!==r?(l=t.child,l.childLanes=0,l.pendingProps=d,t.deletions=null):(l=jn(r,d),l.subtreeFlags=r.subtreeFlags&14680064),c!==null?a=jn(c,a):(a=Dn(a,i,n,null),a.flags|=2),a.return=t,l.return=t,l.sibling=a,t.child=l,l=a,a=t.child,i=e.child.memoizedState,i=i===null?oi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=ii,l}return a=e.child,e=a.sibling,l=jn(a,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=n),l.return=t,l.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=l,t.memoizedState=null,l}function to(e,t){return t=$a({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ir(e,t,n,l){return l!==null&&Oi(l),yl(t,e.child,null,n),e=to(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yp(e,t,n,l,r,a,i){if(n)return t.flags&256?(t.flags&=-257,l=ps(Error(O(422))),Ir(e,t,i,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=l.fallback,r=t.mode,l=$a({mode:"visible",children:l.children},r,0,null),a=Dn(a,r,i,null),a.flags|=2,l.return=t,a.return=t,l.sibling=a,t.child=l,t.mode&1&&yl(t,e.child,null,i),t.child.memoizedState=oi(i),t.memoizedState=ii,a);if(!(t.mode&1))return Ir(e,t,i,null);if(r.data==="$!"){if(l=r.nextSibling&&r.nextSibling.dataset,l)var c=l.dgst;return l=c,a=Error(O(419)),l=ps(a,l,void 0),Ir(e,t,i,l)}if(c=(i&e.childLanes)!==0,pt||c){if(l=Qe,l!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(l.suspendedLanes|i)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,rn(e,r),Ot(l,e,r,-1))}return io(),l=ps(Error(O(421))),Ir(e,t,i,l)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Ep.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,wt=wn(r.nextSibling),kt=t,_e=!0,Ft=null,e!==null&&(Mt[_t++]=Jt,Mt[_t++]=en,Mt[_t++]=Fn,Jt=e.id,en=e.overflow,Fn=t),t=to(t,l.children),t.flags|=4096,t)}function hc(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),ti(e.return,t,n)}function hs(e,t,n,l,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=l,a.tail=n,a.tailMode=r)}function Cd(e,t,n){var l=t.pendingProps,r=l.revealOrder,a=l.tail;if(st(e,t,l.children,n),l=Le.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hc(e,n,t);else if(e.tag===19)hc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Se(Le,l),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&ga(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),hs(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&ga(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}hs(t,!0,n,null,a);break;case"together":hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function an(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xp(e,t,n){switch(t.tag){case 3:jd(t),gl();break;case 5:Zu(t);break;case 1:gt(t.type)&&ua(t);break;case 4:Hi(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,r=t.memoizedProps.value;Se(ma,l._currentValue),l._currentValue=r;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Se(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?Nd(e,t,n):(Se(Le,Le.current&1),e=an(e,t,n),e!==null?e.sibling:null);Se(Le,Le.current&1);break;case 19:if(l=(n&t.childLanes)!==0,e.flags&128){if(l)return Cd(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Se(Le,Le.current),l)break;return null;case 22:case 23:return t.lanes=0,Sd(e,t,n)}return an(e,t,n)}var Pd,ci,Md,_d;Pd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ci=function(){};Md=function(e,t,n,l){var r=e.memoizedProps;if(r!==l){e=t.stateNode,Rn(Yt.current);var a=null;switch(n){case"input":r=Ls(e,r),l=Ls(e,l),a=[];break;case"select":r=Ae({},r,{value:void 0}),l=Ae({},l,{value:void 0}),a=[];break;case"textarea":r=Is(e,r),l=Is(e,l),a=[];break;default:typeof r.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=oa)}zs(n,l);var i;n=null;for(f in r)if(!l.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var c=r[f];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ql.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in l){var d=l[f];if(c=r!=null?r[f]:void 0,l.hasOwnProperty(f)&&d!==c&&(d!=null||c!=null))if(f==="style")if(c){for(i in c)!c.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in d)d.hasOwnProperty(i)&&c[i]!==d[i]&&(n||(n={}),n[i]=d[i])}else n||(a||(a=[]),a.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Ql.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&Ce("scroll",e),a||c===d||(a=[])):(a=a||[]).push(f,d))}n&&(a=a||[]).push("style",n);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};_d=function(e,t,n,l){n!==l&&(t.flags|=4)};function Tl(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,l|=r.subtreeFlags&14680064,l|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function vp(e,t,n){var l=t.pendingProps;switch(Bi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return gt(t.type)&&ca(),lt(t),null;case 3:return l=t.stateNode,xl(),Pe(ht),Pe(at),Xi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Tr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ft!==null&&(yi(Ft),Ft=null))),ci(e,t),lt(t),null;case 5:Yi(t);var r=Rn(or.current);if(n=t.type,e!==null&&t.stateNode!=null)Md(e,t,n,l,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(O(166));return lt(t),null}if(e=Rn(Yt.current),Tr(t)){l=t.stateNode,n=t.type;var a=t.memoizedProps;switch(l[Wt]=t,l[sr]=a,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",l),Ce("close",l);break;case"iframe":case"object":case"embed":Ce("load",l);break;case"video":case"audio":for(r=0;r<$l.length;r++)Ce($l[r],l);break;case"source":Ce("error",l);break;case"img":case"image":case"link":Ce("error",l),Ce("load",l);break;case"details":Ce("toggle",l);break;case"input":jo(l,a),Ce("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!a.multiple},Ce("invalid",l);break;case"textarea":Co(l,a),Ce("invalid",l)}zs(n,a),r=null;for(var i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="children"?typeof c=="string"?l.textContent!==c&&(a.suppressHydrationWarning!==!0&&Lr(l.textContent,c,e),r=["children",c]):typeof c=="number"&&l.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Lr(l.textContent,c,e),r=["children",""+c]):Ql.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&Ce("scroll",l)}switch(n){case"input":br(l),No(l,a,!0);break;case"textarea":br(l),Po(l);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(l.onclick=oa)}l=r,t.updateQueue=l,l!==null&&(t.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=i.createElement(n,{is:l.is}):(e=i.createElement(n),n==="select"&&(i=e,l.multiple?i.multiple=!0:l.size&&(i.size=l.size))):e=i.createElementNS(e,n),e[Wt]=t,e[sr]=l,Pd(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ds(n,l),n){case"dialog":Ce("cancel",e),Ce("close",e),r=l;break;case"iframe":case"object":case"embed":Ce("load",e),r=l;break;case"video":case"audio":for(r=0;r<$l.length;r++)Ce($l[r],e);r=l;break;case"source":Ce("error",e),r=l;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),r=l;break;case"details":Ce("toggle",e),r=l;break;case"input":jo(e,l),r=Ls(e,l),Ce("invalid",e);break;case"option":r=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},r=Ae({},l,{value:void 0}),Ce("invalid",e);break;case"textarea":Co(e,l),r=Is(e,l),Ce("invalid",e);break;default:r=l}zs(n,r),c=r;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?su(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&ru(e,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Kl(e,d):typeof d=="number"&&Kl(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ql.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Ce("scroll",e):d!=null&&Ni(e,a,d,i))}switch(n){case"input":br(e),No(e,l,!1);break;case"textarea":br(e),Po(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Nn(l.value));break;case"select":e.multiple=!!l.multiple,a=l.value,a!=null?il(e,!!l.multiple,a,!1):l.defaultValue!=null&&il(e,!!l.multiple,l.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=oa)}switch(n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)_d(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(O(166));if(n=Rn(or.current),Rn(Yt.current),Tr(t)){if(l=t.stateNode,n=t.memoizedProps,l[Wt]=t,(a=l.nodeValue!==n)&&(e=kt,e!==null))switch(e.tag){case 3:Lr(l.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lr(l.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else l=(n.nodeType===9?n:n.ownerDocument).createTextNode(l),l[Wt]=t,t.stateNode=l}return lt(t),null;case 13:if(Pe(Le),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&wt!==null&&t.mode&1&&!(t.flags&128))Hu(),gl(),t.flags|=98560,a=!1;else if(a=Tr(t),l!==null&&l.dehydrated!==null){if(e===null){if(!a)throw Error(O(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(O(317));a[Wt]=t}else gl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),a=!1}else Ft!==null&&(yi(Ft),Ft=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?We===0&&(We=3):io())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return xl(),ci(e,t),e===null&&rr(t.stateNode.containerInfo),lt(t),null;case 10:return Gi(t.type._context),lt(t),null;case 17:return gt(t.type)&&ca(),lt(t),null;case 19:if(Pe(Le),a=t.memoizedState,a===null)return lt(t),null;if(l=(t.flags&128)!==0,i=a.rendering,i===null)if(l)Tl(a,!1);else{if(We!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=ga(e),i!==null){for(t.flags|=128,Tl(a,!1),l=i.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=n,n=t.child;n!==null;)a=n,e=l,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Se(Le,Le.current&1|2),t.child}e=e.sibling}a.tail!==null&&ze()>wl&&(t.flags|=128,l=!0,Tl(a,!1),t.lanes=4194304)}else{if(!l)if(e=ga(i),e!==null){if(t.flags|=128,l=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Tl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!_e)return lt(t),null}else 2*ze()-a.renderingStartTime>wl&&n!==1073741824&&(t.flags|=128,l=!0,Tl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ze(),t.sibling=null,n=Le.current,Se(Le,l?n&1|2:n&1),t):(lt(t),null);case 22:case 23:return so(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?vt&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function wp(e,t){switch(Bi(t),t.tag){case 1:return gt(t.type)&&ca(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xl(),Pe(ht),Pe(at),Xi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yi(t),null;case 13:if(Pe(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));gl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Le),null;case 4:return xl(),null;case 10:return Gi(t.type._context),null;case 22:case 23:return so(),null;case 24:return null;default:return null}}var Rr=!1,rt=!1,kp=typeof WeakSet=="function"?WeakSet:Set,J=null;function al(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(l){Re(e,t,l)}else n.current=null}function ui(e,t,n){try{n()}catch(l){Re(e,t,l)}}var gc=!1;function Sp(e,t){if(Hs=aa,e=Iu(),$i(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var r=l.anchorOffset,a=l.focusNode;l=l.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,c=-1,d=-1,f=0,y=0,w=e,x=null;t:for(;;){for(var v;w!==n||r!==0&&w.nodeType!==3||(c=i+r),w!==a||l!==0&&w.nodeType!==3||(d=i+l),w.nodeType===3&&(i+=w.nodeValue.length),(v=w.firstChild)!==null;)x=w,w=v;for(;;){if(w===e)break t;if(x===n&&++f===r&&(c=i),x===a&&++y===l&&(d=i),(v=w.nextSibling)!==null)break;w=x,x=w.parentNode}w=v}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ys={focusedElem:e,selectionRange:n},aa=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var h=j.memoizedProps,u=j.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?h:Dt(t.type,h),u);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(S){Re(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return j=gc,gc=!1,j}function Hl(e,t,n){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var r=l=l.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,a!==void 0&&ui(t,n,a)}r=r.next}while(r!==l)}}function za(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var l=n.create;n.destroy=l()}n=n.next}while(n!==t)}}function di(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ed(e){var t=e.alternate;t!==null&&(e.alternate=null,Ed(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wt],delete t[sr],delete t[Ks],delete t[rp],delete t[ap])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ld(e){return e.tag===5||e.tag===3||e.tag===4}function yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ld(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fi(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=oa));else if(l!==4&&(e=e.child,e!==null))for(fi(e,t,n),e=e.sibling;e!==null;)fi(e,t,n),e=e.sibling}function mi(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(mi(e,t,n),e=e.sibling;e!==null;)mi(e,t,n),e=e.sibling}var Ke=null,$t=!1;function on(e,t,n){for(n=n.child;n!==null;)Td(e,t,n),n=n.sibling}function Td(e,t,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Ma,n)}catch{}switch(n.tag){case 5:rt||al(n,t);case 6:var l=Ke,r=$t;Ke=null,on(e,t,n),Ke=l,$t=r,Ke!==null&&($t?(e=Ke,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&($t?(e=Ke,n=n.stateNode,e.nodeType===8?os(e.parentNode,n):e.nodeType===1&&os(e,n),tr(e)):os(Ke,n.stateNode));break;case 4:l=Ke,r=$t,Ke=n.stateNode.containerInfo,$t=!0,on(e,t,n),Ke=l,$t=r;break;case 0:case 11:case 14:case 15:if(!rt&&(l=n.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){r=l=l.next;do{var a=r,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&ui(n,t,i),r=r.next}while(r!==l)}on(e,t,n);break;case 1:if(!rt&&(al(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=n.memoizedProps,l.state=n.memoizedState,l.componentWillUnmount()}catch(c){Re(n,t,c)}on(e,t,n);break;case 21:on(e,t,n);break;case 22:n.mode&1?(rt=(l=rt)||n.memoizedState!==null,on(e,t,n),rt=l):on(e,t,n);break;default:on(e,t,n)}}function xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new kp),t.forEach(function(l){var r=Lp.bind(null,e,l);n.has(l)||(n.add(l),l.then(r,r))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var r=n[l];try{var a=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:Ke=c.stateNode,$t=!1;break e;case 3:Ke=c.stateNode.containerInfo,$t=!0;break e;case 4:Ke=c.stateNode.containerInfo,$t=!0;break e}c=c.return}if(Ke===null)throw Error(O(160));Td(a,i,r),Ke=null,$t=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(f){Re(r,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ad(t,e),t=t.sibling}function Ad(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),Gt(e),l&4){try{Hl(3,e,e.return),za(3,e)}catch(h){Re(e,e.return,h)}try{Hl(5,e,e.return)}catch(h){Re(e,e.return,h)}}break;case 1:zt(t,e),Gt(e),l&512&&n!==null&&al(n,n.return);break;case 5:if(zt(t,e),Gt(e),l&512&&n!==null&&al(n,n.return),e.flags&32){var r=e.stateNode;try{Kl(r,"")}catch(h){Re(e,e.return,h)}}if(l&4&&(r=e.stateNode,r!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&tu(r,a),Ds(c,i);var f=Ds(c,a);for(i=0;i<d.length;i+=2){var y=d[i],w=d[i+1];y==="style"?su(r,w):y==="dangerouslySetInnerHTML"?ru(r,w):y==="children"?Kl(r,w):Ni(r,y,w,f)}switch(c){case"input":Ts(r,a);break;case"textarea":nu(r,a);break;case"select":var x=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?il(r,!!a.multiple,v,!1):x!==!!a.multiple&&(a.defaultValue!=null?il(r,!!a.multiple,a.defaultValue,!0):il(r,!!a.multiple,a.multiple?[]:"",!1))}r[sr]=a}catch(h){Re(e,e.return,h)}}break;case 6:if(zt(t,e),Gt(e),l&4){if(e.stateNode===null)throw Error(O(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(h){Re(e,e.return,h)}}break;case 3:if(zt(t,e),Gt(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{tr(t.containerInfo)}catch(h){Re(e,e.return,h)}break;case 4:zt(t,e),Gt(e);break;case 13:zt(t,e),Gt(e),r=e.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(ro=ze())),l&4&&xc(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(rt=(f=rt)||y,zt(t,e),rt=f):zt(t,e),Gt(e),l&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!y&&e.mode&1)for(J=e,y=e.child;y!==null;){for(w=J=y;J!==null;){switch(x=J,v=x.child,x.tag){case 0:case 11:case 14:case 15:Hl(4,x,x.return);break;case 1:al(x,x.return);var j=x.stateNode;if(typeof j.componentWillUnmount=="function"){l=x,n=x.return;try{t=l,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(h){Re(l,n,h)}}break;case 5:al(x,x.return);break;case 22:if(x.memoizedState!==null){wc(w);continue}}v!==null?(v.return=x,J=v):wc(w)}y=y.sibling}e:for(y=null,w=e;;){if(w.tag===5){if(y===null){y=w;try{r=w.stateNode,f?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=w.stateNode,d=w.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=au("display",i))}catch(h){Re(e,e.return,h)}}}else if(w.tag===6){if(y===null)try{w.stateNode.nodeValue=f?"":w.memoizedProps}catch(h){Re(e,e.return,h)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;y===w&&(y=null),w=w.return}y===w&&(y=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:zt(t,e),Gt(e),l&4&&xc(e);break;case 21:break;default:zt(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ld(n)){var l=n;break e}n=n.return}throw Error(O(160))}switch(l.tag){case 5:var r=l.stateNode;l.flags&32&&(Kl(r,""),l.flags&=-33);var a=yc(e);mi(e,a,r);break;case 3:case 4:var i=l.stateNode.containerInfo,c=yc(e);fi(e,c,i);break;default:throw Error(O(161))}}catch(d){Re(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bp(e,t,n){J=e,Id(e)}function Id(e,t,n){for(var l=(e.mode&1)!==0;J!==null;){var r=J,a=r.child;if(r.tag===22&&l){var i=r.memoizedState!==null||Rr;if(!i){var c=r.alternate,d=c!==null&&c.memoizedState!==null||rt;c=Rr;var f=rt;if(Rr=i,(rt=d)&&!f)for(J=r;J!==null;)i=J,d=i.child,i.tag===22&&i.memoizedState!==null?kc(r):d!==null?(d.return=i,J=d):kc(r);for(;a!==null;)J=a,Id(a),a=a.sibling;J=r,Rr=c,rt=f}vc(e)}else r.subtreeFlags&8772&&a!==null?(a.return=r,J=a):vc(e)}}function vc(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||za(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!rt)if(n===null)l.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Dt(t.type,n.memoizedProps);l.componentDidUpdate(r,n.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&lc(t,a,l);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}lc(t,i,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var y=f.memoizedState;if(y!==null){var w=y.dehydrated;w!==null&&tr(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}rt||t.flags&512&&di(t)}catch(x){Re(t,t.return,x)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function wc(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function kc(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{za(4,t)}catch(d){Re(t,n,d)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var r=t.return;try{l.componentDidMount()}catch(d){Re(t,r,d)}}var a=t.return;try{di(t)}catch(d){Re(t,a,d)}break;case 5:var i=t.return;try{di(t)}catch(d){Re(t,i,d)}}}catch(d){Re(t,t.return,d)}if(t===e){J=null;break}var c=t.sibling;if(c!==null){c.return=t.return,J=c;break}J=t.return}}var jp=Math.ceil,va=sn.ReactCurrentDispatcher,no=sn.ReactCurrentOwner,Lt=sn.ReactCurrentBatchConfig,pe=0,Qe=null,Oe=null,Ze=0,vt=0,sl=Mn(0),We=0,fr=null,On=0,Da=0,lo=0,Yl=null,mt=null,ro=0,wl=1/0,Kt=null,wa=!1,pi=null,Sn=null,zr=!1,gn=null,ka=0,Xl=0,hi=null,Xr=-1,Qr=0;function it(){return pe&6?ze():Xr!==-1?Xr:Xr=ze()}function bn(e){return e.mode&1?pe&2&&Ze!==0?Ze&-Ze:ip.transition!==null?(Qr===0&&(Qr=xu()),Qr):(e=ve,e!==0||(e=window.event,e=e===void 0?16:Nu(e.type)),e):1}function Ot(e,t,n,l){if(50<Xl)throw Xl=0,hi=null,Error(O(185));yr(e,n,l),(!(pe&2)||e!==Qe)&&(e===Qe&&(!(pe&2)&&(Da|=n),We===4&&pn(e,Ze)),yt(e,l),n===1&&pe===0&&!(t.mode&1)&&(wl=ze()+500,Aa&&_n()))}function yt(e,t){var n=e.callbackNode;im(e,t);var l=ra(e,e===Qe?Ze:0);if(l===0)n!==null&&Eo(n),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(n!=null&&Eo(n),t===1)e.tag===0?sp(Sc.bind(null,e)):Gu(Sc.bind(null,e)),np(function(){!(pe&6)&&_n()}),n=null;else{switch(vu(l)){case 1:n=Ei;break;case 4:n=gu;break;case 16:n=la;break;case 536870912:n=yu;break;default:n=la}n=Ud(n,Rd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Rd(e,t){if(Xr=-1,Qr=0,pe&6)throw Error(O(327));var n=e.callbackNode;if(fl()&&e.callbackNode!==n)return null;var l=ra(e,e===Qe?Ze:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=Sa(e,l);else{t=l;var r=pe;pe|=2;var a=Dd();(Qe!==e||Ze!==t)&&(Kt=null,wl=ze()+500,zn(e,t));do try{Pp();break}catch(c){zd(e,c)}while(!0);qi(),va.current=a,pe=r,Oe!==null?t=0:(Qe=null,Ze=0,t=We)}if(t!==0){if(t===2&&(r=Us(e),r!==0&&(l=r,t=gi(e,r))),t===1)throw n=fr,zn(e,0),pn(e,l),yt(e,ze()),n;if(t===6)pn(e,l);else{if(r=e.current.alternate,!(l&30)&&!Np(r)&&(t=Sa(e,l),t===2&&(a=Us(e),a!==0&&(l=a,t=gi(e,a))),t===1))throw n=fr,zn(e,0),pn(e,l),yt(e,ze()),n;switch(e.finishedWork=r,e.finishedLanes=l,t){case 0:case 1:throw Error(O(345));case 2:Tn(e,mt,Kt);break;case 3:if(pn(e,l),(l&130023424)===l&&(t=ro+500-ze(),10<t)){if(ra(e,0)!==0)break;if(r=e.suspendedLanes,(r&l)!==l){it(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Qs(Tn.bind(null,e,mt,Kt),t);break}Tn(e,mt,Kt);break;case 4:if(pn(e,l),(l&4194240)===l)break;for(t=e.eventTimes,r=-1;0<l;){var i=31-Bt(l);a=1<<i,i=t[i],i>r&&(r=i),l&=~a}if(l=r,l=ze()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*jp(l/1960))-l,10<l){e.timeoutHandle=Qs(Tn.bind(null,e,mt,Kt),l);break}Tn(e,mt,Kt);break;case 5:Tn(e,mt,Kt);break;default:throw Error(O(329))}}}return yt(e,ze()),e.callbackNode===n?Rd.bind(null,e):null}function gi(e,t){var n=Yl;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=Sa(e,t),e!==2&&(t=mt,mt=n,t!==null&&yi(t)),e}function yi(e){mt===null?mt=e:mt.push.apply(mt,e)}function Np(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var l=0;l<n.length;l++){var r=n[l],a=r.getSnapshot;r=r.value;try{if(!Ut(a(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pn(e,t){for(t&=~lo,t&=~Da,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),l=1<<n;e[n]=-1,t&=~l}}function Sc(e){if(pe&6)throw Error(O(327));fl();var t=ra(e,0);if(!(t&1))return yt(e,ze()),null;var n=Sa(e,t);if(e.tag!==0&&n===2){var l=Us(e);l!==0&&(t=l,n=gi(e,l))}if(n===1)throw n=fr,zn(e,0),pn(e,t),yt(e,ze()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,mt,Kt),yt(e,ze()),null}function ao(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&(wl=ze()+500,Aa&&_n())}}function Un(e){gn!==null&&gn.tag===0&&!(pe&6)&&fl();var t=pe;pe|=1;var n=Lt.transition,l=ve;try{if(Lt.transition=null,ve=1,e)return e()}finally{ve=l,Lt.transition=n,pe=t,!(pe&6)&&_n()}}function so(){vt=sl.current,Pe(sl)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tp(n)),Oe!==null)for(n=Oe.return;n!==null;){var l=n;switch(Bi(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ca();break;case 3:xl(),Pe(ht),Pe(at),Xi();break;case 5:Yi(l);break;case 4:xl();break;case 13:Pe(Le);break;case 19:Pe(Le);break;case 10:Gi(l.type._context);break;case 22:case 23:so()}n=n.return}if(Qe=e,Oe=e=jn(e.current,null),Ze=vt=t,We=0,fr=null,lo=Da=On=0,mt=Yl=null,In!==null){for(t=0;t<In.length;t++)if(n=In[t],l=n.interleaved,l!==null){n.interleaved=null;var r=l.next,a=n.pending;if(a!==null){var i=a.next;a.next=r,l.next=i}n.pending=l}In=null}return e}function zd(e,t){do{var n=Oe;try{if(qi(),Wr.current=xa,ya){for(var l=Te.memoizedState;l!==null;){var r=l.queue;r!==null&&(r.pending=null),l=l.next}ya=!1}if(Bn=0,Xe=Ve=Te=null,Wl=!1,cr=0,no.current=null,n===null||n.return===null){We=1,fr=t,Oe=null;break}e:{var a=e,i=n.return,c=n,d=t;if(t=Ze,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,y=c,w=y.tag;if(!(y.mode&1)&&(w===0||w===11||w===15)){var x=y.alternate;x?(y.updateQueue=x.updateQueue,y.memoizedState=x.memoizedState,y.lanes=x.lanes):(y.updateQueue=null,y.memoizedState=null)}var v=cc(i);if(v!==null){v.flags&=-257,uc(v,i,c,a,t),v.mode&1&&oc(a,f,t),t=v,d=f;var j=t.updateQueue;if(j===null){var h=new Set;h.add(d),t.updateQueue=h}else j.add(d);break e}else{if(!(t&1)){oc(a,f,t),io();break e}d=Error(O(426))}}else if(_e&&c.mode&1){var u=cc(i);if(u!==null){!(u.flags&65536)&&(u.flags|=256),uc(u,i,c,a,t),Oi(vl(d,c));break e}}a=d=vl(d,c),We!==4&&(We=2),Yl===null?Yl=[a]:Yl.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var p=vd(a,d,t);nc(a,p);break e;case 1:c=d;var m=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Sn===null||!Sn.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=wd(a,c,t);nc(a,S);break e}}a=a.return}while(a!==null)}Fd(n)}catch(b){t=b,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function Dd(){var e=va.current;return va.current=xa,e===null?xa:e}function io(){(We===0||We===3||We===2)&&(We=4),Qe===null||!(On&268435455)&&!(Da&268435455)||pn(Qe,Ze)}function Sa(e,t){var n=pe;pe|=2;var l=Dd();(Qe!==e||Ze!==t)&&(Kt=null,zn(e,t));do try{Cp();break}catch(r){zd(e,r)}while(!0);if(qi(),pe=n,va.current=l,Oe!==null)throw Error(O(261));return Qe=null,Ze=0,We}function Cp(){for(;Oe!==null;)$d(Oe)}function Pp(){for(;Oe!==null&&!Zf();)$d(Oe)}function $d(e){var t=Od(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Fd(e):Oe=t,no.current=null}function Fd(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wp(n,t),n!==null){n.flags&=32767,Oe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{We=6,Oe=null;return}}else if(n=vp(n,t,vt),n!==null){Oe=n;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);We===0&&(We=5)}function Tn(e,t,n){var l=ve,r=Lt.transition;try{Lt.transition=null,ve=1,Mp(e,t,n,l)}finally{Lt.transition=r,ve=l}return null}function Mp(e,t,n,l){do fl();while(gn!==null);if(pe&6)throw Error(O(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(om(e,a),e===Qe&&(Oe=Qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zr||(zr=!0,Ud(la,function(){return fl(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Lt.transition,Lt.transition=null;var i=ve;ve=1;var c=pe;pe|=4,no.current=null,Sp(e,n),Ad(n,e),Ym(Ys),aa=!!Hs,Ys=Hs=null,e.current=n,bp(n),Jf(),pe=c,ve=i,Lt.transition=a}else e.current=n;if(zr&&(zr=!1,gn=e,ka=r),a=e.pendingLanes,a===0&&(Sn=null),nm(n.stateNode),yt(e,ze()),t!==null)for(l=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],l(r.value,{componentStack:r.stack,digest:r.digest});if(wa)throw wa=!1,e=pi,pi=null,e;return ka&1&&e.tag!==0&&fl(),a=e.pendingLanes,a&1?e===hi?Xl++:(Xl=0,hi=e):Xl=0,_n(),null}function fl(){if(gn!==null){var e=vu(ka),t=Lt.transition,n=ve;try{if(Lt.transition=null,ve=16>e?16:e,gn===null)var l=!1;else{if(e=gn,gn=null,ka=0,pe&6)throw Error(O(331));var r=pe;for(pe|=4,J=e.current;J!==null;){var a=J,i=a.child;if(J.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var f=c[d];for(J=f;J!==null;){var y=J;switch(y.tag){case 0:case 11:case 15:Hl(8,y,a)}var w=y.child;if(w!==null)w.return=y,J=w;else for(;J!==null;){y=J;var x=y.sibling,v=y.return;if(Ed(y),y===f){J=null;break}if(x!==null){x.return=v,J=x;break}J=v}}}var j=a.alternate;if(j!==null){var h=j.child;if(h!==null){j.child=null;do{var u=h.sibling;h.sibling=null,h=u}while(h!==null)}}J=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,J=i;else e:for(;J!==null;){if(a=J,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Hl(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,J=p;break e}J=a.return}}var m=e.current;for(J=m;J!==null;){i=J;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,J=g;else e:for(i=m;J!==null;){if(c=J,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:za(9,c)}}catch(b){Re(c,c.return,b)}if(c===i){J=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,J=S;break e}J=c.return}}if(pe=r,_n(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Ma,e)}catch{}l=!0}return l}finally{ve=n,Lt.transition=t}}return!1}function bc(e,t,n){t=vl(n,t),t=vd(e,t,1),e=kn(e,t,1),t=it(),e!==null&&(yr(e,1,t),yt(e,t))}function Re(e,t,n){if(e.tag===3)bc(e,e,n);else for(;t!==null;){if(t.tag===3){bc(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Sn===null||!Sn.has(l))){e=vl(n,e),e=wd(t,e,1),t=kn(t,e,1),e=it(),t!==null&&(yr(t,1,e),yt(t,e));break}}t=t.return}}function _p(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(Ze&n)===n&&(We===4||We===3&&(Ze&130023424)===Ze&&500>ze()-ro?zn(e,0):lo|=n),yt(e,t)}function Bd(e,t){t===0&&(e.mode&1?(t=Cr,Cr<<=1,!(Cr&130023424)&&(Cr=4194304)):t=1);var n=it();e=rn(e,t),e!==null&&(yr(e,t,n),yt(e,n))}function Ep(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bd(e,n)}function Lp(e,t){var n=0;switch(e.tag){case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(O(314))}l!==null&&l.delete(t),Bd(e,n)}var Od;Od=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)pt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return pt=!1,xp(e,t,n);pt=!!(e.flags&131072)}else pt=!1,_e&&t.flags&1048576&&Vu(t,fa,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Yr(e,t),e=t.pendingProps;var r=hl(t,at.current);dl(t,n),r=Ki(null,t,l,e,r,n);var a=Zi();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(l)?(a=!0,ua(t)):a=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Wi(t),r.updater=Ra,t.stateNode=r,r._reactInternals=t,li(t,l,e,n),t=si(null,t,l,!0,a,n)):(t.tag=0,_e&&a&&Fi(t),st(null,t,r,n),t=t.child),t;case 16:l=t.elementType;e:{switch(Yr(e,t),e=t.pendingProps,r=l._init,l=r(l._payload),t.type=l,r=t.tag=Ap(l),e=Dt(l,e),r){case 0:t=ai(null,t,l,e,n);break e;case 1:t=mc(null,t,l,e,n);break e;case 11:t=dc(null,t,l,e,n);break e;case 14:t=fc(null,t,l,Dt(l.type,e),n);break e}throw Error(O(306,l,""))}return t;case 0:return l=t.type,r=t.pendingProps,r=t.elementType===l?r:Dt(l,r),ai(e,t,l,r,n);case 1:return l=t.type,r=t.pendingProps,r=t.elementType===l?r:Dt(l,r),mc(e,t,l,r,n);case 3:e:{if(jd(t),e===null)throw Error(O(387));l=t.pendingProps,a=t.memoizedState,r=a.element,Ku(e,t),ha(t,l,null,n);var i=t.memoizedState;if(l=i.element,a.isDehydrated)if(a={element:l,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){r=vl(Error(O(423)),t),t=pc(e,t,l,n,r);break e}else if(l!==r){r=vl(Error(O(424)),t),t=pc(e,t,l,n,r);break e}else for(wt=wn(t.stateNode.containerInfo.firstChild),kt=t,_e=!0,Ft=null,n=Xu(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gl(),l===r){t=an(e,t,n);break e}st(e,t,l,n)}t=t.child}return t;case 5:return Zu(t),e===null&&ei(t),l=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,Xs(l,r)?i=null:a!==null&&Xs(l,a)&&(t.flags|=32),bd(e,t),st(e,t,i,n),t.child;case 6:return e===null&&ei(t),null;case 13:return Nd(e,t,n);case 4:return Hi(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=yl(t,null,l,n):st(e,t,l,n),t.child;case 11:return l=t.type,r=t.pendingProps,r=t.elementType===l?r:Dt(l,r),dc(e,t,l,r,n);case 7:return st(e,t,t.pendingProps,n),t.child;case 8:return st(e,t,t.pendingProps.children,n),t.child;case 12:return st(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(l=t.type._context,r=t.pendingProps,a=t.memoizedProps,i=r.value,Se(ma,l._currentValue),l._currentValue=i,a!==null)if(Ut(a.value,i)){if(a.children===r.children&&!ht.current){t=an(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){i=a.child;for(var d=c.firstContext;d!==null;){if(d.context===l){if(a.tag===1){d=tn(-1,n&-n),d.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var y=f.pending;y===null?d.next=d:(d.next=y.next,y.next=d),f.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),ti(a.return,n,t),c.lanes|=n;break}d=d.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(O(341));i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ti(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}st(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,l=t.pendingProps.children,dl(t,n),r=Tt(r),l=l(r),t.flags|=1,st(e,t,l,n),t.child;case 14:return l=t.type,r=Dt(l,t.pendingProps),r=Dt(l.type,r),fc(e,t,l,r,n);case 15:return kd(e,t,t.type,t.pendingProps,n);case 17:return l=t.type,r=t.pendingProps,r=t.elementType===l?r:Dt(l,r),Yr(e,t),t.tag=1,gt(l)?(e=!0,ua(t)):e=!1,dl(t,n),xd(t,l,r),li(t,l,r,n),si(null,t,l,!0,e,n);case 19:return Cd(e,t,n);case 22:return Sd(e,t,n)}throw Error(O(156,t.tag))};function Ud(e,t){return hu(e,t)}function Tp(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,n,l){return new Tp(e,t,n,l)}function oo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ap(e){if(typeof e=="function")return oo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pi)return 11;if(e===Mi)return 14}return 2}function jn(e,t){var n=e.alternate;return n===null?(n=Et(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kr(e,t,n,l,r,a){var i=2;if(l=e,typeof e=="function")oo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Qn:return Dn(n.children,r,a,t);case Ci:i=8,r|=8;break;case Ps:return e=Et(12,n,t,r|2),e.elementType=Ps,e.lanes=a,e;case Ms:return e=Et(13,n,t,r),e.elementType=Ms,e.lanes=a,e;case _s:return e=Et(19,n,t,r),e.elementType=_s,e.lanes=a,e;case Zc:return $a(n,r,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qc:i=10;break e;case Kc:i=9;break e;case Pi:i=11;break e;case Mi:i=14;break e;case un:i=16,l=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=Et(i,n,t,r),t.elementType=e,t.type=l,t.lanes=a,t}function Dn(e,t,n,l){return e=Et(7,e,l,t),e.lanes=n,e}function $a(e,t,n,l){return e=Et(22,e,l,t),e.elementType=Zc,e.lanes=n,e.stateNode={isHidden:!1},e}function gs(e,t,n){return e=Et(6,e,null,t),e.lanes=n,e}function ys(e,t,n){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ip(e,t,n,l,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ka(0),this.expirationTimes=Ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ka(0),this.identifierPrefix=l,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function co(e,t,n,l,r,a,i,c,d){return e=new Ip(e,t,n,c,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Et(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:l,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wi(a),e}function Rp(e,t,n){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xn,key:l==null?null:""+l,children:e,containerInfo:t,implementation:n}}function qd(e){if(!e)return Cn;e=e._reactInternals;e:{if(Wn(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(gt(n))return qu(e,n,t)}return t}function Gd(e,t,n,l,r,a,i,c,d){return e=co(n,l,!0,e,r,a,i,c,d),e.context=qd(null),n=e.current,l=it(),r=bn(n),a=tn(l,r),a.callback=t??null,kn(n,a,r),e.current.lanes=r,yr(e,r,l),yt(e,l),e}function Fa(e,t,n,l){var r=t.current,a=it(),i=bn(r);return n=qd(n),t.context===null?t.context=n:t.pendingContext=n,t=tn(a,i),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=kn(r,t,i),e!==null&&(Ot(e,r,i,a),Vr(e,r,i)),i}function ba(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uo(e,t){jc(e,t),(e=e.alternate)&&jc(e,t)}function zp(){return null}var Vd=typeof reportError=="function"?reportError:function(e){console.error(e)};function fo(e){this._internalRoot=e}Ba.prototype.render=fo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));Fa(e,t,null,null)};Ba.prototype.unmount=fo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Un(function(){Fa(null,e,null,null)}),t[ln]=null}};function Ba(e){this._internalRoot=e}Ba.prototype.unstable_scheduleHydration=function(e){if(e){var t=Su();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mn.length&&t!==0&&t<mn[n].priority;n++);mn.splice(n,0,e),n===0&&ju(e)}};function mo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Oa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nc(){}function Dp(e,t,n,l,r){if(r){if(typeof l=="function"){var a=l;l=function(){var f=ba(i);a.call(f)}}var i=Gd(t,l,e,0,null,!1,!1,"",Nc);return e._reactRootContainer=i,e[ln]=i.current,rr(e.nodeType===8?e.parentNode:e),Un(),i}for(;r=e.lastChild;)e.removeChild(r);if(typeof l=="function"){var c=l;l=function(){var f=ba(d);c.call(f)}}var d=co(e,0,!1,null,null,!1,!1,"",Nc);return e._reactRootContainer=d,e[ln]=d.current,rr(e.nodeType===8?e.parentNode:e),Un(function(){Fa(t,d,n,l)}),d}function Ua(e,t,n,l,r){var a=n._reactRootContainer;if(a){var i=a;if(typeof r=="function"){var c=r;r=function(){var d=ba(i);c.call(d)}}Fa(t,i,e,r)}else i=Dp(n,t,e,r,l);return ba(i)}wu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Dl(t.pendingLanes);n!==0&&(Li(t,n|1),yt(t,ze()),!(pe&6)&&(wl=ze()+500,_n()))}break;case 13:Un(function(){var l=rn(e,1);if(l!==null){var r=it();Ot(l,e,1,r)}}),uo(e,1)}};Ti=function(e){if(e.tag===13){var t=rn(e,134217728);if(t!==null){var n=it();Ot(t,e,134217728,n)}uo(e,134217728)}};ku=function(e){if(e.tag===13){var t=bn(e),n=rn(e,t);if(n!==null){var l=it();Ot(n,e,t,l)}uo(e,t)}};Su=function(){return ve};bu=function(e,t){var n=ve;try{return ve=e,t()}finally{ve=n}};Fs=function(e,t,n){switch(t){case"input":if(Ts(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var r=Ta(l);if(!r)throw Error(O(90));eu(l),Ts(l,r)}}}break;case"textarea":nu(e,n);break;case"select":t=n.value,t!=null&&il(e,!!n.multiple,t,!1)}};cu=ao;uu=Un;var $p={usingClientEntryPoint:!1,Events:[vr,el,Ta,iu,ou,ao]},Al={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fp={bundleType:Al.bundleType,version:Al.version,rendererPackageName:Al.rendererPackageName,rendererConfig:Al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mu(e),e===null?null:e.stateNode},findFiberByHostInstance:Al.findFiberByHostInstance||zp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dr.isDisabled&&Dr.supportsFiber)try{Ma=Dr.inject(Fp),Ht=Dr}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$p;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mo(t))throw Error(O(200));return Rp(e,t,null,n)};bt.createRoot=function(e,t){if(!mo(e))throw Error(O(299));var n=!1,l="",r=Vd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=co(e,1,!1,null,null,n,!1,l,r),e[ln]=t.current,rr(e.nodeType===8?e.parentNode:e),new fo(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=mu(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return Un(e)};bt.hydrate=function(e,t,n){if(!Oa(t))throw Error(O(200));return Ua(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!mo(e))throw Error(O(405));var l=n!=null&&n.hydratedSources||null,r=!1,a="",i=Vd;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Gd(t,null,e,1,n??null,r,!1,a,i),e[ln]=t.current,rr(e),l)for(e=0;e<l.length;e++)n=l[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Ba(t)};bt.render=function(e,t,n){if(!Oa(t))throw Error(O(200));return Ua(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!Oa(e))throw Error(O(40));return e._reactRootContainer?(Un(function(){Ua(null,null,e,!1,function(){e._reactRootContainer=null,e[ln]=null})}),!0):!1};bt.unstable_batchedUpdates=ao;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,l){if(!Oa(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return Ua(e,t,n,!1,l)};bt.version="18.3.1-next-f1338f8080-20240426";function Wd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wd)}catch(e){console.error(e)}}Wd(),Wc.exports=bt;var Bp=Wc.exports,Hd,Cc=Bp;Hd=Cc.createRoot,Cc.hydrateRoot;const Pc={Normal:{rarity:"Normal",damageBonus:0,qualityBonus:0,colorVariant:"#ffffff"},Magic:{rarity:"Magic",damageBonus:10,qualityBonus:5,colorVariant:"#8888ff",areaOfEffectBonus:5,projectileDamageBonus:8,manaCostReduction:5},Rare:{rarity:"Rare",damageBonus:25,qualityBonus:10,colorVariant:"#ffff88",areaOfEffectBonus:12,areaDamageBonus:15,projectileDamageBonus:20,physicalDamageBonus:18,elementalDamageBonus:18,attackSpeedBonus:10,castSpeedBonus:10,criticalChanceBonus:8,durationBonus:15,manaCostReduction:10},Unique:{rarity:"Unique",damageBonus:50,qualityBonus:20,colorVariant:"#ff8800",areaOfEffectBonus:25,areaDamageBonus:30,projectileDamageBonus:40,physicalDamageBonus:35,elementalDamageBonus:35,attackSpeedBonus:20,castSpeedBonus:20,criticalChanceBonus:15,durationBonus:25,manaCostReduction:20}},po=[{id:"whirlwind",name:"Whirlwind",description:"Continuous spinning attack that hits all nearby enemies. Inspired by Path of Exile's Cyclone skill - channels automatically during combat with area scaling and movement.",type:"active",category:"attack",tags:["Attack","AoE","Channeling","Melee","Physical"],maxLevel:20,unlockLevel:0,skillPointCost:0,manaCost:0,cooldown:0,icon:"🌪️",rarity:"Normal",quality:0,scaling:{baseDamage:12,damagePerLevel:2.5,baseManaCost:0,manaCostPerLevel:0,baseCooldown:0,cooldownReductionPerLevel:0,baseArea:2.5,areaPerLevel:.15}},{id:"fireball",name:"Fireball",description:"Launches a fiery projectile that explodes on impact, dealing fire damage to nearby enemies.",type:"active",category:"spell",tags:["Spell","Projectile","AoE","Fire"],maxLevel:20,unlockLevel:0,skillPointCost:0,manaCost:0,cooldown:0,icon:"🔥",rarity:"Normal",quality:0,scaling:{baseDamage:15,damagePerLevel:3,baseManaCost:0,manaCostPerLevel:0,baseCooldown:0,cooldownReductionPerLevel:0,baseArea:1.5,areaPerLevel:.1,baseRange:300,rangePerLevel:10}}],Yd=[{id:"increased_damage",name:"Increased Damage",description:"Increases damage of supported skills",tags:["Attack","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:15,isPercentage:!0,description:"+15% more damage"}],icon:"💪",rarity:"Normal",quality:0,scaling:{baseValue:15,valuePerLevel:2}},{id:"increased_area",name:"Increased Area of Effect",description:"Increases area of effect of supported skills",tags:["AoE"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"area",value:25,isPercentage:!0,description:"+25% increased area of effect"}],icon:"📏",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:3}},{id:"multiple_projectiles",name:"Multiple Projectiles",description:"Supported skills fire additional projectiles",tags:["Projectile"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"projectiles",value:2,isPercentage:!1,description:"+2 additional projectiles"},{type:"damage",value:-20,isPercentage:!0,description:"-20% less damage"}],icon:"🎯",rarity:"Normal",quality:0,scaling:{baseValue:2,valuePerLevel:.2}},{id:"faster_casting",name:"Faster Casting",description:"Reduces cooldown of supported skills",tags:["Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"cooldown",value:-25,isPercentage:!0,description:"-25% reduced cooldown"}],icon:"⏱️",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:1.5}},{id:"reduced_mana",name:"Reduced Mana Cost",description:"Reduces mana cost of supported skills",tags:["Attack","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"manaCost",value:-30,isPercentage:!0,description:"-30% reduced mana cost"}],icon:"💙",rarity:"Normal",quality:0,scaling:{baseValue:30,valuePerLevel:1}},{id:"added_fire_damage",name:"Added Fire Damage Support",description:"Adds fire damage to supported skills.",tags:["Support","Fire"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:10,damageType:"fire",tags:["Fire"]}],icon:"🔥",rarity:"Normal",quality:0,scaling:{baseValue:10,valuePerLevel:2}},{id:"elemental_focus",name:"Elemental Focus Support",description:"Increases elemental damage but prevents critical strikes.",tags:["Support","Elemental"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage_multiplier",value:1.5,tags:["Fire","Cold","Lightning"]},{type:"critical_chance_multiplier",value:0,tags:[]}],icon:"🌟",rarity:"Normal",quality:0,scaling:{baseValue:1.5,valuePerLevel:.02}},{id:"melee_physical_damage",name:"Melee Physical Damage Support",description:"Increases physical damage of supported melee skills.",tags:["Support","Melee","Physical"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage_multiplier",value:1.4,tags:["Physical","Melee"]}],icon:"⚔️",rarity:"Normal",quality:0,scaling:{baseValue:1.4,valuePerLevel:.015}},{id:"spell_echo",name:"Spell Echo Support",description:"Supported spells repeat an additional time with reduced damage.",tags:["Support","Spell"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:-25,isPercentage:!0,description:"-25% less damage"}],icon:"🔄",rarity:"Normal",quality:0,scaling:{baseValue:25,valuePerLevel:.5}},{id:"concentrated_effect",name:"Concentrated Effect Support",description:"Reduces area of effect but increases area damage.",tags:["Support","AoE"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"area",value:-30,isPercentage:!0,description:"-30% reduced area of effect"},{type:"damage",value:60,isPercentage:!0,description:"+60% more area damage"}],icon:"🎯",rarity:"Normal",quality:0,scaling:{baseValue:60,valuePerLevel:2}},{id:"pierce",name:"Pierce Support",description:"Projectiles pierce through enemies, hitting multiple targets.",tags:["Support","Projectile"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:10,isPercentage:!0,description:"+10% more projectile damage"}],icon:"🏹",rarity:"Normal",quality:0,scaling:{baseValue:10,valuePerLevel:1}},{id:"minion_damage",name:"Minion Damage Support",description:"Increases damage dealt by minions.",tags:["Support","Minion"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"damage",value:50,isPercentage:!0,description:"+50% increased minion damage"}],icon:"👥",rarity:"Normal",quality:0,scaling:{baseValue:50,valuePerLevel:3}},{id:"added_cold_damage",name:"Added Cold Damage Support",description:"Adds cold damage to supported skills.",tags:["Support","Cold"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:8,damageType:"cold",tags:["Cold"]}],icon:"❄️",rarity:"Normal",quality:0,scaling:{baseValue:8,valuePerLevel:1.5}},{id:"added_lightning_damage",name:"Added Lightning Damage Support",description:"Adds lightning damage to supported skills.",tags:["Support","Lightning"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"added_damage",value:12,damageType:"lightning",tags:["Lightning"]}],icon:"⚡",rarity:"Normal",quality:0,scaling:{baseValue:12,valuePerLevel:2}},{id:"increased_duration",name:"Increased Duration Support",description:"Increases the duration of supported skills.",tags:["Support","Duration"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"duration",value:40,isPercentage:!0,description:"+40% increased skill duration"}],icon:"⏳",rarity:"Normal",quality:0,scaling:{baseValue:40,valuePerLevel:2}},{id:"critical_strike_multiplier",name:"Critical Strike Multiplier Support",description:"Increases critical strike multiplier of supported skills.",tags:["Support","Critical"],maxLevel:20,unlockLevel:0,skillPointCost:0,modifiers:[{type:"critical_chance_multiplier",value:1.5,tags:[]}],icon:"💥",rarity:"Normal",quality:0,scaling:{baseValue:1.5,valuePerLevel:.02}}];function Op(e,t){return t.some(n=>e.tags.includes(n))}function Up(e,t){return t.tags.length===0?!0:Op(e,t.tags)}function qp(e){return e.tags.join(", ")}function Xd(e){return!e.scaling||!e.scaling.baseDamage?0:Math.floor(e.scaling.baseDamage+(e.scaling.damagePerLevel||0)*(e.level-1))}function Gp(e){if(!e.scaling)return e.manaCost||0;const t=e.scaling.baseManaCost||e.manaCost,n=e.scaling.manaCostPerLevel||0;return Math.max(1,Math.floor(t+n*(e.level-1)))}function Vp(e){if(!e.scaling)return e.cooldown||0;const t=e.scaling.baseCooldown||e.cooldown,n=e.scaling.cooldownReductionPerLevel||0;return Math.max(0,Math.floor(t-n*(e.level-1)))}function Wp(e){return!e.scaling||!e.scaling.baseArea?0:e.scaling.baseArea+(e.scaling.areaPerLevel||0)*(e.level-1)}function Hp(e){return!e.scaling||!e.scaling.baseDuration?0:(e.scaling.baseDuration+(e.scaling.durationPerLevel||0)*(e.level-1))/1e3}function xi(e){return!e.scaling||!e.scaling.baseRange?0:e.scaling.baseRange+(e.scaling.rangePerLevel||0)*(e.level-1)}function Yp(e){var t;return e.scaling?Math.floor(e.scaling.baseValue+e.scaling.valuePerLevel*(e.level-1)):((t=e.modifiers[0])==null?void 0:t.value)||0}function Qd(e){if(!e.scaling)return e.modifiers;const t=Yp(e);return e.modifiers.map(n=>({...n,value:n.type===e.modifiers[0].type?n.value<0?-t:t:n.value,description:n.type===e.modifiers[0].type?`${n.value<0?"-":"+"}${t}${n.isPercentage?"%":""} ${n.description?n.description.split(" ").slice(-2).join(" "):""}`:n.description}))}function Fl(e){if(!e||!e.scaling)return console.warn("applyModifiersToSkill: skill or skill.scaling is undefined",e),{damage:0,manaCost:0,cooldown:0,area:1,duration:0,projectileCount:1};let t=Xd(e),n=Gp(e),l=Vp(e),r=Wp(e),a=Hp(e),i=1;const c=Pc[e.rarity];return c&&(t*=1+c.damageBonus/100,e.tags.includes("AoE")&&(c.areaOfEffectBonus&&(r*=1+c.areaOfEffectBonus/100),c.areaDamageBonus&&(t*=1+c.areaDamageBonus/100)),e.tags.includes("Projectile")&&c.projectileDamageBonus&&(t*=1+c.projectileDamageBonus/100),e.tags.includes("Physical")&&c.physicalDamageBonus&&(t*=1+c.physicalDamageBonus/100),(e.tags.includes("Fire")||e.tags.includes("Cold")||e.tags.includes("Lightning"))&&c.elementalDamageBonus&&(t*=1+c.elementalDamageBonus/100),e.tags.includes("Critical")&&c.criticalChanceBonus&&(t*=1+c.criticalChanceBonus/100),e.tags.includes("Duration")&&c.durationBonus&&(a*=1+c.durationBonus/100),c.manaCostReduction&&(n*=1-c.manaCostReduction/100)),e.supportGems.forEach(d=>{const f=Pc[d.rarity];f&&(t*=1+f.damageBonus/200,d.tags.includes("AoE")&&f.areaOfEffectBonus&&(r*=1+f.areaOfEffectBonus/200),d.tags.includes("Projectile")&&f.projectileDamageBonus&&(t*=1+f.projectileDamageBonus/200),f.manaCostReduction&&(n*=1-f.manaCostReduction/200)),Qd(d).forEach(w=>{switch(w.type){case"damage":w.isPercentage?t*=1+w.value/100:t+=w.value;break;case"manaCost":w.isPercentage?n*=1+w.value/100:n+=w.value;break;case"cooldown":w.isPercentage?l*=1+w.value/100:l+=w.value;break;case"area":w.isPercentage?r*=1+w.value/100:r+=w.value;break;case"duration":w.isPercentage?a*=1+w.value/100:a+=w.value;break;case"projectiles":i+=w.value;break}})}),{damage:Math.round(t),manaCost:Math.round(n),cooldown:Math.round(l),area:Math.round(r*100)/100,duration:Math.round(a),projectileCount:Math.max(1,Math.round(i))}}function ho(e){return{...e,level:1,isUnlocked:!0,isEquipped:[].includes(e.id),supportGems:[]}}function Kd(e){return{...e,level:1,isUnlocked:!0}}function Zd(){const e=new Array(6).fill(null);return["fireball"].forEach((n,l)=>{const r=po.find(a=>a.id===n);r&&l<1&&(e[l]={...ho(r),isEquipped:!0})}),{slots:e,maxSlots:6}}function qn(e){return Math.floor(e*1.5)+1}function ja(e,t){if(e.level>=e.maxLevel)return!1;const n=qn(e.level);return t>=n}function fn(e){return e.skillPointCost}const Xp=[{id:"monster_life_1",name:"Feral",description:"Monsters have 25% increased Life",type:"prefix",tier:1,effects:{monsterLife:25},requiredLevel:1},{id:"monster_life_2",name:"Savage",description:"Monsters have 50% increased Life",type:"prefix",tier:3,effects:{monsterLife:50},requiredLevel:20},{id:"monster_damage_1",name:"Brutal",description:"Monsters deal 20% increased Damage",type:"prefix",tier:2,effects:{monsterDamage:20},requiredLevel:10},{id:"monster_speed_1",name:"Fleet",description:"Monsters have 15% increased Movement and Attack Speed",type:"prefix",tier:2,effects:{monsterSpeed:15},requiredLevel:15},{id:"elemental_damage_1",name:"Burning",description:"Monsters deal 30% additional Fire Damage",type:"prefix",tier:3,effects:{elementalDamage:30},requiredLevel:25},{id:"item_quantity_1",name:"of Bounty",description:"20% increased Item Quantity",type:"suffix",tier:1,effects:{itemQuantity:20},requiredLevel:1},{id:"item_rarity_1",name:"of Fortune",description:"30% increased Item Rarity",type:"suffix",tier:2,effects:{itemRarity:30},requiredLevel:10},{id:"pack_size_1",name:"of Hordes",description:"25% increased Pack Size",type:"suffix",tier:3,effects:{packSize:25},requiredLevel:20},{id:"experience_1",name:"of Learning",description:"15% increased Experience Gain",type:"suffix",tier:2,effects:{experienceGain:15},requiredLevel:5}],Jd=[{id:"beach",name:"Beach",description:"A sandy coastline overrun by corrupted sea creatures.",tier:1,baseLevel:68,layout:"linear",theme:"desert",baseRewards:[{type:"equipment",quantity:2,minLevel:68,maxLevel:72},{type:"experience",quantity:1e3}],completionTime:180},{id:"graveyard",name:"Graveyard",description:"An ancient cemetery where the dead refuse to rest.",tier:2,baseLevel:69,layout:"maze",theme:"corrupted",baseRewards:[{type:"equipment",quantity:3,minLevel:69,maxLevel:73},{type:"skillGem",quantity:1,rarity:"Normal"},{type:"experience",quantity:1200}],completionTime:240},{id:"dungeon",name:"Dungeon",description:"A dark underground complex filled with ancient horrors.",tier:3,baseLevel:70,layout:"branching",theme:"dungeon",baseRewards:[{type:"equipment",quantity:3,minLevel:70,maxLevel:74},{type:"supportGem",quantity:1,rarity:"Normal"},{type:"experience",quantity:1500}],completionTime:300},{id:"volcano",name:"Volcano",description:"A treacherous volcanic peak with rivers of molten lava.",tier:6,baseLevel:73,layout:"circular",theme:"volcanic",baseRewards:[{type:"equipment",quantity:4,minLevel:73,maxLevel:77},{type:"skillGem",quantity:1,rarity:"Magic"},{type:"experience",quantity:2500}],completionTime:420,unlockRequirement:{completedMaps:["beach","graveyard","dungeon"],playerLevel:50}},{id:"glacier",name:"Glacier",description:"A frozen wasteland where ice elementals roam freely.",tier:8,baseLevel:75,layout:"arena",theme:"ice",baseRewards:[{type:"equipment",quantity:5,minLevel:75,maxLevel:79},{type:"supportGem",quantity:2,rarity:"Magic"},{type:"experience",quantity:3500}],completionTime:480,unlockRequirement:{completedMaps:["volcano"],playerLevel:60}},{id:"shaper_realm",name:"Shaper's Realm",description:"A reality-bending dimension where the laws of physics break down.",tier:14,baseLevel:81,layout:"maze",theme:"celestial",baseRewards:[{type:"equipment",quantity:8,minLevel:81,maxLevel:85,rarity:"Rare",guaranteed:!0},{type:"skillGem",quantity:2,rarity:"Rare"},{type:"supportGem",quantity:2,rarity:"Rare"},{type:"experience",quantity:8e3}],completionTime:720,unlockRequirement:{completedMaps:["glacier"],playerLevel:80}},{id:"elder_sanctum",name:"Elder Sanctum",description:"The twisted domain of an ancient cosmic entity.",tier:16,baseLevel:83,layout:"arena",theme:"corrupted",baseRewards:[{type:"equipment",quantity:10,minLevel:83,maxLevel:87,rarity:"Unique",guaranteed:!0},{type:"skillGem",quantity:3,rarity:"Unique"},{type:"supportGem",quantity:3,rarity:"Unique"},{type:"experience",quantity:15e3}],completionTime:900,unlockRequirement:{completedMaps:["shaper_realm"],playerLevel:90}}];function Qp(e,t="Normal"){const n={...e,rarity:t,modifiers:[],isCompleted:!1,timesCompleted:0},l=Kp(t),r=Xp.filter(a=>a.requiredLevel<=n.baseLevel);for(let a=0;a<l;a++){const i=r[Math.floor(Math.random()*r.length)];n.modifiers.find(c=>c.id===i.id)||n.modifiers.push(i)}return n}function Kp(e){switch(e){case"Normal":return 0;case"Magic":return Math.floor(Math.random()*2)+1;case"Rare":return Math.floor(Math.random()*3)+3;case"Unique":return Math.floor(Math.random()*2)+4}}function Zp(e){let t=e.tier*10+e.baseLevel;return e.modifiers.forEach(n=>{t+=n.tier*5,n.effects.monsterLife&&(t+=n.effects.monsterLife/5),n.effects.monsterDamage&&(t+=n.effects.monsterDamage/3),n.effects.monsterSpeed&&(t+=n.effects.monsterSpeed/4)}),Math.floor(t)}function Jp(e){const t=[...e.baseRewards];return e.modifiers.forEach(n=>{n.effects.itemQuantity&&t.forEach(l=>{l.type==="equipment"&&(l.quantity=Math.floor(l.quantity*(1+n.effects.itemQuantity/100)))}),n.effects.experienceGain&&t.forEach(l=>{l.type==="experience"&&(l.quantity=Math.floor(l.quantity*(1+n.effects.experienceGain/100)))})}),t}function ef(e,t,n){return e.unlockRequirement?!(e.unlockRequirement.playerLevel&&t<e.unlockRequirement.playerLevel||e.unlockRequirement.completedMaps&&!e.unlockRequirement.completedMaps.every(r=>n.includes(r))):!0}function e0(e,t){return Jd.filter(n=>ef(n,e,t)).map(n=>Qp(n,"Normal"))}function t0(){return{availableMaps:e0(1,[]),completedMaps:[],mapStash:[],atlasProgress:{tier:1,completedCount:0,totalCount:Jd.length,bonusObjectives:0}}}function n0(){const e={},t=[],n={id:"start",name:"Origin",description:"The beginning of your journey",type:"travel",position:{x:0,y:0},connections:["str_path_1","dex_path_1","int_path_1","vit_path_1"],requirements:[],stats:{},cost:0,maxRank:1};return e[n.id]=n,l0(e),r0(e),a0(e),s0(e),i0(e,t),o0(e,t),c0(e,t),u0(e,t),{nodes:e,startingNode:"start",clusters:t}}function l0(e){[{id:"str_path_1",name:"Might",description:"+5 Strength",type:"travel",position:{x:100,y:0},connections:["start","str_small_1"],stats:{strength:5}},{id:"str_small_1",name:"Physical Power",description:"+3% increased damage",type:"small",position:{x:150,y:0},connections:["str_path_1","str_notable_1"],stats:{damage:.03}},{id:"str_notable_1",name:"Berserker's Rage",description:"+25% increased damage, +50 health",type:"notable",position:{x:200,y:0},connections:["str_small_1","str_path_2"],stats:{damage:.25,health:50}},{id:"str_path_2",name:"Fortitude",description:"+8 Strength",type:"travel",position:{x:250,y:0},connections:["str_notable_1","str_small_2"],stats:{strength:8}},{id:"str_small_2",name:"Weapon Mastery",description:"+5% attack speed",type:"small",position:{x:300,y:0},connections:["str_path_2","str_notable_2"],stats:{attackSpeed:.05}},{id:"str_notable_2",name:"Devastating Blows",description:"+50% critical strike damage, +10% critical chance",type:"notable",position:{x:350,y:0},connections:["str_small_2"],stats:{critChance:.1},skillModifiers:[{skillId:"all",property:"criticalDamage",value:.5,type:"additive"}]}].forEach(n=>{const l={...n,requirements:n.connections.filter(r=>r!=="start"),cost:n.type==="notable"?3:1,maxRank:1,skillModifiers:n.skillModifiers};e[l.id]=l})}function r0(e){[{id:"dex_path_1",name:"Agility",description:"+5 Dexterity",type:"travel",position:{x:0,y:100},connections:["start","dex_small_1"],stats:{dexterity:5}},{id:"dex_small_1",name:"Swift Strikes",description:"+4% attack speed",type:"small",position:{x:0,y:150},connections:["dex_path_1","dex_notable_1"],stats:{attackSpeed:.04}},{id:"dex_notable_1",name:"Precision",description:"+15% critical chance, +8% dodge chance",type:"notable",position:{x:0,y:200},connections:["dex_small_1","dex_path_2"],stats:{critChance:.15,dodgeChance:.08}},{id:"dex_path_2",name:"Finesse",description:"+8 Dexterity",type:"travel",position:{x:0,y:250},connections:["dex_notable_1","dex_small_2"],stats:{dexterity:8}},{id:"dex_small_2",name:"Evasion",description:"+3% dodge chance",type:"small",position:{x:0,y:300},connections:["dex_path_2","dex_notable_2"],stats:{dodgeChance:.03}},{id:"dex_notable_2",name:"Shadow Dancer",description:"+20% dodge chance, +15% attack speed",type:"notable",position:{x:0,y:350},connections:["dex_small_2"],stats:{dodgeChance:.2,attackSpeed:.15}}].forEach(n=>{const l={...n,requirements:n.connections.filter(r=>r!=="start"),cost:n.type==="notable"?3:1,maxRank:1};e[l.id]=l})}function a0(e){[{id:"int_path_1",name:"Wisdom",description:"+5 Intelligence",type:"travel",position:{x:-100,y:0},connections:["start","int_small_1"],stats:{intelligence:5}},{id:"int_small_1",name:"Mental Clarity",description:"+15 mana, +0.5 mana regeneration",type:"small",position:{x:-150,y:0},connections:["int_path_1","int_notable_1"],stats:{mana:15,manaRegen:.5}},{id:"int_notable_1",name:"Arcane Mastery",description:"+50 mana, +25% spell damage",type:"notable",position:{x:-200,y:0},connections:["int_small_1","int_path_2"],stats:{mana:50},skillModifiers:[{skillId:"fireball",property:"damage",value:.25,type:"additive"},{skillId:"lightning_bolt",property:"damage",value:.25,type:"additive"},{skillId:"ice_shard",property:"damage",value:.25,type:"additive"}]},{id:"int_path_2",name:"Scholarly Pursuit",description:"+8 Intelligence",type:"travel",position:{x:-250,y:0},connections:["int_notable_1","int_small_2"],stats:{intelligence:8}},{id:"int_small_2",name:"Mana Efficiency",description:"+1.0 mana regeneration",type:"small",position:{x:-300,y:0},connections:["int_path_2","int_notable_2"],stats:{manaRegen:1}},{id:"int_notable_2",name:"Elemental Convergence",description:"+50% area of effect for spells",type:"notable",position:{x:-350,y:0},connections:["int_small_2"],stats:{},skillModifiers:[{skillId:"fireball",property:"area",value:.5,type:"additive"},{skillId:"lightning_bolt",property:"area",value:.5,type:"additive"},{skillId:"ice_shard",property:"area",value:.5,type:"additive"}]}].forEach(n=>{const l={...n,requirements:n.connections.filter(r=>r!=="start"),cost:n.type==="notable"?3:1,maxRank:1};e[l.id]=l})}function s0(e){[{id:"vit_path_1",name:"Constitution",description:"+5 Vitality",type:"travel",position:{x:0,y:-100},connections:["start","vit_small_1"],stats:{vitality:5}},{id:"vit_small_1",name:"Robust Health",description:"+25 health",type:"small",position:{x:0,y:-150},connections:["vit_path_1","vit_notable_1"],stats:{health:25}},{id:"vit_notable_1",name:"Iron Will",description:"+100 health, +5 armor",type:"notable",position:{x:0,y:-200},connections:["vit_small_1","vit_path_2"],stats:{health:100,armor:5}},{id:"vit_path_2",name:"Endurance",description:"+8 Vitality",type:"travel",position:{x:0,y:-250},connections:["vit_notable_1","vit_small_2"],stats:{vitality:8}},{id:"vit_small_2",name:"Regeneration",description:"+1.0 health regeneration",type:"small",position:{x:0,y:-300},connections:["vit_path_2","vit_notable_2"],stats:{healthRegen:1}},{id:"vit_notable_2",name:"Undying",description:"+200 health, +3% life steal",type:"notable",position:{x:0,y:-350},connections:["vit_small_2"],stats:{health:200,lifeSteal:.03}}].forEach(n=>{const l={...n,requirements:n.connections.filter(r=>r!=="start"),cost:n.type==="notable"?3:1,maxRank:1};e[l.id]=l})}function i0(e,t){const n={id:"combat_cluster_1",name:"Weapon Expertise",centerPosition:{x:200,y:-150},nodeIds:[],theme:"combat"};[{id:"combat_travel_1",name:"Weapon Training",description:"+3% attack speed",type:"travel",position:{x:150,y:-100},connections:["str_path_1","combat_small_1"],stats:{attackSpeed:.03}},{id:"combat_small_1",name:"Blade Dance",description:"+2% critical chance",type:"small",position:{x:180,y:-130},connections:["combat_travel_1","combat_notable_1"],stats:{critChance:.02}},{id:"combat_notable_1",name:"Master of Arms",description:"+20% attack speed, +10% critical chance",type:"notable",position:{x:200,y:-150},connections:["combat_small_1","combat_small_2"],stats:{attackSpeed:.2,critChance:.1}},{id:"combat_small_2",name:"Lethal Precision",description:"+3% critical chance",type:"small",position:{x:220,y:-170},connections:["combat_notable_1"],stats:{critChance:.03}}].forEach(r=>{const a={...r,requirements:r.connections,cost:r.type==="notable"?3:1,maxRank:1};e[a.id]=a,n.nodeIds.push(a.id)}),t.push(n)}function o0(e,t){const n={id:"defense_cluster_1",name:"Fortification",centerPosition:{x:-150,y:150},nodeIds:[],theme:"defense"};[{id:"defense_travel_1",name:"Shield Training",description:"+2 armor",type:"travel",position:{x:-100,y:100},connections:["vit_path_1","defense_small_1"],stats:{armor:2}},{id:"defense_small_1",name:"Thick Skin",description:"+3 armor",type:"small",position:{x:-130,y:130},connections:["defense_travel_1","defense_notable_1"],stats:{armor:3}},{id:"defense_notable_1",name:"Fortress",description:"+15 armor, +5% block chance",type:"notable",position:{x:-150,y:150},connections:["defense_small_1","defense_small_2"],stats:{armor:15,blockChance:.05}},{id:"defense_small_2",name:"Damage Reduction",description:"+5 armor",type:"small",position:{x:-170,y:170},connections:["defense_notable_1"],stats:{armor:5}}].forEach(r=>{const a={...r,requirements:r.connections,cost:r.type==="notable"?3:1,maxRank:1};e[a.id]=a,n.nodeIds.push(a.id)}),t.push(n)}function c0(e,t){const n={id:"magic_cluster_1",name:"Elemental Mastery",centerPosition:{x:-200,y:-150},nodeIds:[],theme:"magic"};[{id:"magic_travel_1",name:"Elemental Affinity",description:"+10 mana",type:"travel",position:{x:-150,y:-100},connections:["int_path_1","magic_small_1"],stats:{mana:10}},{id:"magic_small_1",name:"Spell Power",description:"+5% spell damage",type:"small",position:{x:-180,y:-130},connections:["magic_travel_1","magic_notable_1"],stats:{},skillModifiers:[{skillId:"fireball",property:"damage",value:.05,type:"additive"},{skillId:"lightning_bolt",property:"damage",value:.05,type:"additive"},{skillId:"ice_shard",property:"damage",value:.05,type:"additive"}]},{id:"magic_notable_1",name:"Elemental Overload",description:"+30% spell damage, -10% mana costs",type:"notable",position:{x:-200,y:-150},connections:["magic_small_1","magic_small_2"],stats:{},skillModifiers:[{skillId:"fireball",property:"damage",value:.3,type:"additive"},{skillId:"lightning_bolt",property:"damage",value:.3,type:"additive"},{skillId:"ice_shard",property:"damage",value:.3,type:"additive"},{skillId:"fireball",property:"manaCost",value:-.1,type:"additive"},{skillId:"lightning_bolt",property:"manaCost",value:-.1,type:"additive"},{skillId:"ice_shard",property:"manaCost",value:-.1,type:"additive"}]},{id:"magic_small_2",name:"Mana Efficiency",description:"+0.8 mana regeneration",type:"small",position:{x:-220,y:-170},connections:["magic_notable_1"],stats:{manaRegen:.8}}].forEach(r=>{const a={...r,requirements:r.connections,cost:r.type==="notable"?3:1,maxRank:1};e[a.id]=a,n.nodeIds.push(a.id)}),t.push(n)}function u0(e,t){const n={id:"utility_cluster_1",name:"Fortune's Favor",centerPosition:{x:150,y:150},nodeIds:[],theme:"utility"};[{id:"utility_travel_1",name:"Lucky Find",description:"+2 luck",type:"travel",position:{x:100,y:100},connections:["dex_path_1","utility_small_1"],stats:{luck:2}},{id:"utility_small_1",name:"Treasure Hunter",description:"+8% magic find",type:"small",position:{x:130,y:130},connections:["utility_travel_1","utility_notable_1"],stats:{magicFind:.08}},{id:"utility_notable_1",name:"Master Looter",description:"+25% magic find, +20% gold find",type:"notable",position:{x:150,y:150},connections:["utility_small_1","utility_small_2"],stats:{magicFind:.25,goldFind:.2}},{id:"utility_small_2",name:"Experience Gain",description:"+12% experience bonus",type:"small",position:{x:170,y:170},connections:["utility_notable_1"],stats:{experienceBonus:.12}}].forEach(r=>{const a={...r,requirements:r.connections,cost:r.type==="notable"?3:1,maxRank:1};e[a.id]=a,n.nodeIds.push(a.id)}),t.push(n)}function Bl(e,t,n){const l=t.nodes[e];return!l||n.allocatedNodes[e]>=l.maxRank||n.availablePoints<l.cost?!1:l.requirements.length===0?!0:l.requirements.some(r=>n.allocatedNodes[r]>0)}function d0(e,t,n){if(!Bl(e,t,n))return n;const l=t.nodes[e],r={...n};return r.allocatedNodes={...r.allocatedNodes,[e]:(r.allocatedNodes[e]||0)+1},r.availablePoints-=l.cost,r}function f0(e,t){const n={};return Object.entries(t.allocatedNodes).forEach(([l,r])=>{if(r>0){const a=e.nodes[l];a&&Object.entries(a.stats).forEach(([i,c])=>{typeof c=="number"&&(n[i]=(n[i]||0)+c*r)})}}),n}const cn={endurance:"Increases maximum HP by 10 per level",quick:"Reduces combat tick interval (faster attacks)",agility:"Increases dodge chance by 1% per level",strength:"Increases base damage by 1 per level",vitality:"Increases HP regeneration and reduces death penalty",precision:"Increases critical hit chance by 1% per level",fortune:"Increases gold gain and improves loot quality",resilience:"Increases armor and status effect resistance"};function mr(){const e=po.map(r=>ho(r)),t=Yd.map(r=>Kd(r)),n=Zd();return["fireball"].forEach(r=>{const a=e.find(i=>i.id===r);a&&(a.isEquipped=!0)}),{level:10,xp:0,nextLevelXp:100,hp:120,maxHp:120,mana:50,maxMana:50,dps:2,baseDps:2,gold:0,skillPoints:20,attributePoints:5,attributes:{strength:10,dexterity:10,intelligence:10,vitality:10,luck:5},equipment:{},equipped:void 0,calculatedStats:{},skillGems:e,supportGems:t,skillBar:n,mapDevice:t0(),passiveTreeState:{allocatedNodes:{start:1},availablePoints:10},passiveTreeData:n0(),stones:[],attackSpeed:1,projectileSpeed:1,skills:{},armor:0,critChance:0,dodgeChance:0,lifeSteal:0,blockChance:0,healthRegen:1,manaRegen:2}}function Be(e){if(!e)return mr();const t={...e};(typeof t.gold!="number"||isNaN(t.gold))&&(console.warn("Player gold was invalid:",t.gold,"resetting to 0"),t.gold=0),(!t.equipment||typeof t.equipment!="object")&&(console.warn("Player equipment was invalid:",t.equipment,"resetting to empty object"),t.equipment={}),t.calculatedStats={},t.baseDps=2,t.maxHp=120,t.maxMana=50,t.dps=2,t.armor=0,t.critChance=0,t.dodgeChance=0,t.blockChance=0,t.lifeSteal=0,t.attackSpeed=1,t.healthRegen=0,t.manaRegen=0,t.projectileSpeed=1;const n=t.attributes??{},l=(n.strength??10)-10;t.baseDps+=Math.max(0,l),t.maxHp+=l*2;const r=(n.dexterity??10)-10;t.critChance+=r*.005,t.dodgeChance+=r*.003;const a=(n.intelligence??10)-10;t.maxMana+=a,t.manaRegen+=a*.2;const i=(n.vitality??10)-10;t.maxHp+=i*3,t.healthRegen+=i*.1;const c=(n.luck??5)-5;t.critChance+=c*.005;const d=t.skills??{};d.strength&&(t.baseDps+=d.strength),d.precision&&(t.critChance=(t.critChance??0)+d.precision*.01),d.agility&&(t.dodgeChance=(t.dodgeChance??0)+d.agility*.01),d.resilience&&(t.armor=(t.armor??0)+d.resilience);let f={};if(t.equipment){const u={};Object.values(t.equipment).forEach(p=>{if(p){for(const[m,g]of Object.entries(p.baseStats))typeof g=="number"&&m!=="resistance"&&(u[m]=(u[m]??0)+g);for(const m of p.affixes)m.stat!=="resistance"&&(u[m.stat]=(u[m.stat]??0)+m.value)}}),f=u}let y={};t.passiveTreeData&&t.passiveTreeState&&(y=f0(t.passiveTreeData,t.passiveTreeState)),t.dps=t.baseDps+(f.damage??0)+(y.damage??0),t.armor+=(f.armor??0)+(y.armor??0),t.maxHp+=(f.health??0)+(y.health??0),t.maxMana+=(f.mana??0)+(y.mana??0),t.critChance+=(f.critChance??0)+(y.critChance??0),t.dodgeChance+=(f.dodgeChance??0)+(y.dodgeChance??0),t.blockChance+=(f.blockChance??0)+(y.blockChance??0),t.lifeSteal+=(f.lifeSteal??0)+(y.lifeSteal??0),t.attackSpeed+=(f.attackSpeed??0)+(y.attackSpeed??0),t.healthRegen+=(f.healthRegen??0)+(y.healthRegen??0),t.manaRegen+=(f.manaRegen??0)+(y.manaRegen??0);const w=(f.strength??0)+(y.strength??0),x=(f.dexterity??0)+(y.dexterity??0),v=(f.intelligence??0)+(y.intelligence??0),j=(f.vitality??0)+(y.vitality??0),h=(f.luck??0)+(y.luck??0);if(w&&(t.baseDps+=w,t.maxHp+=w*2),x&&(t.critChance+=x*.005,t.dodgeChance+=x*.003),v&&(t.maxMana+=v,t.manaRegen+=v*.2),j&&(t.maxHp+=j*3,t.healthRegen+=j*.1),h&&(t.critChance+=h*.005),t.calculatedStats=f,t.equipped&&(t.dps+=t.equipped.power??0,t.equipped.extras))for(const u of t.equipped.extras)switch(u.key){case"hp":t.maxHp+=u.val;break;case"dps":t.dps+=u.val;break;case"critChance":t.critChance+=u.val;break;case"dodgeChance":t.dodgeChance+=u.val;break;case"lifeSteal":t.lifeSteal+=u.val;break;case"armor":t.armor+=u.val;break;case"projectileSpeed":t.projectileSpeed+=u.val;break}return t.hp=Math.min(t.hp,t.maxHp),t.mana=Math.min(t.mana,t.maxMana),t.critChance=Math.max(0,Math.min(1,t.critChance??0)),t.dodgeChance=Math.max(0,Math.min(.95,t.dodgeChance??0)),t.blockChance=Math.max(0,Math.min(.75,t.blockChance??0)),t.lifeSteal=Math.max(0,Math.min(1,t.lifeSteal??0)),t}const Mc={melee:["Goblin","Orc Warrior","Skeleton Fighter","Bandit","Troll"],ranged:["Goblin Archer","Orc Hunter","Skeleton Archer","Bandit Marksman","Dark Elf"],caster:["Goblin Shaman","Orc Mage","Necromancer","Dark Wizard","Lich"],tank:["Orc Guardian","Stone Golem","Armored Knight","Shield Bearer","Iron Colossus"],assassin:["Shadow Rogue","Dark Assassin","Poison Blade","Night Stalker","Void Walker"],boss:["Goblin King","Orc Chieftain","Lich Lord","Dragon","Demon Lord"]},$r=["berserker","precise","regeneration","shield","poison","freeze","lightning"];let m0=1;function _c(e,t){const n=Mc[e]||Mc.melee;return`${n[Math.floor(Math.random()*n.length)]} L${t}`}function p0(e){const n=Math.floor(e/10)*.01;return Math.random()<.02+n}function h0(e,t){if(t)return $r[Math.floor(Math.random()*$r.length)];if(Math.random()<.2)switch(e){case"melee":return Math.random()<.6?"berserker":"precise";case"ranged":return Math.random()<.7?"precise":"poison";case"caster":return Math.random()<.5?"lightning":"freeze";case"tank":return Math.random()<.8?"shield":"regeneration";case"assassin":return Math.random()<.6?"poison":"precise";default:return $r[Math.floor(Math.random()*$r.length)]}}function Zr(e,t){let n;const l=p0(e);if(l)n="boss";else if(t)n=t;else{const f=Math.random();f>.92?n="assassin":f>.85?n="tank":f>.75?n="caster":f>.55?n="ranged":n="melee"}let r=25+e*12,a=0;switch(n){case"tank":r=Math.floor(r*1.8),a=Math.floor(e*.3);break;case"boss":r=Math.floor(r*3.5),a=Math.floor(e*.5);break;case"assassin":r=Math.floor(r*.7);break;case"caster":r=Math.floor(r*.9);break}const i=h0(n,l),c=_c(l?"boss":n,e);return{id:"e"+m0++,name:l?`👑 ${c}`:c,level:e,maxHp:r,hp:r,type:n,specialAbility:i,isBoss:l,state:"alive",alpha:1,statusEffects:[],armor:a}}const pr={sword:{name:"Sword",slot:"weapon",baseStats:{damage:8},damageTypes:["physical","fire","ice","lightning"],requirements:{}},axe:{name:"Axe",slot:"weapon",baseStats:{damage:12,critChance:.05},damageTypes:["physical","fire"],requirements:{}},mace:{name:"Mace",slot:"weapon",baseStats:{damage:10,armor:2},damageTypes:["physical","lightning"],requirements:{}},dagger:{name:"Dagger",slot:"weapon",baseStats:{damage:6,critChance:.1,attackSpeed:.3},damageTypes:["physical","poison"],requirements:{}},bow:{name:"Bow",slot:"weapon",baseStats:{damage:9,critChance:.08},damageTypes:["physical","fire","ice","poison"],requirements:{}},crossbow:{name:"Crossbow",slot:"weapon",baseStats:{damage:14,critChance:.06},damageTypes:["physical","lightning"],requirements:{}},staff:{name:"Staff",slot:"weapon",baseStats:{damage:7,mana:20,manaRegen:2},damageTypes:["fire","ice","lightning"],requirements:{}},wand:{name:"Wand",slot:"weapon",baseStats:{damage:5,mana:15,critChance:.07},damageTypes:["fire","ice","lightning","poison"],requirements:{}}},Na={helm:{name:"Helm",slot:"helm",baseStats:{armor:5,health:15},requirements:{}},chest:{name:"Chest Armor",slot:"chest",baseStats:{armor:12,health:30},requirements:{}},legs:{name:"Leg Armor",slot:"legs",baseStats:{armor:8,health:20},requirements:{}},boots:{name:"Boots",slot:"boots",baseStats:{armor:4,dodgeChance:.02},requirements:{}},gloves:{name:"Gloves",slot:"gloves",baseStats:{armor:3,attackSpeed:.1},requirements:{}},shield:{name:"Shield",slot:"offhand",baseStats:{armor:8,blockChance:.15},requirements:{}}},Ca={ring:{name:"Ring",slot:"ring",baseStats:{},requirements:{}},amulet:{name:"Amulet",slot:"amulet",baseStats:{},requirements:{}},belt:{name:"Belt",slot:"belt",baseStats:{health:10},requirements:{}}},g0=[{name:"of Power",stat:"damage",value:3,tier:1,weight:100},{name:"of Might",stat:"damage",value:6,tier:2,weight:80},{name:"of Devastation",stat:"damage",value:10,tier:3,weight:40},{name:"of Destruction",stat:"damage",value:15,tier:4,weight:20},{name:"of Annihilation",stat:"damage",value:22,tier:5,weight:10},{name:"of Precision",stat:"critChance",value:.03,tier:1,weight:80},{name:"of Lethality",stat:"critChance",value:.06,tier:2,weight:60},{name:"of Execution",stat:"critChance",value:.1,tier:3,weight:30},{name:"of the Assassin",stat:"critChance",value:.15,tier:4,weight:15},{name:"of Perfect Strike",stat:"critChance",value:.22,tier:5,weight:8},{name:"of Sharpness",stat:"critMultiplier",value:.2,tier:1,weight:70},{name:"of Brutality",stat:"critMultiplier",value:.4,tier:2,weight:50},{name:"of Savagery",stat:"critMultiplier",value:.7,tier:3,weight:25},{name:"of Massacre",stat:"critMultiplier",value:1,tier:4,weight:12},{name:"of Swiftness",stat:"attackSpeed",value:.1,tier:1,weight:70},{name:"of Haste",stat:"attackSpeed",value:.2,tier:2,weight:50},{name:"of Lightning",stat:"attackSpeed",value:.35,tier:3,weight:25},{name:"of the Storm",stat:"attackSpeed",value:.5,tier:4,weight:12},{name:"of Time Warp",stat:"attackSpeed",value:.75,tier:5,weight:6},{name:"of Vampirism",stat:"lifeSteal",value:.03,tier:1,weight:60},{name:"of Blood",stat:"lifeSteal",value:.06,tier:2,weight:40},{name:"of the Vampire",stat:"lifeSteal",value:.1,tier:3,weight:20},{name:"of Soul Drain",stat:"lifeSteal",value:.15,tier:4,weight:10},{name:"of Mana Burn",stat:"manaSteal",value:.05,tier:1,weight:50},{name:"of Energy Drain",stat:"manaSteal",value:.1,tier:2,weight:30},{name:"of the Void",stat:"manaSteal",value:.18,tier:3,weight:15},{name:"of the Warrior",stat:"strength",value:5,tier:1,weight:60},{name:"of the Berserker",stat:"strength",value:10,tier:2,weight:40},{name:"of the Champion",stat:"strength",value:18,tier:3,weight:20},{name:"of the Hunter",stat:"dexterity",value:5,tier:1,weight:60},{name:"of the Ranger",stat:"dexterity",value:10,tier:2,weight:40},{name:"of the Marksman",stat:"dexterity",value:18,tier:3,weight:20},{name:"of Thorns",stat:"thorns",value:3,tier:1,weight:40},{name:"of Spikes",stat:"thorns",value:7,tier:2,weight:25},{name:"of Retaliation",stat:"thorns",value:12,tier:3,weight:12}],y0=[{name:"of Protection",stat:"armor",value:2,tier:1,weight:100},{name:"of Defense",stat:"armor",value:4,tier:2,weight:80},{name:"of the Fortress",stat:"armor",value:7,tier:3,weight:40},{name:"of the Bastion",stat:"armor",value:12,tier:4,weight:20},{name:"of Invincibility",stat:"armor",value:18,tier:5,weight:10},{name:"of Vitality",stat:"health",value:15,tier:1,weight:90},{name:"of Life",stat:"health",value:30,tier:2,weight:70},{name:"of the Titan",stat:"health",value:50,tier:3,weight:35},{name:"of the Colossus",stat:"health",value:80,tier:4,weight:18},{name:"of Immortality",stat:"health",value:120,tier:5,weight:8},{name:"of Evasion",stat:"dodgeChance",value:.02,tier:1,weight:70},{name:"of Agility",stat:"dodgeChance",value:.04,tier:2,weight:50},{name:"of the Wind",stat:"dodgeChance",value:.07,tier:3,weight:25},{name:"of the Phantom",stat:"dodgeChance",value:.12,tier:4,weight:12},{name:"of Ethereal Form",stat:"dodgeChance",value:.18,tier:5,weight:6},{name:"of Blocking",stat:"blockChance",value:.05,tier:1,weight:60},{name:"of the Shield",stat:"blockChance",value:.1,tier:2,weight:40},{name:"of the Guardian",stat:"blockChance",value:.16,tier:3,weight:20},{name:"of Perfect Defense",stat:"blockChance",value:.25,tier:4,weight:10},{name:"of Regeneration",stat:"healthRegen",value:1,tier:1,weight:60},{name:"of Recovery",stat:"healthRegen",value:2,tier:2,weight:40},{name:"of Renewal",stat:"healthRegen",value:4,tier:3,weight:20},{name:"of Restoration",stat:"healthRegen",value:7,tier:4,weight:10},{name:"of Eternal Life",stat:"healthRegen",value:12,tier:5,weight:5},{name:"of Mana",stat:"mana",value:20,tier:1,weight:70},{name:"of the Mind",stat:"mana",value:40,tier:2,weight:50},{name:"of Arcane Power",stat:"mana",value:70,tier:3,weight:25},{name:"of the Archmage",stat:"mana",value:110,tier:4,weight:12},{name:"of Meditation",stat:"manaRegen",value:1,tier:1,weight:50},{name:"of Focus",stat:"manaRegen",value:2,tier:2,weight:30},{name:"of Enlightenment",stat:"manaRegen",value:4,tier:3,weight:15},{name:"of the Bear",stat:"vitality",value:5,tier:1,weight:70},{name:"of the Ox",stat:"vitality",value:10,tier:2,weight:50},{name:"of the Mountain",stat:"vitality",value:18,tier:3,weight:25},{name:"of the Sage",stat:"intelligence",value:5,tier:1,weight:60},{name:"of the Scholar",stat:"intelligence",value:10,tier:2,weight:40},{name:"of the Wizard",stat:"intelligence",value:18,tier:3,weight:20},{name:"of Spines",stat:"thorns",value:2,tier:1,weight:50},{name:"of Barbs",stat:"thorns",value:5,tier:2,weight:30},{name:"of the Hedgehog",stat:"thorns",value:9,tier:3,weight:15}],x0=[{name:"of Strength",stat:"strength",value:3,tier:1,weight:80},{name:"of Great Strength",stat:"strength",value:6,tier:2,weight:60},{name:"of Mighty Strength",stat:"strength",value:10,tier:3,weight:30},{name:"of Legendary Strength",stat:"strength",value:16,tier:4,weight:15},{name:"of Divine Strength",stat:"strength",value:25,tier:5,weight:8},{name:"of Dexterity",stat:"dexterity",value:3,tier:1,weight:80},{name:"of Great Dexterity",stat:"dexterity",value:6,tier:2,weight:60},{name:"of Swift Dexterity",stat:"dexterity",value:10,tier:3,weight:30},{name:"of Perfect Dexterity",stat:"dexterity",value:16,tier:4,weight:15},{name:"of Divine Grace",stat:"dexterity",value:25,tier:5,weight:8},{name:"of Intelligence",stat:"intelligence",value:3,tier:1,weight:80},{name:"of Great Intelligence",stat:"intelligence",value:6,tier:2,weight:60},{name:"of Brilliant Intelligence",stat:"intelligence",value:10,tier:3,weight:30},{name:"of Genius Intelligence",stat:"intelligence",value:16,tier:4,weight:15},{name:"of Omniscience",stat:"intelligence",value:25,tier:5,weight:8},{name:"of Vitality",stat:"vitality",value:3,tier:1,weight:80},{name:"of Great Vitality",stat:"vitality",value:6,tier:2,weight:60},{name:"of Robust Vitality",stat:"vitality",value:10,tier:3,weight:30},{name:"of Supreme Vitality",stat:"vitality",value:16,tier:4,weight:15},{name:"of Eternal Vitality",stat:"vitality",value:25,tier:5,weight:8},{name:"of Luck",stat:"luck",value:3,tier:1,weight:60},{name:"of Good Luck",stat:"luck",value:6,tier:2,weight:40},{name:"of Great Luck",stat:"luck",value:10,tier:3,weight:20},{name:"of Incredible Luck",stat:"luck",value:16,tier:4,weight:10},{name:"of Divine Fortune",stat:"luck",value:25,tier:5,weight:5},{name:"of Fortune",stat:"goldFind",value:.15,tier:1,weight:70},{name:"of Wealth",stat:"goldFind",value:.25,tier:2,weight:50},{name:"of Greed",stat:"goldFind",value:.4,tier:3,weight:25},{name:"of Avarice",stat:"goldFind",value:.6,tier:4,weight:12},{name:"of Midas",stat:"goldFind",value:.85,tier:5,weight:6},{name:"of Discovery",stat:"magicFind",value:.1,tier:1,weight:60},{name:"of Finding",stat:"magicFind",value:.2,tier:2,weight:40},{name:"of the Seeker",stat:"magicFind",value:.35,tier:3,weight:20},{name:"of the Treasure Hunter",stat:"magicFind",value:.55,tier:4,weight:10},{name:"of the Artifact Finder",stat:"magicFind",value:.8,tier:5,weight:5},{name:"of Learning",stat:"experienceBonus",value:.1,tier:1,weight:50},{name:"of Wisdom",stat:"experienceBonus",value:.2,tier:2,weight:30},{name:"of the Scholar",stat:"experienceBonus",value:.35,tier:3,weight:15},{name:"of the Master",stat:"experienceBonus",value:.55,tier:4,weight:8},{name:"of Enlightenment",stat:"experienceBonus",value:.8,tier:5,weight:4},{name:"of Accuracy",stat:"critChance",value:.02,tier:1,weight:60},{name:"of Keen Eye",stat:"critChance",value:.04,tier:2,weight:40},{name:"of Eagle Eye",stat:"critChance",value:.07,tier:3,weight:20},{name:"of Nimbleness",stat:"dodgeChance",value:.02,tier:1,weight:50},{name:"of Quickness",stat:"dodgeChance",value:.04,tier:2,weight:30},{name:"of the Cat",stat:"dodgeChance",value:.07,tier:3,weight:15},{name:"of Alacrity",stat:"attackSpeed",value:.08,tier:1,weight:40},{name:"of Velocity",stat:"attackSpeed",value:.15,tier:2,weight:25},{name:"of the Cheetah",stat:"attackSpeed",value:.25,tier:3,weight:12},{name:"of Health",stat:"health",value:25,tier:1,weight:70},{name:"of Greater Health",stat:"health",value:50,tier:2,weight:50},{name:"of Superior Health",stat:"health",value:85,tier:3,weight:25},{name:"of Energy",stat:"mana",value:30,tier:1,weight:60},{name:"of Greater Energy",stat:"mana",value:60,tier:2,weight:40},{name:"of Superior Energy",stat:"mana",value:100,tier:3,weight:20}],qa={Common:{color:"#9CA3AF",affixCount:[0,1],statMultiplier:1},Magic:{color:"#3B82F6",affixCount:[2,2],statMultiplier:1.3},Rare:{color:"#EAB308",affixCount:[3,3],statMultiplier:1.6},Legendary:{color:"#F97316",affixCount:[4,4],statMultiplier:2.2},Mythic:{color:"#E879F9",affixCount:[5,5],statMultiplier:2.8},Divine:{color:"#06B6D4",affixCount:[6,6],statMultiplier:3.5},Unique:{color:"#A855F7",affixCount:[6,6],statMultiplier:3,hasSpecialModifiers:!0}},xs=[{id:"weapon",name:"Weapon",icon:"⚔️",category:"weapon"},{id:"offhand",name:"Off-Hand",icon:"🛡️",category:"armor"},{id:"helm",name:"Helm",icon:"⛑️",category:"armor"},{id:"chest",name:"Chest",icon:"👕",category:"armor"},{id:"gloves",name:"Gloves",icon:"🧤",category:"armor"},{id:"legs",name:"Legs",icon:"👖",category:"armor"},{id:"boots",name:"Boots",icon:"👢",category:"armor"},{id:"belt",name:"Belt",icon:"🎒",category:"accessory"},{id:"ring",name:"Ring",icon:"💍",category:"accessory"},{id:"amulet",name:"Amulet",icon:"📿",category:"accessory"}];function v0(e,t,n){if(!e.sockets)throw new Error("Equipment has no sockets");if(n<0||n>=e.sockets.maxSockets)throw new Error("Invalid socket index");if(e.sockets.stones[n]!==null)throw new Error("Socket is already occupied");const l={...e};return l.sockets={...e.sockets,stones:[...e.sockets.stones]},l.sockets.stones[n]=t,l}function w0(e,t){if(!e.sockets)throw new Error("Equipment has no sockets");if(t<0||t>=e.sockets.maxSockets)throw new Error("Invalid socket index");const n=e.sockets.stones[t],l={...e};return l.sockets={...e.sockets,stones:[...e.sockets.stones]},l.sockets.stones[t]=null,{equipment:l,removedStoneId:n}}function k0(e){if(!e.sockets)return[];const t=[];for(let n=0;n<e.sockets.maxSockets;n++)e.sockets.stones[n]===null&&t.push(n);return t}function S0(e){return k0(e).length>0}const go={ruby:{name:"Ruby",baseStats:{damage:3,strength:2},socketTypes:["weapon","ring","amulet"],primaryStat:"damage"},sapphire:{name:"Sapphire",baseStats:{mana:15,intelligence:2},socketTypes:["helm","chest","ring","amulet"],primaryStat:"mana"},emerald:{name:"Emerald",baseStats:{dexterity:3,critChance:.02},socketTypes:["weapon","gloves","ring","amulet"],primaryStat:"dexterity"},diamond:{name:"Diamond",baseStats:{armor:5,health:20},socketTypes:["helm","chest","legs","boots"],primaryStat:"armor"},topaz:{name:"Topaz",baseStats:{attackSpeed:.1,luck:2},socketTypes:["weapon","gloves","ring"],primaryStat:"attackSpeed"},amethyst:{name:"Amethyst",baseStats:{vitality:3,healthRegen:.5},socketTypes:["helm","chest","belt","amulet"],primaryStat:"vitality"},onyx:{name:"Onyx",baseStats:{dodgeChance:.02,dexterity:2},socketTypes:["boots","gloves","ring"],primaryStat:"dodgeChance"},opal:{name:"Opal",baseStats:{magicFind:.1,luck:3},socketTypes:["ring","amulet","belt"],primaryStat:"magicFind"},garnet:{name:"Garnet",baseStats:{lifeSteal:.03,strength:2},socketTypes:["weapon","ring","amulet"],primaryStat:"lifeSteal"},citrine:{name:"Citrine",baseStats:{goldFind:.15,luck:2},socketTypes:["ring","amulet","belt"],primaryStat:"goldFind"},peridot:{name:"Peridot",baseStats:{experienceBonus:.1,intelligence:2},socketTypes:["helm","amulet","ring"],primaryStat:"experienceBonus"},turquoise:{name:"Turquoise",baseStats:{manaRegen:.3,intelligence:2},socketTypes:["helm","chest","amulet"],primaryStat:"manaRegen"}},Ga={Chipped:{color:"#9CA3AF",statMultiplier:.5,affixCount:[0,1]},Flawed:{color:"#6B7280",statMultiplier:.75,affixCount:[1,1]},Normal:{color:"#FFFFFF",statMultiplier:1,affixCount:[1,2]},Flawless:{color:"#3B82F6",statMultiplier:1.5,affixCount:[2,2]},Perfect:{color:"#F59E0B",statMultiplier:2,affixCount:[2,3]}},b0=[{name:"of Power",stat:"damage",value:2,tier:1,weight:80},{name:"of Might",stat:"damage",value:4,tier:2,weight:60},{name:"of Force",stat:"damage",value:7,tier:3,weight:40},{name:"of Devastation",stat:"damage",value:12,tier:4,weight:20},{name:"of Life",stat:"health",value:15,tier:1,weight:80},{name:"of Vitality",stat:"health",value:30,tier:2,weight:60},{name:"of the Titan",stat:"health",value:50,tier:3,weight:40},{name:"of Immortality",stat:"health",value:80,tier:4,weight:20},{name:"of Energy",stat:"mana",value:20,tier:1,weight:70},{name:"of the Mind",stat:"mana",value:40,tier:2,weight:50},{name:"of Wisdom",stat:"mana",value:65,tier:3,weight:30},{name:"of the Arcane",stat:"mana",value:100,tier:4,weight:15},{name:"of Strength",stat:"strength",value:2,tier:1,weight:70},{name:"of Great Strength",stat:"strength",value:4,tier:2,weight:50},{name:"of Superior Strength",stat:"strength",value:7,tier:3,weight:30},{name:"of Dexterity",stat:"dexterity",value:2,tier:1,weight:70},{name:"of Great Dexterity",stat:"dexterity",value:4,tier:2,weight:50},{name:"of Superior Dexterity",stat:"dexterity",value:7,tier:3,weight:30},{name:"of Intelligence",stat:"intelligence",value:2,tier:1,weight:70},{name:"of Great Intelligence",stat:"intelligence",value:4,tier:2,weight:50},{name:"of Superior Intelligence",stat:"intelligence",value:7,tier:3,weight:30},{name:"of Vitality",stat:"vitality",value:2,tier:1,weight:70},{name:"of Great Vitality",stat:"vitality",value:4,tier:2,weight:50},{name:"of Superior Vitality",stat:"vitality",value:7,tier:3,weight:30},{name:"of Luck",stat:"luck",value:2,tier:1,weight:60},{name:"of Fortune",stat:"luck",value:4,tier:2,weight:40},{name:"of Destiny",stat:"luck",value:7,tier:3,weight:20},{name:"of Precision",stat:"critChance",value:.015,tier:1,weight:60},{name:"of Accuracy",stat:"critChance",value:.03,tier:2,weight:40},{name:"of the Eagle",stat:"critChance",value:.05,tier:3,weight:20},{name:"of Evasion",stat:"dodgeChance",value:.015,tier:1,weight:50},{name:"of the Cat",stat:"dodgeChance",value:.03,tier:2,weight:30},{name:"of the Shadow",stat:"dodgeChance",value:.05,tier:3,weight:15},{name:"of Speed",stat:"attackSpeed",value:.05,tier:1,weight:50},{name:"of Swiftness",stat:"attackSpeed",value:.1,tier:2,weight:30},{name:"of Lightning",stat:"attackSpeed",value:.18,tier:3,weight:15},{name:"of Wealth",stat:"goldFind",value:.1,tier:1,weight:40},{name:"of Greed",stat:"goldFind",value:.2,tier:2,weight:25},{name:"of Avarice",stat:"goldFind",value:.35,tier:3,weight:12},{name:"of Discovery",stat:"magicFind",value:.08,tier:1,weight:35},{name:"of Finding",stat:"magicFind",value:.15,tier:2,weight:20},{name:"of the Seeker",stat:"magicFind",value:.25,tier:3,weight:10},{name:"of Learning",stat:"experienceBonus",value:.08,tier:1,weight:30},{name:"of Wisdom",stat:"experienceBonus",value:.15,tier:2,weight:18},{name:"of the Scholar",stat:"experienceBonus",value:.25,tier:3,weight:8}];function j0(e){var t;return((t=Ga[e])==null?void 0:t.color)||"#FFFFFF"}function N0(e){return{ruby:"🔴",sapphire:"🔵",emerald:"🟢",diamond:"💎",topaz:"🟡",amethyst:"🟣",onyx:"⚫",opal:"⚪",garnet:"🔴",citrine:"🟨",peridot:"🟢",turquoise:"🔷"}[e]||"💎"}function tf(e){const t=e.reduce((l,r)=>l+r.weight,0);let n=Math.random()*t;for(const l of e)if(n-=l.weight,n<=0)return l;return e[e.length-1]}function C0(e,t=!1){const l=[{item:"Chipped",weight:50},{item:"Flawed",weight:30},{item:"Normal",weight:15},{item:"Flawless",weight:4},{item:"Perfect",weight:1}].map(({item:r,weight:a})=>{let i=a;return r==="Flawed"&&(i+=Math.floor(e/8)),r==="Normal"&&(i+=Math.floor(e/15)),r==="Flawless"&&(i+=Math.floor(e/30)),r==="Perfect"&&(i+=Math.floor(e/60)),t&&(r==="Normal"&&(i+=8),r==="Flawless"&&(i+=5),r==="Perfect"&&(i+=3)),{item:r,weight:Math.max(1,i)}});return tf(l).item}function P0(e){const t=Object.keys(go);return t[Math.floor(Math.random()*t.length)]}function M0(e,t,n){const l=Ga[t];if(!l)return[];const[r,a]=l.affixCount,i=Math.floor(Math.random()*(a-r+1))+r;if(i===0)return[];const c=Math.min(4,Math.floor(n/15)+1),d=b0.filter(v=>v.tier<=c),f=[],y=new Set,w=1+(n-1)*.03,x=l.statMultiplier;for(let v=0;v<i&&d.length>0;v++){const j=d.filter(S=>!y.has(S.stat));if(j.length===0)break;const h=tf(j),u=h.value*w*x,p={Chipped:.1,Flawed:.12,Normal:.15,Flawless:.18,Perfect:.2}[t]||.1,m=1+(Math.random()*2-1)*p,g=u*m;f.push({...h,value:Math.max(.01,Math.round(g*100)/100)}),y.add(h.stat)}return f}function _0(e,t,n,l){const r=go[e],a=t!=="Normal"?t:"";let i="";return l.length>0&&t!=="Chipped"&&(i=` ${l[0].name}`),`${a} ${r.name}${i}`.trim()}function E0(e,t,n,l){var d;const r=((d=Ga[n])==null?void 0:d.statMultiplier)||1;let a=0;e.damage&&(a+=e.damage*8),e.health&&(a+=e.health*.3),e.mana&&(a+=e.mana*.2),e.armor&&(a+=e.armor*4);const i=t.reduce((f,y)=>{const x={damage:8,armor:4,health:.3,mana:.2,critChance:150,dodgeChance:120,attackSpeed:30,strength:3,dexterity:3,intelligence:3,vitality:3,luck:5,goldFind:50,magicFind:80,experienceBonus:60}[y.stat]||1;return f+y.value*x},0),c=(a+i)*l*r*.5;return Math.max(1,Math.floor(c))}function L0(e,t=!1){const n=C0(e,t),l=P0(),r=go[l],a=Ga[n],i=1+(e-1)*.05,c=a.statMultiplier,d={};Object.keys(r.baseStats).forEach(x=>{const v=r.baseStats[x];if(typeof v=="number"){const j={Chipped:.1,Flawed:.15,Normal:.18,Flawless:.22,Perfect:.25}[n]||.1,h=1+(Math.random()*2-1)*j,u=v*i*c*h;d[x]=Math.round(u*100)/100}});const f=M0(l,n,e),y=_0(l,n,e,f),w=E0(d,f,n,e);return{id:"stone_"+Math.random().toString(36).substr(2,9),name:y,type:l,rarity:n,level:e,baseStats:d,affixes:f,socketTypes:r.socketTypes,value:w}}function T0(e){return{Common:0,Magic:1,Rare:1,Legendary:2,Mythic:2,Divine:3,Unique:2}[e]||0}const vs=new Map;function nf(e,t){let n;t&&vs.has(t)?n=vs.get(t):(n=e.reduce((r,a)=>r+a.weight,0),t&&vs.set(t,n));let l=Math.random()*n;for(const r of e)if(l-=r.weight,l<=0)return r;return e[e.length-1]}const ws=new Map;function A0(e,t=!1){const n=`${e}-${t}`;let l;return ws.has(n)?l=ws.get(n):(l=[{item:"Common",weight:60},{item:"Magic",weight:25},{item:"Rare",weight:10},{item:"Legendary",weight:4},{item:"Mythic",weight:2},{item:"Divine",weight:1},{item:"Unique",weight:1}].map(({item:a,weight:i})=>{let c=i;return a==="Magic"&&(c+=Math.floor(e/5)),a==="Rare"&&(c+=Math.floor(e/10)),a==="Legendary"&&(c+=Math.floor(e/20)),a==="Mythic"&&(c+=Math.floor(e/40)),a==="Divine"&&(c+=Math.floor(e/60)),a==="Unique"&&(c+=Math.floor(e/50)),t&&(a==="Rare"&&(c+=5),a==="Legendary"&&(c+=4),a==="Mythic"&&(c+=3),a==="Divine"&&(c+=2),a==="Unique"&&(c+=3)),{item:a,weight:Math.max(1,c)}}),ws.set(n,l)),nf(l,n).item}function I0(e){const t=Math.max(.3,.6-e*.01),n=Math.min(.5,.3+e*.008),l=Math.random();if(l<t){const r=Object.keys(pr);return{category:"weapon",type:r[Math.floor(Math.random()*r.length)]}}else if(l<t+n){const r=Object.keys(Na);return{category:"armor",type:r[Math.floor(Math.random()*r.length)]}}else{const r=Object.keys(Ca);return{category:"accessory",type:r[Math.floor(Math.random()*r.length)]}}}function R0(e,t){const l=pr[e].damageTypes,r={Common:.1,Magic:.3,Rare:.5,Legendary:.7,Mythic:.8,Divine:.9,Unique:.85}[t]||.1;if(Math.random()<r&&l.length>1){const a=l.filter(i=>i!=="physical");return a[Math.floor(Math.random()*a.length)]}return"physical"}function z0(e,t,n){const l=qa[t];if(!l)return[];const[r,a]=l.affixCount,i=Math.floor(Math.random()*(a-r+1))+r;if(i===0)return[];let c;switch(e){case"weapon":c=g0;break;case"armor":c=y0;break;case"accessory":c=x0;break}const d=Math.min(3,Math.floor(n/10)+1),f=c.filter(j=>j.tier<=d),y=[],w=new Set,x=1+(n-1)*.05,v=l.statMultiplier;for(let j=0;j<i&&f.length>0;j++){const h=f.filter(b=>!w.has(b.stat));if(h.length===0)break;const u=nf(h),p=u.value*x*v,m={Common:.1,Magic:.15,Rare:.18,Legendary:.22,Mythic:.25,Divine:.3,Unique:.28}[t]||.1,g=1+(Math.random()*2-1)*m,S=p*g;y.push({...u,value:Math.max(1,Math.round(S*100)/100)}),w.add(u.stat)}return y}function D0(e,t,n,l,r=[]){let a="";if(e in pr?a=pr[e].name:e in Na?a=Na[e].name:e in Ca?a=Ca[e].name:a="Unknown Item",l&&l!=="physical"){const f={fire:["Burning","Flaming","Infernal","Phoenix"],ice:["Frozen","Glacial","Frost","Winter"],lightning:["Shocking","Storm","Thunder","Volt"],poison:["Venomous","Toxic","Plague","Serpent"]}[l]||[];f.length>0&&(a=`${f[Math.floor(Math.random()*f.length)]} ${a}`)}if(r.length>0&&t!=="Common"){const d=r.reduce((f,y)=>y.tier>f.tier?y:f);a+=` ${d.name}`}const i=l&&l!=="physical"?` [${l.toUpperCase()}]`:"";return`${t} ${a}${i} (L${n})`}function $0(e,t,n,l){var d;const r=((d=qa[n])==null?void 0:d.statMultiplier)||1;let a=0;e.damage&&(a+=e.damage*5),e.armor&&(a+=e.armor*3),e.health&&(a+=e.health*.5);const i=t.reduce((f,y)=>{const x={damage:5,armor:3,health:.5,mana:.3,critChance:100,dodgeChance:80,attackSpeed:20,strength:2,dexterity:2,intelligence:2,vitality:2,luck:3}[y.stat]||1;return f+y.value*x},0),c=(a+i)*l*r;return Math.max(1,Math.floor(c))}function hr(e,t=!1){const n=A0(e,t),{category:l,type:r}=I0(e);let a={},i,c={},d;if(l==="weapon"){const p=pr[r];a={...p.baseStats},i=p.slot,c={...p.requirements},d=R0(r,n)}else if(l==="armor"){const p=Na[r];a={...p.baseStats},i=p.slot,c={...p.requirements}}else{const p=Ca[r];a={...p.baseStats},i=p.slot,c={...p.requirements}}const f=qa[n];if(!f)return console.warn("Invalid rarity:",n,"defaulting to Common"),hr(e,!1);const y=1+(e-1)*.1,w=f.statMultiplier;Object.keys(a).forEach(p=>{if(typeof a[p]=="number"){const m={Common:.15,Magic:.2,Rare:.25,Legendary:.3,Mythic:.35,Divine:.4,Unique:.38}[n]||.15,g=1+(Math.random()*2-1)*m,S=a[p]*y*w*g;a[p]=Math.round(S*100)/100}});const x=z0(l,n,e),v=D0(r,n,e,d,x),j=$0(a,x,n,e),h=T0(n),u=h>0?{stones:new Array(h).fill(null),maxSockets:h}:void 0;return{id:"eq_"+Math.random().toString(36).substr(2,9),name:v,type:r,slot:i,category:l,rarity:n,level:e,baseStats:a,affixes:x,damageType:d,requirements:c,value:j,sockets:u}}function F0(e){var t;return((t=qa[e])==null?void 0:t.color)||"#9CA3AF"}const B0=[];function O0(){return B0.pop()||{}}function Ec(e){const t=O0();let n=0;e.baseStats.damage&&(n+=e.baseStats.damage),e.affixes.forEach(i=>{(i.stat==="damage"||i.stat==="health"||i.stat==="armor")&&(n+=i.value*.5)}),n=Math.max(1,Math.floor(n));const l=e.affixes.map(i=>({key:i.stat==="health"?"hp":i.stat==="critChance"?"critChance":i.stat==="dodgeChance"?"dodgeChance":i.stat==="attackSpeed"?"projectileSpeed":i.stat==="lifeSteal"?"lifeSteal":i.stat==="damage"?"dps":i.stat,val:i.value})),a=["bow","crossbow"].includes(e.type)?"ranged":"melee";return Object.assign(t,{...e,power:n,type:a,element:e.damageType||"physical",extras:l,rarityColor:F0(e.rarity),elementColor:U0(e.damageType||"physical")}),t}const ks=new Map;function U0(e){if(ks.has(e))return ks.get(e);let t;switch(e){case"fire":t="text-red-500";break;case"ice":t="text-cyan-400";break;case"lightning":t="text-yellow-300";break;case"poison":t="text-green-500";break;default:t="text-gray-300"}return ks.set(e,t),t}function Jr(e,t=!1){const n=t?Math.floor(Math.random()*3)+2:Math.floor(Math.random()*2)+1;if(n===1){const r=hr(e,t);return[Ec(r)]}const l=[];for(let r=0;r<n;r++){const a=hr(e,t),i=Ec(a);l.push(i)}return l}const lf="idle-poe-phase2-save-v1";function ke(e){const t={...e,__meta:{lastSaved:Date.now()}};localStorage.setItem(lf,JSON.stringify(t))}function q0(){try{const e=localStorage.getItem(lf);return e?JSON.parse(e):null}catch{return null}}function G0(e,t){const n=e.skillGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Skill not found"};if(n.isUnlocked)return{success:!1,message:"Skill is already unlocked"};if(e.level<n.unlockLevel)return{success:!1,message:`Requires player level ${n.unlockLevel}`};const l=fn(n);if(e.skillPoints<l)return{success:!1,message:`Requires ${l} skill points (you have ${e.skillPoints})`};const r={...e};r.skillPoints-=l;const a=r.skillGems.findIndex(i=>i.id===t);return r.skillGems[a]={...n,isUnlocked:!0},{success:!0,message:`${n.name} unlocked!`,updatedPlayer:r}}function V0(e,t){const n=e.supportGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Support gem not found"};if(n.isUnlocked)return{success:!1,message:"Support gem is already unlocked"};if(e.level<n.unlockLevel)return{success:!1,message:`Requires player level ${n.unlockLevel}`};const l=fn(n);if(e.skillPoints<l)return{success:!1,message:`Requires ${l} skill points (you have ${e.skillPoints})`};const r={...e};r.skillPoints-=l;const a=r.supportGems.findIndex(i=>i.id===t);return r.supportGems[a]={...n,isUnlocked:!0},{success:!0,message:`${n.name} unlocked!`,updatedPlayer:r}}function W0(e,t){const n=e.skillGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Skill not found"};if(!n.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};if(!ja(n,e.skillPoints)){const i=qn(n.level);return n.level>=n.maxLevel?{success:!1,message:"Skill is already at maximum level"}:{success:!1,message:`Requires ${i} skill points (you have ${e.skillPoints})`}}const l=qn(n.level),r={...e};r.skillPoints-=l;const a=r.skillGems.findIndex(i=>i.id===t);return r.skillGems[a]={...n,level:n.level+1},{success:!0,message:`${n.name} leveled up to ${n.level+1}!`,updatedPlayer:r}}function H0(e,t){const n=e.supportGems.find(i=>i.id===t);if(!n)return{success:!1,message:"Support gem not found"};if(!n.isUnlocked)return{success:!1,message:"Support gem must be unlocked first"};if(!ja(n,e.skillPoints)){const i=qn(n.level);return n.level>=n.maxLevel?{success:!1,message:"Support gem is already at maximum level"}:{success:!1,message:`Requires ${i} skill points (you have ${e.skillPoints})`}}const l=qn(n.level),r={...e};r.skillPoints-=l;const a=r.supportGems.findIndex(i=>i.id===t);return r.supportGems[a]={...n,level:n.level+1},{success:!0,message:`${n.name} leveled up to ${n.level+1}!`,updatedPlayer:r}}function Y0(e,t,n){if(n<0||n>=e.skillBar.maxSlots)return{success:!1,message:`Invalid slot index. Must be between 0 and ${e.skillBar.maxSlots-1}`};const l=e.skillGems.find(i=>i.id===t);if(!l)return{success:!1,message:"Skill not found"};if(!l.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};const r={...e};r.skillBar.slots=r.skillBar.slots.map(i=>(i==null?void 0:i.id)===t?null:i),r.skillGems=r.skillGems.map(i=>i.id===t?{...i,isEquipped:!0}:i);const a=r.skillBar.slots[n];return a&&(r.skillGems=r.skillGems.map(i=>i.id===a.id?{...i,isEquipped:!1}:i)),r.skillBar.slots[n]={...l,isEquipped:!0},{success:!0,message:`${l.name} equipped to slot ${n+1}`,updatedPlayer:r}}function X0(e,t){if(t<0||t>=e.skillBar.maxSlots)return{success:!1,message:`Invalid slot index. Must be between 0 and ${e.skillBar.maxSlots-1}`};const n=e.skillBar.slots[t];if(!n)return{success:!1,message:"No skill equipped in this slot"};const l={...e};return l.skillBar.slots[t]=null,l.skillGems=l.skillGems.map(r=>r.id===n.id?{...r,isEquipped:!1}:r),{success:!0,message:`${n.name} unequipped from slot ${t+1}`,updatedPlayer:l}}function Q0(e,t,n){const l=e.skillGems.find(f=>f.id===t),r=e.supportGems.find(f=>f.id===n);if(!l)return{success:!1,message:"Skill not found"};if(!r)return{success:!1,message:"Support gem not found"};if(!l.isUnlocked)return{success:!1,message:"Skill must be unlocked first"};if(!r.isUnlocked)return{success:!1,message:"Support gem must be unlocked first"};if(l.supportGems.length>=6)return{success:!1,message:"Skill already has maximum support gems (6)"};if(l.supportGems.some(f=>f.id===n))return{success:!1,message:"Support gem is already attached to this skill"};if(!r.tags.some(f=>l.tags.includes(f)))return{success:!1,message:`${r.name} is not compatible with ${l.name}. Support gem tags (${r.tags.join(", ")}) must match at least one skill tag (${l.tags.join(", ")}).`};const i={...e},c=i.skillGems.findIndex(f=>f.id===t);i.skillGems[c]={...l,supportGems:[...l.supportGems,r]};const d=i.skillBar.slots.findIndex(f=>(f==null?void 0:f.id)===t);return d!==-1&&(i.skillBar.slots[d]=i.skillGems[c]),{success:!0,message:`${r.name} attached to ${l.name}`,updatedPlayer:i}}function K0(e,t,n){const l=e.skillGems.find(f=>f.id===t);if(!l)return{success:!1,message:"Skill not found"};const r=l.supportGems.findIndex(f=>f.id===n);if(r===-1)return{success:!1,message:"Support gem is not attached to this skill"};const a=l.supportGems[r],i={...e},c=i.skillGems.findIndex(f=>f.id===t);i.skillGems[c]={...l,supportGems:l.supportGems.filter(f=>f.id!==n)};const d=i.skillBar.slots.findIndex(f=>(f==null?void 0:f.id)===t);return d!==-1&&(i.skillBar.slots[d]=i.skillGems[c]),{success:!0,message:`${a.name} detached from ${l.name}`,updatedPlayer:i}}function Z0(e){return e.skillGems.filter(t=>!t.isUnlocked&&e.level>=t.unlockLevel)}function J0(e){return e.skillGems.filter(t=>t.isUnlocked)}function eh(e){return e.supportGems.filter(t=>!t.isUnlocked&&e.level>=t.unlockLevel)}function th(e){return e.supportGems.filter(t=>t.isUnlocked)}const nh=[{id:"elemental_mastery",name:"Elemental Mastery",description:"Having both Fire and Lightning skills equipped grants elemental damage bonus",requiredTags:["Fire","Lightning"],bonuses:[{type:"damage",value:20,isPercentage:!0,description:"+20% elemental damage"},{type:"special",value:10,isPercentage:!1,description:"10% chance to trigger elemental explosion on kill"}],unlockLevel:5,icon:"🌟"},{id:"melee_caster",name:"Spellsword",description:"Combining melee attacks with spells creates unique combat synergies",requiredTags:["Melee","Spell"],bonuses:[{type:"manaCost",value:-15,isPercentage:!0,description:"-15% mana cost for spells"},{type:"speed",value:10,isPercentage:!0,description:"+10% attack and cast speed"}],unlockLevel:3,icon:"⚔️"},{id:"aoe_specialist",name:"Area Specialist",description:"Multiple AoE skills create devastating area control",requiredTags:["AoE","AoE"],bonuses:[{type:"area",value:30,isPercentage:!0,description:"+30% area of effect"},{type:"damage",value:15,isPercentage:!0,description:"+15% area damage",appliesTo:[]}],unlockLevel:4,icon:"💥"},{id:"channeling_master",name:"Channeling Master",description:"Mastery of channeling skills grants sustained combat bonuses",requiredTags:["Channeling"],bonuses:[{type:"damage",value:5,isPercentage:!0,description:"+5% damage per second of channeling (max 50%)"},{type:"special",value:2,isPercentage:!1,description:"+2% life and mana regeneration while channeling"}],unlockLevel:6,icon:"🔄"}],lh=[{id:"fire_lightning_chain",name:"Elemental Chain",description:"Lightning Bolt has a chance to trigger Fireball on critical hits",triggerSkill:"lightning_bolt",targetSkill:"fireball",condition:"onCrit",bonus:{type:"special",value:25,isPercentage:!1,description:"25% chance to cast Fireball on Lightning Bolt critical hit"},cooldown:2e3},{id:"whirlwind_spell_synergy",name:"Spell Weaving",description:"Whirlwind hits reduce spell cooldowns",triggerSkill:"whirlwind",targetSkill:"all_spells",condition:"onHit",bonus:{type:"cooldown",value:-50,isPercentage:!1,description:"Reduces spell cooldowns by 50ms per enemy hit"}},{id:"spell_kill_heal",name:"Arcane Recovery",description:"Spell kills restore mana and health",triggerSkill:"all_spells",targetSkill:"player",condition:"onKill",bonus:{type:"heal",value:5,isPercentage:!0,description:"Restore 5% health and mana on spell kill"}},{id:"melee_spell_momentum",name:"Combat Momentum",description:"Alternating between melee and spells builds momentum",triggerSkill:"whirlwind",targetSkill:"all_spells",condition:"onUse",bonus:{type:"damage",value:10,isPercentage:!0,description:"+10% spell damage for 3 seconds after using melee skill"},duration:3e3}];function rh(e){const t=[];for(const n of nh)ah(n,e)&&t.push(n);return t}function ah(e,t){if(e.requiredSkills){const n=t.map(l=>l.id);return e.requiredSkills.every(l=>n.includes(l))}if(e.requiredTags){const n=t.flatMap(a=>a.tags),l=new Map;n.forEach(a=>{l.set(a,(l.get(a)||0)+1)});const r=new Map;e.requiredTags.forEach(a=>{r.set(a,(r.get(a)||0)+1)});for(const[a,i]of r)if((l.get(a)||0)<i)return!1;return!0}return!1}function sh(e){const t=[],n=e.map(l=>l.id);for(const l of lh){const r=n.includes(l.triggerSkill)||l.triggerSkill==="all_spells",a=l.targetSkill==="all_spells"||l.targetSkill==="player"||n.includes(l.targetSkill);r&&a&&t.push(l)}return t}const rf={player:Be(mr()),enemies:[Zr(1)],inventory:[],log:[],skills:{},activeCombinations:[],activeSynergies:[],lastStatsUpdate:Date.now(),autoCombat:!0};function Lc(e){const t=e.player.skillBar.slots.filter(r=>r!==null),n=rh(t),l=sh(t);return{...e,activeCombinations:n,activeSynergies:l}}function ih(e,t){var n,l,r,a,i,c,d,f,y,w,x,v,j;switch(t.type){case"LOAD":{const h=t.payload||{};return h.player&&typeof h.player=="object"&&(typeof h.player.gold!="number"&&(h.player.gold=0),(!h.player.equipment||typeof h.player.equipment!="object")&&(h.player.equipment={}),h.player.skillBar||(h.player.skillBar=Zd()),Array.isArray(h.player.skillGems)||(h.player.skillGems=po.map(u=>ho(u))),Array.isArray(h.player.supportGems)||(h.player.supportGems=Yd.map(u=>Kd(u))),Array.isArray(h.player.stones)||(h.player.stones=[]),h.player=Be(h.player)),{...e,...h,lastStatsUpdate:Date.now()}}case"SPAWN":{const h=((n=t.payload)==null?void 0:n.level)??Math.max(1,e.player.level+(Math.random()>.5?1:0)),u=(l=t.payload)==null?void 0:l.kind,p=Zr(h,u),m=[...e.enemies,p].slice(0,25),g=[`Spawned ${p.name}`,...e.log].slice(0,200);return ke({player:e.player,inventory:e.inventory,enemies:m,skills:e.skills}),{...e,enemies:m,log:g}}case"TICK":{const h=(r=t.payload)==null?void 0:r.enemyId,u=[...e.enemies],p=u.findIndex(_=>_.id===h);if(p===-1)return e;({...u[p]});let m={...e.player},g=[];m.skillCooldowns||(m.skillCooldowns={});const S=Date.now(),b=m.skillBar.slots.find(_=>(_==null?void 0:_.id)==="whirlwind");if(b&&b.isUnlocked){const _=m.skillCooldowns.whirlwind||0,U=b.scaling.baseCooldown||b.cooldown;if(U===0||S-_>=U){m.skillCooldowns.whirlwind=S;const A=(b.scaling.baseArea+(b.level-1)*b.scaling.areaPerLevel)*30;g.push(`ANIM_SKILL|whirlwind|${S}|3000`);const R=Math.floor(b.scaling.baseDamage+(b.level-1)*b.scaling.damagePerLevel),K=e.playerPosition||{x:150,y:300};let le=0;u.forEach(X=>{if(X.hp>0&&X.position){const L=Math.hypot(X.position.x-K.x,X.position.y-K.y);L<=A&&(X.hp=Math.max(0,X.hp-R),g.push(`Whirlwind spins through ${X.name} for ${R} damage! (distance: ${Math.round(L)})`),le++)}}),g.push(`🌪️ Whirlwind channels continuously! (${le} enemies hit, range: ${Math.round(A)})`)}}const P={...m};let F=[...u],G=[...g,...e.log].slice(0,200);const E=F.filter(_=>_.hp<=0);if(E.length>0){let _=[],U=0;E.forEach($=>{const H=Jr($.level,$.isBoss);_=[..._,...H];const re=$.isBoss?Math.floor($.level*12):Math.max(1,Math.floor($.level*4));U+=re});const se=Date.now();F=F.map($=>$.hp<=0&&$.state!=="dying"?{...$,state:"dying",alpha:1,deathTime:se}:$),P.xp+=U;const A=10*4;let R=[...e.inventory],K=0,le=0,X=0;_.forEach($=>{K+=$.value,R.length>=A?(P.gold+=$.value,X++):(R.push($),le++)});const L=E.filter($=>$.isBoss).length;for(L>0?G.unshift(`🎉 ${L} BOSS(ES) DEFEATED! ${_.length} Epic Items Found!`):G.unshift(`${E.length} enemies defeated! ${_.length} items dropped`),le>0&&G.unshift(`📦 ${le} items added to inventory`),X>0&&G.unshift(`💰 Inventory full! ${X} items converted to ${X*Math.floor(K/_.length)} gold`);P.xp>=P.nextLevelXp;)P.xp-=P.nextLevelXp,P.level+=1,P.skillPoints+=1,P.maxHp+=8,P.hp=P.maxHp,P.nextLevelXp=Math.floor(P.nextLevelXp*1.25),G.unshift(`Leveled up! Now level ${P.level}`);return ke({player:P,inventory:R,enemies:F,skills:e.skills}),{...e,player:P,enemies:F,inventory:R,log:G,skills:e.skills}}return ke({player:P,inventory:e.inventory,enemies:F,skills:e.skills}),{...e,player:P,enemies:F,log:G,skills:e.skills}}case"REMOVE":{const h=t.payload,u=e.enemies.filter(p=>p.id!==h);return ke({player:e.player,inventory:e.inventory,enemies:u,skills:e.skills}),{...e,enemies:u}}case"EQUIP":{const h=t.payload,u=e.inventory.find(p=>p.id===h);if(!u)return e;if(u.slot&&u.category){if(!(!u.requirements||Object.entries(u.requirements).every(([b,P])=>{var G;return(((G=e.player.attributes)==null?void 0:G[b])??0)>=P})))return e;const m={...e.player.equipment};m[u.slot]=u;const g={...e.player,equipment:m},S=Be(g);return ke({player:S,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:S,lastStatsUpdate:Date.now()}}else{const p={...e.player,equipped:u},m=Be(p);return ke({player:m,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:m,lastStatsUpdate:Date.now()}}}case"UNEQUIP":{const h=t.payload;if(!h||!((a=e.player.equipment)!=null&&a[h]))return e;const u={...e.player.equipment};delete u[h];const p={...e.player,equipment:u},m=Be(p);return ke({player:m,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:m,lastStatsUpdate:Date.now()}}case"DISCARD":{const h=t.payload,u=e.inventory.filter(p=>p.id!==h);return ke({player:e.player,inventory:u,enemies:e.enemies,skills:e.skills}),{...e,inventory:u}}case"SELL_ALL":{const h=e.inventory.reduce((m,g)=>m+(g.value||0),0),u={...e.player,gold:(e.player.gold||0)+h},p=Be(u);return ke({player:p,inventory:[],enemies:e.enemies,skills:e.skills}),{...e,player:p,inventory:[],log:[`Sold all items for ${h} gold`,...e.log].slice(0,200),lastStatsUpdate:Date.now()}}case"UPGRADE_SKILL":{const h=t.payload,u=1;if(e.player.skillPoints<u)return e;const p=(e.skills[h]??0)+1;if(p>10)return e;const m={...e.skills,[h]:p},g={...e.player};g.skillPoints-=u,g.skills=m,h==="endurance"&&(g.maxHp+=10,g.hp+=10);const S=Be(g);return ke({player:S,inventory:e.inventory,enemies:e.enemies,skills:m}),{...e,player:S,skills:m,log:[`Upgraded ${h} to ${p}`,...e.log].slice(0,200)}}case"TOGGLE_AUTO":return{...e,autoCombat:!e.autoCombat};case"RESET":return ke({player:mr(),inventory:[],enemies:[Zr(1)],skills:{}}),{player:mr(),enemies:[Zr(1)],inventory:[],log:[],skills:{},activeCombinations:[],activeSynergies:[],lastStatsUpdate:Date.now(),autoCombat:!0,playerPosition:void 0,enemyPositions:void 0};case"LOG":return{...e,log:[t.payload,...e.log].slice(0,200)};case"UNLOCK_SKILL_GEM":{const h=G0(e.player,t.payload);if(h.success&&h.updatedPlayer){const u=Be(h.updatedPlayer);return ke({player:u,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:u,log:[h.message,...e.log].slice(0,200)}}else return{...e,log:[h.message,...e.log].slice(0,200)}}case"UNLOCK_SUPPORT_GEM":{const h=V0(e.player,t.payload);if(h.success&&h.updatedPlayer){const u=Be(h.updatedPlayer);return ke({player:u,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:u,log:[h.message,...e.log].slice(0,200)}}else return{...e,log:[h.message,...e.log].slice(0,200)}}case"LEVEL_UP_SKILL_GEM":{const h=W0(e.player,t.payload);if(h.success&&h.updatedPlayer){const u=Be(h.updatedPlayer);return ke({player:u,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:u,log:[h.message,...e.log].slice(0,200)}}else return{...e,log:[h.message,...e.log].slice(0,200)}}case"LEVEL_UP_SUPPORT_GEM":{const h=H0(e.player,t.payload);if(h.success&&h.updatedPlayer){const u=Be(h.updatedPlayer);return ke({player:u,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:u,log:[h.message,...e.log].slice(0,200)}}else return{...e,log:[h.message,...e.log].slice(0,200)}}case"EQUIP_SKILL_TO_BAR":{const{skillId:h,slotIndex:u}=t.payload,p=Y0(e.player,h,u);if(p.success&&p.updatedPlayer){const m=Be(p.updatedPlayer);return ke({player:m,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),Lc({...e,player:m,log:[p.message,...e.log].slice(0,200)})}else return{...e,log:[p.message,...e.log].slice(0,200)}}case"UNEQUIP_SKILL_FROM_BAR":{const h=X0(e.player,t.payload);if(h.success&&h.updatedPlayer){const u=Be(h.updatedPlayer);return ke({player:u,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),Lc({...e,player:u,log:[h.message,...e.log].slice(0,200)})}else return{...e,log:[h.message,...e.log].slice(0,200)}}case"ATTACH_SUPPORT_GEM":{const{skillId:h,supportId:u}=t.payload,p=Q0(e.player,h,u);if(p.success&&p.updatedPlayer){const m=Be(p.updatedPlayer);return ke({player:m,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:m,log:[p.message,...e.log].slice(0,200)}}else return{...e,log:[p.message,...e.log].slice(0,200)}}case"DETACH_SUPPORT_GEM":{const{skillId:h,supportId:u}=t.payload,p=K0(e.player,h,u);if(p.success&&p.updatedPlayer){const m=Be(p.updatedPlayer);return ke({player:m,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:m,log:[p.message,...e.log].slice(0,200)}}else return{...e,log:[p.message,...e.log].slice(0,200)}}case"USE_SKILL":{const h=t.payload,u=e.player.skillGems.find(b=>b.id===h&&b.isEquipped);if(!u)return{...e,log:["Skill not found or not equipped",...e.log].slice(0,200)};const p=0;if(e.player.mana<p)return{...e,log:[`Not enough mana to use ${u.name}! (${p} required, ${e.player.mana} available)`,...e.log].slice(0,200)};const m={...e.player,mana:Math.max(0,e.player.mana-p)};let g=[`Used ${u.name}!`,...e.log];if(u.id==="whirlwind"){g.unshift(`ANIM_SKILL|whirlwind|${Date.now()}|3000`);const b=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);e.enemies.forEach(P=>{P.hp>0&&g.unshift(`ANIM_PLAYER|${P.id}|whirlwind|Unique|hit|${b}`)})}else if(u.id==="fireball"){const b=e.enemies.find(P=>P.hp>0);if(b){g.unshift(`ANIM_SKILL|fireball|${b.id}|${Date.now()}`);const P=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);g.unshift(`ANIM_PLAYER|${b.id}|magic|Rare|hit|${P}`)}}else if(u.id==="lightning_bolt"){const b=e.enemies.find(P=>P.hp>0);if(b){g.unshift(`ANIM_SKILL|lightning_bolt|${b.id}|${Date.now()}`);const P=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);g.unshift(`ANIM_PLAYER|${b.id}|magic|Magic|hit|${P}`)}}else if(u.id==="power_strike"){const b=e.enemies.find(P=>P.hp>0);if(b){const P=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);g.unshift(`ANIM_PLAYER|${b.id}|melee|Unique|hit|${P}`)}}else if(u.id==="ice_shard"){const b=e.enemies.find(P=>P.hp>0);if(b){g.unshift(`ANIM_SKILL|ice_shard|${b.id}|${Date.now()}`);const P=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);g.unshift(`ANIM_PLAYER|${b.id}|magic|Magic|hit|${P}`)}}else if(u.id==="ground_slam"){g.unshift(`ANIM_SKILL|ground_slam|${Date.now()}|800`);const b=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);e.enemies.forEach(P=>{P.hp>0&&g.unshift(`ANIM_PLAYER|${P.id}|melee|Rare|hit|${b}`)})}else if(u.id==="poison_arrow"){const b=e.enemies.find(P=>P.hp>0);if(b){g.unshift(`ANIM_SKILL|poison_arrow|${b.id}|${Date.now()}`);const P=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);g.unshift(`ANIM_PLAYER|${b.id}|ranged|Magic|hit|${P}`)}}else if(u.id==="chain_lightning"){g.unshift(`ANIM_SKILL|chain_lightning|${Date.now()}|800`);const b=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);e.enemies.filter(F=>F.hp>0).slice(0,3).forEach(F=>{g.unshift(`ANIM_PLAYER|${F.id}|magic|Rare|hit|${b}`)})}else if(u.id==="meteor"){g.unshift(`ANIM_SKILL|meteor|${Date.now()}|1200`);const b=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);e.enemies.forEach(P=>{P.hp>0&&g.unshift(`ANIM_PLAYER|${P.id}|magic|Unique|hit|${b}`)})}else if(u.id==="blade_vortex"){g.unshift(`ANIM_SKILL|blade_vortex|${Date.now()}|5000`);const b=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);e.enemies.forEach(P=>{P.hp>0&&g.unshift(`ANIM_PLAYER|${P.id}|magic|Rare|hit|${b}`)})}else if(u.id==="frost_nova"){g.unshift(`ANIM_SKILL|frost_nova|${Date.now()}|1000`);const b=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);e.enemies.forEach(P=>{P.hp>0&&g.unshift(`ANIM_PLAYER|${P.id}|magic|Magic|hit|${b}`)})}else if(u.id==="cleave"){g.unshift(`ANIM_SKILL|cleave|${Date.now()}|600`);const b=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);e.enemies.filter(F=>F.hp>0).slice(0,3).forEach(F=>{g.unshift(`ANIM_PLAYER|${F.id}|melee|Rare|hit|${b}`)})}else if(u.id==="summon_skeletons")g.unshift(`ANIM_SKILL|summon_skeletons|${Date.now()}|2000`),g.unshift("Summoned skeleton minions!");else if(u.id==="heal"){const b=Math.floor(u.scaling.baseDamage+(u.level-1)*u.scaling.damagePerLevel);m.hp=Math.min(m.maxHp,m.hp+b),g.unshift(`ANIM_SKILL|heal|player|${Date.now()}`),g.unshift(`Healed for ${b} HP!`)}const S=Be(m);return ke({player:S,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:S,log:g.slice(0,200)}}case"UPDATE_ENEMY_POSITIONS":return{...e,enemyPositions:t.payload};case"UPDATE_PLAYER_POSITION":return{...e,playerPosition:t.payload};case"CHANNEL_WHIRLWIND":{const h=e.player.skillBar.slots.find(b=>(b==null?void 0:b.id)==="whirlwind");if(!h||!h.isUnlocked)return e;let u={...e.player},p=[];u.skillCooldowns||(u.skillCooldowns={});const m=Date.now(),g=u.skillCooldowns.whirlwind||0,S=h.scaling.baseCooldown||h.cooldown;if(S===0||m-g>=S){u.skillCooldowns.whirlwind=m;const P=(h.scaling.baseArea+(h.level-1)*h.scaling.areaPerLevel)*30,F=Math.floor(h.scaling.baseDamage+(h.level-1)*h.scaling.damagePerLevel),G=e.playerPosition||{x:150,y:300};let E=0,_=[...e.enemies];_.forEach(R=>{R.hp>0&&R.position&&Math.hypot(R.position.x-G.x,R.position.y-G.y)<=P&&(R.hp=Math.max(0,R.hp-F),E++)}),E>0&&(p.push(`ANIM_SKILL|whirlwind|${m}|1000`),p.push(`🌪️ Whirlwind channels continuously! (${E} enemies hit, range: ${Math.round(P)})`));const U=_.filter(R=>R.hp<=0);_=_.map(R=>R.hp<=0&&R.state!=="dying"?{...R,state:"dying",alpha:1,deathTime:m}:R);let se=[...e.inventory];if(U.length>0){let R=[],K=0;U.forEach(re=>{const k=Jr(re.level,re.isBoss);R=[...R,...k];const D=re.isBoss?Math.floor(re.level*12):Math.max(1,Math.floor(re.level*4));K+=D}),u.xp+=K;const le=10*4;let X=0,L=0,$=0;R.forEach(re=>{X+=re.value,se.length>=le?(u.gold+=re.value,$++):(se.push(re),L++)});const H=U.filter(re=>re.isBoss).length;for(H>0?p.push(`🎉 ${H} BOSS(ES) DEFEATED by Whirlwind! ${R.length} Epic Items Found!`):p.push(`${U.length} enemies defeated by Whirlwind! ${R.length} items dropped`),L>0&&p.push(`📦 ${L} items added to inventory`),$>0&&p.push(`💰 Inventory full! ${$} items converted to ${$*Math.floor(X/R.length)} gold`);u.xp>=u.nextLevelXp;)u.xp-=u.nextLevelXp,u.level+=1,u.skillPoints+=1,u.maxHp+=8,u.hp=u.maxHp,u.nextLevelXp=Math.floor(u.nextLevelXp*1.25),p.push(`Leveled up! Now level ${u.level}`)}const A=Be(u);return ke({player:A,inventory:se,enemies:_,skills:e.skills}),{...e,player:A,enemies:_,inventory:se,log:[...p,...e.log].slice(0,200)}}return e}case"AUTO_SKILLS":{if(!e.autoCombat||e.enemies.length===0)return console.log("🚫 AUTO_SKILLS skipped - autoCombat:",e.autoCombat,"enemies:",e.enemies.length),e;let h={...e.player},u=[],p=[...e.enemies];h.skillCooldowns||(h.skillCooldowns={});const m=Date.now();console.log("🔍 AUTO_SKILLS triggered - equipped skills:",h.skillBar.slots.map(_=>(_==null?void 0:_.id)||"empty")),console.log("🔍 Auto combat enabled:",e.autoCombat,"Enemy count:",p.length);const g=p.filter(_=>_.hp>0);let S=null;if(g.length>0&&e.playerPosition){const _=e.playerPosition,U=g.map(se=>{var X;const A=(X=e.enemyPositions)==null?void 0:X[se.id];if(!A)return null;const R=A.x-_.x,K=A.y-_.y,le=Math.sqrt(R*R+K*K);return{enemy:se,distance:le,position:A}}).filter(Boolean);U.length>0&&(U.sort((se,A)=>se.distance-A.distance),S=U[0].enemy)}!S&&g.length>0&&(S=g[0]),console.log("🎯 Nearest enemy for targeting:",S?`${S.name} (${S.id})`:"none");for(let _=0;_<h.skillBar.slots.length;_++){const U=h.skillBar.slots[_];if(console.log(`🔍 Slot ${_}:`,U?{id:U.id,isUnlocked:U.isUnlocked,isEquipped:U.isEquipped}:"empty"),U&&U.isEquipped&&U.id!=="whirlwind"){console.log(`🎯 Checking skill ${U.id} in slot ${_}:`,{isUnlocked:U.isUnlocked,currentMana:h.mana,manaCost:((i=U.scaling)==null?void 0:i.baseManaCost)||U.manaCost||0});const se=((c=h.skillCooldowns)==null?void 0:c[U.id])??0,A=((d=U.scaling)==null?void 0:d.baseCooldown)??U.cooldown??0,R=((f=U.scaling)==null?void 0:f.baseManaCost)||U.manaCost||0;if(console.log(`🔍 Skill ${U.id} check details:`,{lastUsed:se,currentTime:m,cooldownTime:A,timeSinceLastUse:m-se,cooldownReady:m-se>=A,manaReady:h.mana>=R,hasTarget:!!S}),m-se>=A&&h.mana>=R){const K=["fireball","lightning_bolt","ice_shard","poison_arrow"],le=K.includes(U.id);if(le&&!S){console.log(`❌ Skill ${U.id} needs a target but none available`);continue}if(le&&S){const L=xi(U),$=(y=e.enemyPositions)==null?void 0:y[S.id],H=e.playerPosition;if($&&H){const re=$.x-H.x,k=$.y-H.y,D=Math.sqrt(re*re+k*k),ye=L*1.2;if(D>ye){console.log(`❌ Skill ${U.id} target too far: ${D.toFixed(0)}px > ${ye.toFixed(0)}px effective range`);continue}console.log(`✅ Skill ${U.id} target in range: ${D.toFixed(0)}px <= ${ye.toFixed(0)}px`)}else console.log(`⚠️ Position data missing for ${U.id}, allowing skill usage as fallback`)}console.log(`🚀 Triggering skill ${U.id}${S?` on ${S.name}`:""}!`),console.log(`✅ SKILL TRIGGERED SUCCESSFULLY: ${U.id} - This confirms the AUTO_SKILLS bug fix is working!`),h.skillCooldowns=h.skillCooldowns||{},h.skillCooldowns[U.id]=m,h.mana=Math.max(0,h.mana-R);const X=Math.floor((((w=U.scaling)==null?void 0:w.baseDamage)||10)+(U.level-1)*(((x=U.scaling)==null?void 0:x.damagePerLevel)||5));if(K.includes(U.id)&&S){const L=`ANIM_SKILL|${U.id}|${S.id}`;console.log(`📝 Adding projectile animation log: ${L}`),u.push(L);const $=p.findIndex(H=>H.id===S.id);$!==-1&&p[$].hp>0&&(p[$].hp=Math.max(0,p[$].hp-X),u.push(`ANIM_PLAYER|${S.id}|magic|Rare|hit|${X}`),u.push(`⚡ ${U.name} hits ${S.name} for ${X} damage!`))}else{const L=`ANIM_SKILL|${U.id}|${m}|${((v=U.scaling)==null?void 0:v.baseDuration)??1e3}`;console.log(`📝 Adding AOE animation log: ${L}`),u.push(L);let $=0;p.forEach((H,re)=>{H.hp>0&&(p[re].hp=Math.max(0,H.hp-X),$++)}),$>0&&u.push(`⚡ ${U.name} hits ${$} enemies for ${X} damage each!`)}console.log(`📋 Current skillLog after adding ${U.id}:`,u)}else{const K=S?`cooldown: ${m-se}/${A}, mana: ${h.mana}/${R}`:"no target";console.log(`❌ Skill ${U.id} not ready - ${K}`)}}}const b=p.filter(_=>_.hp<=0);let P=[...e.inventory];if(b.length>0){let _=[],U=0;b.forEach(X=>{const L=Jr(X.level,X.isBoss);_=[..._,...L];const $=X.isBoss?Math.floor(X.level*12):Math.max(1,Math.floor(X.level*4));U+=$}),h.xp+=U;const se=10*4;let A=0,R=0,K=0;_.forEach(X=>{A+=X.value,P.length>=se?(h.gold+=X.value,K++):(P.push(X),R++)});const le=b.filter(X=>X.isBoss).length;for(le>0?u.unshift(`🎉 ${le} BOSS(ES) DEFEATED! ${_.length} Epic Items Found!`):u.unshift(`${b.length} enemies defeated! ${_.length} items dropped`),R>0&&u.unshift(`📦 ${R} items added to inventory`),K>0&&u.unshift(`💰 Inventory full! ${K} items converted to ${K*Math.floor(A/_.length)} gold`);h.xp>=h.nextLevelXp;)h.xp-=h.nextLevelXp,h.level+=1,h.skillPoints+=1,h.maxHp+=8,h.hp=h.maxHp,h.nextLevelXp=Math.floor(h.nextLevelXp*1.25),u.unshift(`Leveled up! Now level ${h.level}`)}const F=Date.now(),E=p.map(_=>_.hp<=0&&_.state!=="dying"?{..._,state:"dying",alpha:1,deathTime:F}:_).filter(_=>_.state==="dying"&&_.deathTime?F-_.deathTime<2e3:_.hp>0);return ke({player:h,inventory:P,enemies:E,skills:e.skills}),{...e,player:h,enemies:E,inventory:P,log:[...u,...e.log].slice(0,200)}}case"MANA_REGEN":{const h={...e.player},p=(h.manaRegen||0)/10;return h.mana=Math.min(h.maxMana,h.mana+p),{...e,player:h}}case"ALLOCATE_PASSIVE_NODE":{const h=t.payload,u={...e.player};if(u.passiveTreeData&&u.passiveTreeState){const p=d0(h,u.passiveTreeData,u.passiveTreeState);u.passiveTreeState=p;const m=Be(u);return ke({player:m,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:m,log:[`Allocated passive node: ${((j=u.passiveTreeData.nodes[h])==null?void 0:j.name)||h}`,...e.log].slice(0,200),lastStatsUpdate:Date.now()}}return e}case"ADD_STONE":{const h=t.payload,u={...e.player,stones:[...e.player.stones,h]};return ke({player:u,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:u,log:[`Generated stone: ${h.name}`,...e.log].slice(0,200)}}case"REMOVE_STONE":{const h=t.payload,u={...e.player,stones:e.player.stones.filter(p=>p.id!==h)};return ke({player:u,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:u,log:["Removed stone",...e.log].slice(0,200)}}case"UPDATE_EQUIPMENT":{const{slot:h,equipment:u}=t.payload,p={...e.player.equipment};p[h]=u;const m={...e.player,equipment:p},g=Be(m);return ke({player:g,inventory:e.inventory,enemies:e.enemies,skills:e.skills}),{...e,player:g,lastStatsUpdate:Date.now()}}default:return e}}const af=M.createContext({state:rf,actions:{},dispatch:()=>{}});function oh({children:e}){const[t,n]=M.useReducer(ih,rf);M.useEffect(()=>{const c=q0();c&&n({type:"LOAD",payload:c})},[]);const l=M.useCallback(c=>{n({type:"UPDATE_ENEMY_POSITIONS",payload:c})},[]),r=M.useCallback(c=>{n({type:"UPDATE_PLAYER_POSITION",payload:c})},[]);M.useEffect(()=>{const c=setInterval(()=>{const d=t.enemies.filter(f=>f.hp>0).length;if(d<25){const f=Math.min(3,25-d);for(let y=0;y<f;y++)n({type:"SPAWN"})}},1500);return()=>clearInterval(c)},[]),M.useEffect(()=>{const c=t.skills.quick??0,f=Math.max(300,Math.round(1e3/(1+c*.05))),y=setInterval(()=>{n({type:"AUTO_SKILLS"})},f);return()=>clearInterval(y)},[t.skills]),M.useEffect(()=>{const c=t.player.skillBar.slots.find(d=>(d==null?void 0:d.id)==="whirlwind");if(c&&c.isUnlocked){const f=setInterval(()=>{n({type:"CHANNEL_WHIRLWIND"})},100);return()=>clearInterval(f)}},[t.player.skillBar]),M.useEffect(()=>{const d=setInterval(()=>{n({type:"MANA_REGEN"})},100);return()=>clearInterval(d)},[]);const a=M.useMemo(()=>({spawnEnemy:(c,d)=>n({type:"SPAWN",payload:{level:c,kind:d}}),simulateTick:c=>n({type:"TICK",payload:{enemyId:c}}),removeEnemy:c=>n({type:"REMOVE",payload:c}),equipItem:c=>n({type:"EQUIP",payload:c}),discardItem:c=>n({type:"DISCARD",payload:c}),sellAll:()=>n({type:"SELL_ALL"}),upgradeSkill:c=>n({type:"UPGRADE_SKILL",payload:c}),resetAll:()=>n({type:"RESET"}),log:c=>n({type:"LOG",payload:c}),unlockSkillGem:c=>n({type:"UNLOCK_SKILL_GEM",payload:c}),unlockSupportGem:c=>n({type:"UNLOCK_SUPPORT_GEM",payload:c}),levelUpSkillGem:c=>n({type:"LEVEL_UP_SKILL_GEM",payload:c}),levelUpSupportGem:c=>n({type:"LEVEL_UP_SUPPORT_GEM",payload:c}),equipSkillToBar:(c,d)=>n({type:"EQUIP_SKILL_TO_BAR",payload:{skillId:c,slotIndex:d}}),unequipSkillFromBar:c=>n({type:"UNEQUIP_SKILL_FROM_BAR",payload:c}),attachSupportGem:(c,d)=>n({type:"ATTACH_SUPPORT_GEM",payload:{skillId:c,supportId:d}}),detachSupportGem:(c,d)=>n({type:"DETACH_SUPPORT_GEM",payload:{skillId:c,supportId:d}}),useSkill:c=>n({type:"USE_SKILL",payload:c}),updateEnemyPositions:l,updatePlayerPosition:r,allocatePassiveNode:c=>n({type:"ALLOCATE_PASSIVE_NODE",payload:c}),addStone:c=>n({type:"ADD_STONE",payload:c}),removeStone:c=>n({type:"REMOVE_STONE",payload:c})}),[l,r]),i=M.useMemo(()=>({state:t,actions:a,dispatch:n}),[t,a]);return s.jsx(af.Provider,{value:i,children:e})}function ut(){const e=M.useContext(af);if(!e)throw new Error("useGame must be used within a GameProvider");return e}function ch(){return s.jsxs("span",{className:`ml-2 inline-block bg-gradient-to-r from-purple-600 to-blue-500\r
                 text-xs text-white px-2 py-0.5 rounded-full shadow-md \r
                 cursor-pointer hover:scale-105 transition-transform`,title:`Version: undefined
Commit: 5759952
Built: 10/17/2025, 11:39:02 PM`,onClick:()=>navigator.clipboard.writeText("5759952"),children:["v",void 0," • ","5759952"]})}function uh({onOpenModal:e}){var c;const{state:t}=ut(),n=t.player,l=t.skills||{},r=Math.pow(1.05,l.power||0),a=(n.attackSpeed||1)*(1+(l.quick||0)*.05),i=(n.baseDps+(((c=n.equipped)==null?void 0:c.power)||0))*r+(n.dps-n.baseDps);return s.jsx("div",{className:"sticky-header w-full bg-gray-900/95 backdrop-blur-md border-b border-gray-700 shadow-lg",children:s.jsx("div",{className:"w-full px-4 py-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h1",{className:"header-title text-2xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:"Auto Battle Arena"}),s.jsx(ch,{})]}),s.jsxs("div",{className:"header-nav flex space-x-2",children:[s.jsx("button",{onClick:()=>e("skills"),className:"px-3 py-1.5 bg-blue-900/50 hover:bg-blue-800/60 border border-blue-600/50 text-blue-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-blue-500/20",children:"🎯 Skills"}),s.jsx("button",{onClick:()=>e("passiveTree"),className:"px-3 py-1.5 bg-green-900/50 hover:bg-green-800/60 border border-green-600/50 text-green-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-green-500/20",children:"🌳 Passive Tree"}),s.jsx("button",{onClick:()=>e("stones"),className:"px-3 py-1.5 bg-amber-900/50 hover:bg-amber-800/60 border border-amber-600/50 text-amber-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-amber-500/20",children:"💎 Stones"}),s.jsx("button",{onClick:()=>e("combinations"),className:"px-3 py-1.5 bg-pink-900/50 hover:bg-pink-800/60 border border-pink-600/50 text-pink-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-pink-500/20",children:"🔗 Combinations"}),s.jsx("button",{onClick:()=>e("maps"),className:"px-3 py-1.5 bg-indigo-900/50 hover:bg-indigo-800/60 border border-indigo-600/50 text-indigo-300 rounded-md transition-all duration-200 text-sm font-medium hover:shadow-lg hover:shadow-indigo-500/20",children:"🗺️ Maps"})]}),s.jsxs("div",{className:"header-stats flex flex-wrap gap-2 mt-1",children:[s.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-600/40 text-yellow-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[s.jsx("span",{children:"💰"}),s.jsx("span",{children:n.gold.toFixed(2)})]}),s.jsxs("div",{className:"bg-red-900/30 border border-red-600/40 text-red-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[s.jsx("span",{children:"👹"}),s.jsx("span",{children:t.enemies.length})]}),s.jsxs("div",{className:"bg-orange-900/30 border border-orange-600/40 text-orange-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[s.jsx("span",{children:"⚔️"}),s.jsx("span",{children:i.toFixed(2)})]}),s.jsxs("div",{className:"bg-cyan-900/30 border border-cyan-600/40 text-cyan-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[s.jsx("span",{children:"⚡"}),s.jsxs("span",{children:[a.toFixed(2),"/s"]})]}),s.jsxs("div",{className:"bg-purple-900/30 border border-purple-600/40 text-purple-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm",children:[s.jsx("span",{children:"🎯"}),s.jsxs("span",{children:["Lv.",n.level]})]}),s.jsxs("div",{className:"bg-blue-900/30 border border-blue-600/40 text-blue-300 rounded-md px-3 py-1.5 flex items-center space-x-2 text-sm min-w-[120px]",children:[s.jsx("span",{children:"✨"}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"bg-blue-800/50 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:"bg-blue-400 h-full transition-all duration-300",style:{width:`${n.xp/n.nextLevelXp*100}%`}})})})]})]})]})})})}const Ss=1400,bs=700,Ct=4e3,Pt=3e3;function dh(e){return!e||e==="Common"?"#ffffff":e==="Magic"?"#06b6d4":e==="Rare"?"#8b5cf6":e==="Unique"?"#fbbf24":"#ffffff"}const fh=Gn.memo(function(){const t=M.useRef(null),{state:n,actions:l}=ut(),[r,a]=M.useState({x:Ct/2,y:Pt/2}),[i,c]=M.useState({}),[d,f]=M.useState([]),[y,w]=M.useState([]),[x,v]=M.useState([]),[j,h]=M.useState({}),[u,p]=M.useState({x:0,y:0,zoom:1}),[m,g]=M.useState(0),[S,b]=M.useState(0),[P,F]=M.useState({active:!1,startTime:0,rotation:0}),[G,E]=M.useState(!1),_=M.useRef(0),se=1e3/60,A=M.useMemo(()=>{const B=[];for(let Y=0;Y<1e3;Y++)B.push({x:0,y:0});return B},[]);let R=0;const K=M.useCallback((B,Y)=>{const o=A[R%A.length];return o.x=B,o.y=Y,R++,o},[A]),le=M.useCallback((B,Y,o=0)=>{const q=(B-Y)*Math.cos(Math.PI/6),Z=(B+Y)*Math.sin(Math.PI/6)-o*.5;return K(q,Z)},[K]),X=M.useCallback(B=>K((B.x-u.x)*u.zoom+Ss/2,(B.y-u.y)*u.zoom+bs/2),[u.x,u.y,u.zoom,K]),L=M.useCallback((B,Y,o=0)=>{const q=le(B,Y,o);return X(q)},[le,X]);M.useCallback((B,Y)=>B+Y,[]),M.useEffect(()=>{c(B=>{const Y={...B};let o=!1;const q=[{centerX:Ct*.3,centerY:Pt*.3,radius:300},{centerX:Ct*.7,centerY:Pt*.3,radius:300},{centerX:Ct*.3,centerY:Pt*.7,radius:300},{centerX:Ct*.7,centerY:Pt*.7,radius:300},{centerX:Ct*.5,centerY:Pt*.1,radius:200},{centerX:Ct*.5,centerY:Pt*.9,radius:200},{centerX:Ct*.1,centerY:Pt*.5,radius:200},{centerX:Ct*.9,centerY:Pt*.5,radius:200}];n.enemies.forEach((ae,fe)=>{if(!Y[ae.id]){o=!0;const he=q[fe%q.length],oe=Math.random()*Math.PI*2,xe=Math.random()*he.radius,ge=he.centerX+Math.cos(oe)*xe,be=he.centerY+Math.sin(oe)*xe;Y[ae.id]={x:Math.max(50,Math.min(Ct-50,ge)),y:Math.max(50,Math.min(Pt-50,be))}}});const Z=new Set(n.enemies.map(ae=>ae.id));return Object.keys(Y).forEach(ae=>{Z.has(ae)||delete Y[ae]}),o||Object.keys(Y).length!==Object.keys(B).length?Y:B})},[n.enemies]),M.useEffect(()=>{l.updateEnemyPositions(i)},[i,l]),M.useEffect(()=>{const B=Y=>{Y.key.toLowerCase()==="f1"&&E(q=>!q)};return window.addEventListener("keydown",B),()=>{window.removeEventListener("keydown",B)}},[]);const $=(B,Y=0)=>B.x>=Y&&B.x<=Ct-Y&&B.y>=Y&&B.y<=Pt-Y,H=(B,Y)=>Math.hypot(B.x-Y.x,B.y-Y.y),re=M.useRef(0);M.useEffect(()=>{if(!n.log||n.log.length===0)return;const B=n.log.slice(0,n.log.length-re.current);B.length!==0&&(re.current=n.log.length,B.reverse().forEach(Y=>{if(console.log(`🎬 GameCanvas processing log: ${Y}`),Y.startsWith("ANIM_PLAYER|")){const o=Y.split("|"),q=o[1],Z=o[2],ae=o[3],fe=o[4],he=Math.floor(Number(o[5]||0)),oe=i[q],xe=dh(ae);if(Z==="melee")v(ge=>[...ge,{kind:"slash",x:(oe==null?void 0:oe.x)||300,y:(oe==null?void 0:oe.y)||200,t:Date.now(),ttl:400,angle:Math.random()*Math.PI-Math.PI/2,color:xe}]);else if(Z==="ranged"){if(oe){const ge=oe.x-r.x,be=oe.y-r.y,we=Math.hypot(ge,be)||1,Me=3*(n.player.projectileSpeed||1)*(1+(n.skills.arcane||0)*.1);f(et=>[...et,{x:r.x,y:r.y,vx:ge/we*Me,vy:be/we*Me,life:800,color:xe,radius:3,size:2}])}}else if(Z==="magic"&&oe){const ge=oe.x-r.x,be=oe.y-r.y,we=Math.hypot(ge,be)||1,Me=2*(n.player.projectileSpeed||1)*(1+(n.skills.arcane||0)*.1);f(et=>[...et,{x:r.x,y:r.y,vx:ge/we*Me,vy:be/we*Me,life:1200,color:xe,radius:6,size:4,glow:!0}])}if(oe){const ge=he.toFixed(2),be=fe==="crit"?`-${ge} CRIT!`:`-${ge}`,we=fe==="crit";v(Me=>[...Me,{kind:we?"critical_damage":"damage",x:oe.x+(Math.random()-.5)*10,y:oe.y-10+(Math.random()-.5)*6,t:Date.now(),ttl:we?2e3:1600,text:be,crit:we,size:Math.min(we?32:28,(we?14:10)+Math.floor(he/2)),color:we?"#ff0066":"#ff6b6b"}]),we&&v(Me=>[...Me,{kind:"critical_burst",x:oe.x,y:oe.y,t:Date.now(),ttl:1200,color:"#ff0066",size:30}])}}if(Y.startsWith("Enemy defeated! Loot:")){const o=Y.match(/Loot: (.+)$/);o&&v(q=>[...q,{kind:"pickup",x:220,y:60,t:Date.now(),ttl:1200,text:o[1],color:"#fff"}])}if(Y.includes("dodged"))if(Y.includes("Player dodged"))v(o=>[...o,{kind:"dodge",x:r.x+(Math.random()-.5)*20,y:r.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1500,text:"DODGE!",color:"#00ffff",size:18}]),v(o=>[...o,{kind:"dodge_burst",x:r.x,y:r.y,t:Date.now(),ttl:800,color:"#00ffff",size:20}]);else{const o=Y.match(/(.+) dodged/);if(o){const q=o[1],Z=n.enemies.find(ae=>ae.name===q);if(Z){const ae=i[Z.id];ae&&v(fe=>[...fe,{kind:"miss",x:ae.x+(Math.random()-.5)*20,y:ae.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1200,text:"MISS!",color:"#94a3b8",size:14}])}}}if(Y.includes("hits back for")){const o=Y.match(/hits back for (\d+)/);if(o){const q=parseInt(o[1]);v(Z=>[...Z,{kind:"player_damage",x:r.x+(Math.random()-.5)*15,y:r.y-15+(Math.random()-.5)*8,t:Date.now(),ttl:1400,text:`-${q}`,color:"#ef4444",size:Math.min(24,12+Math.floor(q/3))}])}}if(Y.includes("blocked")&&Y.includes("Player blocked")&&v(o=>[...o,{kind:"block",x:r.x+(Math.random()-.5)*20,y:r.y-20+(Math.random()-.5)*10,t:Date.now(),ttl:1200,text:"BLOCK!",color:"#fbbf24",size:16}]),Y.startsWith("🔥 Critical Hit!"),Y.startsWith("ANIM_SKILL|")){const o=Y.split("|"),q=o[1];if(console.log(`🎯 Processing ANIM_SKILL: ${q}, parts:`,o),q==="whirlwind"){const Z=Number(o[2]),ae=Number(o[3]);F({active:!0,startTime:Date.now(),rotation:0}),setTimeout(()=>{F(fe=>({...fe,active:!1}))},ae),v(fe=>[...fe,{kind:"whirlwind",x:r.x,y:r.y,t:Z,ttl:ae,color:"#fbbf24",duration:ae}])}else if(q==="heal")v(Z=>[...Z,{kind:"heal",x:r.x,y:r.y,t:Date.now(),ttl:2e3,color:"#10b981"}]);else if(q==="fireball"){const Z=o[2],ae=i[Z];if(console.log(`🔥 FIREBALL ANIM_SKILL received - targetId: ${Z}, targetPos:`,ae),ae){const fe=ae.x-r.x,he=ae.y-r.y,oe=4*(n.player.projectileSpeed||1),xe=n.player.skillBar.slots.find(De=>(De==null?void 0:De.name)==="Fireball"),ge=xe?xe.supportGems.reduce((De,dt)=>{var It,ee;return dt.id==="multiple_projectiles"?De+(((ee=(It=dt.modifiers)==null?void 0:It.find($e=>$e.type==="projectiles"))==null?void 0:ee.value)||0):De},1):1,be=20,we=Math.atan2(he,fe),Me=r.x+Math.cos(we)*be,et=r.y+Math.sin(we)*be;for(let De=0;De<ge;De++){const dt=ge>1?(De-(ge-1)/2)*.3:0,It=we+dt,ee=Math.cos(It)*oe,$e=Math.sin(It)*oe,me=ge>1?(De-(ge-1)/2)*8:0,He=Me+Math.cos(It+Math.PI/2)*me,je=et+Math.sin(It+Math.PI/2)*me,Ne={x:He,y:je,vx:ee,vy:$e,life:5e3,color:"#ff4400",radius:10,size:8,glow:!0,type:"fireball",trail:!1,particles:!1,rotation:0,targetId:Z};f(Fe=>[...Fe,Ne]),D.current.calculatedProjectiles||(D.current.calculatedProjectiles=[]),D.current.calculatedProjectiles.push(Ne)}}}else if(q==="lightning_bolt"){const Z=o[2],ae=i[Z];if(ae){const fe=ae.x-r.x,he=ae.y-r.y,oe=Math.hypot(fe,he)||1,xe=6*(n.player.projectileSpeed||1),ge=20,be=Math.atan2(he,fe),we=r.x+Math.cos(be)*ge,Me=r.y+Math.sin(be)*ge;f(et=>[...et,{x:we,y:Me,vx:fe/oe*xe,vy:he/oe*xe,life:800,color:"#00aaff",radius:6,size:4,glow:!0}])}}else if(q==="power_strike")v(Z=>[...Z,{kind:"power_strike",x:r.x,y:r.y,t:Date.now(),ttl:700,color:"#ffaa00",size:18}]);else if(q==="ice_shard"){const Z=o[2],ae=i[Z];if(ae){const fe=ae.x-r.x,he=ae.y-r.y,oe=Math.hypot(fe,he)||1,xe=5*(n.player.projectileSpeed||1),ge=20,be=Math.atan2(he,fe),we=r.x+Math.cos(be)*ge,Me=r.y+Math.sin(be)*ge;f(et=>[...et,{x:we,y:Me,vx:fe/oe*xe,vy:he/oe*xe,life:900,color:"#74c0fc",radius:5,size:3,glow:!0}])}}else if(q==="ground_slam")v(Z=>[...Z,{kind:"ground_slam",x:r.x,y:r.y,t:Date.now(),ttl:800,color:"#8b5a2b",size:25}]);else if(q==="poison_arrow"){const Z=o[2],ae=i[Z];if(ae){const fe=ae.x-r.x,he=ae.y-r.y,oe=Math.hypot(fe,he)||1,xe=4.5*(n.player.projectileSpeed||1);f(ge=>[...ge,{x:r.x,y:r.y,vx:fe/oe*xe,vy:he/oe*xe,life:1200,color:"#51cf66",radius:4,size:3,glow:!1}])}}else q==="chain_lightning"?v(Z=>[...Z,{kind:"chain_lightning",x:r.x,y:r.y,t:Date.now(),ttl:800,color:"#ffd43b",size:16}]):q==="meteor"?v(Z=>[...Z,{kind:"meteor",x:r.x,y:r.y,t:Date.now(),ttl:1200,color:"#ff6b6b",size:35}]):q==="blade_vortex"?v(Z=>[...Z,{kind:"blade_vortex",x:r.x,y:r.y,t:Date.now(),ttl:5e3,color:"#c0c0c0",size:22}]):q==="frost_nova"?v(Z=>[...Z,{kind:"frost_nova",x:r.x,y:r.y,t:Date.now(),ttl:1e3,color:"#74c0fc",size:28}]):q==="cleave"?v(Z=>[...Z,{kind:"cleave",x:r.x,y:r.y,t:Date.now(),ttl:600,color:"#fbbf24",size:20}]):q==="summon_skeletons"&&v(Z=>[...Z,{kind:"summon_skeletons",x:r.x,y:r.y,t:Date.now(),ttl:2e3,color:"#9ca3af",size:15}])}}))},[n.log,i,r]);const k=(B,Y,o,q)=>H(B,Y)<o+q,D=M.useRef({idleAnimation:0,whirlwindRotation:0,lastUpdate:performance.now(),calculatedPlayerPos:null,calculatedEnemyPositions:null,calculatedProjectiles:null,calculatedEffects:null,calculatedDying:null,calculatedCamera:null});M.useEffect(()=>{let B=0,Y=performance.now();function o(q){const Z=Math.min(40,q-Y);if(Y=q,D.current.idleAnimation=q/1e3,P.active){const ee=q-P.startTime;D.current.whirlwindRotation=ee*.01}D.current.lastUpdate=q;let ae=r,fe=i,he=d,oe=x,xe=j,ge=u;const be=P.active?3.5:2.2;if(n.enemies.length>0){let ee=null,$e=null,me=9999;if(n.enemies.forEach(He=>{const je=i[He.id];if(!je||He.hp<=0)return;const Ne=H(r,je);Ne<me&&(me=Ne,ee=He,$e=je)}),ee&&$e){const He=n.player.skillBar.slots.filter(qe=>qe&&qe.isEquipped);let je=!1,Ne=80;He.forEach(qe=>{if(qe&&qe.scaling&&["fireball","lightning_bolt","ice_shard","poison_arrow"].includes(qe.id)){je=!0;const qt=xi(qe);Ne=Math.max(Ne,qt*.7)}});const Fe=$e.x-r.x,Ue=$e.y-r.y,Ye=me;let Ie={...r},Nt=!1;if(je){const qe=Ne*.8,Rt=Ne*1.15,qt=80,Hn=n.enemies.filter(N=>{const V=i[N.id];return!V||N.hp<=0?!1:H(r,V)<qt}).map(N=>({enemy:N,pos:i[N.id],distance:H(r,i[N.id])}));let ft=0,C=0;if(Hn.forEach(({pos:N,distance:V})=>{const Q=1/Math.max(V,1),I=N.x-r.x,z=N.y-r.y;ft+=I*Q,C+=z*Q}),Hn.length>1){const N=Math.sqrt(ft*ft+C*C);if(N>0){const V=-ft/N,Q=-C/N,I=be*1;let z={x:r.x+V*I,y:r.y+Q*I};if(!$(z,18)){const T=[{x:Q,y:-V},{x:-Q,y:V},{x:V*.7+Q*.7,y:Q*.7-V*.7},{x:V*.7-Q*.7,y:Q*.7+V*.7}];for(const te of T){const W={x:r.x+te.x*I,y:r.y+te.y*I};if($(W,18)){z=W;break}}if(!$(z,18)){const te=Ct/2,W=Pt/2,ne=te-r.x,ie=W-r.y,ue=Math.sqrt(ne*ne+ie*ie);ue>0&&(z={x:r.x+ne/ue*I,y:r.y+ie/ue*I})}}Ie=z,Nt=!0}}else if(Ye<qe){const N=Math.min(qe-Ye+20,be*1),V=Fe/Math.max(Ye,1),Q=Ue/Math.max(Ye,1);Ie={x:r.x-V*N,y:r.y-Q*N},Nt=!0}else if(Ye>Rt){const N=Math.min(Ye-Ne,be),V=Fe/Math.max(Ye,1),Q=Ue/Math.max(Ye,1);Ie={x:r.x+V*N,y:r.y+Q*N},Nt=!0}}else if(Ye>60){const qe=Math.min(Ye-50,be),Rt=Fe/Math.max(Ye,1),qt=Ue/Math.max(Ye,1);Ie={x:r.x+Rt*qe,y:r.y+qt*qe},Nt=!0}if(Nt){let qe=!0,Rt=!1;je&&(Rt=n.enemies.filter(C=>{const N=i[C.id];return N&&C.hp>0&&H(r,N)<60}).length>1);const qt=Rt?8:18,Hn=Rt?0:2;n.enemies.forEach(ft=>{const C=i[ft.id];if(C&&ft.hp>0){let N=12;ft.type==="melee"?N=12+ft.level*.8:ft.type==="ranged"?N=10+ft.level*.6:N=14+ft.level*1,k(Ie,C,qt,N+Hn)&&(qe=!1)}}),(qe&&$(Ie,18)||Rt&&$(Ie,18))&&(ae=Ie)}const Qt=Math.atan2(Ue,Fe);b(Qt)}}else ae={x:r.x+Math.sin(q/2e3)*.3,y:r.y+Math.cos(q/3e3)*.2};const we=le(ae.x,ae.y);ge={x:u.x+(we.x-u.x)*.1,y:u.y+(we.y-u.y)*.1,zoom:u.zoom};const Me={...i},et={...j};n.enemies.forEach((ee,$e)=>{const me=Me[ee.id]||{x:Ss-120,y:bs/2};if(ee.hp<=0){et[ee.id]||(et[ee.id]=Date.now());return}const He=ae.x-me.x,je=ae.y-me.y,Ne=Math.hypot(He,je)||1,Fe={x:me.x+He/Ne*.3,y:me.y+je/Ne*.3};let Ue=12;ee.type==="melee"?Ue=12+ee.level*.8:ee.type==="ranged"?Ue=10+ee.level*.6:Ue=14+ee.level*1;let Ye=!0;n.enemies.forEach(Ie=>{if(Ie.id!==ee.id){const Nt=Me[Ie.id];if(Nt){let Qt=12;Ie.type==="melee"?Qt=12+Ie.level*.8:Ie.type==="ranged"?Qt=10+Ie.level*.6:Qt=14+Ie.level*1,k(Fe,Nt,Ue+1,Qt+1)&&(Ye=!1)}}}),Ye&&(Me[ee.id]=Fe)}),fe=Me,xe=et;const De=d.map(ee=>{let $e=ee.vx,me=ee.vy;if(ee.type==="fireball"&&ee.targetId){const je=fe[ee.targetId];if(je){const Ne=je.x-ee.x,Fe=je.y-ee.y,Ue=Math.hypot(Ne,Fe);if(Ue>0){const Ie=Ne/Ue*Math.hypot(ee.vx,ee.vy),Nt=Fe/Ue*Math.hypot(ee.vx,ee.vy);$e=ee.vx+(Ie-ee.vx)*.15,me=ee.vy+(Nt-ee.vy)*.15}}}return{...ee,x:ee.x+$e,y:ee.y+me,vx:$e,vy:me,life:ee.life-Z,rotation:ee.rotation!==void 0?ee.rotation+.3:void 0}}),dt=[...x];he=De.filter(ee=>{if(ee.life<=0)return!1;let $e=!1;return n.enemies.forEach(me=>{const He=fe[me.id];if(He&&!$e){let je=12;if(me.type==="melee"?je=12+me.level*.8:me.type==="ranged"?je=10+me.level*.6:je=14+me.level*1,k({x:ee.x,y:ee.y},He,ee.radius,je)){if(ee.type==="fireball"){dt.push({kind:"fireball_explosion",x:ee.x,y:ee.y,t:Date.now(),ttl:800,color:ee.color,size:ee.size*3});for(let Ne=0;Ne<8;Ne++){const Fe=Ne/8*Math.PI*2,Ue=20+Math.random()*30;dt.push({kind:"fire_particle",x:ee.x+Math.cos(Fe)*Ue,y:ee.y+Math.sin(Fe)*Ue,t:Date.now(),ttl:400+Math.random()*200,color:"#ff6600",size:3+Math.random()*3})}}else dt.push({kind:"impact",x:ee.x,y:ee.y,t:Date.now(),ttl:300,color:ee.color,size:ee.size*2});$e=!0}}}),!$e}).slice(-200),oe=dt.filter(ee=>Date.now()-ee.t<ee.ttl),D.current.calculatedPlayerPos=ae,D.current.calculatedEnemyPositions=fe,D.current.calculatedProjectiles=he,D.current.calculatedEffects=oe,D.current.calculatedDying=xe,D.current.calculatedCamera=ge,B=requestAnimationFrame(o)}return B=requestAnimationFrame(o),()=>cancelAnimationFrame(B)},[n.enemies,n.player,n.log,P,r,i,u,d,x,j]),M.useEffect(()=>{const Y=setInterval(()=>{const o=D.current;o.calculatedPlayerPos&&(a(o.calculatedPlayerPos),l.updatePlayerPosition(o.calculatedPlayerPos)),o.calculatedEnemyPositions&&c(o.calculatedEnemyPositions),o.calculatedProjectiles&&f(o.calculatedProjectiles),o.calculatedEffects&&v(o.calculatedEffects),o.calculatedDying&&h(o.calculatedDying),o.calculatedCamera&&p(o.calculatedCamera)},16);return()=>clearInterval(Y)},[]);const ye=M.useCallback(()=>{const B=performance.now();if(B-_.current<se)return;_.current=B,R=0;const Y=t.current;if(!Y)return;const o=Y.getContext("2d");if(!o)return;o.clearRect(0,0,Y.width,Y.height),o.fillStyle="#071024",o.fillRect(0,0,Y.width,Y.height),o.strokeStyle="#334155",o.lineWidth=2,o.strokeRect(10,10,Y.width-20,Y.height-20),n.enemies.forEach((C,N)=>{const V=i[C.id]||{x:200+N*40,y:100+(N%5-2)*50},Q=L(V.x,V.y),I=j[C.id],z=C.hp<=0&&I?Math.max(0,1-(Date.now()-I)/1500):1;o.save(),o.globalAlpha=z;let T=12;C.type==="melee"?(o.fillStyle="#dc2626",T=12+C.level*.8):C.type==="ranged"?(o.fillStyle="#f97316",T=10+C.level*.6):(o.fillStyle="#a78bfa",T=14+C.level*1),o.beginPath(),o.arc(Q.x,Q.y,T*u.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#ffffff",C.type==="melee"?(o.beginPath(),o.moveTo(Q.x-8*u.zoom,Q.y-18*u.zoom),o.lineTo(Q.x-2*u.zoom,Q.y-26*u.zoom),o.lineTo(Q.x+4*u.zoom,Q.y-18*u.zoom),o.fill()):C.type==="ranged"?(o.beginPath(),o.arc(Q.x,Q.y-6*u.zoom,6*u.zoom,Math.PI*.2,Math.PI*.8),o.lineWidth=2,o.strokeStyle="#ffffff",o.stroke()):(o.beginPath(),o.arc(Q.x,Q.y,(T+6)*u.zoom,0,Math.PI*2),o.strokeStyle="rgba(255,255,255,0.06)",o.lineWidth=2,o.stroke()),Xt(o,Q.x,Q.y-(T+15)*u.zoom,40*u.zoom,6*u.zoom,C.hp,C.maxHp,z),xt(o,`Lv.${C.level}`,Q.x,Q.y-(T+25)*u.zoom,z),o.restore()});const q=L(r.x,r.y);32*u.zoom;let Z=0;n.enemies.length===0&&(Z=Math.sin(m*2)*2*u.zoom),o.save(),P.active&&(o.translate(q.x,q.y+Z),o.rotate(P.rotation),o.translate(-q.x,-q.y-Z),o.shadowColor="#ffffff",o.shadowBlur=8*u.zoom);const ae=Date.now()*.003,fe=25*u.zoom,he=Math.sin(ae*1.5)*.2+.8,oe=ae*.5;for(let C=0;C<3;C++){const N=fe*(.6+C*.2)*he,V=(.15-C*.03)*he,Q=o.createRadialGradient(q.x,q.y+10*u.zoom,0,q.x,q.y+10*u.zoom,N);P.active?(Q.addColorStop(0,`rgba(255, 255, 255, ${V*.8})`),Q.addColorStop(.7,`rgba(200, 200, 255, ${V*.4})`),Q.addColorStop(1,"rgba(255, 255, 255, 0)")):(Q.addColorStop(0,`rgba(100, 150, 255, ${V})`),Q.addColorStop(.7,`rgba(50, 100, 200, ${V*.6})`),Q.addColorStop(1,"rgba(100, 150, 255, 0)")),o.fillStyle=Q,o.beginPath(),o.arc(q.x,q.y+10*u.zoom,N,0,Math.PI*2),o.fill()}for(let C=0;C<8;C++){const N=oe+C*Math.PI*2/8,V=fe*.8,Q=q.x+Math.cos(N)*V,I=q.y+10*u.zoom+Math.sin(N)*V,z=2*u.zoom*he;o.fillStyle=P.active?`rgba(255, 255, 255, ${.6*he})`:`rgba(150, 200, 255, ${.8*he})`,o.beginPath(),o.arc(Q,I,z,0,Math.PI*2),o.fill()}const xe=Math.sin(ae*2)*.1,ge=Math.sin(ae*.5)*.05,be=P.active?"#ffffff":"#4a5568",we=P.active?"#ffffff":"#f7fafc",Me=P.active?"#ffffff":"#2d3748",et=6*u.zoom,De=12*u.zoom,dt=16*u.zoom,It=12*u.zoom,ee=14*u.zoom,$e=3*u.zoom,me=q.x,He=q.y+Z,je=He-dt/2-et-2*u.zoom,Ne=He-dt/2,Fe=He+dt/2;o.fillStyle=Me,o.strokeStyle=Me,o.lineWidth=$e,o.lineCap="round";const Ue=me-4*u.zoom,Ye=xe*3*u.zoom;o.beginPath(),o.moveTo(Ue,Fe),o.lineTo(Ue+Ye,Fe+ee),o.stroke();const Ie=me+4*u.zoom,Nt=-xe*3*u.zoom;o.beginPath(),o.moveTo(Ie,Fe),o.lineTo(Ie+Nt,Fe+ee),o.stroke(),o.fillStyle=be;const Qt=1+ge;o.fillRect(me-De*Qt/2,Ne,De*Qt,dt),o.strokeStyle=Me,o.lineWidth=$e;const qe=Ne+4*u.zoom,Rt=xe*2*u.zoom;o.beginPath(),o.moveTo(me-De/2,qe),o.lineTo(me-De/2-It+Rt,qe+6*u.zoom),o.stroke();const qt=Ne+4*u.zoom,Hn=-xe*2*u.zoom;if(o.beginPath(),o.moveTo(me+De/2,qt),o.lineTo(me+De/2+It+Hn,qt+6*u.zoom),o.stroke(),o.fillStyle=we,o.beginPath(),o.arc(me,je+ge*u.zoom,et,0,Math.PI*2),o.fill(),P.active||(o.fillStyle="#2d3748",o.beginPath(),o.arc(me-2*u.zoom,je-1*u.zoom,1*u.zoom,0,Math.PI*2),o.fill(),o.beginPath(),o.arc(me+2*u.zoom,je-1*u.zoom,1*u.zoom,0,Math.PI*2),o.fill()),o.restore(),n.enemies.length>0){o.save();const C=40*u.zoom;30*u.zoom;const N=.3+Math.sin(ae*2)*.1,V=q.x,Q=q.y+Z,I=V+Math.cos(S)*C,z=Q+Math.sin(S)*C,T=S-Math.PI/6,te=S+Math.PI/6,W=15*u.zoom,ne=V+Math.cos(T)*W,ie=Q+Math.sin(T)*W,ue=V+Math.cos(te)*W,Ee=Q+Math.sin(te)*W,de=o.createLinearGradient(V,Q,I,z);P.active?(de.addColorStop(0,`rgba(255, 255, 255, ${N*.8})`),de.addColorStop(.5,`rgba(200, 200, 255, ${N*.6})`),de.addColorStop(1,`rgba(255, 255, 255, ${N*.3})`)):(de.addColorStop(0,`rgba(100, 150, 255, ${N*.6})`),de.addColorStop(.5,`rgba(150, 200, 255, ${N*.8})`),de.addColorStop(1,`rgba(200, 220, 255, ${N*.4})`)),o.fillStyle=de,o.beginPath(),o.moveTo(ne,ie),o.lineTo(I,z),o.lineTo(ue,Ee),o.closePath(),o.fill(),o.strokeStyle=P.active?`rgba(255, 255, 255, ${N*.5})`:`rgba(150, 200, 255, ${N*.7})`,o.lineWidth=1*u.zoom,o.stroke();for(let Ge=0;Ge<3;Ge++){const tt=(Ge+1)/4,En=ne+(I-ne)*tt,jl=ie+(z-ie)*tt,Nl=ue+(I-ue)*tt,Va=Ee+(z-Ee)*tt,yo=(1+Math.sin(ae*3+Ge))*u.zoom;o.fillStyle=P.active?`rgba(255, 255, 255, ${N*.8})`:`rgba(200, 220, 255, ${N})`,o.beginPath(),o.arc(En,jl,yo,0,Math.PI*2),o.fill(),o.beginPath(),o.arc(Nl,Va,yo,0,Math.PI*2),o.fill()}o.restore()}if(Xt(o,q.x,q.y-35*u.zoom+Z,50*u.zoom,8*u.zoom,n.player.hp,n.player.maxHp,1),xt(o,`Lv.${n.player.level}`,q.x,q.y-50*u.zoom+Z,1),G){o.save();const C=16,N=C*u.zoom;o.globalAlpha=.4,o.strokeStyle="#ff4444",o.lineWidth=2*u.zoom,o.setLineDash([4*u.zoom,2*u.zoom]),o.beginPath(),o.arc(q.x,q.y+Z,N,0,Math.PI*2),o.stroke(),o.globalAlpha=.8,o.fillStyle="#ff4444",o.font=`${10*u.zoom}px Arial`,o.textAlign="center",o.fillText(`Player: ${C}px`,q.x,q.y+Z-N-8*u.zoom);const V=n.player.skillBar.slots.filter(T=>T!==null);let Q=0;V.forEach((T,te)=>{if(T&&T.scaling){let W=0,ne="#00ff00",ie=T.name||T.id;if(T.scaling.baseArea&&T.scaling.areaPerLevel?(W=(T.scaling.baseArea+(T.level-1)*T.scaling.areaPerLevel)*30,ne="#00ff00"):T.scaling.baseRange&&T.scaling.rangePerLevel?(W=xi(T),ne="#ff8844",T.id==="fireball"&&console.log("Fireball Debug:",{skillId:T.id,skillName:T.name,skillLevel:T.level,baseRange:T.scaling.baseRange,rangePerLevel:T.scaling.rangePerLevel,calculatedRange:W,cameraZoom:u.zoom,scaledRange:W*u.zoom})):(T.id==="lightning_bolt"||T.id==="ice_shard")&&(W=200,ne="#ff8844"),W>0){const ue=W*u.zoom;o.globalAlpha=.3,o.strokeStyle=ne,o.lineWidth=3*u.zoom,o.setLineDash([8*u.zoom,4*u.zoom]),o.beginPath(),o.arc(q.x,q.y+Z,ue,0,Math.PI*2),o.stroke(),o.globalAlpha=.8,o.fillStyle=ne,o.font=`${11*u.zoom}px Arial`,o.textAlign="center";const Ee=q.y+Z+ue+(15+Q*15)*u.zoom;T.id==="fireball"?o.fillText(`${ie}: ${Math.round(W)}px (Lv.${T.level}) [base:${T.scaling.baseRange}, +${T.scaling.rangePerLevel}/lv, zoom:${u.zoom.toFixed(2)}]`,q.x,Ee):o.fillText(`${ie}: ${Math.round(W)}px (Lv.${T.level})`,q.x,Ee),Q++}}}),o.globalAlpha=.9,o.fillStyle="#ffffff",o.font=`${12*u.zoom}px Arial`,o.textAlign="left",o.fillText(`Debug AOE (F1) | Skills: ${V.length}`,10*u.zoom,30*u.zoom);const I=50*u.zoom,z=18*u.zoom;o.font=`${10*u.zoom}px Arial`,o.fillStyle="#ff4444",o.fillText("● Player Collision (16px)",10*u.zoom,I),o.fillStyle="#00ff00",o.fillText("● AOE Skills",10*u.zoom,I+z),o.fillStyle="#4488ff",o.fillText("● Ranged Skills",10*u.zoom,I+z*2),o.fillStyle="#ff8844",o.fillText("● Projectile Skills",10*u.zoom,I+z*3),o.setLineDash([]),o.restore()}(D.current.calculatedProjectiles||d).forEach(C=>{const N=L(C.x,C.y);if(o.save(),C.type==="fireball"){o.translate(N.x,N.y),C.rotation!==void 0&&o.rotate(C.rotation*Math.PI/180);const V=o.createRadialGradient(0,0,0,0,0,15*u.zoom);V.addColorStop(0,"rgba(255, 100, 0, 0.8)"),V.addColorStop(.5,"rgba(255, 50, 0, 0.4)"),V.addColorStop(1,"rgba(255, 0, 0, 0)"),o.fillStyle=V,o.beginPath(),o.arc(0,0,15*u.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#FFD700",o.beginPath(),o.arc(0,0,8*u.zoom,0,Math.PI*2),o.fill(),o.fillStyle="#FFF",o.beginPath(),o.arc(0,0,4*u.zoom,0,Math.PI*2),o.fill()}else C.glow&&(o.shadowColor=C.color,o.shadowBlur=10*u.zoom),o.fillStyle=C.color,o.beginPath(),o.arc(N.x,N.y,C.radius*u.zoom,0,Math.PI*2),o.fill();o.restore()}),x.forEach(C=>{const N=L(C.x,C.y),V=Date.now()-C.t,Q=Math.min(1,V/C.ttl);if(C.kind==="damage"||C.kind==="critical_damage"||C.kind==="player_damage"||C.kind==="dodge"||C.kind==="miss"||C.kind==="block"){if(o.save(),o.globalAlpha=1-Q,o.fillStyle=C.color,C.kind==="dodge"||C.kind==="miss"||C.kind==="block")o.font=`bold ${(C.size||16)*u.zoom}px Arial`,o.strokeStyle="#000",o.lineWidth=2*u.zoom;else if(C.kind==="critical_damage"){o.font=`bold ${(C.size||20)*u.zoom}px Arial`,o.strokeStyle="#000",o.lineWidth=3*u.zoom;const z=1+Math.sin(V*.01)*.2;o.globalAlpha=(1-Q)*z}else o.font=`${(C.size||16)*u.zoom}px bold sans-serif`;o.textAlign="center";const I=N.y-Q*20*u.zoom;(C.kind==="dodge"||C.kind==="miss"||C.kind==="block"||C.kind==="critical_damage")&&o.strokeText(C.text||"",N.x,I),o.fillText(C.text||"",N.x,I),o.restore()}else if(C.kind==="impact"){o.save(),o.globalAlpha=(1-Q)*.8,o.fillStyle=C.color;const I=(C.size||8)*Q*2;o.beginPath(),o.arc(N.x,N.y,I,0,Math.PI*2),o.fill(),o.globalAlpha=(1-Q)*.4,o.fillStyle="#ffffff",o.beginPath(),o.arc(N.x,N.y,I*.5,0,Math.PI*2),o.fill(),o.restore()}else if(C.kind==="fireball_explosion"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.9;const z=(C.size||24)*I*1.5;o.fillStyle=C.color,o.beginPath(),o.arc(N.x,N.y,z,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.7,o.fillStyle="#ff8800",o.beginPath(),o.arc(N.x,N.y,z*.7,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.5,o.fillStyle="#ffff00",o.beginPath(),o.arc(N.x,N.y,z*.4,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.3,o.fillStyle="#ffffff",o.beginPath(),o.arc(N.x,N.y,z*.2,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.8,o.fillStyle="#ff6600";for(let T=0;T<12;T++){const te=T/12*Math.PI*2+V*.01,W=z*(1.2+Math.sin(V*.005+T)*.3),ne=N.x+Math.cos(te)*W,ie=N.y+Math.sin(te)*W,ue=(4+Math.sin(V*.008+T)*2)*u.zoom*(1-I);o.beginPath(),o.arc(ne,ie,ue,0,Math.PI*2),o.fill()}o.restore()}else if(C.kind==="fire_particle"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||3)*u.zoom*(1-I*.5),T=1+Math.sin(V*.02)*.3;o.shadowColor=C.color,o.shadowBlur=8*u.zoom,o.fillStyle=C.color,o.beginPath(),o.arc(N.x,N.y,z*T,0,Math.PI*2),o.fill(),o.shadowBlur=0,o.globalAlpha=(1-I)*.6,o.fillStyle="#ffaa00",o.beginPath(),o.arc(N.x,N.y,z*.6*T,0,Math.PI*2),o.fill(),o.restore()}else if(C.kind==="slash"){o.save(),o.globalAlpha=(1-Q)*.9;const I=C.angle||0,z=(C.size||30)*u.zoom,T=4*u.zoom*(1-Q*.5),te=Math.sin(Q*Math.PI),W=z*te,ne=N.x-Math.cos(I)*W/2,ie=N.y-Math.sin(I)*W/2,ue=N.x+Math.cos(I)*W/2,Ee=N.y+Math.sin(I)*W/2;o.strokeStyle=C.color,o.lineWidth=T,o.lineCap="round",o.beginPath(),o.moveTo(ne,ie),o.lineTo(ue,Ee),o.stroke(),o.globalAlpha=(1-Q)*.6,o.strokeStyle="#ffffff",o.lineWidth=T*.4,o.beginPath(),o.moveTo(ne,ie),o.lineTo(ue,Ee),o.stroke(),Q<.7&&(o.globalAlpha=(1-Q)*.8,o.fillStyle=C.color,o.beginPath(),o.arc(ne,ie,2*u.zoom,0,Math.PI*2),o.fill(),o.beginPath(),o.arc(ue,Ee,2*u.zoom,0,Math.PI*2),o.fill()),o.restore()}else if(C.kind==="explosion"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||15)*I*1.5;o.fillStyle=C.color,o.beginPath(),o.arc(N.x,N.y,z,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.6,o.fillStyle="#ffff88",o.beginPath(),o.arc(N.x,N.y,z*.6,0,Math.PI*2),o.fill(),o.restore()}else if(C.kind==="lightning"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.9,o.strokeStyle=C.color,o.lineWidth=3*u.zoom,o.lineCap="round";const z=6,T=(C.size||12)*u.zoom;o.beginPath(),o.moveTo(N.x,N.y-T);for(let te=1;te<=z;te++){const W=N.y-T+te/z*T*2,ne=N.x+(Math.random()-.5)*20*u.zoom;o.lineTo(ne,W)}o.stroke(),o.globalAlpha=(1-I)*.7,o.strokeStyle="#ffffff",o.lineWidth=1*u.zoom,o.stroke(),o.restore()}else if(C.kind==="power_strike"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||16)*I*2;o.strokeStyle=C.color,o.lineWidth=4*u.zoom,o.beginPath(),o.arc(N.x,N.y,z,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-I)*.5,o.fillStyle="#ffff00",o.beginPath(),o.arc(N.x,N.y,z*.3,0,Math.PI*2),o.fill(),o.restore()}else if(C.kind==="critical_burst"){o.save();const I=Math.min(1,V/C.ttl),T=(C.size||25)*u.zoom*I,te=1+Math.sin(V*.02)*.3;o.globalAlpha=(1-I)*.8*te,o.strokeStyle=C.color,o.lineWidth=6*u.zoom,o.beginPath(),o.arc(N.x,N.y,T,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-I)*.6,o.fillStyle="#ffffff",o.beginPath(),o.arc(N.x,N.y,T*.4,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.7,o.strokeStyle=C.color,o.lineWidth=3*u.zoom;for(let W=0;W<8;W++){const ne=W*Math.PI/4+V*.005,ie=T*1.5,ue=N.x+Math.cos(ne)*T*.3,Ee=N.y+Math.sin(ne)*T*.3,de=N.x+Math.cos(ne)*ie,Ge=N.y+Math.sin(ne)*ie;o.beginPath(),o.moveTo(ue,Ee),o.lineTo(de,Ge),o.stroke()}o.restore()}else if(C.kind==="dodge_burst"){o.save();const I=Math.min(1,V/C.ttl),T=(C.size||20)*u.zoom*I;o.globalAlpha=(1-I)*.7,o.strokeStyle=C.color,o.lineWidth=3*u.zoom,o.setLineDash([8*u.zoom,4*u.zoom]),o.lineDashOffset=I*20,o.beginPath(),o.arc(N.x,N.y,T,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-I)*.5,o.fillStyle="#ffffff",o.beginPath(),o.arc(N.x,N.y,T*.3,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.6,o.strokeStyle=C.color,o.lineWidth=2*u.zoom,o.setLineDash([]);for(let te=0;te<6;te++){const W=te*Math.PI/3+V*.01,ne=T*.5,ie=T*1.2,ue=N.x+Math.cos(W)*ne,Ee=N.y+Math.sin(W)*ne,de=N.x+Math.cos(W)*ie,Ge=N.y+Math.sin(W)*ie;o.beginPath(),o.moveTo(ue,Ee),o.lineTo(de,Ge),o.stroke()}o.restore()}else if(C.kind==="pickup")o.save(),o.globalAlpha=1-Q,o.fillStyle=C.color,o.font=`${14*u.zoom}px sans-serif`,o.textAlign="center",o.fillText(C.text||"",N.x,N.y),o.restore();else if(C.kind==="impact")o.save(),o.globalAlpha=1-Q,o.strokeStyle=C.color,o.lineWidth=2,o.beginPath(),o.arc(C.x,C.y,Q*20,0,Math.PI*2),o.stroke(),o.restore();else if(C.kind==="whirlwind"){const z=L(r.x,r.y),te=Date.now()-C.t,ne=te*.008;o.save();const ue=Math.max(.7,1-Q)+Math.sin(te*.01)*.2;for(let de=0;de<4;de++){const Ge=(de+1)/4,tt=(30+de*12)*u.zoom,En=ne*(1+de*.3);o.globalAlpha=ue*(1-Ge*.2),o.strokeStyle=de===0?"#FFFFFF":"#F0F0F0",o.lineWidth=(4-de)*u.zoom,o.beginPath(),o.setLineDash([15*u.zoom,8*u.zoom]),o.lineDashOffset=En*30,o.arc(z.x,z.y,tt,0,Math.PI*2),o.stroke()}o.globalAlpha=ue*.9,o.fillStyle="#FFFFFF",o.beginPath(),o.arc(z.x,z.y,8*u.zoom,0,Math.PI*2),o.fill(),o.globalAlpha=ue*.8,o.strokeStyle="#FFFFFF",o.lineWidth=2*u.zoom;for(let de=0;de<6;de++){const Ge=ne*2+de*Math.PI/3,tt=25*u.zoom,En=z.x+Math.cos(Ge)*tt,jl=z.y+Math.sin(Ge)*tt,Nl=z.x+Math.cos(Ge+.5)*(tt+15*u.zoom),Va=z.y+Math.sin(Ge+.5)*(tt+15*u.zoom);o.beginPath(),o.moveTo(En,jl),o.lineTo(Nl,Va),o.stroke()}o.globalAlpha=ue*.7,o.fillStyle="#FFD54F";for(let de=0;de<8;de++){const Ge=ne*3+de*Math.PI/4,tt=(35+Math.sin(te*.005+de)*10)*u.zoom,En=z.x+Math.cos(Ge)*tt,jl=z.y+Math.sin(Ge)*tt,Nl=(2+Math.sin(te*.01+de)*1)*u.zoom;o.beginPath(),o.arc(En,jl,Nl,0,Math.PI*2),o.fill()}o.globalAlpha=.3+Math.sin(te*.008)*.1,o.strokeStyle="#ff6b6b",o.lineWidth=3*u.zoom,o.setLineDash([10*u.zoom,5*u.zoom]),o.lineDashOffset=te*.01;const Ee=n.player.skillBar.slots.find(de=>(de==null?void 0:de.name)==="Whirlwind");if(Ee){const tt=(Ee.scaling.baseArea+(Ee.level-1)*Ee.scaling.areaPerLevel)*30*u.zoom;o.beginPath(),o.arc(z.x,z.y,tt,0,Math.PI*2),o.stroke()}o.setLineDash([]),o.restore()}else if(C.kind==="heal"){const I=L(r.x,r.y);o.save(),o.globalAlpha=1-Q,o.fillStyle=C.color;for(let z=0;z<8;z++){const T=z/8*Math.PI*2+Q*Math.PI*2,te=30*u.zoom*(1-Q*.5),W=I.x+Math.cos(T)*te,ne=I.y+Math.sin(T)*te;o.beginPath(),o.arc(W,ne,3*u.zoom,0,Math.PI*2),o.fill()}o.restore()}else if(C.kind==="ice_shard"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||12)*u.zoom;o.fillStyle=C.color,o.beginPath();for(let T=0;T<6;T++){const te=T*Math.PI/3+V*.002,W=N.x+Math.cos(te)*z,ne=N.y+Math.sin(te)*z;T===0?o.moveTo(W,ne):o.lineTo(W,ne)}o.closePath(),o.fill(),o.globalAlpha=(1-I)*.6,o.fillStyle="#ffffff";for(let T=0;T<8;T++){const te=T*Math.PI/4+V*.005,W=z*1.5,ne=N.x+Math.cos(te)*W,ie=N.y+Math.sin(te)*W;o.beginPath(),o.arc(ne,ie,2*u.zoom,0,Math.PI*2),o.fill()}o.restore()}else if(C.kind==="ground_slam"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||25)*I*2;o.strokeStyle=C.color,o.lineWidth=6*u.zoom,o.beginPath(),o.arc(N.x,N.y,z,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-I)*.5,o.fillStyle="#8b7355",o.beginPath(),o.arc(N.x,N.y,z*.6,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.7,o.fillStyle=C.color;for(let T=0;T<6;T++){const te=T*Math.PI/3+V*.003,W=z*.8,ne=N.x+Math.cos(te)*W,ie=N.y+Math.sin(te)*W;o.fillRect(ne-2,ie-2,4*u.zoom,4*u.zoom)}o.restore()}else if(C.kind==="poison_arrow"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.7;const z=(C.size||20)*u.zoom;o.fillStyle=C.color,o.beginPath(),o.arc(N.x,N.y,z,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.5,o.fillStyle="#40c057";for(let T=0;T<12;T++){const te=T*Math.PI/6+V*.004,W=z*(.5+Math.sin(V*.01+T)*.3),ne=N.x+Math.cos(te)*W,ie=N.y+Math.sin(te)*W,ue=(2+Math.sin(V*.008+T)*1)*u.zoom;o.beginPath(),o.arc(ne,ie,ue,0,Math.PI*2),o.fill()}o.restore()}else if(C.kind==="chain_lightning"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.9,o.strokeStyle=C.color,o.lineWidth=4*u.zoom,o.lineCap="round";for(let z=0;z<3;z++){const T=z*Math.PI*2/3+V*.01,te=(C.size||16)*u.zoom;o.beginPath(),o.moveTo(N.x,N.y);for(let W=1;W<=5;W++){const ne=W/5,ie=N.x+Math.cos(T)*te*ne+(Math.random()-.5)*15*u.zoom,ue=N.y+Math.sin(T)*te*ne+(Math.random()-.5)*15*u.zoom;o.lineTo(ie,ue)}o.stroke()}o.globalAlpha=(1-I)*.8,o.fillStyle="#ffffff",o.beginPath(),o.arc(N.x,N.y,4*u.zoom,0,Math.PI*2),o.fill(),o.restore()}else if(C.kind==="meteor"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||35)*I*1.5;o.fillStyle=C.color,o.beginPath(),o.arc(N.x,N.y,z,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.6,o.fillStyle="#ff8800",o.beginPath(),o.arc(N.x,N.y,z*.7,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.4,o.fillStyle="#ffffff",o.beginPath(),o.arc(N.x,N.y,z*.3,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.7,o.fillStyle="#ff4400";for(let T=0;T<10;T++){const te=T*Math.PI/5+V*.005,W=z*(1.2+Math.sin(V*.01+T)*.3),ne=N.x+Math.cos(te)*W,ie=N.y+Math.sin(te)*W,ue=(3+Math.sin(V*.008+T)*2)*u.zoom;o.beginPath(),o.arc(ne,ie,ue,0,Math.PI*2),o.fill()}o.restore()}else if(C.kind==="blade_vortex"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||22)*u.zoom,T=V*.02;o.strokeStyle=C.color,o.lineWidth=3*u.zoom,o.lineCap="round";for(let te=0;te<4;te++){const W=T+te*Math.PI/2,ne=z,ie=N.x+Math.cos(W)*(z*.3),ue=N.y+Math.sin(W)*(z*.3),Ee=N.x+Math.cos(W)*ne,de=N.y+Math.sin(W)*ne;o.beginPath(),o.moveTo(ie,ue),o.lineTo(Ee,de),o.stroke()}o.globalAlpha=(1-I)*.6,o.fillStyle="#ffffff",o.beginPath(),o.arc(N.x,N.y,4*u.zoom,0,Math.PI*2),o.fill(),o.restore()}else if(C.kind==="frost_nova"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||28)*I*2;o.strokeStyle=C.color,o.lineWidth=5*u.zoom,o.setLineDash([8*u.zoom,4*u.zoom]),o.lineDashOffset=V*.01,o.beginPath(),o.arc(N.x,N.y,z,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-I)*.6,o.fillStyle="#a5f3fc",o.beginPath(),o.arc(N.x,N.y,z*.6,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.7,o.fillStyle=C.color;for(let T=0;T<8;T++){const te=T*Math.PI/4+V*.003,W=z*.8,ne=N.x+Math.cos(te)*W,ie=N.y+Math.sin(te)*W;o.beginPath(),o.moveTo(ne,ie-4*u.zoom),o.lineTo(ne+3*u.zoom,ie),o.lineTo(ne,ie+4*u.zoom),o.lineTo(ne-3*u.zoom,ie),o.closePath(),o.fill()}o.setLineDash([]),o.restore()}else if(C.kind==="cleave"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.9;const z=(C.size||20)*u.zoom,T=Math.PI;o.strokeStyle=C.color,o.lineWidth=6*u.zoom,o.lineCap="round",o.beginPath(),o.arc(N.x,N.y,z,-T/2,T/2),o.stroke(),o.globalAlpha=(1-I)*.7,o.lineWidth=3*u.zoom;for(let te=0;te<3;te++){const W=-T/2+te*T/2,ne=N.x+Math.cos(W)*(z*.5),ie=N.y+Math.sin(W)*(z*.5),ue=N.x+Math.cos(W)*z,Ee=N.y+Math.sin(W)*z;o.beginPath(),o.moveTo(ne,ie),o.lineTo(ue,Ee),o.stroke()}o.restore()}else if(C.kind==="summon_skeletons"){o.save();const I=Math.min(1,V/C.ttl);o.globalAlpha=(1-I)*.8;const z=(C.size||15)*u.zoom;o.strokeStyle=C.color,o.lineWidth=3*u.zoom,o.setLineDash([6*u.zoom,3*u.zoom]),o.lineDashOffset=V*.01,o.beginPath(),o.arc(N.x,N.y,z,0,Math.PI*2),o.stroke(),o.globalAlpha=(1-I)*.6,o.fillStyle="#6b7280",o.beginPath(),o.arc(N.x,N.y,z*.5,0,Math.PI*2),o.fill(),o.globalAlpha=(1-I)*.7,o.fillStyle="#f3f4f6";for(let T=0;T<6;T++){const te=T*Math.PI/3+V*.004,W=z*.7,ne=N.x+Math.cos(te)*W,ie=N.y+Math.sin(te)*W;o.fillRect(ne-1,ie-3,2*u.zoom,6*u.zoom),o.fillRect(ne-3,ie-1,6*u.zoom,2*u.zoom)}o.setLineDash([]),o.restore()}})},[n.enemies,i,r,d,x,j,u,m,P,L]);function Xt(B,Y,o,q,Z,ae,fe,he){const oe=Math.max(0,Math.min(1,ae/fe));B.fillStyle=`rgba(31,41,55,${he})`,B.fillRect(Y-q/2,o-Z/2,q,Z);const xe=B.createLinearGradient(Y-q/2,o,Y+q/2,o);xe.addColorStop(0,"#16a34a"),xe.addColorStop(1,"#dc2626"),B.fillStyle=xe,B.globalAlpha=he,B.fillRect(Y-q/2,o-Z/2,q*oe,Z),B.globalAlpha=1,B.strokeStyle=`rgba(0,0,0,${.6*he})`,B.lineWidth=1,B.strokeRect(Y-q/2,o-Z/2,q,Z)}function xt(B,Y,o,q,Z){B.fillStyle=`rgba(255,255,255,${Z})`,B.font="12px sans-serif",B.textAlign="center",B.fillText(Y,o,q)}return M.useEffect(()=>{let B;const Y=()=>{ye(),B=requestAnimationFrame(Y)};return B=requestAnimationFrame(Y),()=>cancelAnimationFrame(B)},[ye]),s.jsx("div",{className:"game-canvas-container",children:s.jsx("canvas",{ref:t,width:Ss,height:bs,className:"game-canvas",tabIndex:0,style:{outline:"none"},onClick:()=>{var B;return(B=t.current)==null?void 0:B.focus()}})})}),mh={health:"Maximum health points. Increased by Vitality (+3 per point) and Strength (+2 per point).",mana:"Maximum mana points. Increased by Intelligence (+1 per point).",damage:"Base damage per second. Increased by Strength (+1 per point) and equipment.",armor:"Reduces incoming damage. Increased by equipment and Resilience skill.",critChance:"Chance to deal critical damage. Increased by Dexterity (+0.5% per point), Luck (+0.5% per point), and Precision skill.",dodgeChance:"Chance to avoid incoming damage. Increased by Dexterity (+0.3% per point) and Agility skill.",blockChance:"Chance to block incoming damage. Increased by equipment.",lifeSteal:"Percentage of damage dealt returned as health. Increased by equipment.",attackSpeed:"Multiplier for attack frequency. Increased by equipment.",healthRegen:"Health points regenerated per second. Increased by Vitality (+0.1 per point) and equipment.",manaRegen:"Mana points regenerated per second. Increased by Intelligence (+0.2 per point) and equipment.",strength:"Increases damage (+1) and health (+2). Base 10, increased by equipment.",dexterity:"Increases critical chance (+0.5%) and dodge (+0.3%). Base 10, increased by equipment.",intelligence:"Increases mana (+1) and mana regeneration (+0.2). Base 10, increased by equipment.",vitality:"Increases health (+3) and health regeneration (+0.1). Base 10, increased by equipment.",luck:"Increases critical chance (+0.5%). Base 5, increased by equipment."};function ph(e,t){const n=e.skills||{},l=e.attributes||{},r=e.calculatedStats||{};let a=0,i=0,c=0,d=0;switch(t){case"health":a=120;const y=Math.max(0,(l.strength||10)-10)*2,w=Math.max(0,(l.vitality||10)-10)*3;i=y+w,c=(r.health||0)+(r.strength||0)*2+(r.vitality||0)*3,d=(n.endurance||0)*10;break;case"mana":a=50,i=Math.max(0,(l.intelligence||10)-10),c=(r.mana||0)+(r.intelligence||0),d=0;break;case"damage":a=2,i=Math.max(0,(l.strength||10)-10),c=(r.damage||0)+(r.strength||0),d=n.strength||0;break;case"armor":a=0,i=0,c=r.armor||0,d=n.resilience||0;break;case"critChance":a=0;const x=Math.max(0,(l.dexterity||10)-10)*.5,v=Math.max(0,(l.luck||5)-5)*.5;i=x+v,c=(r.critChance||0)*100+(r.dexterity||0)*.5+(r.luck||0)*.5,d=(n.precision||0)*1;break;case"dodgeChance":a=0,i=Math.max(0,(l.dexterity||10)-10)*.3,c=(r.dodgeChance||0)*100+(r.dexterity||0)*.3,d=(n.agility||0)*1;break;case"blockChance":a=0,i=0,c=(r.blockChance||0)*100,d=0;break;case"lifeSteal":a=0,i=0,c=(r.lifeSteal||0)*100,d=0;break;case"attackSpeed":a=1,i=0,c=r.attackSpeed||0,d=0;break;case"healthRegen":a=0,i=Math.max(0,(l.vitality||10)-10)*.1,c=(r.healthRegen||0)+(r.vitality||0)*.1,d=0;break;case"manaRegen":a=0,i=Math.max(0,(l.intelligence||10)-10)*.2,c=(r.manaRegen||0)+(r.intelligence||0)*.2,d=0;break;case"strength":a=10,i=Math.max(0,(l.strength||10)-10),c=r.strength||0,d=0;break;case"dexterity":a=10,i=Math.max(0,(l.dexterity||10)-10),c=r.dexterity||0,d=0;break;case"intelligence":a=10,i=Math.max(0,(l.intelligence||10)-10),c=r.intelligence||0,d=0;break;case"vitality":a=10,i=Math.max(0,(l.vitality||10)-10),c=r.vitality||0,d=0;break;case"luck":a=5,i=Math.max(0,(l.luck||5)-5),c=r.luck||0,d=0;break;default:a=0,i=0,c=0,d=0}const f=a+i+c+d;return{base:a,attributeBonus:i,equipmentBonus:c,skillTreeBonus:d,total:f}}function Il(e,t=""){return`${e.toFixed(2)}${t}`}function js(e){return e>0?"text-green-400":e<0?"text-red-400":"text-gray-300"}const hh=({statName:e,breakdown:t,description:n,position:l,visible:r})=>{if(!r)return null;const a={position:"fixed",left:Math.min(l.x-150,window.innerWidth-320),top:Math.max(l.y-10,10),zIndex:1e3,pointerEvents:"none"};return s.jsxs("div",{style:a,className:"bg-gray-900 border border-gray-600 rounded-lg p-3 shadow-xl text-xs max-w-xs",children:[s.jsxs("div",{className:"border-b border-gray-700 pb-2 mb-2",children:[s.jsx("h4",{className:"font-semibold text-white",children:e}),s.jsx("p",{className:"text-gray-400 text-xs mt-1",children:n})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-300",children:"Base:"}),s.jsx("span",{className:"text-white",children:Il(t.base)})]}),t.attributeBonus!==0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-purple-300",children:"Attributes:"}),s.jsxs("span",{className:js(t.attributeBonus),children:["+",Il(t.attributeBonus)]})]}),t.equipmentBonus!==0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-blue-300",children:"Equipment:"}),s.jsxs("span",{className:js(t.equipmentBonus),children:["+",Il(t.equipmentBonus)]})]}),t.skillTreeBonus!==0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-yellow-300",children:"Skill Tree:"}),s.jsxs("span",{className:js(t.skillTreeBonus),children:["+",Il(t.skillTreeBonus)]})]}),s.jsx("div",{className:"border-t border-gray-700 pt-1 mt-2",children:s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{className:"text-white",children:"Total:"}),s.jsx("span",{className:"text-green-400",children:Il(t.total)})]})})]})]})};function gh(e){return{Common:"text-gray-400",Uncommon:"text-green-400",Rare:"text-blue-400",Epic:"text-purple-400",Legendary:"text-yellow-400"}[e||"Common"]||"text-gray-400"}function yh(e){return{fire:"text-red-400",ice:"text-blue-300",lightning:"text-yellow-300",poison:"text-green-300",physical:"text-gray-300"}[e||"physical"]||"text-gray-300"}function xh(e){return{fire:"🔥",ice:"❄️",lightning:"⚡",poison:"☠️",physical:"⚔️"}[e||"physical"]||"⚔️"}function vh(e){return{Common:.05,Uncommon:.08,Rare:.12,Epic:.18,Legendary:.25}[e||"Common"]||.05}const Tc=Gn.memo(function(){var j,h,u,p,m,g,S,b,P,F,G,E,_,U,se;const{state:t,actions:n}=ut(),l=t.player,r=t.skills||{},[a,i]=M.useState({visible:!1,statName:"",statType:"",position:{x:0,y:0}}),c=M.useCallback((A,R,K)=>{const le=A.currentTarget.getBoundingClientRect();i({visible:!0,statName:R,statType:K,position:{x:le.left+le.width/2,y:le.top}})},[]),d=M.useCallback(()=>{i(A=>({...A,visible:!1}))},[]),f=M.useCallback(({label:A,value:R,color:K,statType:le,suffix:X=""})=>s.jsxs("div",{className:"flex justify-between cursor-help hover:bg-gray-700/30 px-1 py-0.5 rounded transition-colors",onMouseEnter:L=>c(L,A,le),onMouseLeave:d,children:[s.jsxs("span",{children:[A,":"]}),s.jsxs("span",{className:K,children:[typeof R=="number"?R.toFixed(2):R,X]})]}),[c,d]),y=M.useMemo(()=>{var L;const A=Math.pow(1.05,r.power||0),R=(l.attackSpeed||1)*(1+(r.quick||0)*.05),K=(l.projectileSpeed||1)*(1+(r.arcane||0)*.1),le=(l.baseDps+(((L=l.equipped)==null?void 0:L.power)||0))*A+(l.dps-l.baseDps),X=(le*R).toFixed(2);return{powerMultiplier:A,attackSpeed:R,projectileSpeed:K,totalDps:le,estimatedDps:X}},[l.attackSpeed,l.baseDps,l.dps,(j=l.equipped)==null?void 0:j.power,r]),w=M.useMemo(()=>{var R;let A=0;return l.equipment&&Object.values(l.equipment).forEach(K=>{var le,X;(le=K==null?void 0:K.baseStats)!=null&&le.damage&&(A+=K.baseStats.damage),(X=K==null?void 0:K.affixes)==null||X.forEach(L=>{L.stat==="damage"&&(A+=L.value)})}),(R=l.equipped)!=null&&R.power&&(A+=l.equipped.power),A},[l.equipment,(h=l.equipped)==null?void 0:h.power]);M.useMemo(()=>{const A=l.baseDps||0,R=(r.power||0)*5;return Math.floor((A+w+R)*y.powerMultiplier)},[l.baseDps,r,w,y.powerMultiplier]);const x=M.useMemo(()=>{var A;return{totalCritChance:((l.critChance||0)+vh((A=l.equipped)==null?void 0:A.rarity))*100,dodgeChance:(l.dodgeChance||0)*100,blockChance:(l.blockChance||0)*100,lifeSteal:(l.lifeSteal||0)*100,armor:l.armor||0,healthRegen:l.healthRegen||0,manaRegen:l.manaRegen||0}},[l.critChance,(u=l.equipped)==null?void 0:u.rarity,l.dodgeChance,l.blockChance,l.lifeSteal,l.armor,l.healthRegen,l.manaRegen]),v=M.useCallback(()=>{n.resetAll()},[n]);return s.jsxs("div",{className:"h-full flex flex-col bg-gray-900/95 text-white",children:[s.jsx("div",{className:"p-3 border-b border-gray-600",children:s.jsx("h2",{className:"text-lg font-bold text-center",children:"👤 Character Stats"})}),s.jsxs("div",{className:"flex-1 p-3 space-y-2 overflow-y-auto text-xs",children:[s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[s.jsx("h3",{className:"text-xs font-semibold text-blue-300 mb-1",children:"📊 Basic Info"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Level:"}),s.jsx("strong",{className:"text-blue-400",children:l.level})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"XP:"}),s.jsxs("span",{className:"text-green-400",children:[l.xp,"/",l.nextLevelXp]})]}),s.jsx(f,{label:"HP",value:`${l.hp.toFixed(2)}/${l.maxHp.toFixed(2)}`,color:"text-red-400",statType:"health"}),s.jsx(f,{label:"Mana",value:`${(l.mana||0).toFixed(2)}/${(l.maxMana||50).toFixed(2)}`,color:"text-blue-400",statType:"mana"})]})]}),s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[s.jsx("h3",{className:"text-xs font-semibold text-purple-300 mb-1",children:"💪 Attributes"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[s.jsx(f,{label:"Strength",value:(((p=l.attributes)==null?void 0:p.strength)||10)+(((m=l.calculatedStats)==null?void 0:m.strength)||0),color:"text-red-400",statType:"strength"}),s.jsx(f,{label:"Dexterity",value:(((g=l.attributes)==null?void 0:g.dexterity)||10)+(((S=l.calculatedStats)==null?void 0:S.dexterity)||0),color:"text-green-400",statType:"dexterity"}),s.jsx(f,{label:"Intelligence",value:(((b=l.attributes)==null?void 0:b.intelligence)||10)+(((P=l.calculatedStats)==null?void 0:P.intelligence)||0),color:"text-blue-400",statType:"intelligence"}),s.jsx(f,{label:"Vitality",value:(((F=l.attributes)==null?void 0:F.vitality)||10)+(((G=l.calculatedStats)==null?void 0:G.vitality)||0),color:"text-orange-400",statType:"vitality"}),s.jsx(f,{label:"Luck",value:(((E=l.attributes)==null?void 0:E.luck)||5)+(((_=l.calculatedStats)==null?void 0:_.luck)||0),color:"text-yellow-400",statType:"luck"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Attr Points:"}),s.jsx("span",{className:"text-purple-400",children:l.attributePoints||0})]})]})]}),s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[s.jsx("h3",{className:"text-xs font-semibold text-red-300 mb-1",children:"⚔️ Offensive"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[s.jsx(f,{label:"Base DPS",value:l.baseDps||0,color:"text-orange-400",statType:"damage"}),s.jsx(f,{label:"Total DPS",value:l.dps||0,color:"text-orange-300",statType:"damage"}),s.jsx(f,{label:"Attack Speed",value:y.attackSpeed,color:"text-yellow-300",statType:"attackSpeed",suffix:"x"}),s.jsx(f,{label:"Crit Chance",value:x.totalCritChance,color:"text-red-400",statType:"critChance",suffix:"%"}),s.jsx(f,{label:"Life Steal",value:x.lifeSteal,color:"text-pink-400",statType:"lifeSteal",suffix:"%"})]})]}),s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[s.jsx("h3",{className:"text-xs font-semibold text-blue-300 mb-1",children:"🛡️ Defensive"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[s.jsx(f,{label:"Armor",value:x.armor,color:"text-gray-300",statType:"armor"}),s.jsx(f,{label:"Dodge",value:x.dodgeChance,color:"text-green-400",statType:"dodgeChance",suffix:"%"}),s.jsx(f,{label:"Block",value:x.blockChance,color:"text-blue-400",statType:"blockChance",suffix:"%"}),s.jsx(f,{label:"HP Regen",value:x.healthRegen,color:"text-red-300",statType:"healthRegen",suffix:"/s"}),s.jsx(f,{label:"MP Regen",value:x.manaRegen,color:"text-blue-300",statType:"manaRegen",suffix:"/s"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Proj Speed:"}),s.jsxs("span",{className:"text-cyan-400",children:[y.projectileSpeed.toFixed(2),"x"]})]})]})]}),s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[s.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:"🌟 Skill Tree Bonuses"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"💪 Strength:"}),s.jsxs("span",{className:"text-red-400",children:["+",r.strength||0," damage"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"🎯 Precision:"}),s.jsxs("span",{className:"text-red-400",children:["+",r.precision||0,"% crit"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"⚡ Agility:"}),s.jsxs("span",{className:"text-green-400",children:["+",r.agility||0,"% dodge"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"🛡️ Resilience:"}),s.jsxs("span",{className:"text-gray-300",children:["+",r.resilience||0," armor"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"❤️ Endurance:"}),s.jsxs("span",{className:"text-red-300",children:["+",(r.endurance||0)*10," HP"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"⚡ Power:"}),s.jsxs("span",{className:"text-orange-400",children:["+",((r.power||0)*5).toFixed(0),"% dmg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"🏃 Quick:"}),s.jsxs("span",{className:"text-yellow-300",children:["+",((r.quick||0)*5).toFixed(0),"% speed"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"🔮 Arcane:"}),s.jsxs("span",{className:"text-cyan-400",children:["+",((r.arcane||0)*10).toFixed(0),"% proj"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"💰 Fortune:"}),s.jsxs("span",{className:"text-yellow-400",children:["+",((r.fortune||0)*10).toFixed(0),"% gold/loot"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"🪙 Gold Find:"}),s.jsxs("span",{className:"text-yellow-300",children:["+",((((U=l.calculatedStats)==null?void 0:U.goldFind)||0)*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"🔍 Magic Find:"}),s.jsxs("span",{className:"text-purple-400",children:["+",((((se=l.calculatedStats)==null?void 0:se.magicFind)||0)*100).toFixed(0),"%"]})]})]})]}),(()=>{var R,K,le;const A=((R=l.equipment)==null?void 0:R.weapon)||l.equipped;return A?s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[s.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:"🗡️ Equipped Weapon"}),s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Type:"}),s.jsx("span",{className:"text-gray-300",children:A.type||A.name||"None"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Rarity:"}),s.jsx("span",{className:gh(A.rarity),children:A.rarity||"Common"})]}),A.element&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Element:"}),s.jsxs("span",{className:yh(A.element),children:[xh(A.element)," ",A.element]})]}),(A.power||((K=A.baseStats)==null?void 0:K.damage))&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Power:"}),s.jsxs("span",{className:"text-orange-400",children:["+",A.power||((le=A.baseStats)==null?void 0:le.damage)||0]})]})]})]}):s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[s.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:"🗡️ Equipped Weapon"}),s.jsx("div",{className:"text-xs",children:s.jsx("span",{className:"text-gray-500",children:"No weapon equipped"})})]})})(),s.jsxs("div",{className:"bg-gray-800/50 p-2 rounded border border-gray-700",children:[s.jsx("h3",{className:"text-xs font-semibold text-yellow-300 mb-1",children:"💰 Resources"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"💰 Gold:"}),s.jsx("span",{className:"text-yellow-400",children:l.gold})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"🔮 Skill Points:"}),s.jsx("span",{className:"text-purple-400",children:l.skillPoints})]})]})]}),s.jsx("button",{onClick:v,className:"w-full bg-red-600 hover:bg-red-700 text-white py-1.5 px-3 rounded text-xs font-medium transition-colors",children:"🔄 Reset Character"})]}),a.visible&&s.jsx(hh,{statName:a.statName,breakdown:ph(l,a.statType),description:mh[a.statType],position:a.position,visible:a.visible})]})}),wh={Common:"#9ca3af",Magic:"#06b6d4",Rare:"#8b5cf6",Unique:"#fbbf24",Legendary:"#ff6b6b",Mythic:"#ff1493",Divine:"#ffd700"};function Ns(e){return e&&wh[e]||"#9ca3af"}const kh=M.memo(({slot:e,equippedItem:t,onUnequip:n})=>{const l=M.useCallback(a=>{t&&(a.preventDefault(),n(e.id))},[n,e.id,t]),r=a=>{var i,c,d;return a.power&&typeof a.power=="number"&&!isNaN(a.power)?`+${a.power.toFixed(0)}`:(i=a.baseStats)!=null&&i.damage&&typeof a.baseStats.damage=="number"&&!isNaN(a.baseStats.damage)?`+${a.baseStats.damage.toFixed(0)}`:(c=a.baseStats)!=null&&c.armor&&typeof a.baseStats.armor=="number"&&!isNaN(a.baseStats.armor)?`+${a.baseStats.armor.toFixed(0)}`:(d=a.baseStats)!=null&&d.health&&typeof a.baseStats.health=="number"&&!isNaN(a.baseStats.health)?`+${a.baseStats.health.toFixed(0)}`:"+0"};return s.jsxs("div",{className:"flex items-center justify-between py-3 px-4 hover:bg-gray-800/50 transition-colors cursor-pointer border-l-4",style:{borderLeftColor:t?Ns(t.rarity):"#4b5563"},onContextMenu:l,children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("span",{className:"text-lg",children:e.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-gray-400",children:e.name}),t?s.jsx("div",{className:"text-sm font-bold truncate",style:{color:Ns(t.rarity)},children:t.name}):s.jsx("div",{className:"text-sm text-gray-500",children:"Empty"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(t==null?void 0:t.sockets)&&t.sockets.maxSockets>0&&s.jsx("div",{className:"flex gap-1",children:Array.from({length:t.sockets.maxSockets},(a,i)=>s.jsx("div",{className:`w-2 h-2 rounded-full ${t.sockets.stones[i]?"bg-amber-400":"bg-gray-600"}`},i))}),t&&s.jsx("div",{className:"text-sm font-bold min-w-[3rem] text-right",style:{color:Ns(t.rarity)},children:r(t)})]})]})}),Sh=M.memo(function(){const{state:t,dispatch:n}=ut(),l=t.player,r=M.useMemo(()=>{const f={};return xs.forEach(y=>{if(l.equipment&&l.equipment[y.id])f[y.id]=l.equipment[y.id];else if(l.equipped&&y.id==="weapon"){const w=l.equipped.type;(w==="melee"||w==="ranged")&&(f[y.id]=l.equipped)}}),f},[l.equipment,l.equipped]),a=M.useCallback(f=>r[f]||null,[r]),i=M.useMemo(()=>{var y;let f=0;return l.equipment&&(f+=Object.keys(l.equipment).length),l.equipped&&!((y=l.equipment)!=null&&y.weapon)&&(f+=1),f},[l.equipment,l.equipped]),c=M.useCallback(f=>{n({type:"UNEQUIP",payload:f})},[n]),d=M.useCallback(f=>{const y=a(f.id);return s.jsx(kh,{slot:f,equippedItem:y,onUnequip:c},f.id)},[a,c]);return s.jsxs("div",{className:"h-full flex flex-col bg-gray-900/95 text-white",children:[s.jsx("div",{className:"p-4 border-b border-gray-600",children:s.jsx("h2",{className:"text-xl font-bold text-center",children:"⚔️ EQUIPMENT"})}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx("div",{className:"divide-y divide-gray-700",children:xs.map(d)})}),s.jsx("div",{className:"border-t border-gray-700 p-4 bg-gray-800/30",children:s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Equipped: "}),s.jsxs("span",{className:"text-white font-medium",children:[i,"/",xs.length]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Total Power: "}),s.jsxs("span",{className:"text-orange-400 font-bold",children:["+",Object.values(r).reduce((f,y)=>{if(!y)return f;let w=0;return y.power&&typeof y.power=="number"&&!isNaN(y.power)&&(w+=y.power),y.baseStats&&Object.values(y.baseStats).forEach(x=>{typeof x=="number"&&!isNaN(x)&&(w+=x)}),f+w},0).toFixed(0)]})]})]})})]})}),bh=[{key:"strength",name:"Strength",desc:cn.strength,max:10},{key:"endurance",name:"Endurance",desc:cn.endurance,max:10},{key:"agility",name:"Agility",desc:cn.agility,max:10},{key:"precision",name:"Precision",desc:cn.precision,max:10},{key:"quick",name:"Quick Reflexes",desc:cn.quick,max:10},{key:"vitality",name:"Vitality",desc:cn.vitality,max:10},{key:"fortune",name:"Fortune",desc:cn.fortune,max:10},{key:"resilience",name:"Resilience",desc:cn.resilience,max:10}];function jh(){const{state:e,dispatch:t}=ut(),n=e.skills||{};function l(r){e.player.skillPoints<=0||t({type:"UPGRADE_SKILL",payload:r})}return s.jsxs("div",{className:"panel p-4 h-full flex flex-col",children:[s.jsx("h2",{className:"text-lg font-bold mb-3",children:"Skill Tree"}),s.jsxs("div",{className:"mb-3 text-yellow-400 text-sm",children:["Skill Points: ",e.player.skillPoints]}),s.jsx("div",{className:"space-y-2 flex-1 scrollable-panel",children:bh.map(r=>{const a=n[r.key]??0,i=a>=r.max,c=e.player.skillPoints>0&&!i;return s.jsxs("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-bold text-white",children:[r.name,s.jsxs("span",{className:"ml-2 text-sm text-gray-400",children:["(",a,"/",r.max,")"]})]}),s.jsx("div",{className:"text-sm text-gray-300 mt-1",children:r.desc})]}),s.jsx("button",{className:`ml-3 px-3 py-1 rounded text-sm font-medium ${i?"bg-green-600 text-white cursor-default":c?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,onClick:()=>l(r.key),disabled:!c,children:i?"MAX":"+"})]}),a>0&&s.jsx("div",{className:"mt-2 bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${a/r.max*100}%`}})})]},r.key)})})]})}const Nh=M.memo(({item:e,position:t,onClose:n,equippedItem:l,isPersistent:r})=>{var c,d,f;const a=M.useMemo(()=>{if(!l)return null;const y=e.baseStats||{damage:e.power||0,armor:0,health:0},w=l.baseStats||{damage:l.power||0,armor:0,health:0};return{damage:(y.damage||0)-(w.damage||0),armor:(y.armor||0)-(w.armor||0),health:(y.health||0)-(w.health||0)}},[e,l]),i=({label:y,current:w,equipped:x,diff:v})=>w==null||typeof w!="number"||isNaN(w)?null:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{children:[y,":"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:w.toFixed(1)}),x!==void 0&&v!==void 0&&typeof v=="number"&&!isNaN(v)&&s.jsxs("span",{className:`text-xs ${v>0?"text-green-400":v<0?"text-red-400":"text-gray-400"}`,children:["(",v>0?"+":"",v.toFixed(1),")"]})]})]});return s.jsxs("div",{className:"fixed z-50 bg-gray-900 border-2 border-gray-600 rounded-lg p-4 shadow-2xl max-w-sm",style:{left:Math.min(t.x,window.innerWidth-400),top:Math.min(t.y,window.innerHeight-300)},onMouseLeave:r?void 0:n,onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"font-bold text-lg flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",style:{color:sf(e.rarity)},children:[s.jsx("span",{children:e.name||"Unnamed Item"}),ml(e.damageType)&&s.jsx("span",{children:ml(e.damageType)})]}),r&&s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded",title:"Close tooltip",children:"×"})]}),s.jsxs("div",{className:"text-gray-400 text-sm",children:[e.slot&&s.jsx("span",{className:"capitalize",children:e.slot}),e.category&&e.slot&&s.jsx("span",{children:" • "}),e.category&&s.jsx("span",{className:"capitalize",children:e.category})]})]}),s.jsx("div",{className:"mb-3 space-y-1",children:e.baseStats?s.jsxs(s.Fragment,{children:[e.baseStats.damage&&s.jsx(i,{label:"Damage",current:e.baseStats.damage,equipped:(c=l==null?void 0:l.baseStats)==null?void 0:c.damage,diff:a==null?void 0:a.damage}),e.baseStats.armor&&s.jsx(i,{label:"Armor",current:e.baseStats.armor,equipped:(d=l==null?void 0:l.baseStats)==null?void 0:d.armor,diff:a==null?void 0:a.armor}),e.baseStats.health&&s.jsx(i,{label:"Health",current:e.baseStats.health,equipped:(f=l==null?void 0:l.baseStats)==null?void 0:f.health,diff:a==null?void 0:a.health})]}):s.jsx(i,{label:"Power",current:e.power||0,equipped:l==null?void 0:l.power,diff:l?(e.power||0)-(l.power||0):void 0})}),e.damageType&&e.damageType!=="physical"&&s.jsx("div",{className:"mb-3 text-sm",children:s.jsxs("span",{style:{color:of(e.damageType)},children:[ml(e.damageType)," ",e.damageType," damage"]})}),e.affixes&&e.affixes.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-blue-300 font-medium text-sm mb-1",children:"Modifiers:"}),s.jsx("div",{className:"space-y-1",children:e.affixes.map((y,w)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-blue-200",children:[y.name,":"]}),s.jsxs("span",{className:"text-blue-100",children:["+",y.value]})]},w))})]}),e.extras&&e.extras.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-blue-300 font-medium text-sm mb-1",children:"Bonuses:"}),s.jsx("div",{className:"space-y-1",children:e.extras.map((y,w)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-blue-200",children:[y.key,":"]}),s.jsxs("span",{className:"text-blue-100",children:["+",y.val]})]},w))})]}),e.requirements&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-orange-300 font-medium text-sm mb-1",children:"Requirements:"}),s.jsx("div",{className:"space-y-1",children:Object.entries(e.requirements).map(([y,w])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-orange-200 capitalize",children:[y,":"]}),s.jsx("span",{className:"text-orange-100",children:w})]},y))})]}),s.jsx("div",{className:"pt-2 border-t border-gray-600",children:s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-yellow-400",children:"Value:"}),s.jsxs("span",{className:"text-yellow-300 font-medium",children:[e.value," 💰"]})]})}),l&&a&&s.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-600",children:[s.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["vs. ",l.name,":"]}),s.jsx("div",{className:"text-xs",children:Object.entries(a).map(([y,w])=>w===0||w===void 0||w===null||typeof w!="number"||isNaN(w)?null:s.jsxs("span",{className:`mr-2 ${w>0?"text-green-400":"text-red-400"}`,children:[y,": ",w>0?"+":"",w.toFixed(1)]},y)).filter(Boolean)})]})]})}),Ch={Common:"#9ca3af",Magic:"#06b6d4",Rare:"#8b5cf6",Unique:"#fbbf24",Legendary:"#ff6b6b"},Ph={fire:"#ff6b6b",ice:"#74c0fc",lightning:"#ffd43b",poison:"#51cf66"},Mh={fire:"🔥",ice:"❄️",lightning:"⚡",poison:"☠️"};function sf(e){return e&&Ch[e]||"#9ca3af"}function of(e){return!e||e==="physical"?"":Ph[e]||""}function ml(e){return!e||e==="physical"?"":Mh[e]||""}const _h=M.memo(({item:e,viewMode:t,onEquip:n,onUnequip:l,onSell:r,isEquipped:a,onHover:i,onLeave:c,onClick:d})=>{const f=M.useCallback(()=>n(e.id),[n,e.id]),y=M.useCallback(()=>l(e.id),[l,e.id]),w=M.useCallback(()=>r(e.id),[r,e.id]);return s.jsx("div",{className:`bg-gray-700 rounded-lg border-2 transition-all cursor-pointer hover:shadow-lg ${a?"border-green-500 bg-green-900/20 shadow-lg shadow-green-500/20":"border-gray-600 hover:border-gray-400 hover:bg-gray-600/50"} ${t==="grid"?"p-3 h-auto min-h-[200px]":"p-4"}`,onMouseEnter:x=>i==null?void 0:i(x,e),onMouseLeave:c,onClick:x=>d==null?void 0:d(x,e),children:s.jsxs("div",{className:`h-full ${t==="grid"?"flex flex-col justify-between":"flex justify-between items-start gap-4"}`,children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:`font-bold flex items-center gap-2 mb-2 ${t==="grid"?"text-sm":"text-lg"}`,style:{color:sf(e.rarity)},children:[a&&s.jsx("span",{className:"text-green-400 text-lg",children:"✓"}),s.jsx("span",{className:"truncate",children:t==="grid"?(e.name||"Unnamed Item").split(" ").slice(0,3).join(" "):e.name||"Unnamed Item"}),ml(e.damageType)&&s.jsx("span",{className:"text-lg",children:ml(e.damageType)})]}),s.jsx("div",{className:`text-gray-400 mb-3 ${t==="grid"?"text-xs":"text-sm"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[e.slot&&s.jsx("span",{className:"capitalize bg-gray-600 px-2 py-1 rounded text-xs",children:e.slot}),e.category&&s.jsx("span",{className:"capitalize text-gray-300",children:e.category}),e.type&&!e.slot&&s.jsx("span",{className:"bg-gray-600 px-2 py-1 rounded text-xs",children:e.type})]})}),s.jsx("div",{className:`text-gray-300 mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:e.baseStats?s.jsxs("div",{className:"space-y-1 bg-gray-800/50 p-2 rounded",children:[e.baseStats.damage&&typeof e.baseStats.damage=="number"&&!isNaN(e.baseStats.damage)&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"⚔️ Damage:"}),s.jsx("span",{className:"text-red-300 font-bold",children:e.baseStats.damage.toFixed(1)})]}),e.baseStats.armor&&typeof e.baseStats.armor=="number"&&!isNaN(e.baseStats.armor)&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"🛡️ Armor:"}),s.jsx("span",{className:"text-blue-300 font-bold",children:e.baseStats.armor.toFixed(1)})]}),e.baseStats.health&&typeof e.baseStats.health=="number"&&!isNaN(e.baseStats.health)&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"❤️ Health:"}),s.jsxs("span",{className:"text-green-300 font-bold",children:["+",e.baseStats.health.toFixed(1)]})]})]}):s.jsx("div",{className:"bg-gray-800/50 p-2 rounded",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"⚡ Power:"}),s.jsxs("span",{className:"text-yellow-300 font-bold",children:["+",e.power]})]})})}),e.damageType&&e.damageType!=="physical"&&s.jsx("div",{className:`mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:s.jsx("div",{className:"bg-gray-800/50 p-2 rounded",children:s.jsxs("span",{style:{color:of(e.damageType)},className:"font-medium",children:[ml(e.damageType)," ",e.damageType," damage"]})})}),e.affixes&&e.affixes.length>0&&s.jsx("div",{className:`mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:s.jsxs("div",{className:"bg-blue-900/30 p-2 rounded border border-blue-600/30",children:[s.jsx("div",{className:"font-medium text-blue-300 mb-1",children:"✨ Modifiers:"}),s.jsx("div",{className:"space-y-1",children:e.affixes.map((x,v)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-blue-200",children:[x.name,":"]}),s.jsxs("span",{className:"text-blue-100 font-medium",children:["+",x.value]})]},v))})]})}),e.extras&&e.extras.length>0&&s.jsx("div",{className:`mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:s.jsxs("div",{className:"bg-blue-900/30 p-2 rounded border border-blue-600/30",children:[s.jsx("div",{className:"font-medium text-blue-300 mb-1",children:"✨ Bonuses:"}),s.jsx("div",{className:"space-y-1",children:e.extras.map((x,v)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-blue-200",children:[x.key,":"]}),s.jsxs("span",{className:"text-blue-100 font-medium",children:["+",x.val]})]},v))})]})}),e.requirements&&s.jsx("div",{className:`mb-2 ${t==="grid"?"text-xs":"text-sm"}`,children:s.jsxs("div",{className:"bg-orange-900/30 p-2 rounded border border-orange-600/30",children:[s.jsx("div",{className:"font-medium text-orange-300 mb-1",children:"⚠️ Requirements:"}),s.jsx("div",{className:"space-y-1",children:Object.entries(e.requirements).map(([x,v])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"capitalize text-orange-200",children:[x,":"]}),s.jsx("span",{className:"text-orange-100 font-medium",children:v})]},x))})]})})]}),s.jsxs("div",{className:`${t==="grid"?"mt-auto":""}`,children:[s.jsx("div",{className:`text-yellow-400 mb-2 pt-2 border-t border-gray-600 ${t==="grid"?"text-xs":"text-sm"}`,children:s.jsxs("div",{className:"flex justify-between items-center bg-yellow-900/20 p-2 rounded",children:[s.jsx("span",{className:"text-yellow-300",children:"💰 Value:"}),s.jsxs("span",{className:"font-bold text-yellow-200",children:[e.value," gold"]})]})}),s.jsxs("div",{className:"flex gap-2 ",children:[a?s.jsx("button",{className:`bg-orange-600 hover:bg-orange-700 rounded-lg transition-all font-medium shadow-lg hover:shadow-xl ${t==="grid"?"px-2 py-1 text-xs flex-1":"px-4 py-2 text-sm"}`,onClick:y,children:t==="grid"?"↓ Unequip":"↓ Unequip Item"}):s.jsx("button",{className:`bg-blue-600 hover:bg-blue-700 rounded-lg transition-all font-medium shadow-lg hover:shadow-xl ${t==="grid"?"px-2 py-1 text-xs flex-1":"px-4 py-2 text-sm"}`,onClick:f,children:t==="grid"?"↑ Equip":"↑ Equip Item"}),s.jsx("button",{className:`bg-red-600 hover:bg-red-700 rounded-lg transition-all font-medium shadow-lg hover:shadow-xl ${t==="grid"?"px-2 py-1 text-xs flex-1":"px-3 py-2 text-sm"}`,onClick:w,children:t==="grid"?"🗑️":"🗑️ Sell"})]})]})]})})}),Eh=M.memo(function(){const{state:t,dispatch:n,actions:l}=ut(),[r,a]=M.useState(0),[i,c]=M.useState("list"),[d,f]=M.useState("all"),[y,w]=M.useState(null),x=20,v=10,j=M.useMemo(()=>{let A=[...t.inventory];return d!=="all"&&(A=A.filter(R=>d==="weapons"?R.category==="weapon":d==="armor"?R.category==="armor":d==="accessories"?R.category==="accessory":!0)),A.sort((R,K)=>{var H,re,k,D;const le=["Legendary","Unique","Rare","Magic","Common"],X=le.indexOf(R.rarity)-le.indexOf(K.rarity);if(X!==0)return X;const L=R.power||((H=R.baseStats)==null?void 0:H.damage)||((re=R.baseStats)==null?void 0:re.armor)||0;return(K.power||((k=K.baseStats)==null?void 0:k.damage)||((D=K.baseStats)==null?void 0:D.armor)||0)-L})},[t.inventory,d]),h=M.useMemo(()=>{const A={all:t.inventory.length,weapons:0,armor:0,accessories:0};return t.inventory.forEach(R=>{R.category==="weapon"?A.weapons++:R.category==="armor"?A.armor++:R.category==="accessory"&&A.accessories++}),A},[t.inventory]),u=M.useMemo(()=>{const A=Math.min(v,Math.ceil(j.length/x)),R=v*x,K=j.slice(0,R),le=r*x,X=K.slice(le,le+x),L=j.length-R;return{totalPages:A,displayInventory:K,currentItems:X,excessItems:L}},[j,r,x,v]),p=M.useMemo(()=>t.inventory.reduce((A,R)=>A+(R.value||0),0),[t.inventory]),m=M.useCallback(()=>{window.confirm(`Sell all ${t.inventory.length} items for ${p} gold?`)&&l.sellAll()},[t.inventory.length,p,l]),g=M.useCallback(A=>{c(A),a(0)},[]),S=M.useCallback(A=>{f(A),a(0)},[]),b=M.useCallback(A=>{n({type:"EQUIP",payload:A})},[n]),P=M.useCallback(A=>{const R=t.inventory.find(K=>K.id===A);R&&R.slot&&n({type:"UNEQUIP",payload:R.slot})},[n,t.inventory]),F=M.useCallback(A=>{n({type:"DISCARD",payload:A})},[n]),G=M.useCallback(A=>{var K;if(!A.slot)return!1;const R=(K=t.player.equipment)==null?void 0:K[A.slot];return R&&R.id===A.id},[t.player.equipment]),E=M.useCallback((A,R)=>{var K;if(!(y!=null&&y.isPersistent)){const le=R.slot?(K=t.player.equipment)==null?void 0:K[R.slot]:void 0,X=A.currentTarget.getBoundingClientRect(),L=400,$=300;let H=X.right+10,re=X.top;H+L>window.innerWidth&&(H=X.left-L-10),H<0&&(H=Math.max(10,(window.innerWidth-L)/2)),re+$>window.innerHeight&&(re=X.top-$-10),re<0&&(re=10),w({item:R,position:{x:H,y:re},equippedItem:le,isPersistent:!1})}},[t.player.equipment,y==null?void 0:y.isPersistent]),_=M.useCallback(()=>{y!=null&&y.isPersistent||w(null)},[y==null?void 0:y.isPersistent]),U=M.useCallback((A,R)=>{var re;A.stopPropagation();const K=R.slot?(re=t.player.equipment)==null?void 0:re[R.slot]:void 0,le=A.currentTarget.getBoundingClientRect(),X=400,L=300;let $=le.right+10,H=le.top;$+X>window.innerWidth&&($=le.left-X-10),$<0&&($=Math.max(10,(window.innerWidth-X)/2)),H+L>window.innerHeight&&(H=le.top-L-10),H<0&&(H=10),w({item:R,position:{x:$,y:H},equippedItem:K,isPersistent:!0})},[t.player.equipment]),se=M.useCallback(()=>{w(null)},[]);return s.jsxs("div",{className:"panel p-6 w-full flex flex-col bg-gray-800",onClick:A=>{y!=null&&y.isPersistent&&se()},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"🎒 Inventory"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>g("list"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i==="list"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:"📋 List View"}),s.jsx("button",{onClick:()=>g("grid"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${i==="grid"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:"⊞ Grid View"})]})]}),s.jsx("div",{className:"mb-4 p-3 bg-gray-800/50 rounded-lg border border-gray-600",children:s.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[s.jsxs("button",{onClick:()=>S("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${d==="all"?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:["📦 All Items ",s.jsxs("span",{className:"text-xs opacity-75",children:["(",h.all,")"]})]}),s.jsxs("button",{onClick:()=>S("weapons"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${d==="weapons"?"bg-red-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:["⚔️ Weapons ",s.jsxs("span",{className:"text-xs opacity-75",children:["(",h.weapons,")"]})]}),s.jsxs("button",{onClick:()=>S("armor"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${d==="armor"?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:["🛡️ Armor ",s.jsxs("span",{className:"text-xs opacity-75",children:["(",h.armor,")"]})]}),s.jsxs("button",{onClick:()=>S("accessories"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${d==="accessories"?"bg-green-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:["💍 Accessories ",s.jsxs("span",{className:"text-xs opacity-75",children:["(",h.accessories,")"]})]})]})}),s.jsx("div",{className:"mb-4 p-4 bg-gray-700/50 rounded-lg border border-gray-600",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-yellow-400 text-lg font-bold",children:["💰 Gold: ",t.player.gold&&typeof t.player.gold=="number"&&!isNaN(t.player.gold)?t.player.gold.toFixed(2):"0.00"]}),s.jsxs("div",{className:"text-gray-300 text-sm",children:[d==="all"?"Total Items":`${d.charAt(0).toUpperCase()+d.slice(1)}`,": ",j.length,d!=="all"&&s.jsxs("span",{className:"text-gray-400",children:[" / ",t.inventory.length," total"]})]}),s.jsxs("div",{className:"text-gray-300 text-sm",children:["Total Value: ",p&&typeof p=="number"&&!isNaN(p)?p.toFixed(2):"0.00"," 💰"]})]}),t.inventory.length>0&&s.jsx("button",{onClick:m,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg text-sm transition-all text-black font-bold shadow-lg hover:shadow-xl",children:"💰 Sell All Items"})]})}),u.excessItems>0&&s.jsxs("div",{className:"mb-4 p-3 bg-orange-900/30 border border-orange-600/40 rounded-lg text-orange-300 text-sm",children:["⚠️ ",u.excessItems," excess items converted to gold automatically"]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"text-lg font-semibold text-gray-200",children:["Items (",j.length,")"]}),u.totalPages>1&&s.jsxs("div",{className:"text-sm text-gray-400 bg-gray-700 px-3 py-1 rounded-lg",children:["Page ",r+1," of ",u.totalPages]})]}),s.jsxs("div",{className:`flex-1 overflow-y-auto ${i==="grid"?"grid grid-cols-2 gap-3 p-3":"space-y-3 p-2"}`,children:[u.currentItems.length===0&&s.jsx("div",{className:"text-gray-400 text-sm col-span-2",children:"No items yet."}),u.currentItems.map(A=>s.jsx(_h,{item:A,viewMode:i,onEquip:b,onUnequip:P,onSell:F,isEquipped:!!G(A),onHover:E,onLeave:_,onClick:U},A.id))]}),u.totalPages>1&&s.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-600 bg-gray-700/30 rounded-lg p-3",children:[s.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",onClick:()=>a(A=>Math.max(0,A-1)),disabled:r===0,children:"← Previous"}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsxs("span",{className:"bg-gray-600 px-3 py-1 rounded-lg font-medium",children:["Page ",r+1," of ",u.totalPages]}),u.totalPages>=v&&s.jsxs("span",{className:"text-orange-400 text-xs bg-orange-900/30 px-2 py-1 rounded",children:["(Max ",v," pages)"]})]}),s.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",onClick:()=>a(A=>Math.min(u.totalPages-1,A+1)),disabled:r===u.totalPages-1,children:"Next →"})]})]}),y&&s.jsx(Nh,{item:y.item,position:y.position,onClose:se,equippedItem:y.equippedItem,isPersistent:y.isPersistent})]})});function Ac(){const{state:e}=ut(),t=M.useRef(null),[n,l]=M.useState("All");M.useEffect(()=>{t.current&&(t.current.scrollTop=0)},[e.log]);const r=c=>c.includes("BOSS DEFEATED")?s.jsx("span",{className:"text-yellow-400 font-bold",children:c}):c.includes("defeated")?s.jsx("span",{className:"text-green-400",children:c}):c.includes("critical")?s.jsx("span",{className:"text-red-400",children:c}):c.includes("dodged")?s.jsx("span",{className:"text-blue-400",children:c}):c.includes("Level up")?s.jsx("span",{className:"text-purple-400 font-bold",children:c}):c.includes("died")?s.jsx("span",{className:"text-red-500 font-bold",children:c}):c.includes("EXP")||c.includes("exp")?s.jsx("span",{className:"text-green-300",children:c}):c.includes("Gold")||c.includes("gold")?s.jsx("span",{className:"text-yellow-300",children:c}):c.includes("found")||c.includes("dropped")||c.includes("item")?s.jsx("span",{className:"text-blue-300",children:c}):s.jsx("span",{className:"text-gray-300",children:c}),i=(()=>{let c=[...e.log];return n!=="All"&&(c=c.filter(d=>{switch(n){case"EXP":return d.includes("EXP")||d.includes("exp")||d.includes("Level up");case"Gold":return d.includes("Gold")||d.includes("gold");case"Items":return d.includes("found")||d.includes("dropped")||d.includes("item");default:return!0}})),c.slice(-50)})();return s.jsxs("div",{className:"bg-gray-900/95 border border-gray-600 rounded-lg p-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:"Combat Log"}),s.jsx("div",{className:"flex space-x-1",children:["All","EXP","Gold","Items"].map(c=>s.jsx("button",{onClick:()=>l(c),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${n===c?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:c},c))})]}),s.jsxs("div",{ref:t,className:"space-y-1 flex-1 overflow-y-auto text-sm bg-gray-800/50 rounded p-3 border border-gray-700",style:{maxHeight:"200px"},children:[i.length===0&&s.jsx("div",{className:"text-gray-500",children:n==="All"?"No combat yet...":`No ${n.toLowerCase()} entries...`}),i.map((c,d)=>s.jsx("div",{className:"font-mono text-xs",children:r(c)},d))]})]})}function Lh(){const{state:e,dispatch:t}=ut(),{player:n,enemies:l,log:r}=e,a=l[0],i=d=>!d||d==="physical"?"":{fire:"🔥",ice:"❄️",lightning:"⚡",poison:"☠️"}[d]||"",c=d=>d?{berserker:"💢 Berserker",precise:"🎯 Precise",regeneration:"💚 Regeneration",shield:"🛡️ Shield",poison:"☠️ Poison",freeze:"❄️ Freeze",lightning:"⚡ Lightning",summon:"👥 Summon"}[d]||d:"";return s.jsxs("div",{className:"panel p-4 h-full flex flex-col",children:[s.jsx("h2",{className:"text-lg font-bold mb-3",children:"Combat"}),a&&s.jsxs("div",{className:"mb-4 p-3 bg-red-900 rounded",children:[s.jsxs("h3",{className:"font-bold text-red-200",children:[a.isBoss&&"👑 ",a.name," (Level ",a.level,")",a.isBoss&&" - BOSS"]}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{children:["HP: ",a.hp,"/",a.maxHp]}),s.jsxs("div",{children:["Type: ",a.type]}),a.armor&&s.jsxs("div",{children:["Armor: ",a.armor]}),a.specialAbility&&s.jsx("div",{className:"text-yellow-300",children:c(a.specialAbility)})]})]}),s.jsxs("div",{className:"mb-4 p-3 bg-blue-900 rounded",children:[s.jsxs("h3",{className:"font-bold text-blue-200",children:["Player (Level ",n.level,")"]}),s.jsxs("div",{className:"text-sm grid grid-cols-2 gap-1",children:[s.jsxs("div",{children:["HP: ",n.hp,"/",n.maxHp]}),s.jsxs("div",{children:["DPS: ",n.dps]}),s.jsxs("div",{children:["XP: ",n.xp,"/",n.nextLevelXp]}),s.jsxs("div",{children:["Gold: ",n.gold]}),n.armor&&n.armor>0&&s.jsxs("div",{children:["Armor: ",n.armor]}),n.critChance&&n.critChance>0&&s.jsxs("div",{children:["Crit: ",(n.critChance*100).toFixed(2),"%"]}),n.dodgeChance&&n.dodgeChance>0&&s.jsxs("div",{children:["Dodge: ",(n.dodgeChance*100).toFixed(2),"%"]}),n.lifeSteal&&n.lifeSteal>0&&s.jsxs("div",{children:["Life Steal: ",(n.lifeSteal*100).toFixed(2),"%"]}),n.equipped&&n.equipped.damageType&&n.equipped.damageType!=="physical"&&s.jsxs("div",{children:["Element: ",i(n.equipped.damageType)]})]})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("button",{onClick:()=>t({type:"SPAWN"}),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm",children:"Spawn Enemy"}),a&&s.jsx("button",{onClick:()=>t({type:"TICK",payload:{enemyId:a.id}}),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm",children:"Combat Tick"}),s.jsxs("button",{onClick:()=>t({type:"TOGGLE_AUTO"}),className:`px-3 py-1 rounded text-sm ${e.autoCombat?"bg-yellow-600 hover:bg-yellow-700":"bg-gray-600 hover:bg-gray-700"}`,children:["Auto: ",e.autoCombat?"ON":"OFF"]})]}),s.jsxs("div",{className:"bg-gray-900 p-3 rounded h-32 overflow-y-auto",children:[s.jsx("h4",{className:"font-bold mb-2",children:"Combat Log"}),s.jsx("div",{className:"text-sm space-y-1",children:r.slice(0,10).map((d,f)=>s.jsx("div",{className:"text-gray-300",children:d},f))})]})]})}function Th({isOpen:e,onClose:t,title:n,children:l}){return M.useEffect(()=>{const r=a=>{a.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[e,t]),e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 animate-fade-in",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-zoom-in",children:s.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-2xl border border-gray-700 max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700 bg-gray-800",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-100",children:n}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors duration-200 group","aria-label":"Close modal",children:s.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-gray-200 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] bg-gray-900",children:l})]})})]}):null}const Ah=Gn.memo(function({isOpen:t,onClose:n}){const{state:l,actions:r}=ut(),[a,i]=M.useState("skills"),[c,d]=M.useState("list"),[f,y]=M.useState(null),[w,x]=M.useState(null),[v,j]=M.useState(""),[h,u]=M.useState("All"),[p,m]=M.useState(!1),g=M.useMemo(()=>({unlockedSkills:J0(l.player),availableSkills:Z0(l.player),unlockedSupports:th(l.player),availableSupports:eh(l.player)}),[l.player,l.player.skillBar]),S=M.useMemo(()=>{const k=new Set;return[...g.unlockedSkills,...g.availableSkills].forEach(D=>{D.tags.forEach(ye=>k.add(ye))}),Array.from(k).sort()},[g]),b=M.useMemo(()=>{let k=[...g.unlockedSkills,...g.availableSkills];return v&&(k=k.filter(D=>D.name.toLowerCase().includes(v.toLowerCase())||D.description.toLowerCase().includes(v.toLowerCase()))),h!=="All"&&(k=k.filter(D=>D.tags.includes(h))),k},[g,v,h]),P=M.useMemo(()=>{let k=[...g.unlockedSupports,...g.availableSupports];return v&&(k=k.filter(D=>D.name.toLowerCase().includes(v.toLowerCase())||D.description.toLowerCase().includes(v.toLowerCase()))),h!=="All"&&(k=k.filter(D=>D.tags.includes(h))),k},[g,v,h]),F=M.useCallback(k=>{r.unlockSkillGem(k),y(null)},[r]),G=M.useCallback(k=>{r.levelUpSkillGem(k);const D=l.player.skillGems.find(ye=>ye.id===k);D&&(f==null?void 0:f.id)===k&&y(D)},[r,l.player.skillGems,f]),E=M.useCallback(k=>{r.unlockSupportGem(k),x(null)},[r]),_=M.useCallback(k=>{r.levelUpSupportGem(k);const D=l.player.supportGems.find(ye=>ye.id===k);D&&(w==null?void 0:w.id)===k&&x(D)},[r,l.player.supportGems,w]),U=M.useCallback((k,D)=>{r.equipSkillToBar(k,D),y(null)},[r]),se=M.useCallback(k=>{r.unequipSkillFromBar(k),y(null)},[r]),A=M.useCallback((k,D)=>{r.attachSupportGem(k,D),m(!1),x(null)},[r]),R=M.useCallback((k,D)=>{r.detachSupportGem(k,D)},[r]),K=k=>({Normal:"#ffffff",Magic:"#8888ff",Rare:"#ffff88",Unique:"#ff8800"})[k]||"#ffffff",le=k=>({Spell:"#4f46e5",Attack:"#dc2626",Projectile:"#059669",AoE:"#d97706",Physical:"#6b7280",Fire:"#ef4444",Cold:"#3b82f6",Lightning:"#eab308",Chaos:"#8b5cf6",Melee:"#991b1b",Duration:"#7c3aed",Channeling:"#be185d",Movement:"#0891b2",Travel:"#0d9488",Minion:"#7c2d12",Totem:"#a16207",Trap:"#374151",Mine:"#1f2937",Critical:"#fbbf24",Bow:"#92400e",Weapon:"#6b7280",Unarmed:"#78716c",Brand:"#c2410c",Slam:"#7f1d1d",Strike:"#b91c1c",Guard:"#1e40af",Vaal:"#581c87",Trigger:"#be123c",Aura:"#06b6d4",Curse:"#f59e0b",Warcry:"#dc2626",Support:"#10b981",Elemental:"#f59e0b"})[k]||"#6b7280",X=k=>k.toFixed(2),L=()=>l.player.skillBar.slots.map((k,D)=>({index:D,skill:k,isEmpty:!k})),$=k=>{var Xt,xt;const D=Fl(k),ye=L();return s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-3xl",children:k.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",style:{color:K(k.rarity)},children:k.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Level ",k.level,"/",k.maxLevel," • ",k.rarity," • Quality: ",k.quality,"%"]})]})]}),s.jsx("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-white text-xl",children:"×"})]}),s.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:k.description}),s.jsx("div",{className:"flex flex-wrap gap-1",children:k.tags.map(B=>s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:le(B)},children:B},B))}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Damage:"}),s.jsx("span",{className:"text-red-400",children:X(D.damage)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Mana Cost:"}),s.jsx("span",{className:"text-blue-400",children:X(D.manaCost)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Cooldown:"}),s.jsxs("span",{className:"text-yellow-400",children:[X(D.cooldown/1e3),"s"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[((Xt=k.scaling)==null?void 0:Xt.baseArea)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Area:"}),s.jsx("span",{className:"text-green-400",children:X(D.area)})]}),((xt=k.scaling)==null?void 0:xt.baseDuration)&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Duration:"}),s.jsxs("span",{className:"text-purple-400",children:[X(D.duration/1e3),"s"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Unlock Cost:"}),s.jsxs("span",{className:"text-yellow-300",children:[k.skillPointCost," SP"]})]})]})]}),k.supportGems.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-white font-medium",children:"Active Support Modifiers:"}),s.jsx("div",{className:"space-y-1 bg-gray-700 p-3 rounded",children:k.supportGems.map(B=>{const Y=Qd(B);return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-sm font-medium text-blue-300",children:[B.name," (Lv.",B.level,")"]}),Y.map((o,q)=>s.jsxs("div",{className:"text-xs text-green-300 ml-2",children:["• ",o.description||`${o.type}: ${o.isPercentage?"+":""}${o.value}${o.isPercentage?"%":""}`]},q))]},B.id)})})]}),k.isUnlocked&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-white font-medium",children:["Support Gems (",k.supportGems.length,"/6)"]}),s.jsx("button",{onClick:()=>{x(null),m(!0)},className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs",disabled:k.supportGems.length>=6,children:"Attach Support"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.supportGems.map(B=>s.jsxs("div",{className:"bg-gray-700 p-2 rounded flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{children:B.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium",children:B.name}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Lv.",B.level]})]})]}),s.jsx("button",{onClick:()=>R(k.id,B.id),className:"text-red-400 hover:text-red-300 text-xs",children:"×"})]},B.id))})]}),s.jsx("div",{className:"flex space-x-2",children:k.isUnlocked?s.jsxs(s.Fragment,{children:[k.level<k.maxLevel&&s.jsxs("button",{onClick:()=>G(k.id),disabled:!ja(k,l.player.skillPoints),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Level Up (",qn(k.level)," SP)"]}),ye.filter(B=>B.isEmpty).length>0&&s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("span",{className:"text-gray-400 text-sm py-2",children:"Equip to:"}),ye.filter(B=>B.isEmpty).map(B=>s.jsxs("button",{onClick:()=>U(k.id,B.index),className:"bg-purple-600 hover:bg-purple-700 text-white px-2 py-1 rounded text-sm",children:["Slot ",B.index+1]},B.index))]})]}):s.jsxs("button",{onClick:()=>F(k.id),disabled:l.player.skillPoints<fn(k)||l.player.level<k.unlockLevel,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Unlock (",fn(k)," SP)"]})})]})},H=k=>s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-3xl",children:k.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",style:{color:K(k.rarity)},children:k.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Level ",k.level,"/",k.maxLevel," • ",k.rarity," • Quality: ",k.quality,"%"]})]})]}),s.jsx("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-white text-xl",children:"×"})]}),s.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:k.description}),s.jsx("div",{className:"flex flex-wrap gap-1",children:k.tags.map(D=>s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:le(D)},children:D},D))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-white font-medium",children:"Modifiers:"}),s.jsx("div",{className:"space-y-1",children:k.modifiers.map((D,ye)=>s.jsxs("div",{className:"text-sm text-gray-300",children:["• ",D.description||`${D.type}: ${D.isPercentage?"+":""}${D.value}${D.isPercentage?"%":""}`]},ye))})]}),s.jsx("div",{className:"flex space-x-2",children:k.isUnlocked?s.jsx(s.Fragment,{children:k.level<k.maxLevel&&s.jsxs("button",{onClick:()=>_(k.id),disabled:!ja(k,l.player.skillPoints),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Level Up (",qn(k.level)," SP)"]})}):s.jsxs("button",{onClick:()=>E(k.id),disabled:l.player.skillPoints<fn(k)||l.player.level<k.unlockLevel,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded font-medium",children:["Unlock (",fn(k)," SP)"]})})]}),re=()=>{if(!f||!p)return null;const k=g.unlockedSupports.filter(D=>Up(f,D)&&!f.supportGems.some(ye=>ye.id===D.id));return s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-white font-bold",children:["Attach Support to ",f.name]}),s.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white text-xl",children:"×"})]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:k.length>0?k.map(D=>s.jsxs("div",{className:"bg-gray-700 p-3 rounded flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-lg",children:D.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white font-medium",children:D.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",D.level]}),s.jsx("div",{className:"flex space-x-1 mt-1",children:D.tags.map(ye=>s.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:le(ye),color:"white"},children:ye},ye))})]})]}),s.jsx("button",{onClick:()=>A(f.id,D.id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"Attach"})]},D.id)):s.jsx("div",{className:"text-gray-400 text-center py-4",children:"No compatible support gems available"})})]})};return t?s.jsxs("div",{className:"fixed bottom-20 right-4 bg-gray-900 border border-gray-700 rounded-lg shadow-xl z-50 w-[800px] h-[600px] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-700",children:[s.jsx("h3",{className:"text-white font-bold text-lg",children:"💎 Skill Gem Management"}),s.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white text-xl leading-none",children:"×"})]}),s.jsx("div",{className:"px-4 py-2 border-b border-gray-700 text-sm text-gray-300",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Skill Points: ",l.player.skillPoints]}),s.jsxs("span",{children:["Level: ",l.player.level]})]})}),s.jsxs("div",{className:"flex border-b border-gray-700",children:[s.jsxs("button",{className:`px-4 py-2 font-medium ${a==="skills"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("skills"),children:["Skills (",g.unlockedSkills.length,")"]}),s.jsxs("button",{className:`px-4 py-2 font-medium ${a==="supports"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("supports"),children:["Support Gems (",g.unlockedSupports.length,")"]}),s.jsx("button",{className:`px-4 py-2 font-medium ${a==="skillbar"?"bg-blue-600 text-white border-b-2 border-blue-400":"text-gray-300 hover:text-white hover:bg-gray-800"}`,onClick:()=>i("skillbar"),children:"Skill Bar"})]}),(a==="skills"||a==="supports")&&s.jsx("div",{className:"p-4 border-b border-gray-700 space-y-2",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",placeholder:"Search skills...",value:v,onChange:k=>j(k.target.value),className:"flex-1 bg-gray-800 border border-gray-600 rounded px-3 py-1 text-white text-sm"}),s.jsxs("select",{value:h,onChange:k=>u(k.target.value),className:"bg-gray-800 border border-gray-600 rounded px-3 py-1 text-white text-sm",children:[s.jsx("option",{value:"All",children:"All Tags"}),S.map(k=>s.jsx("option",{value:k,children:k},k))]}),s.jsx("button",{onClick:()=>d(c==="list"?"detailed":"list"),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm",children:c==="list"?"📋":"📖"})]})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:p?s.jsx("div",{className:"p-4 h-full overflow-y-auto",children:re()}):f?s.jsx("div",{className:"p-4 h-full overflow-y-auto",children:$(f)}):w?s.jsx("div",{className:"p-4 h-full overflow-y-auto",children:H(w)}):s.jsxs("div",{className:"p-4 h-full overflow-y-auto",children:[a==="skills"&&s.jsxs("div",{className:"space-y-4",children:[g.unlockedSkills.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-2",children:"Unlocked Skills"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:b.filter(k=>k.isUnlocked).map(k=>s.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between hover:bg-gray-750 cursor-pointer",onClick:()=>y(k),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xl",children:k.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white font-medium",children:k.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.level," • Dmg: ",X(Xd(k)),k.isEquipped&&s.jsx("span",{className:"text-yellow-400 ml-2",children:"⚡ Equipped"})]}),s.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(D=>s.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:le(D),color:"white"},children:D},D))})]})]}),s.jsx("div",{className:"text-gray-400",children:"→"})]},k.id))})]}),g.availableSkills.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-2",children:"Available Skills"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:b.filter(k=>!k.isUnlocked).map(k=>s.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between opacity-75 hover:opacity-100 cursor-pointer",onClick:()=>y(k),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xl",children:k.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-300 font-medium",children:k.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Cost: ",fn(k)," SP • Req: Lv.",k.unlockLevel]}),s.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(D=>s.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:le(D),color:"white"},children:D},D))})]})]}),s.jsx("div",{className:"text-gray-400",children:"→"})]},k.id))})]})]}),a==="supports"&&s.jsxs("div",{className:"space-y-4",children:[g.unlockedSupports.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-2",children:"Unlocked Support Gems"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:P.filter(k=>k.isUnlocked).map(k=>s.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between hover:bg-gray-750 cursor-pointer",onClick:()=>x(k),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xl",children:k.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white font-medium",children:k.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.level]}),s.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(D=>s.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:le(D),color:"white"},children:D},D))})]})]}),s.jsx("div",{className:"text-gray-400",children:"→"})]},k.id))})]}),g.availableSupports.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-2",children:"Available Support Gems"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:P.filter(k=>!k.isUnlocked).map(k=>s.jsxs("div",{className:"bg-gray-800 p-3 rounded flex items-center justify-between opacity-75 hover:opacity-100 cursor-pointer",onClick:()=>x(k),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xl",children:k.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-300 font-medium",children:k.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Cost: ",fn(k)," SP • Req: Lv.",k.unlockLevel]}),s.jsx("div",{className:"flex space-x-1 mt-1",children:k.tags.slice(0,3).map(D=>s.jsx("span",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:le(D),color:"white"},children:D},D))})]})]}),s.jsx("div",{className:"text-gray-400",children:"→"})]},k.id))})]})]}),a==="skillbar"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-white font-semibold",children:"Skill Bar Management"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:L().map(k=>s.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[s.jsxs("div",{className:"text-white font-medium mb-2",children:["Slot ",k.index+1]}),k.skill?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:k.skill.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white font-medium",children:k.skill.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Lv.",k.skill.level]})]})]}),s.jsx("button",{onClick:()=>se(k.index),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm w-full",children:"Unequip"})]}):s.jsx("div",{className:"text-gray-400 text-center py-4",children:"Empty Slot"})]},k.index))})]})]})})]}):null});function Ih({className:e=""}){const{state:t,actions:n}=ut(),[l,r]=M.useState(null),[a,i]=M.useState({}),[c,d]=M.useState(null),f=t.player.skillBar,y=(f==null?void 0:f.maxSlots)||6,w=p=>f!=null&&f.slots&&f.slots[p]||null,x=(p,m)=>{l===p?(r(null),d(null)):(r(p),m&&d({x:m.clientX+10,y:m.clientY+10}))},v=(p,m)=>{m.stopPropagation(),n.unequipSkillFromBar(p),r(null)},j=p=>{i(m=>({...m,[p]:!m[p]}))},h=p=>{const m=w(p),g=l===p,S=!m;return s.jsxs("div",{className:`skill-slot ${S?"empty":"filled"} ${g?"selected":""}`,onClick:b=>x(p,b),children:[s.jsx("div",{className:"slot-number",children:p+1}),m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"skill-icon",title:m.name,children:m.icon}),s.jsx("div",{className:"skill-level",children:m.level}),m.supportGems.length>0&&s.jsx("div",{className:"support-indicator",children:s.jsx("span",{className:"support-count",children:m.supportGems.length})}),s.jsx("div",{className:"skill-mana-cost",children:Fl(m).manaCost}),s.jsx("button",{className:"unequip-skill-btn",onClick:b=>v(p,b),title:"Unequip skill",children:"×"}),g&&c&&s.jsxs("div",{className:"skill-tooltip",style:{left:Math.min(c.x,window.innerWidth-400),top:Math.min(c.y,window.innerHeight-300)},onClick:b=>b.stopPropagation(),children:[s.jsxs("div",{className:"tooltip-header",children:[s.jsxs("div",{children:[s.jsx("h4",{children:m.name}),s.jsx("span",{className:"skill-type",children:m.type})]}),s.jsx("button",{onClick:b=>{b.stopPropagation(),r(null),d(null)},className:"text-gray-400 hover:text-white text-xl leading-none p-1 hover:bg-gray-700 rounded",title:"Close tooltip",children:"×"})]}),s.jsxs("div",{className:"skill-tags",children:[s.jsx("span",{className:"tags-label",children:"Tags: "}),s.jsx("span",{className:"tags-list",children:qp(m)})]}),s.jsx("p",{className:"skill-description",children:m.description}),s.jsxs("div",{className:"skill-stats",children:[s.jsxs("div",{children:["Level: ",m.level,"/",m.maxLevel]}),(()=>{const b=Fl(m);return s.jsxs(s.Fragment,{children:[b.damage>0&&s.jsxs("div",{children:["Damage: ",b.damage]}),s.jsxs("div",{children:["Mana: ",b.manaCost]}),s.jsxs("div",{children:["Cooldown: ",b.cooldown,"ms"]}),b.projectileCount>1&&s.jsxs("div",{children:["Projectiles: ",b.projectileCount]})]})})()]}),m.supportGems.length>0&&s.jsxs("div",{className:"support-gems",children:[s.jsxs("div",{className:"support-header",onClick:()=>j(m.id),children:[s.jsxs("span",{children:["Support Gems (",m.supportGems.length,"/6)"]}),s.jsx("span",{className:`expand-icon ${a[m.id]?"expanded":""}`,children:"▼"})]}),a[m.id]&&s.jsx("div",{className:"support-list",children:m.supportGems.map(b=>s.jsxs("div",{className:"support-item",children:[s.jsx("span",{className:"support-icon",children:b.icon}),s.jsx("span",{className:"support-name",children:b.name}),s.jsxs("span",{className:"support-level",children:["Lv.",b.level]}),s.jsx("button",{className:"detach-support-btn",onClick:P=>{P.stopPropagation(),n.detachSupportGem(m.id,b.id)},title:"Detach support gem",children:"×"})]},b.id))})]}),s.jsxs("div",{className:"tooltip-actions",children:[s.jsxs("div",{className:"auto-skill-status",children:[s.jsx("span",{className:"auto-indicator",children:"🔄 Auto-Active"}),s.jsx("span",{className:"skill-status",children:m.id==="whirlwind"?"Channeling in Combat":"Ready"})]}),s.jsx("button",{className:"unequip-btn-large",onClick:b=>v(p,b),title:"Unequip this skill",children:"Unequip Skill"})]})]})]}):s.jsxs("div",{className:"empty-slot-content",children:[s.jsx("div",{className:"empty-icon",children:"+"}),s.jsx("div",{className:"empty-text",children:"Empty"})]})]},p)},u=()=>{var m;const p=(m=f==null?void 0:f.slots)==null?void 0:m.find(g=>(g==null?void 0:g.id)==="whirlwind");return s.jsxs("div",{className:"combat-status",children:[s.jsxs("div",{className:"auto-combat-info",children:[s.jsx("span",{className:"status-label",children:"Combat Mode:"}),s.jsx("span",{className:"status-value",children:"Automatic Whirlwind"})]}),p&&s.jsxs("div",{className:"whirlwind-stats",children:[s.jsxs("span",{children:["Mana Cost: ",Fl(p).manaCost,"/sec"]}),s.jsxs("span",{children:["Area Damage: ",Fl(p).damage]})]})]})};return s.jsxs("div",{className:`skill-bar-container ${e}`,onClick:p=>{l!==null&&!p.defaultPrevented&&(r(null),d(null))},children:[s.jsxs("div",{className:"skill-bar-header",children:[s.jsx("h3",{children:"Combat Skills"}),s.jsx("div",{className:"skill-bar-info",children:s.jsxs("span",{children:["Active Skills: ",f!=null&&f.slots?f.slots.filter(p=>p!==null).length:0,"/",y]})})]}),s.jsx("div",{className:"skill-bar",children:Array.from({length:y},(p,m)=>h(m))}),u(),s.jsx("div",{className:"skill-bar-help",children:s.jsx("p",{children:"Skills activate automatically during combat • Click slots to view details and support gems"})})]})}const Rh=Gn.memo(function(){const{state:t}=ut(),{activeCombinations:n=[],activeSynergies:l=[]}=t;return n.length===0&&l.length===0?s.jsxs("div",{className:"bg-gray-900/95 text-white p-4 rounded-lg border border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold text-center mb-3",children:"🔗 Skill Combinations"}),s.jsxs("div",{className:"text-center text-gray-400 text-sm",children:[s.jsx("p",{children:"Equip multiple skills to unlock powerful combinations!"}),s.jsx("p",{className:"mt-2",children:"Try combining:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:"• Fire + Lightning skills for Elemental Mastery"}),s.jsx("li",{children:"• Melee + Spell skills for Spellsword"}),s.jsx("li",{children:"• Multiple AoE skills for Area Specialist"})]})]})]}):s.jsxs("div",{className:"bg-gray-900/95 text-white p-4 rounded-lg border border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold text-center mb-3",children:"🔗 Skill Combinations"}),n.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-yellow-400 mb-2",children:"✨ Active Combinations"}),s.jsx("div",{className:"space-y-2",children:n.map(r=>s.jsx(zh,{combination:r},r.id))})]}),l.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-blue-400 mb-2",children:"⚡ Active Synergies"}),s.jsx("div",{className:"space-y-2",children:l.map(r=>s.jsx(Dh,{synergy:r},r.id))})]})]})}),zh=Gn.memo(function({combination:t}){return s.jsxs("div",{className:"bg-gray-800/70 p-3 rounded border border-yellow-500/30",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-lg",children:t.icon}),s.jsx("h5",{className:"font-semibold text-yellow-300",children:t.name})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:t.description}),s.jsx("div",{className:"space-y-1",children:t.bonuses.map((n,l)=>s.jsx("div",{className:"text-xs",children:s.jsxs("span",{className:"text-green-400",children:[n.isPercentage?`+${n.value}%`:`+${n.value}`," ",n.description]})},l))})]})}),Dh=Gn.memo(function({synergy:t}){const n=a=>{switch(a){case"onUse":return"when used";case"onKill":return"on kill";case"onCrit":return"on critical hit";case"onHit":return"on hit";default:return a}},l=a=>{switch(a){case"whirlwind":return"Whirlwind";case"fireball":return"Fireball";case"lightning_bolt":return"Lightning Bolt";case"all_spells":return"Any Spell";default:return a}},r=a=>{switch(a){case"whirlwind":return"Whirlwind";case"fireball":return"Fireball";case"lightning_bolt":return"Lightning Bolt";case"all_spells":return"All Spells";case"player":return"Player";default:return a}};return s.jsxs("div",{className:"bg-gray-800/70 p-3 rounded border border-blue-500/30",children:[s.jsx("h5",{className:"font-semibold text-blue-300 mb-1",children:t.name}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:t.description}),s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsxs("div",{className:"text-gray-400",children:[s.jsx("span",{className:"text-white",children:l(t.triggerSkill)})," ",n(t.condition)," affects"," ",s.jsx("span",{className:"text-white",children:r(t.targetSkill)})]}),s.jsxs("div",{className:"text-cyan-400",children:[t.bonus.isPercentage?`${t.bonus.value}%`:t.bonus.value," ",t.bonus.description]}),t.duration&&s.jsxs("div",{className:"text-gray-500",children:["Duration: ",t.duration/1e3,"s"]}),t.cooldown&&s.jsxs("div",{className:"text-gray-500",children:["Cooldown: ",t.cooldown/1e3,"s"]})]})]})}),$h={common:[{k:"str",min:1,max:3},{k:"vit",min:2,max:4}],magic:[{k:"str",min:2,max:5},{k:"dex",min:2,max:5},{k:"vit",min:3,max:7}],rare:[{k:"str",min:3,max:8},{k:"dex",min:3,max:8},{k:"vit",min:5,max:10},{k:"crit",min:1,max:5}],unique:[{k:"str",min:6,max:12},{k:"dex",min:6,max:12},{k:"vit",min:8,max:15},{k:"crit",min:3,max:8},{k:"lifesteal",min:1,max:4}]},Fr=new Map,Fh=1e3,Bh={Common:2,Magic:3,Rare:4,Unique:5};function Ic(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Oh(e){const t=`${e}`;if(Fr.has(t)&&Math.random()>.8)return Fr.get(t).map(c=>({...c,value:Ic(Math.floor(c.value*.8),Math.ceil(c.value*1.2))}));const n=$h[e.toLowerCase()],l=Bh[e],r=[],a=[...n];for(let i=0;i<l&&a.length;i++){const c=Math.floor(Math.random()*a.length),d=a.splice(c,1)[0];r.push({key:d.k,value:Ic(d.min,d.max)})}return Fr.size<Fh&&Fr.set(t,[...r]),r}function cf(e=1e3){const t=performance.now();for(let r=0;r<e;r++)hr(Math.floor(Math.random()*100)+1,Math.random()>.9);const l=performance.now()-t;return{operation:"Equipment Generation",iterations:e,totalTime:l,averageTime:l/e,itemsPerSecond:e/l*1e3}}function uf(e=1e3){const t=performance.now();for(let r=0;r<e;r++)Jr(Math.floor(Math.random()*100)+1,Math.random()>.9);const l=performance.now()-t;return{operation:"Loot Generation",iterations:e,totalTime:l,averageTime:l/e,itemsPerSecond:e/l*1e3}}function df(e=1e3){const t=["Common","Magic","Rare","Unique"],n=performance.now();for(let a=0;a<e;a++){const i=t[Math.floor(Math.random()*t.length)];Oh(i)}const r=performance.now()-n;return{operation:"Affix Generation",iterations:e,totalTime:r,averageTime:r/e,itemsPerSecond:e/r*1e3}}function ff(e=100){const t=mr(),n=["weapon","helm","chest","legs","boots","gloves"];for(let i=0;i<n.length;i++){const c=hr(50,!1);t.equipment[n[i]]=c}const l=performance.now();for(let i=0;i<e;i++)Be(t);const a=performance.now()-l;return{operation:"Player Stat Calculation",iterations:e,totalTime:a,averageTime:a/e,itemsPerSecond:e/a*1e3}}function mf(){console.log("🚀 Starting Performance Test Suite...");const e=[];return console.log("Testing equipment generation..."),e.push(cf(1e3)),console.log("Testing loot generation..."),e.push(uf(1e3)),console.log("Testing affix generation..."),e.push(df(1e3)),console.log("Testing stat calculation..."),e.push(ff(100)),console.log("✅ Performance Test Suite Complete!"),e.forEach(t=>{console.log(`
📊 ${t.operation}:`),console.log(`  Iterations: ${t.iterations}`),console.log(`  Total Time: ${t.totalTime.toFixed(2)}ms`),console.log(`  Average Time: ${t.averageTime.toFixed(4)}ms`),console.log(`  Items/Second: ${t.itemsPerSecond.toFixed(0)}`)}),e}function Uh(){if("memory"in performance){const e=performance.memory;console.log(`
🧠 Memory Usage:`),console.log(`  Used JS Heap: ${(e.usedJSHeapSize/1024/1024).toFixed(2)} MB`),console.log(`  Total JS Heap: ${(e.totalJSHeapSize/1024/1024).toFixed(2)} MB`),console.log(`  Heap Limit: ${(e.jsHeapSizeLimit/1024/1024).toFixed(2)} MB`)}else console.log("Memory API not available in this browser")}typeof window<"u"&&(window.performanceTest={runSuite:mf,testMemory:Uh,testEquipment:cf,testLoot:uf,testAffixes:df,testStats:ff});function qh(){const[e,t]=M.useState(!1),[n,l]=M.useState([]),[r,a]=M.useState(!1),[i,c]=M.useState(""),d=async()=>{a(!0);try{const f=mf();if(l(f),"memory"in performance){const y=performance.memory;c(`Used: ${(y.usedJSHeapSize/1024/1024).toFixed(2)} MB | Total: ${(y.totalJSHeapSize/1024/1024).toFixed(2)} MB`)}}catch(f){console.error("Performance test failed:",f)}finally{a(!1)}};return e?s.jsxs("div",{className:"fixed bottom-4 right-4 bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-md w-80 shadow-xl z-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"text-white font-bold text-sm",children:"Performance Monitor"}),s.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white text-lg leading-none",children:"×"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:d,disabled:r,className:`w-full px-3 py-2 rounded text-sm font-medium ${r?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:r?"Running Tests...":"Run Performance Tests"}),i&&s.jsxs("div",{className:"text-xs text-gray-300 bg-gray-800 p-2 rounded",children:[s.jsx("strong",{children:"Memory:"})," ",i]}),n.length>0&&s.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[s.jsx("h4",{className:"text-white text-xs font-semibold",children:"Test Results:"}),n.map((f,y)=>s.jsxs("div",{className:"bg-gray-800 p-2 rounded text-xs",children:[s.jsx("div",{className:"text-blue-400 font-medium",children:f.operation}),s.jsxs("div",{className:"text-gray-300 space-y-1",children:[s.jsxs("div",{children:["Iterations: ",f.iterations]}),s.jsxs("div",{children:["Avg Time: ",f.averageTime.toFixed(4),"ms"]}),s.jsxs("div",{className:"text-green-400",children:["Speed: ",f.itemsPerSecond.toFixed(0)," items/sec"]})]})]},y))]}),s.jsxs("div",{className:"text-xs text-gray-400 border-t border-gray-700 pt-2",children:[s.jsx("div",{children:"💡 Tips:"}),s.jsx("div",{children:"• Higher items/sec = better performance"}),s.jsx("div",{children:"• Lower avg time = faster operations"}),s.jsx("div",{children:"• Check console for detailed logs"})]})]})]}):s.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-4 right-4 bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50",children:"📊 Performance"})}function Gh({isOpen:e,onClose:t}){var v;const{state:n,actions:l}=ut(),[r,a]=M.useState(null),[i,c]=M.useState("available");if(!e)return null;const d=n.player.mapDevice,f=n.player.level;if(!d)return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Map Device Error"}),s.jsx("p",{className:"text-gray-300",children:"Map device not initialized. Please restart the game."}),s.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Close"})]})});const y=j=>{l.log(`Starting map: ${j.name} (Tier ${j.tier})`),t()},w=j=>j.map(h=>s.jsxs("div",{className:`text-xs p-1 rounded ${h.type==="prefix"?"bg-red-900/30 text-red-300":"bg-blue-900/30 text-blue-300"}`,children:[s.jsx("span",{className:"font-semibold",children:h.name}),s.jsx("div",{className:"text-xs opacity-80",children:h.description})]},h.id)),x=(j,h=!0)=>{const u=Zp(j),p=Jp(j),m=ef(j,f,d.completedMaps),g=d.completedMaps.includes(j.id);return s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${(r==null?void 0:r.id)===j.id?"border-yellow-400 bg-yellow-900/20":m?"border-gray-600 hover:border-gray-400 bg-gray-800/50":"border-gray-700 bg-gray-900/50 opacity-50"}`,onClick:()=>a(j),children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:`font-bold text-lg ${j.rarity==="Unique"?"text-orange-400":j.rarity==="Rare"?"text-yellow-400":j.rarity==="Magic"?"text-blue-400":"text-white"}`,children:j.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Tier ",j.tier," • Level ",j.baseLevel," • ",j.layout," layout"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-sm font-semibold ${u<100?"text-green-400":u<200?"text-yellow-400":u<300?"text-orange-400":"text-red-400"}`,children:["Difficulty: ",u]}),g&&s.jsxs("div",{className:"text-xs text-green-400",children:["✓ Completed (",j.timesCompleted,"x)"]})]})]}),s.jsx("p",{className:"text-sm text-gray-300 mb-3",children:j.description}),j.modifiers.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-1",children:"Map Modifiers:"}),s.jsx("div",{className:"space-y-1",children:w(j.modifiers)})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-400 mb-1",children:"Rewards:"}),s.jsx("div",{className:"text-xs text-gray-300 space-y-1",children:p.map((S,b)=>s.jsxs("div",{children:[S.type==="equipment"&&`${S.quantity}x Equipment (Level ${S.minLevel}-${S.maxLevel})`,S.type==="skillGem"&&`${S.quantity}x ${S.rarity} Skill Gem`,S.type==="supportGem"&&`${S.quantity}x ${S.rarity} Support Gem`,S.type==="experience"&&`${S.quantity} Experience`,S.guaranteed&&" (Guaranteed)"]},b))})]}),!m&&j.unlockRequirement&&s.jsxs("div",{className:"text-xs text-red-400 mb-2",children:[s.jsx("div",{className:"font-semibold",children:"Requirements:"}),j.unlockRequirement.playerLevel&&s.jsxs("div",{children:["• Level ",j.unlockRequirement.playerLevel," (Current: ",f,")"]}),j.unlockRequirement.completedMaps&&s.jsxs("div",{children:["• Complete: ",j.unlockRequirement.completedMaps.join(", ")]})]}),h&&m&&s.jsxs("button",{onClick:S=>{S.stopPropagation(),y(j)},className:"w-full mt-2 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded transition-colors",children:["Run Map (",Math.floor(j.completionTime/60),":",(j.completionTime%60).toString().padStart(2,"0"),")"]})]},j.id)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 border border-gray-600 rounded-lg p-6 max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Map Device"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),s.jsxs("div",{className:"flex space-x-4 mb-4",children:[s.jsx("button",{onClick:()=>c("available"),className:`px-4 py-2 rounded ${i==="available"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Available Maps"}),s.jsxs("button",{onClick:()=>c("stash"),className:`px-4 py-2 rounded ${i==="stash"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["Map Stash (",((v=d.mapStash)==null?void 0:v.length)||0,")"]}),s.jsx("button",{onClick:()=>c("atlas"),className:`px-4 py-2 rounded ${i==="atlas"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Atlas Progress"})]}),i==="atlas"&&s.jsxs("div",{className:"mb-4 p-4 bg-gray-800 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Atlas of Worlds"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400",children:"Current Tier:"}),s.jsxs("div",{className:"text-white font-semibold",children:["Tier ",d.atlasProgress.tier]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400",children:"Maps Completed:"}),s.jsxs("div",{className:"text-white font-semibold",children:[d.atlasProgress.completedCount," / ",d.atlasProgress.totalCount]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400",children:"Bonus Objectives:"}),s.jsx("div",{className:"text-white font-semibold",children:d.atlasProgress.bonusObjectives})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400",children:"Completion Rate:"}),s.jsxs("div",{className:"text-white font-semibold",children:[Math.floor(d.atlasProgress.completedCount/d.atlasProgress.totalCount*100),"%"]})]})]})]}),s.jsxs("div",{className:"overflow-y-auto max-h-[60vh]",children:[i==="available"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.availableMaps.map(j=>x(j))}),i==="stash"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:!d.mapStash||d.mapStash.length===0?s.jsx("div",{className:"col-span-full text-center text-gray-400 py-8",children:"No maps in stash. Maps can be found as drops from enemies or purchased from vendors."}):d.mapStash.map(j=>x(j))}),i==="atlas"&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.availableMaps.map(j=>x(j,!1))})]}),d.currentMap&&s.jsxs("div",{className:"mt-4 p-4 bg-green-900/30 border border-green-600 rounded-lg",children:[s.jsx("div",{className:"text-green-400 font-semibold",children:"Currently Running:"}),s.jsxs("div",{className:"text-white",children:[d.currentMap.name," (Tier ",d.currentMap.tier,")"]})]})]})})}const Vh=()=>{const e=M.useRef(null),{state:t,dispatch:n}=ut(),[l,r]=M.useState([]),[a,i]=M.useState({id:"dummy-enemy",x:400,y:200,health:100,maxHealth:100,size:30}),c=800,d=400,f=100,y=200,w=()=>{const x={id:`fireball-${Date.now()}`,x:f,y,targetX:a.x,targetY:a.y,speed:300,damage:25,skill:"fireball",startTime:Date.now(),trail:[],rotation:0,particles:[]};console.log("🔥 Creating fireball projectile:",x),r(v=>[...v,x])};return M.useEffect(()=>{const x=setInterval(()=>{const v=Date.now();r(j=>j.map(h=>{(v-h.startTime)/1e3;const u=h.targetX-h.x,p=h.targetY-h.y,m=Math.sqrt(u*u+p*p);if(m<10)return console.log("💥 Fireball explosion at target!"),null;const g=u/m*h.speed*(1/60),S=p/m*h.speed*(1/60),b=h.x+g,P=h.y+S,F=[{x:h.x,y:h.y,opacity:1},...h.trail.map(E=>({...E,opacity:E.opacity*.95}))].slice(0,10),G=[...h.particles.map(E=>({...E,x:E.x+E.vx,y:E.y+E.vy,life:E.life-1})).filter(E=>E.life>0),...Array.from({length:2},()=>({x:b+(Math.random()-.5)*10,y:P+(Math.random()-.5)*10,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,life:30,maxLife:30}))];return{...h,x:b,y:P,trail:F,rotation:h.rotation+5,particles:G}}).filter(Boolean))},16.666666666666668);return()=>clearInterval(x)},[a]),M.useEffect(()=>{const x=e.current;if(!x)return;const v=x.getContext("2d");if(!v)return;v.fillStyle="#1a1a2e",v.fillRect(0,0,c,d),v.fillStyle="#4CAF50",v.beginPath(),v.arc(f,y,15,0,Math.PI*2),v.fill(),v.fillStyle="#f44336",v.beginPath(),v.arc(a.x,a.y,a.size,0,Math.PI*2),v.fill();const j=60,h=8;v.fillStyle="#333",v.fillRect(a.x-j/2,a.y-a.size-15,j,h),v.fillStyle="#4CAF50";const u=a.health/a.maxHealth;v.fillRect(a.x-j/2,a.y-a.size-15,j*u,h),l.forEach(p=>{p.trail.forEach((g,S)=>{const b=g.opacity*(1-S/p.trail.length);v.fillStyle=`rgba(255, 100, 0, ${b})`,v.beginPath(),v.arc(g.x,g.y,3*b,0,Math.PI*2),v.fill()}),p.particles.forEach(g=>{const S=g.life/g.maxLife;v.fillStyle=`rgba(255, 150, 0, ${S})`,v.beginPath(),v.arc(g.x,g.y,2*S,0,Math.PI*2),v.fill()}),v.save(),v.translate(p.x,p.y),v.rotate(p.rotation*Math.PI/180);const m=v.createRadialGradient(0,0,0,0,0,15);m.addColorStop(0,"rgba(255, 100, 0, 0.8)"),m.addColorStop(.5,"rgba(255, 50, 0, 0.4)"),m.addColorStop(1,"rgba(255, 0, 0, 0)"),v.fillStyle=m,v.beginPath(),v.arc(0,0,15,0,Math.PI*2),v.fill(),v.fillStyle="#FFD700",v.beginPath(),v.arc(0,0,8,0,Math.PI*2),v.fill(),v.fillStyle="#FFF",v.beginPath(),v.arc(0,0,4,0,Math.PI*2),v.fill(),v.restore()}),v.fillStyle="#fff",v.font="16px Arial",v.fillText("Fireball Test Canvas",10,30),v.fillText(`Projectiles: ${l.length}`,10,50),v.fillText('Click "Cast Fireball" to test',10,70)},[l,a]),s.jsxs("div",{style:{padding:"20px",backgroundColor:"#0f0f23",color:"#fff"},children:[s.jsx("h2",{children:"🔥 Fireball Test Canvas"}),s.jsx("p",{children:"This is a dedicated testing environment for fireball effects."}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("button",{onClick:w,style:{padding:"10px 20px",backgroundColor:"#ff6b35",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px",marginRight:"10px"},children:"🔥 Cast Fireball"}),s.jsx("button",{onClick:()=>r([]),style:{padding:"10px 20px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"16px"},children:"Clear Projectiles"})]}),s.jsx("canvas",{ref:e,width:c,height:d,style:{border:"2px solid #333",borderRadius:"8px",backgroundColor:"#1a1a2e"}}),s.jsxs("div",{style:{marginTop:"20px",fontSize:"14px",color:"#ccc"},children:[s.jsx("p",{children:s.jsx("strong",{children:"Legend:"})}),s.jsx("p",{children:"🟢 Green Circle = Player"}),s.jsx("p",{children:"🔴 Red Circle = Dummy Enemy"}),s.jsx("p",{children:"🔥 Fireball = Projectile with trail and particles"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Expected Effects:"})," Glowing projectile, particle trail, rotation, explosion on impact"]})]})]})},Wh=({isOpen:e,onClose:t,treeData:n,treeState:l,onAllocateNode:r,availablePoints:a})=>{const[i,c]=M.useState({zoom:1,offsetX:0,offsetY:0}),[d,f]=M.useState(!1),[y,w]=M.useState({x:0,y:0}),[x,v]=M.useState(null),j=M.useRef(null),h=M.useCallback(E=>{E.button===0&&(f(!0),w({x:E.clientX,y:E.clientY}),E.preventDefault())},[]),u=M.useCallback(E=>{if(d){const _=E.clientX-y.x,U=E.clientY-y.y;c(se=>({...se,offsetX:se.offsetX+_,offsetY:se.offsetY+U})),w({x:E.clientX,y:E.clientY})}},[d,y]),p=M.useCallback(()=>{f(!1)},[]),m=M.useCallback(E=>{E.preventDefault();const _=E.deltaY>0?.9:1.1,U=Math.max(.3,Math.min(3,i.zoom*_));c(se=>({...se,zoom:U}))},[i.zoom]),g=M.useCallback(E=>{Bl(E,n,l)&&r(E)},[n,l,r]),S=E=>{const _=(l.allocatedNodes[E.id]||0)>0,U=Bl(E.id,n,l);if(_)switch(E.type){case"travel":return"#4ade80";case"small":return"#60a5fa";case"notable":return"#f59e0b";default:return"#6b7280"}else if(U)switch(E.type){case"travel":return"#22c55e";case"small":return"#3b82f6";case"notable":return"#d97706";default:return"#4b5563"}else return"#374151"},b=E=>{switch(E.type){case"travel":return 8;case"small":return 12;case"notable":return 18;default:return 10}},P=()=>Object.values(n.nodes).map(E=>E.connections.map(_=>{const U=n.nodes[_];if(!U)return null;const se=(l.allocatedNodes[E.id]||0)>0,A=(l.allocatedNodes[_]||0)>0,R=se&&A?"#4ade80":"#6b7280";return s.jsx("line",{x1:E.position.x,y1:E.position.y,x2:U.position.x,y2:U.position.y,stroke:R,strokeWidth:"2",opacity:"0.6"},`${E.id}-${_}`)})).flat().filter(Boolean),F=()=>Object.values(n.nodes).map(E=>{const _=(l.allocatedNodes[E.id]||0)>0,U=Bl(E.id,n,l),se=b(E);return s.jsxs("g",{children:[s.jsx("circle",{cx:E.position.x,cy:E.position.y,r:se,fill:S(E),stroke:x===E.id?"#ffffff":"#000000",strokeWidth:x===E.id?"3":"1",style:{cursor:U?"pointer":"default",filter:_?"brightness(1.2)":"none"},onClick:()=>g(E.id),onMouseEnter:()=>v(E.id),onMouseLeave:()=>v(null)}),E.type==="notable"&&s.jsx("circle",{cx:E.position.x,cy:E.position.y,r:se-4,fill:"none",stroke:"#ffffff",strokeWidth:"2",opacity:"0.8",pointerEvents:"none"})]},E.id)}),G=()=>{if(!x)return null;const E=n.nodes[x];if(!E)return null;const _=(l.allocatedNodes[E.id]||0)>0,U=Bl(E.id,n,l);return s.jsx("div",{className:"absolute top-4 left-4 bg-gray-900 border border-gray-600 rounded-lg p-4 max-w-xs z-50",children:s.jsxs("div",{className:"text-white",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-bold text-lg",children:E.name}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.type==="travel"?"bg-green-600":E.type==="small"?"bg-blue-600":"bg-amber-600"}`,children:E.type})]}),s.jsx("p",{className:"text-gray-300 mb-2",children:E.description}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-yellow-400",children:["Cost: ",E.cost," points"]}),_&&s.jsx("div",{className:"text-green-400",children:"✓ Allocated"}),!_&&U&&s.jsx("div",{className:"text-blue-400",children:"Available"}),!_&&!U&&s.jsx("div",{className:"text-red-400",children:"Requirements not met"})]})]})})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg w-[90vw] h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-600",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Passive Skill Tree"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-white",children:["Available Points: ",a]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:"×"})]})]}),s.jsxs("div",{className:"flex-1 relative overflow-hidden bg-gray-900",children:[s.jsx("svg",{ref:j,className:"w-full h-full cursor-grab active:cursor-grabbing",onMouseDown:h,onMouseMove:u,onMouseUp:p,onMouseLeave:p,onWheel:m,style:{userSelect:"none"},children:s.jsxs("g",{transform:`translate(${i.offsetX+400}, ${i.offsetY+300}) scale(${i.zoom})`,children:[P(),F()]})}),G(),s.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2",children:[s.jsx("button",{onClick:()=>c(E=>({...E,zoom:Math.min(3,E.zoom*1.2)})),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded",children:"+"}),s.jsx("button",{onClick:()=>c(E=>({...E,zoom:Math.max(.3,E.zoom*.8)})),className:"bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded",children:"-"}),s.jsx("button",{onClick:()=>c({zoom:1,offsetX:0,offsetY:0}),className:"bg-gray-700 hover:bg-gray-600 text-white px-2 py-2 rounded text-sm",children:"Reset"})]})]}),s.jsx("div",{className:"p-4 border-t border-gray-600 bg-gray-800",children:s.jsxs("div",{className:"flex gap-6 text-sm text-white",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),s.jsx("span",{children:"Travel Node"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),s.jsx("span",{children:"Small Node"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full bg-amber-500 border-2 border-white"}),s.jsx("span",{children:"Notable Node"})]}),s.jsx("div",{className:"text-gray-400 ml-4",children:"Left click and drag to pan • Mouse wheel to zoom • Click nodes to allocate"})]})})]})}):null};function Hh(){var w;const{state:e,actions:t,dispatch:n}=ut(),[l,r]=M.useState(null),[a,i]=M.useState(null),c=()=>{const x=L0(e.player.level,!1);t.addStone(x)},d=(x,v,j)=>{const h=e.player.equipment[x];if(!(!h||!S0(h)))try{const u=v0(h,v,j);n({type:"UPDATE_EQUIPMENT",payload:{slot:x,equipment:u}}),r(null)}catch(u){console.error("Failed to embed stone:",u)}},f=(x,v)=>{const j=e.player.equipment[x];if(!(!j||!j.sockets))try{const{equipment:h,removedStoneId:u}=w0(j,v);n({type:"UPDATE_EQUIPMENT",payload:{slot:x,equipment:h}}),u&&console.log("Removed stone:",u)}catch(h){console.error("Failed to remove stone:",h)}},y=()=>Object.entries(e.player.equipment).map(([x,v])=>{var j;return!v||!v.sockets||v.sockets.maxSockets===0?null:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[s.jsx("h3",{className:"text-white font-bold mb-2 capitalize",children:x}),s.jsx("p",{className:"text-gray-300 text-sm mb-3",children:v.name}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:((j=v.sockets)==null?void 0:j.maxSockets)||0},(h,u)=>{var g;const m=((g=v.sockets)==null?void 0:g.stones[u])===null;return s.jsx("div",{className:`w-12 h-12 border-2 rounded-lg flex items-center justify-center cursor-pointer transition-colors ${m?"border-gray-600 bg-gray-700 hover:border-gray-500":"border-amber-500 bg-amber-900 hover:border-amber-400"}`,onClick:()=>{m&&l?d(x,l,u):m||f(x,u)},children:m?s.jsx("span",{className:"text-gray-500 text-xs",children:"+"}):s.jsx("span",{className:"text-amber-300 text-lg",children:"💎"})},u)})})]},x)}).filter(Boolean);return s.jsxs("div",{className:"bg-gray-900 text-white p-6 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Stone Management"}),s.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors",children:"Generate Test Stone"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Stone Inventory (",((w=e.player.stones)==null?void 0:w.length)||0,")"]}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-4 min-h-[200px] max-h-[400px] overflow-y-auto",children:!e.player.stones||e.player.stones.length===0?s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-400",children:"No stones in inventory"}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:'Click "Generate Test Stone" to create stones'})]}):s.jsx("div",{className:"grid grid-cols-1 gap-2",children:(e.player.stones||[]).map(x=>s.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${l===x.id?"border-blue-500 bg-blue-900/30":"border-gray-600 bg-gray-700 hover:border-gray-500"}`,onClick:()=>r(l===x.id?null:x.id),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold",style:{backgroundColor:j0(x.rarity)},children:N0(x.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:x.name}),s.jsx("div",{className:"text-xs text-gray-400",children:x.affixes.map((v,j)=>s.jsxs("span",{children:[v.stat,": +",v.value,j<x.affixes.length-1?", ":""]},j))})]}),s.jsx("button",{onClick:v=>{v.stopPropagation(),t.removeStone(x.id)},className:"text-red-400 hover:text-red-300 text-xs px-2 py-1 rounded",children:"✕"})]})},x.id))})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Equipment Sockets"}),s.jsxs("div",{className:"max-h-[400px] overflow-y-auto",children:[y(),y().length===0&&s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-gray-400",children:"No equipment with sockets found"}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Equip items with sockets to embed stones"})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-gray-800 rounded-lg p-4",children:[s.jsx("h4",{className:"text-lg font-bold mb-2",children:"How to Use:"}),s.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[s.jsx("li",{children:"• Select a stone from your inventory"}),s.jsx("li",{children:"• Click an empty socket (+) to embed the stone"}),s.jsx("li",{children:"• Click a filled socket (💎) to remove the stone"}),s.jsx("li",{children:"• Stones provide stat bonuses when embedded"})]})]})]})}function Yh(){const{state:e,actions:t}=ut(),[n,l]=M.useState(null),[r,a]=M.useState(!1),[i,c]=M.useState(!1),d=x=>{l(x)},f=()=>{l(null)},y=()=>{switch(n){case"combat":return s.jsx(Lh,{});case"character":return s.jsx(Tc,{});case"skills":return s.jsx(jh,{});case"passiveTree":return s.jsx(Wh,{isOpen:!0,onClose:f,treeData:e.player.passiveTreeData,treeState:e.player.passiveTreeState,onAllocateNode:t.allocatePassiveNode,availablePoints:e.player.passiveTreeState.availablePoints});case"stones":return s.jsx(Hh,{});case"combinations":return s.jsx(Rh,{});case"log":return s.jsx(Ac,{});case"maps":return s.jsx(Gh,{isOpen:!0,onClose:f});case"fireball-test":return s.jsx(Vh,{});default:return null}},w=()=>{switch(n){case"combat":return"Combat";case"character":return"Character Status";case"skills":return"Skill Tree";case"passiveTree":return"Passive Skill Tree";case"stones":return"Stone Management";case"combinations":return"Skill Combinations";case"log":return"Combat Log";case"maps":return"Map Device";case"fireball-test":return"Fireball Test Canvas";default:return""}};return s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(uh,{onOpenModal:d}),s.jsxs("main",{className:"flex-1 flex",children:[s.jsx("div",{className:"w-80 min-w-80 bg-gray-900/95 border-r border-gray-600 flex flex-col",children:s.jsx(Tc,{})}),s.jsxs("div",{className:"flex-1 flex flex-col p-2",children:[s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx(fh,{})}),s.jsx("div",{className:"mt-2",children:s.jsx(Ih,{})}),s.jsx("div",{className:"h-64 mt-2",children:s.jsx(Ac,{})})]}),s.jsx("div",{className:"w-80 min-w-80 bg-gray-900/95 border-l border-gray-600 flex flex-col",children:s.jsx(Sh,{})})]}),s.jsx(Th,{isOpen:n!==null,onClose:f,title:w(),children:y()}),!i&&s.jsx("button",{onClick:()=>c(!0),className:"fixed bottom-32 right-4 bg-amber-600 hover:bg-amber-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",children:"🎒 Inventory"}),!r&&s.jsx("button",{onClick:()=>a(!0),className:"fixed bottom-20 right-4 bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",children:"💎 Skill Gems"}),s.jsx("button",{onClick:()=>d("fireball-test"),className:"fixed bottom-8 right-4 bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg z-50 transition-all duration-200",children:"🔥 Fireball Test"}),i&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>c(!1),children:s.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-lg shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",onClick:x=>x.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-600",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:"🎒 Inventory"}),s.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white transition-colors text-xl px-2 py-1 hover:bg-gray-700 rounded",children:"✕"})]}),s.jsx("div",{className:"overflow-auto max-h-[calc(90vh-60px)]",children:s.jsx(Eh,{})})]})}),r&&s.jsx(Ah,{isOpen:!0,onClose:()=>a(!1)}),s.jsx(qh,{})]})}Hd(document.getElementById("root")).render(s.jsx(Gn.StrictMode,{children:s.jsx(oh,{children:s.jsx(Yh,{})})}));
